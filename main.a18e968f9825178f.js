"use strict";(self.webpackChunkangularContact=self.webpackChunkangularContact||[]).push([[179],{6304:(at,Ce,O)=>{O.d(Ce,{Dh:()=>Ne,GT:()=>he,cc:()=>Se,hO:()=>Ve,on:()=>L,pX:()=>ne,xv:()=>ue});var g=O(5879),K=O(120),P=O(2793);at=O.hmd(at);const Y=["ngOnDestroy"],ne=(Pe,ct,lt,re={})=>new Proxy(Pe,{get:(ve,ee)=>lt.runOutsideAngular(()=>{var Ee;if(Pe[ee])return!(null===(Ee=re?.spy)||void 0===Ee)&&Ee.get&&re.spy.get(ee,Pe[ee]),Pe[ee];if(Y.indexOf(ee)>-1)return()=>{};const ke=ct.toPromise().then(oe=>{const q=oe&&oe[ee];return"function"==typeof q?q.bind(oe):q&&q.then?q.then(Be=>lt.run(()=>Be)):lt.run(()=>q)});return new Proxy(()=>{},{get:(oe,q)=>ke[q],apply:(oe,q,Be)=>ke.then(ht=>{var Qt;const fn=ht&&ht(...Be);return!(null===(Qt=re?.spy)||void 0===Qt)&&Qt.apply&&re.spy.apply(ee,Be,fn),fn})})})}),he=(Pe,ct)=>{ct.forEach(lt=>{Object.getOwnPropertyNames(lt.prototype||lt).forEach(re=>{Object.defineProperty(Pe.prototype,re,Object.getOwnPropertyDescriptor(lt.prototype||lt,re))})})};class pe{constructor(ct){return ct}}const Ne=new g.OlP("angularfire2.app.options"),ue=new g.OlP("angularfire2.app.name");function L(Pe,ct,lt){const ve="object"==typeof lt&&lt||{};ve.name=ve.name||"string"==typeof lt&&lt||"[DEFAULT]";const Ee=K.Z.apps.filter(ke=>ke&&ke.name===ve.name)[0]||ct.runOutsideAngular(()=>K.Z.initializeApp(Pe,ve));try{JSON.stringify(Pe)!==JSON.stringify(Ee.options)&&j("error",`${Ee.name} Firebase App already initialized with different options${at.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new pe(Ee)}const j=(Pe,...ct)=>{(0,g.X6Q)()&&typeof console<"u"&&console[Pe](...ct)},Q={provide:pe,useFactory:L,deps:[Ne,g.R0b,[new g.FiY,ue]]};let Ve=(()=>{class Pe{constructor(lt){K.Z.registerVersion("angularfire",P.q4.full,"core"),K.Z.registerVersion("angularfire",P.q4.full,"app-compat"),K.Z.registerVersion("angular",g.q4F.full,lt.toString())}static initializeApp(lt,re){return{ngModule:Pe,providers:[{provide:Ne,useValue:lt},{provide:ue,useValue:re}]}}}return Pe.\u0275fac=function(lt){return new(lt||Pe)(g.LFG(g.Lbi))},Pe.\u0275mod=g.oAB({type:Pe}),Pe.\u0275inj=g.cJS({providers:[Q]}),Pe})();function Se(Pe,ct,lt,re,ve){const[,ee,Ee]=globalThis.\u0275AngularfireInstanceCache.find(ke=>ke[0]===Pe)||[];if(ee)return function qe(Pe,ct){try{return Pe.toString()===ct.toString()}catch{return Pe===ct}}(ve,Ee)||(We("error",`${ct} was already initialized on the ${lt} Firebase App with different settings.${Oe?" You may need to reload as Firebase is not HMR aware.":""}`),We("warn",{is:ve,was:Ee})),ee;{const ke=re();return globalThis.\u0275AngularfireInstanceCache.push([Pe,ke,ve]),ke}}const Oe=!!at.hot,We=(Pe,...ct)=>{(0,g.X6Q)()&&typeof console<"u"&&console[Pe](...ct)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},2793:(at,Ce,O)=>{O.d(Ce,{q4:()=>Jn,iC:()=>mc,HU:()=>Yi,vb:()=>sp,JM:()=>Ki});var g=O(5879),K=O(4097),P=O(5861),Y=O(4303),ne=O(9058),he=O(4537),pe=O(7879);const Ne=(I,C)=>C.some(A=>I instanceof A);let ue,L;const Ve=new WeakMap,Se=new WeakMap,qe=new WeakMap,Oe=new WeakMap,We=new WeakMap;let lt={get(I,C,A){if(I instanceof IDBTransaction){if("done"===C)return Se.get(I);if("objectStoreNames"===C)return I.objectStoreNames||qe.get(I);if("store"===C)return A.objectStoreNames[1]?void 0:A.objectStore(A.objectStoreNames[0])}return Ee(I[C])},set:(I,C,A)=>(I[C]=A,!0),has:(I,C)=>I instanceof IDBTransaction&&("done"===C||"store"===C)||C in I};function ee(I){return"function"==typeof I?function ve(I){return I!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Q(){return L||(L=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(I)?function(...C){return I.apply(ke(this),C),Ee(Ve.get(this))}:function(...C){return Ee(I.apply(ke(this),C))}:function(C,...A){const k=I.call(ke(this),C,...A);return qe.set(k,C.sort?C.sort():[C]),Ee(k)}}(I):(I instanceof IDBTransaction&&function ct(I){if(Se.has(I))return;const C=new Promise((A,k)=>{const U=()=>{I.removeEventListener("complete",Z),I.removeEventListener("error",fe),I.removeEventListener("abort",fe)},Z=()=>{A(),U()},fe=()=>{k(I.error||new DOMException("AbortError","AbortError")),U()};I.addEventListener("complete",Z),I.addEventListener("error",fe),I.addEventListener("abort",fe)});Se.set(I,C)}(I),Ne(I,function j(){return ue||(ue=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(I,lt):I)}function Ee(I){if(I instanceof IDBRequest)return function Pe(I){const C=new Promise((A,k)=>{const U=()=>{I.removeEventListener("success",Z),I.removeEventListener("error",fe)},Z=()=>{A(Ee(I.result)),U()},fe=()=>{k(I.error),U()};I.addEventListener("success",Z),I.addEventListener("error",fe)});return C.then(A=>{A instanceof IDBCursor&&Ve.set(A,I)}).catch(()=>{}),We.set(C,I),C}(I);if(Oe.has(I))return Oe.get(I);const C=ee(I);return C!==I&&(Oe.set(I,C),We.set(C,I)),C}const ke=I=>We.get(I),Be=["get","getKey","getAll","getAllKeys","count"],ht=["put","add","delete","clear"],Qt=new Map;function fn(I,C){if(!(I instanceof IDBDatabase)||C in I||"string"!=typeof C)return;if(Qt.get(C))return Qt.get(C);const A=C.replace(/FromIndex$/,""),k=C!==A,U=ht.includes(A);if(!(A in(k?IDBIndex:IDBObjectStore).prototype)||!U&&!Be.includes(A))return;const Z=function(){var fe=(0,P.Z)(function*(ze,...Ze){const st=this.transaction(ze,U?"readwrite":"readonly");let Tt=st.store;return k&&(Tt=Tt.index(Ze.shift())),(yield Promise.all([Tt[A](...Ze),U&&st.done]))[0]});return function(Ze){return fe.apply(this,arguments)}}();return Qt.set(C,Z),Z}!function re(I){lt=I(lt)}(I=>({...I,get:(C,A,k)=>fn(C,A)||I.get(C,A,k),has:(C,A)=>!!fn(C,A)||I.has(C,A)}));const pn="@firebase/installations",On="0.6.4",An=1e4,rr=`w:${On}`,ie="FIS_v2",le="https://firebaseinstallations.googleapis.com/v1",de=36e5,Ke=new ne.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Ge(I){return I instanceof ne.ZR&&I.code.includes("request-failed")}function Pn({projectId:I}){return`${le}/projects/${I}/installations`}function gt(I){return{token:I.token,requestStatus:2,expiresIn:Ar(I.expiresIn),creationTime:Date.now()}}function qt(I,C){return ut.apply(this,arguments)}function ut(){return(ut=(0,P.Z)(function*(I,C){const k=(yield C.json()).error;return Ke.create("request-failed",{requestName:I,serverCode:k.code,serverMessage:k.message,serverStatus:k.status})})).apply(this,arguments)}function gn({apiKey:I}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I})}function Zn(I){return rn.apply(this,arguments)}function rn(){return(rn=(0,P.Z)(function*(I){const C=yield I();return C.status>=500&&C.status<600?I():C})).apply(this,arguments)}function Ar(I){return Number(I.replace("s","000"))}function Hn(){return(Hn=(0,P.Z)(function*({appConfig:I,heartbeatServiceProvider:C},{fid:A}){const k=Pn(I),U=gn(I),Z=C.getImmediate({optional:!0});if(Z){const st=yield Z.getHeartbeatsHeader();st&&U.append("x-firebase-client",st)}const ze={method:"POST",headers:U,body:JSON.stringify({fid:A,authVersion:ie,appId:I.appId,sdkVersion:rr})},Ze=yield Zn(()=>fetch(k,ze));if(Ze.ok){const st=yield Ze.json();return{fid:st.fid||A,registrationStatus:2,refreshToken:st.refreshToken,authToken:gt(st.authToken)}}throw yield qt("Create Installation",Ze)})).apply(this,arguments)}function ei(I){return new Promise(C=>{setTimeout(C,I)})}const lo=/^[cdef][\w-]{21}$/,_t="";function Ct(){try{const I=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(I),I[0]=112+I[0]%16;const A=function At(I){return function vs(I){return btoa(String.fromCharCode(...I)).replace(/\+/g,"-").replace(/\//g,"_")}(I).substr(0,22)}(I);return lo.test(A)?A:_t}catch{return _t}}function cn(I){return`${I.appName}!${I.appId}`}const In=new Map;function Kn(I,C){const A=cn(I);_s(A,C),function Wt(I,C){const A=function Kt(){return!Mr&&"BroadcastChannel"in self&&(Mr=new BroadcastChannel("[Firebase] FID Change"),Mr.onmessage=I=>{_s(I.data.key,I.data.fid)}),Mr}();A&&A.postMessage({key:I,fid:C}),function vi(){0===In.size&&Mr&&(Mr.close(),Mr=null)}()}(A,C)}function _s(I,C){const A=In.get(I);if(A)for(const k of A)k(C)}let Mr=null;const ws="firebase-installations-database",Fs=1,xr="firebase-installations-store";let ns=null;function ye(){return ns||(ns=function oe(I,C,{blocked:A,upgrade:k,blocking:U,terminated:Z}={}){const fe=indexedDB.open(I,C),ze=Ee(fe);return k&&fe.addEventListener("upgradeneeded",Ze=>{k(Ee(fe.result),Ze.oldVersion,Ze.newVersion,Ee(fe.transaction))}),A&&fe.addEventListener("blocked",()=>A()),ze.then(Ze=>{Z&&Ze.addEventListener("close",()=>Z()),U&&Ze.addEventListener("versionchange",()=>U())}).catch(()=>{}),ze}(ws,Fs,{upgrade:(I,C)=>{0===C&&I.createObjectStore(xr)}})),ns}function G(I,C){return ge.apply(this,arguments)}function ge(){return(ge=(0,P.Z)(function*(I,C){const A=cn(I),U=(yield ye()).transaction(xr,"readwrite"),Z=U.objectStore(xr),fe=yield Z.get(A);return yield Z.put(C,A),yield U.done,(!fe||fe.fid!==C.fid)&&Kn(I,C.fid),C})).apply(this,arguments)}function $e(I){return Ye.apply(this,arguments)}function Ye(){return(Ye=(0,P.Z)(function*(I){const C=cn(I),k=(yield ye()).transaction(xr,"readwrite");yield k.objectStore(xr).delete(C),yield k.done})).apply(this,arguments)}function ft(I,C){return Jt.apply(this,arguments)}function Jt(){return(Jt=(0,P.Z)(function*(I,C){const A=cn(I),U=(yield ye()).transaction(xr,"readwrite"),Z=U.objectStore(xr),fe=yield Z.get(A),ze=C(fe);return void 0===ze?yield Z.delete(A):yield Z.put(ze,A),yield U.done,ze&&(!fe||fe.fid!==ze.fid)&&Kn(I,ze.fid),ze})).apply(this,arguments)}function B(I){return V.apply(this,arguments)}function V(){return V=(0,P.Z)(function*(I){let C;const A=yield ft(I.appConfig,k=>{const U=function W(I){return Pt(I||{fid:Ct(),registrationStatus:0})}(k),Z=function De(I,C){if(0===C.registrationStatus){if(!navigator.onLine)return{installationEntry:C,registrationPromise:Promise.reject(Ke.create("app-offline"))};const A={fid:C.fid,registrationStatus:1,registrationTime:Date.now()},k=function ae(I,C){return nt.apply(this,arguments)}(I,A);return{installationEntry:A,registrationPromise:k}}return 1===C.registrationStatus?{installationEntry:C,registrationPromise:Mt(I)}:{installationEntry:C}}(I,U);return C=Z.registrationPromise,Z.installationEntry});return A.fid===_t?{installationEntry:yield C}:{installationEntry:A,registrationPromise:C}}),V.apply(this,arguments)}function nt(){return nt=(0,P.Z)(function*(I,C){try{const A=yield function yi(I,C){return Hn.apply(this,arguments)}(I,C);return G(I.appConfig,A)}catch(A){throw Ge(A)&&409===A.customData.serverCode?yield $e(I.appConfig):yield G(I.appConfig,{fid:C.fid,registrationStatus:0}),A}}),nt.apply(this,arguments)}function Mt(I){return bt.apply(this,arguments)}function bt(){return(bt=(0,P.Z)(function*(I){let C=yield Nr(I.appConfig);for(;1===C.registrationStatus;)yield ei(100),C=yield Nr(I.appConfig);if(0===C.registrationStatus){const{installationEntry:A,registrationPromise:k}=yield B(I);return k||A}return C})).apply(this,arguments)}function Nr(I){return ft(I,C=>{if(!C)throw Ke.create("installation-not-found");return Pt(C)})}function Pt(I){return function Yn(I){return 1===I.registrationStatus&&I.registrationTime+An<Date.now()}(I)?{fid:I.fid,registrationStatus:0}:I}function fr(){return(fr=(0,P.Z)(function*({appConfig:I,heartbeatServiceProvider:C},A){const k=function Ls(I,{fid:C}){return`${Pn(I)}/${C}/authTokens:generate`}(I,A),U=function mn(I,{refreshToken:C}){const A=gn(I);return A.append("Authorization",function Xr(I){return`${ie} ${I}`}(C)),A}(I,A),Z=C.getImmediate({optional:!0});if(Z){const st=yield Z.getHeartbeatsHeader();st&&U.append("x-firebase-client",st)}const ze={method:"POST",headers:U,body:JSON.stringify({installation:{sdkVersion:rr,appId:I.appId}})},Ze=yield Zn(()=>fetch(k,ze));if(Ze.ok)return gt(yield Ze.json());throw yield qt("Generate Auth Token",Ze)})).apply(this,arguments)}function Ko(I){return Qc.apply(this,arguments)}function Qc(){return Qc=(0,P.Z)(function*(I,C=!1){let A;const k=yield ft(I.appConfig,Z=>{if(!Us(Z))throw Ke.create("not-registered");const fe=Z.authToken;if(!C&&function Yo(I){return 2===I.requestStatus&&!function Ba(I){const C=Date.now();return C<I.creationTime||I.creationTime+I.expiresIn<C+de}(I)}(fe))return Z;if(1===fe.requestStatus)return A=function rs(I,C){return Vs.apply(this,arguments)}(I,C),Z;{if(!navigator.onLine)throw Ke.create("app-offline");const ze=function kd(I){const C={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},I),{authToken:C})}(Z);return A=function Hi(I,C){return Gt.apply(this,arguments)}(I,ze),ze}});return A?yield A:k.authToken}),Qc.apply(this,arguments)}function Vs(){return(Vs=(0,P.Z)(function*(I,C){let A=yield $i(I.appConfig);for(;1===A.authToken.requestStatus;)yield ei(100),A=yield $i(I.appConfig);const k=A.authToken;return 0===k.requestStatus?Ko(I,C):k})).apply(this,arguments)}function $i(I){return ft(I,C=>{if(!Us(C))throw Ke.create("not-registered");return function is(I){return 1===I.requestStatus&&I.requestTime+An<Date.now()}(C.authToken)?Object.assign(Object.assign({},C),{authToken:{requestStatus:0}}):C})}function Gt(){return Gt=(0,P.Z)(function*(I,C){try{const A=yield function Yt(I,C){return fr.apply(this,arguments)}(I,C),k=Object.assign(Object.assign({},C),{authToken:A});return yield G(I.appConfig,k),A}catch(A){if(!Ge(A)||401!==A.customData.serverCode&&404!==A.customData.serverCode){const k=Object.assign(Object.assign({},C),{authToken:{requestStatus:0}});yield G(I.appConfig,k)}else yield $e(I.appConfig);throw A}}),Gt.apply(this,arguments)}function Us(I){return void 0!==I&&2===I.registrationStatus}function Jo(){return(Jo=(0,P.Z)(function*(I){const C=I,{installationEntry:A,registrationPromise:k}=yield B(C);return k?k.catch(console.error):Ko(C).catch(console.error),A.fid})).apply(this,arguments)}function ja(){return ja=(0,P.Z)(function*(I,C=!1){const A=I;return yield function Xc(I){return Si.apply(this,arguments)}(A),(yield Ko(A,C)).token}),ja.apply(this,arguments)}function Si(){return(Si=(0,P.Z)(function*(I){const{registrationPromise:C}=yield B(I);C&&(yield C)})).apply(this,arguments)}function Xo(I){return Ke.create("missing-app-config-values",{valueName:I})}const tl="installations",lm=I=>{const C=I.getProvider("app").getImmediate(),A=function ti(I){if(!I||!I.options)throw Xo("App Configuration");if(!I.name)throw Xo("App Name");const C=["projectId","apiKey","appId"];for(const A of C)if(!I.options[A])throw Xo(A);return{appName:I.name,projectId:I.options.projectId,apiKey:I.options.apiKey,appId:I.options.appId}}(C);return{app:C,appConfig:A,heartbeatServiceProvider:(0,Y.qX)(C,"heartbeat"),_delete:()=>Promise.resolve()}},po=I=>{const C=I.getProvider("app").getImmediate(),A=(0,Y.qX)(C,tl).getImmediate();return{getId:()=>function Qo(I){return Jo.apply(this,arguments)}(A),getToken:U=>function Jc(I){return ja.apply(this,arguments)}(A,U)}};(function Bf(){(0,Y.Xd)(new he.wA(tl,lm,"PUBLIC")),(0,Y.Xd)(new he.wA("installations-internal",po,"PRIVATE"))})(),(0,Y.KN)(pn,On),(0,Y.KN)(pn,On,"esm2017");const Ha="@firebase/remote-config",Rr=new ne.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class wt{constructor(C,A,k,U){this.client=C,this.storage=A,this.storageCache=k,this.logger=U}isCachedDataFresh(C,A){if(!A)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const k=Date.now()-A,U=k<=C;return this.logger.debug(`Config fetch cache check. Cache age millis: ${k}. Cache max age millis (minimumFetchIntervalMillis setting): ${C}. Is cache hit: ${U}.`),U}fetch(C){var A=this;return(0,P.Z)(function*(){const[k,U]=yield Promise.all([A.storage.getLastSuccessfulFetchTimestampMillis(),A.storage.getLastSuccessfulFetchResponse()]);if(U&&A.isCachedDataFresh(C.cacheMaxAgeMillis,k))return U;C.eTag=U&&U.eTag;const Z=yield A.client.fetch(C),fe=[A.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Z.status&&fe.push(A.storage.setLastSuccessfulFetchResponse(Z)),yield Promise.all(fe),Z})()}}function Cn(I=navigator){return I.languages&&I.languages[0]||I.language}class Gr{constructor(C,A,k,U,Z,fe){this.firebaseInstallations=C,this.sdkVersion=A,this.namespace=k,this.projectId=U,this.apiKey=Z,this.appId=fe}fetch(C){var A=this;return(0,P.Z)(function*(){const[k,U]=yield Promise.all([A.firebaseInstallations.getId(),A.firebaseInstallations.getToken()]),fe=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${A.projectId}/namespaces/${A.namespace}:fetch?key=${A.apiKey}`,ze={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":C.eTag||"*"},Ze={sdk_version:A.sdkVersion,app_instance_id:k,app_instance_id_token:U,app_id:A.appId,language_code:Cn()},st={method:"POST",headers:ze,body:JSON.stringify(Ze)},Tt=fetch(fe,st),Nt=new Promise((Ir,ki)=>{C.signal.addEventListener(()=>{const ci=new Error("The operation was aborted.");ci.name="AbortError",ki(ci)})});let Xn;try{yield Promise.race([Tt,Nt]),Xn=yield Tt}catch(Ir){let ki="fetch-client-network";throw"AbortError"===Ir?.name&&(ki="fetch-timeout"),Rr.create(ki,{originalErrorMessage:Ir?.message})}let Nn=Xn.status;const Fo=Xn.headers.get("ETag")||void 0;let Sn,Lo;if(200===Xn.status){let Ir;try{Ir=yield Xn.json()}catch(ki){throw Rr.create("fetch-client-parse",{originalErrorMessage:ki?.message})}Sn=Ir.entries,Lo=Ir.state}if("INSTANCE_STATE_UNSPECIFIED"===Lo?Nn=500:"NO_CHANGE"===Lo?Nn=304:("NO_TEMPLATE"===Lo||"EMPTY_CONFIG"===Lo)&&(Sn={}),304!==Nn&&200!==Nn)throw Rr.create("fetch-status",{httpStatus:Nn});return{status:Nn,eTag:Fo,config:Sn}})()}}class za{constructor(C,A){this.client=C,this.storage=A}fetch(C){var A=this;return(0,P.Z)(function*(){const k=(yield A.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return A.attemptFetch(C,k)})()}attemptFetch(C,{throttleEndTimeMillis:A,backoffCount:k}){var U=this;return(0,P.Z)(function*(){yield function go(I,C){return new Promise((A,k)=>{const U=Math.max(C-Date.now(),0),Z=setTimeout(A,U);I.addEventListener(()=>{clearTimeout(Z),k(Rr.create("fetch-throttle",{throttleEndTimeMillis:C}))})})}(C.signal,A);try{const Z=yield U.client.fetch(C);return yield U.storage.deleteThrottleMetadata(),Z}catch(Z){if(!function pr(I){if(!(I instanceof ne.ZR&&I.customData))return!1;const C=Number(I.customData.httpStatus);return 429===C||500===C||503===C||504===C}(Z))throw Z;const fe={throttleEndTimeMillis:Date.now()+(0,ne.$s)(k),backoffCount:k+1};return yield U.storage.setThrottleMetadata(fe),U.attemptFetch(C,fe)}})()}}class na{constructor(C,A,k,U,Z){this.app=C,this._client=A,this._storageCache=k,this._storage=U,this._logger=Z,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Et(I,C){const A=I.target.error||void 0;return Rr.create(C,{originalErrorMessage:A&&A?.message})}const gr="app_namespace_store";class sl{constructor(C,A,k,U=function bn(){return new Promise((I,C)=>{try{const A=indexedDB.open("firebase_remote_config",1);A.onerror=k=>{C(Et(k,"storage-open"))},A.onsuccess=k=>{I(k.target.result)},A.onupgradeneeded=k=>{0===k.oldVersion&&k.target.result.createObjectStore(gr,{keyPath:"compositeKey"})}}catch(A){C(Rr.create("storage-open",{originalErrorMessage:A?.message}))}})}()){this.appId=C,this.appName=A,this.namespace=k,this.openDbPromise=U}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(C){return this.set("last_fetch_status",C)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(C){return this.set("last_successful_fetch_timestamp_millis",C)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(C){return this.set("last_successful_fetch_response",C)}getActiveConfig(){return this.get("active_config")}setActiveConfig(C){return this.set("active_config",C)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(C){return this.set("active_config_etag",C)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(C){return this.set("throttle_metadata",C)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(C){var A=this;return(0,P.Z)(function*(){const k=yield A.openDbPromise;return new Promise((U,Z)=>{const ze=k.transaction([gr],"readonly").objectStore(gr),Ze=A.createCompositeKey(C);try{const st=ze.get(Ze);st.onerror=Tt=>{Z(Et(Tt,"storage-get"))},st.onsuccess=Tt=>{const Nt=Tt.target.result;U(Nt?Nt.value:void 0)}}catch(st){Z(Rr.create("storage-get",{originalErrorMessage:st?.message}))}})})()}set(C,A){var k=this;return(0,P.Z)(function*(){const U=yield k.openDbPromise;return new Promise((Z,fe)=>{const Ze=U.transaction([gr],"readwrite").objectStore(gr),st=k.createCompositeKey(C);try{const Tt=Ze.put({compositeKey:st,value:A});Tt.onerror=Nt=>{fe(Et(Nt,"storage-set"))},Tt.onsuccess=()=>{Z()}}catch(Tt){fe(Rr.create("storage-set",{originalErrorMessage:Tt?.message}))}})})()}delete(C){var A=this;return(0,P.Z)(function*(){const k=yield A.openDbPromise;return new Promise((U,Z)=>{const ze=k.transaction([gr],"readwrite").objectStore(gr),Ze=A.createCompositeKey(C);try{const st=ze.delete(Ze);st.onerror=Tt=>{Z(Et(Tt,"storage-delete"))},st.onsuccess=()=>{U()}}catch(st){Z(Rr.create("storage-delete",{originalErrorMessage:st?.message}))}})})()}createCompositeKey(C){return[this.appId,this.appName,this.namespace,C].join()}}class mo{constructor(C){this.storage=C}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var C=this;return(0,P.Z)(function*(){const A=C.storage.getLastFetchStatus(),k=C.storage.getLastSuccessfulFetchTimestampMillis(),U=C.storage.getActiveConfig(),Z=yield A;Z&&(C.lastFetchStatus=Z);const fe=yield k;fe&&(C.lastSuccessfulFetchTimestampMillis=fe);const ze=yield U;ze&&(C.activeConfig=ze)})()}setLastFetchStatus(C){return this.lastFetchStatus=C,this.storage.setLastFetchStatus(C)}setLastSuccessfulFetchTimestampMillis(C){return this.lastSuccessfulFetchTimestampMillis=C,this.storage.setLastSuccessfulFetchTimestampMillis(C)}setActiveConfig(C){return this.activeConfig=C,this.storage.setActiveConfig(C)}}function js(){return xi.apply(this,arguments)}function xi(){return(xi=(0,P.Z)(function*(){if(!(0,ne.hl)())return!1;try{return yield(0,ne.eu)()}catch{return!1}})).apply(this,arguments)}!function ir(){(0,Y.Xd)(new he.wA("remote-config",function I(C,{instanceIdentifier:A}){const k=C.getProvider("app").getImmediate(),U=C.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Rr.create("registration-window");if(!(0,ne.hl)())throw Rr.create("indexed-db-unavailable");const{projectId:Z,apiKey:fe,appId:ze}=k.options;if(!Z)throw Rr.create("registration-project-id");if(!fe)throw Rr.create("registration-api-key");if(!ze)throw Rr.create("registration-app-id");const Ze=new sl(ze,k.name,A=A||"firebase"),st=new mo(Ze),Tt=new pe.Yd(Ha);Tt.logLevel=pe.in.ERROR;const Nt=new Gr(U,Y.Jn,A,Z,fe,ze),Xn=new za(Nt,Ze),Nn=new wt(Xn,Ze,st,Tt),Fo=new na(k,Nn,st,Ze,Tt);return function $r(I){const C=(0,ne.m9)(I);C._initializePromise||(C._initializePromise=C._storageCache.loadFromStorage().then(()=>{C._isInitializationComplete=!0}))}(Fo),Fo},"PUBLIC").setMultipleInstances(!0)),(0,Y.KN)(Ha,"0.4.4"),(0,Y.KN)(Ha,"0.4.4","esm2017")}();const qa=(I,C)=>C.some(A=>I instanceof A);let $s,Ft;const Yu=new WeakMap,sr=new WeakMap,yo=new WeakMap,or=new WeakMap,Hs=new WeakMap;let ar={get(I,C,A){if(I instanceof IDBTransaction){if("done"===C)return sr.get(I);if("objectStoreNames"===C)return I.objectStoreNames||yo.get(I);if("store"===C)return A.objectStoreNames[1]?void 0:A.objectStore(A.objectStoreNames[0])}return _i(I[C])},set:(I,C,A)=>(I[C]=A,!0),has:(I,C)=>I instanceof IDBTransaction&&("done"===C||"store"===C)||C in I};function vo(I){return"function"==typeof I?function Qu(I){return I!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ra(){return Ft||(Ft=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(I)?function(...C){return I.apply(ni(this),C),_i(Yu.get(this))}:function(...C){return _i(I.apply(ni(this),C))}:function(C,...A){const k=I.call(ni(this),C,...A);return yo.set(k,C.sort?C.sort():[C]),_i(k)}}(I):(I instanceof IDBTransaction&&function Hf(I){if(sr.has(I))return;const C=new Promise((A,k)=>{const U=()=>{I.removeEventListener("complete",Z),I.removeEventListener("error",fe),I.removeEventListener("abort",fe)},Z=()=>{A(),U()},fe=()=>{k(I.error||new DOMException("AbortError","AbortError")),U()};I.addEventListener("complete",Z),I.addEventListener("error",fe),I.addEventListener("abort",fe)});sr.set(I,C)}(I),qa(I,function dm(){return $s||($s=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(I,ar):I)}function _i(I){if(I instanceof IDBRequest)return function mr(I){const C=new Promise((A,k)=>{const U=()=>{I.removeEventListener("success",Z),I.removeEventListener("error",fe)},Z=()=>{A(_i(I.result)),U()},fe=()=>{k(I.error),U()};I.addEventListener("success",Z),I.addEventListener("error",fe)});return C.then(A=>{A instanceof IDBCursor&&Yu.set(A,I)}).catch(()=>{}),Hs.set(C,I),C}(I);if(or.has(I))return or.get(I);const C=vo(I);return C!==I&&(or.set(I,C),Hs.set(C,I)),C}const ni=I=>Hs.get(I);function ia(I,C,{blocked:A,upgrade:k,blocking:U,terminated:Z}={}){const fe=indexedDB.open(I,C),ze=_i(fe);return k&&fe.addEventListener("upgradeneeded",Ze=>{k(_i(fe.result),Ze.oldVersion,Ze.newVersion,_i(fe.transaction))}),A&&fe.addEventListener("blocked",()=>A()),ze.then(Ze=>{Z&&Ze.addEventListener("close",()=>Z()),U&&Ze.addEventListener("versionchange",()=>U())}).catch(()=>{}),ze}function sa(I,{blocked:C}={}){const A=indexedDB.deleteDatabase(I);return C&&A.addEventListener("blocked",()=>C()),_i(A).then(()=>{})}const ol=["get","getKey","getAll","getAllKeys","count"],hm=["put","add","delete","clear"],Ju=new Map;function al(I,C){if(!(I instanceof IDBDatabase)||C in I||"string"!=typeof C)return;if(Ju.get(C))return Ju.get(C);const A=C.replace(/FromIndex$/,""),k=C!==A,U=hm.includes(A);if(!(A in(k?IDBIndex:IDBObjectStore).prototype)||!U&&!ol.includes(A))return;const Z=function(){var fe=(0,P.Z)(function*(ze,...Ze){const st=this.transaction(ze,U?"readwrite":"readonly");let Tt=st.store;return k&&(Tt=Tt.index(Ze.shift())),(yield Promise.all([Tt[A](...Ze),U&&st.done]))[0]});return function(Ze){return fe.apply(this,arguments)}}();return Ju.set(C,Z),Z}!function Or(I){ar=I(ar)}(I=>({...I,get:(C,A,k)=>al(C,A)||I.get(C,A,k),has:(C,A)=>!!al(C,A)||I.has(C,A)}));const Bd="/firebase-messaging-sw.js",ul="/firebase-cloud-messaging-push-scope",jd="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",fm="https://fcmregistrations.googleapis.com/v1",Tn="google.c.a.c_id",pm="google.c.a.c_l",Gf="google.c.a.ts";var $d=function(I){return I.PUSH_RECEIVED="push-received",I.NOTIFICATION_CLICKED="notification-clicked",I}($d||{});function bs(I){const C=new Uint8Array(I);return btoa(String.fromCharCode(...C)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function cl(I){const A=(I+"=".repeat((4-I.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),k=atob(A),U=new Uint8Array(k.length);for(let Z=0;Z<k.length;++Z)U[Z]=k.charCodeAt(Z);return U}const oa="fcm_token_details_db",ll=5,Wa="fcm_token_object_Store";function Za(){return Za=(0,P.Z)(function*(I){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(Z=>Z.name).includes(oa))return null;let C=null;return(yield ia(oa,ll,{upgrade:(k=(0,P.Z)(function*(U,Z,fe,ze){var Ze;if(Z<2||!U.objectStoreNames.contains(Wa))return;const st=ze.objectStore(Wa),Tt=yield st.index("fcmSenderId").get(I);if(yield st.clear(),Tt)if(2===Z){const Nt=Tt;if(!Nt.auth||!Nt.p256dh||!Nt.endpoint)return;C={token:Nt.fcmToken,createTime:null!==(Ze=Nt.createTime)&&void 0!==Ze?Ze:Date.now(),subscriptionOptions:{auth:Nt.auth,p256dh:Nt.p256dh,endpoint:Nt.endpoint,swScope:Nt.swScope,vapidKey:"string"==typeof Nt.vapidKey?Nt.vapidKey:bs(Nt.vapidKey)}}}else if(3===Z){const Nt=Tt;C={token:Nt.fcmToken,createTime:Nt.createTime,subscriptionOptions:{auth:bs(Nt.auth),p256dh:bs(Nt.p256dh),endpoint:Nt.endpoint,swScope:Nt.swScope,vapidKey:bs(Nt.vapidKey)}}}else if(4===Z){const Nt=Tt;C={token:Nt.fcmToken,createTime:Nt.createTime,subscriptionOptions:{auth:bs(Nt.auth),p256dh:bs(Nt.p256dh),endpoint:Nt.endpoint,swScope:Nt.swScope,vapidKey:bs(Nt.vapidKey)}}}}),function(Z,fe,ze,Ze){return k.apply(this,arguments)})})).close(),yield sa(oa),yield sa("fcm_vapid_details_db"),yield sa("undefined"),function _o(I){if(!I||!I.subscriptionOptions)return!1;const{subscriptionOptions:C}=I;return"number"==typeof I.createTime&&I.createTime>0&&"string"==typeof I.token&&I.token.length>0&&"string"==typeof C.auth&&C.auth.length>0&&"string"==typeof C.p256dh&&C.p256dh.length>0&&"string"==typeof C.endpoint&&C.endpoint.length>0&&"string"==typeof C.swScope&&C.swScope.length>0&&"string"==typeof C.vapidKey&&C.vapidKey.length>0}(C)?C:null;var k}),Za.apply(this,arguments)}const ss="firebase-messaging-database",Hd=1,Ni="firebase-messaging-store";let nr=null;function wo(){return nr||(nr=ia(ss,Hd,{upgrade:(I,C)=>{0===C&&I.createObjectStore(Ni)}})),nr}function ri(I){return Eo.apply(this,arguments)}function Eo(){return Eo=(0,P.Z)(function*(I){const C=Ya(I),k=yield(yield wo()).transaction(Ni).objectStore(Ni).get(C);if(k)return k;{const U=yield function i_(I){return Za.apply(this,arguments)}(I.appConfig.senderId);if(U)return yield dl(I,U),U}}),Eo.apply(this,arguments)}function dl(I,C){return Ka.apply(this,arguments)}function Ka(){return(Ka=(0,P.Z)(function*(I,C){const A=Ya(I),U=(yield wo()).transaction(Ni,"readwrite");return yield U.objectStore(Ni).put(C,A),yield U.done,C})).apply(this,arguments)}function aa(){return(aa=(0,P.Z)(function*(I){const C=Ya(I),k=(yield wo()).transaction(Ni,"readwrite");yield k.objectStore(Ni).delete(C),yield k.done})).apply(this,arguments)}function Ya({appConfig:I}){return I.appId}const ur=new ne.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function hl(I,C){return fl.apply(this,arguments)}function fl(){return(fl=(0,P.Z)(function*(I,C){const A=yield qd(I),k=gm(C),U={method:"POST",headers:A,body:JSON.stringify(k)};let Z;try{Z=yield(yield fetch(Ja(I.appConfig),U)).json()}catch(fe){throw ur.create("token-subscribe-failed",{errorInfo:fe?.toString()})}if(Z.error)throw ur.create("token-subscribe-failed",{errorInfo:Z.error.message});if(!Z.token)throw ur.create("token-subscribe-no-token");return Z.token})).apply(this,arguments)}function Qa(){return(Qa=(0,P.Z)(function*(I,C){const A=yield qd(I),k=gm(C.subscriptionOptions),U={method:"PATCH",headers:A,body:JSON.stringify(k)};let Z;try{Z=yield(yield fetch(`${Ja(I.appConfig)}/${C.token}`,U)).json()}catch(fe){throw ur.create("token-update-failed",{errorInfo:fe?.toString()})}if(Z.error)throw ur.create("token-update-failed",{errorInfo:Z.error.message});if(!Z.token)throw ur.create("token-update-no-token");return Z.token})).apply(this,arguments)}function Io(I,C){return Gs.apply(this,arguments)}function Gs(){return(Gs=(0,P.Z)(function*(I,C){const k={method:"DELETE",headers:yield qd(I)};try{const Z=yield(yield fetch(`${Ja(I.appConfig)}/${C}`,k)).json();if(Z.error)throw ur.create("token-unsubscribe-failed",{errorInfo:Z.error.message})}catch(U){throw ur.create("token-unsubscribe-failed",{errorInfo:U?.toString()})}})).apply(this,arguments)}function Ja({projectId:I}){return`${fm}/projects/${I}/registrations`}function qd(I){return Xu.apply(this,arguments)}function Xu(){return(Xu=(0,P.Z)(function*({appConfig:I,installations:C}){const A=yield C.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I.apiKey,"x-goog-firebase-installations-auth":`FIS ${A}`})})).apply(this,arguments)}function gm({p256dh:I,auth:C,endpoint:A,vapidKey:k}){const U={web:{endpoint:A,auth:C,p256dh:I}};return k!==jd&&(U.web.applicationPubKey=k),U}const Wd=6048e5;function gl(){return gl=(0,P.Z)(function*(I){const C=yield function Xa(I,C){return ml.apply(this,arguments)}(I.swRegistration,I.vapidKey),A={vapidKey:I.vapidKey,swScope:I.swRegistration.scope,endpoint:C.endpoint,auth:bs(C.getKey("auth")),p256dh:bs(C.getKey("p256dh"))},k=yield ri(I.firebaseDependencies);if(k){if(function Kd(I,C){return C.vapidKey===I.vapidKey&&C.endpoint===I.endpoint&&C.auth===I.auth&&C.p256dh===I.p256dh}(k.subscriptionOptions,A))return Date.now()>=k.createTime+Wd?function qf(I,C){return ua.apply(this,arguments)}(I,{token:k.token,createTime:Date.now(),subscriptionOptions:A}):k.token;try{yield Io(I.firebaseDependencies,k.token)}catch(U){console.warn(U)}return ym(I.firebaseDependencies,A)}return ym(I.firebaseDependencies,A)}),gl.apply(this,arguments)}function ec(){return ec=(0,P.Z)(function*(I){const C=yield ri(I.firebaseDependencies);C&&(yield Io(I.firebaseDependencies,C.token),yield function Gd(I){return aa.apply(this,arguments)}(I.firebaseDependencies));const A=yield I.swRegistration.pushManager.getSubscription();return!A||A.unsubscribe()}),ec.apply(this,arguments)}function ua(){return ua=(0,P.Z)(function*(I,C){try{const A=yield function pl(I,C){return Qa.apply(this,arguments)}(I.firebaseDependencies,C),k=Object.assign(Object.assign({},C),{token:A,createTime:Date.now()});return yield dl(I.firebaseDependencies,k),A}catch(A){throw yield function Zd(I){return ec.apply(this,arguments)}(I),A}}),ua.apply(this,arguments)}function ym(I,C){return ca.apply(this,arguments)}function ca(){return(ca=(0,P.Z)(function*(I,C){const k={token:yield hl(I,C),createTime:Date.now(),subscriptionOptions:C};return yield dl(I,k),k.token})).apply(this,arguments)}function ml(){return(ml=(0,P.Z)(function*(I,C){return(yield I.pushManager.getSubscription())||I.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:cl(C)})})).apply(this,arguments)}function tc(I){const C={from:I.from,collapseKey:I.collapse_key,messageId:I.fcmMessageId};return function eu(I,C){if(!C.notification)return;I.notification={};const A=C.notification.title;A&&(I.notification.title=A);const k=C.notification.body;k&&(I.notification.body=k);const U=C.notification.image;U&&(I.notification.image=U);const Z=C.notification.icon;Z&&(I.notification.icon=Z)}(C,I),function Wf(I,C){C.data&&(I.data=C.data)}(C,I),function yl(I,C){var A,k,U,Z,fe;if(!(C.fcmOptions||null!==(A=C.notification)&&void 0!==A&&A.click_action))return;I.fcmOptions={};const ze=null!==(U=null===(k=C.fcmOptions)||void 0===k?void 0:k.link)&&void 0!==U?U:null===(Z=C.notification)||void 0===Z?void 0:Z.click_action;ze&&(I.fcmOptions.link=ze);const Ze=null===(fe=C.fcmOptions)||void 0===fe?void 0:fe.analytics_label;Ze&&(I.fcmOptions.analyticsLabel=Ze)}(C,I),C}function vl(I,C){const A=[];for(let k=0;k<I.length;k++)A.push(I.charAt(k)),k<C.length&&A.push(C.charAt(k));return A.join("")}function _l(I){return ur.create("missing-app-config-values",{valueName:I})}vl("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),vl("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Kf{constructor(C,A,k){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const U=function Zf(I){if(!I||!I.options)throw _l("App Configuration Object");if(!I.name)throw _l("App Name");const C=["projectId","apiKey","appId","messagingSenderId"],{options:A}=I;for(const k of C)if(!A[k])throw _l(k);return{appName:I.name,projectId:A.projectId,apiKey:A.apiKey,appId:A.appId,senderId:A.messagingSenderId}}(C);this.firebaseDependencies={app:C,appConfig:U,installations:A,analyticsProvider:k}}_delete(){return Promise.resolve()}}function tu(){return(tu=(0,P.Z)(function*(I){try{I.swRegistration=yield navigator.serviceWorker.register(Bd,{scope:ul}),I.swRegistration.update().catch(()=>{})}catch(C){throw ur.create("failed-service-worker-registration",{browserErrorMessage:C?.message})}})).apply(this,arguments)}function Do(){return(Do=(0,P.Z)(function*(I,C){if(!C&&!I.swRegistration&&(yield function nc(I){return tu.apply(this,arguments)}(I)),C||!I.swRegistration){if(!(C instanceof ServiceWorkerRegistration))throw ur.create("invalid-sw-registration");I.swRegistration=C}})).apply(this,arguments)}function Co(){return(Co=(0,P.Z)(function*(I,C){C?I.vapidKey=C:I.vapidKey||(I.vapidKey=jd)})).apply(this,arguments)}function nu(){return nu=(0,P.Z)(function*(I,C){if(!navigator)throw ur.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw ur.create("permission-blocked");return yield function os(I,C){return Co.apply(this,arguments)}(I,C?.vapidKey),yield function Yf(I,C){return Do.apply(this,arguments)}(I,C?.serviceWorkerRegistration),function mm(I){return gl.apply(this,arguments)}(I)}),nu.apply(this,arguments)}function Gi(){return(Gi=(0,P.Z)(function*(I,C,A){const k=function Qd(I){switch(I){case $d.NOTIFICATION_CLICKED:return"notification_open";case $d.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(C);(yield I.firebaseDependencies.analyticsProvider.get()).logEvent(k,{message_id:A[Tn],message_name:A[pm],message_time:A[Gf],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function nn(){return nn=(0,P.Z)(function*(I,C){const A=C.data;if(!A.isFirebaseMessaging)return;I.onMessageHandler&&A.messageType===$d.PUSH_RECEIVED&&("function"==typeof I.onMessageHandler?I.onMessageHandler(tc(A)):I.onMessageHandler.next(tc(A)));const k=A.data;(function vm(I){return"object"==typeof I&&!!I&&Tn in I})(k)&&"1"===k["google.c.a.e"]&&(yield function Qf(I,C,A){return Gi.apply(this,arguments)}(I,A.messageType,k))}),nn.apply(this,arguments)}const bo="@firebase/messaging",yr=I=>{const C=new Kf(I.getProvider("app").getImmediate(),I.getProvider("installations-internal").getImmediate(),I.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",A=>function Jd(I,C){return nn.apply(this,arguments)}(C,A)),C},Jf=I=>{const C=I.getProvider("messaging").getImmediate();return{getToken:k=>function Yd(I,C){return nu.apply(this,arguments)}(C,k)}};function So(){return vr.apply(this,arguments)}function vr(){return(vr=(0,P.Z)(function*(){try{yield(0,ne.eu)()}catch{return!1}return typeof window<"u"&&(0,ne.hl)()&&(0,ne.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function wl(){(0,Y.Xd)(new he.wA("messaging",yr,"PUBLIC")),(0,Y.Xd)(new he.wA("messaging-internal",Jf,"PRIVATE")),(0,Y.KN)(bo,"0.12.4"),(0,Y.KN)(bo,"0.12.4","esm2017")}();const yn="analytics",wm="firebase_id",It="origin",Xd=6e4,eh="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",ic="https://www.googletagmanager.com/gtag/js",cr=new pe.Yd("@firebase/analytics"),_r=new ne.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function as(I){if(!I.startsWith(ic)){const C=_r.create("invalid-gtag-resource",{gtagURL:I});return cr.warn(C.message),""}return I}function Il(I){return Promise.all(I.map(C=>C.catch(A=>A)))}function Me(){return(Me=(0,P.Z)(function*(I,C,A,k,U,Z){const fe=k[U];try{if(fe)yield C[fe];else{const Ze=(yield Il(A)).find(st=>st.measurementId===U);Ze&&(yield C[Ze.appId])}}catch(ze){cr.error(ze)}I("config",U,Z)})).apply(this,arguments)}function zi(){return(zi=(0,P.Z)(function*(I,C,A,k,U){try{let Z=[];if(U&&U.send_to){let fe=U.send_to;Array.isArray(fe)||(fe=[fe]);const ze=yield Il(A);for(const Ze of fe){const st=ze.find(Nt=>Nt.measurementId===Ze),Tt=st&&C[st.appId];if(!Tt){Z=[];break}Z.push(Tt)}}0===Z.length&&(Z=Object.values(C)),yield Promise.all(Z),I("event",k,U||{})}catch(Z){cr.error(Z)}})).apply(this,arguments)}const da=30,Cl=new class Ao{constructor(C={},A=1e3){this.throttleMetadata=C,this.intervalMillis=A}getThrottleMetadata(C){return this.throttleMetadata[C]}setThrottleMetadata(C,A){this.throttleMetadata[C]=A}deleteThrottleMetadata(C){delete this.throttleMetadata[C]}};function np(I){return new Headers({Accept:"application/json","x-goog-api-key":I})}function bl(){return(bl=(0,P.Z)(function*(I){var C;const{appId:A,apiKey:k}=I,U={method:"GET",headers:np(k)},Z=eh.replace("{app-id}",A),fe=yield fetch(Z,U);if(200!==fe.status&&304!==fe.status){let ze="";try{const Ze=yield fe.json();null!==(C=Ze.error)&&void 0!==C&&C.message&&(ze=Ze.error.message)}catch{}throw _r.create("config-fetch-failed",{httpStatus:fe.status,responseMessage:ze})}return fe.json()})).apply(this,arguments)}function wi(){return(wi=(0,P.Z)(function*(I,C=Cl,A){const{appId:k,apiKey:U,measurementId:Z}=I.options;if(!k)throw _r.create("no-app-id");if(!U){if(Z)return{measurementId:Z,appId:k};throw _r.create("no-api-key")}const fe=C.getThrottleMetadata(k)||{backoffCount:0,throttleEndTimeMillis:Date.now()},ze=new ih;return setTimeout((0,P.Z)(function*(){ze.abort()}),void 0!==A?A:Xd),nh({appId:k,apiKey:U,measurementId:Z},fe,ze,C)})).apply(this,arguments)}function nh(I,C,A){return Mo.apply(this,arguments)}function Mo(){return Mo=(0,P.Z)(function*(I,{throttleEndTimeMillis:C,backoffCount:A},k,U=Cl){var Z;const{appId:fe,measurementId:ze}=I;try{yield function qs(I,C){return new Promise((A,k)=>{const U=Math.max(C-Date.now(),0),Z=setTimeout(A,U);I.addEventListener(()=>{clearTimeout(Z),k(_r.create("fetch-throttle",{throttleEndTimeMillis:C}))})})}(k,C)}catch(Ze){if(ze)return cr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ze} provided in the "measurementId" field in the local Firebase config. [${Ze?.message}]`),{appId:fe,measurementId:ze};throw Ze}try{const Ze=yield function s_(I){return bl.apply(this,arguments)}(I);return U.deleteThrottleMetadata(fe),Ze}catch(Ze){const st=Ze;if(!function rh(I){if(!(I instanceof ne.ZR&&I.customData))return!1;const C=Number(I.customData.httpStatus);return 429===C||500===C||503===C||504===C}(st)){if(U.deleteThrottleMetadata(fe),ze)return cr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ze} provided in the "measurementId" field in the local Firebase config. [${st?.message}]`),{appId:fe,measurementId:ze};throw Ze}const Tt=503===Number(null===(Z=st?.customData)||void 0===Z?void 0:Z.httpStatus)?(0,ne.$s)(A,U.intervalMillis,da):(0,ne.$s)(A,U.intervalMillis),Nt={throttleEndTimeMillis:Date.now()+Tt,backoffCount:A+1};return U.setThrottleMetadata(fe,Nt),cr.debug(`Calling attemptFetch again in ${Tt} millis`),nh(I,Nt,k,U)}}),Mo.apply(this,arguments)}class ih{constructor(){this.listeners=[]}addEventListener(C){this.listeners.push(C)}abort(){this.listeners.forEach(C=>C())}}let cc,yt;function lc(){return(lc=(0,P.Z)(function*(I,C,A,k,U){if(U&&U.global)I("event",A,k);else{const Z=yield C;I("event",A,Object.assign(Object.assign({},k),{send_to:Z}))}})).apply(this,arguments)}function Ts(){return(Ts=(0,P.Z)(function*(){if(!(0,ne.hl)())return cr.warn(_r.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ne.eu)()}catch(I){return cr.warn(_r.create("indexeddb-unavailable",{errorInfo:I?.toString()}).message),!1}return!0})).apply(this,arguments)}function Ws(){return Ws=(0,P.Z)(function*(I,C,A,k,U,Z,fe){var ze;const Ze=function si(I){return wi.apply(this,arguments)}(I);Ze.then(Nn=>{A[Nn.measurementId]=Nn.appId,I.options.measurementId&&Nn.measurementId!==I.options.measurementId&&cr.warn(`The measurement ID in the local Firebase config (${I.options.measurementId}) does not match the measurement ID fetched from the server (${Nn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Nn=>cr.error(Nn)),C.push(Ze);const st=function Er(){return Ts.apply(this,arguments)}().then(Nn=>{if(Nn)return k.getId()}),[Tt,Nt]=yield Promise.all([Ze,st]);(function uc(I){const C=window.document.getElementsByTagName("script");for(const A of Object.values(C))if(A.src&&A.src.includes(ic)&&A.src.includes(I))return A;return null})(Z)||function oc(I,C){const A=function sc(I,C){let A;return window.trustedTypes&&(A=window.trustedTypes.createPolicy(I,C)),A}("firebase-js-sdk-policy",{createScriptURL:as}),k=document.createElement("script"),U=`${ic}?l=${I}&id=${C}`;k.src=A?A?.createScriptURL(U):U,k.async=!0,document.head.appendChild(k)}(Z,Tt.measurementId),yt&&(U("consent","default",yt),function oi(I){yt=I}(void 0)),U("js",new Date);const Xn=null!==(ze=fe?.config)&&void 0!==ze?ze:{};return Xn[It]="firebase",Xn.update=!0,null!=Nt&&(Xn[wm]=Nt),U("config",Tt.measurementId,Xn),cc&&(U("set",cc),function ru(I){cc=I}(void 0)),Tt.measurementId}),Ws.apply(this,arguments)}class xo{constructor(C){this.app=C}_delete(){return delete zr[this.app.options.appId],Promise.resolve()}}let zr={},Vt=[];const Tl={};let ai,qi,iu="dataLayer",dr=!1;function ou(I,C,A){!function ha(){const I=[];if((0,ne.ru)()&&I.push("This is a browser extension environment."),(0,ne.zI)()||I.push("Cookies are not available."),I.length>0){const C=I.map((k,U)=>`(${U+1}) ${k}`).join(" "),A=_r.create("invalid-analytics-context",{errorInfo:C});cr.warn(A.message)}}();const k=I.options.appId;if(!k)throw _r.create("no-app-id");if(!I.options.apiKey){if(!I.options.measurementId)throw _r.create("no-api-key");cr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${I.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=zr[k])throw _r.create("already-exists",{id:k});if(!dr){!function Em(I){let C=[];Array.isArray(window[I])?C=window[I]:window[I]=C}(iu);const{wrappedGtag:Z,gtagCore:fe}=function lr(I,C,A,k,U){let Z=function(...fe){window[k].push(arguments)};return window[U]&&"function"==typeof window[U]&&(Z=window[U]),window[U]=function ac(I,C,A,k){function Z(){return Z=(0,P.Z)(function*(fe,...ze){try{if("event"===fe){const[Ze,st]=ze;yield function jt(I,C,A,k,U){return zi.apply(this,arguments)}(I,C,A,Ze,st)}else if("config"===fe){const[Ze,st]=ze;yield function Dl(I,C,A,k,U,Z){return Me.apply(this,arguments)}(I,C,A,k,Ze,st)}else if("consent"===fe){const[Ze]=ze;I("consent","update",Ze)}else if("get"===fe){const[Ze,st,Tt]=ze;I("get",Ze,st,Tt)}else if("set"===fe){const[Ze]=ze;I("set",Ze)}else I(fe,...ze)}catch(Ze){cr.error(Ze)}}),Z.apply(this,arguments)}return function U(fe){return Z.apply(this,arguments)}}(Z,I,C,A),{gtagCore:Z,wrappedGtag:window[U]}}(zr,Vt,Tl,iu,"gtag");qi=Z,ai=fe,dr=!0}return zr[k]=function vn(I,C,A,k,U,Z,fe){return Ws.apply(this,arguments)}(I,Vt,Tl,C,ai,iu,A),new xo(I)}function fa(){return Ri.apply(this,arguments)}function Ri(){return(Ri=(0,P.Z)(function*(){if((0,ne.ru)()||!(0,ne.zI)()||!(0,ne.hl)())return!1;try{return yield(0,ne.eu)()}catch{return!1}})).apply(this,arguments)}const Ro="@firebase/analytics";!function Ss(){(0,Y.Xd)(new he.wA(yn,(C,{options:A})=>ou(C.getProvider("app").getImmediate(),C.getProvider("installations-internal").getImmediate(),A),"PUBLIC")),(0,Y.Xd)(new he.wA("analytics-internal",function I(C){try{const A=C.getProvider(yn).getImmediate();return{logEvent:(k,U,Z)=>function fc(I,C,A,k){I=(0,ne.m9)(I),function Im(I,C,A,k,U){return lc.apply(this,arguments)}(qi,zr[I.app.options.appId],C,A,k).catch(U=>cr.error(U))}(A,k,U,Z)}}catch(A){throw _r.create("interop-component-reg-failed",{reason:A})}},"PRIVATE")),(0,Y.KN)(Ro,"0.10.0"),(0,Y.KN)(Ro,"0.10.0","esm2017")}();var xn=O(1954),Po=O(2631);const Pr=new class Pi extends Po.v{}(class Ys extends xn.o{constructor(C,A){super(C,A),this.scheduler=C,this.work=A}schedule(C,A=0){return A>0?super.schedule(C,A):(this.delay=A,this.state=C,this.scheduler.flush(this),this)}execute(C,A){return A>0||this.closed?super.execute(C,A):this._execute(C,A)}requestAsyncId(C,A,k=0){return null!=k&&k>0||null==k&&this.delay>0?super.requestAsyncId(C,A,k):(C.flush(this),0)}});var gc=O(6321),ls=O(9397),ds=O(5137),Wi=O(3093);const Jn=new g.GfV("7.6.1"),Zi="__angularfire_symbol__analyticsIsSupportedValue",Qs="__angularfire_symbol__analyticsIsSupported",Js="__angularfire_symbol__remoteConfigIsSupportedValue",ga="__angularfire_symbol__remoteConfigIsSupported",cu="__angularfire_symbol__messagingIsSupportedValue",lu="__angularfire_symbol__messagingIsSupported";function Ki(I,C,A){if(C){if(1===C.length)return C[0];const Z=C.filter(fe=>fe.app===A);if(1===Z.length)return Z[0]}return A.container.getProvider(I).getImmediate({optional:!0})}globalThis[Qs]||(globalThis[Qs]=fa().then(I=>globalThis[Zi]=I).catch(()=>globalThis[Zi]=!1)),globalThis[lu]||(globalThis[lu]=So().then(I=>globalThis[cu]=I).catch(()=>globalThis[cu]=!1)),globalThis[ga]||(globalThis[ga]=js().then(I=>globalThis[Js]=I).catch(()=>globalThis[Js]=!1));const sp=(I,C)=>{const A=C?[C]:(0,K.C6)(),k=[];return A.forEach(U=>{U.container.getProvider(I).instances.forEach(fe=>{k.includes(fe)||k.push(fe)})}),k};function ui(){}class Sl{constructor(C,A=Pr){this.zone=C,this.delegate=A}now(){return this.delegate.now()}schedule(C,A,k){const U=this.zone;return this.delegate.schedule(function(fe){U.runGuarded(()=>{C.apply(this,[fe])})},A,k)}}class du{constructor(C){this.zone=C,this.task=null}call(C,A){const k=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ui,{},ui,ui)),A.pipe((0,ls.b)({next:k,complete:k,error:k})).subscribe(C).add(k)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Yi=(()=>{class I{constructor(A){this.ngZone=A,this.outsideAngular=A.runOutsideAngular(()=>new Sl(Zone.current)),this.insideAngular=A.run(()=>new Sl(Zone.current,gc.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return I.\u0275fac=function(A){return new(A||I)(g.LFG(g.R0b))},I.\u0275prov=g.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();function Fn(){const I=globalThis.\u0275AngularFireScheduler;if(!I)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return I}function mc(I){return Fn(),function Al(I){return function(A){return(A=A.lift(new du(I.ngZone))).pipe((0,ds.R)(I.outsideAngular),(0,Wi.Q)(I.insideAngular))}}(Fn())(I)}},9058:(at,Ce,O)=>{O.d(Ce,{$s:()=>$e,BH:()=>ee,G6:()=>rr,L:()=>ue,LL:()=>Ae,Pz:()=>ve,Sg:()=>Ee,UG:()=>q,US:()=>he,ZB:()=>Q,ZR:()=>Ie,aH:()=>re,b$:()=>Qt,eu:()=>le,hl:()=>ie,jU:()=>Be,m9:()=>Jt,ne:()=>cn,pd:()=>Ct,r3:()=>rn,ru:()=>ht,tV:()=>L,uI:()=>oe,vZ:()=>Hn,w1:()=>pn,xO:()=>lo,xb:()=>Xr,z$:()=>ke,zI:()=>de,zd:()=>_t});const Y=function(B){const V=[];let W=0;for(let De=0;De<B.length;De++){let ae=B.charCodeAt(De);ae<128?V[W++]=ae:ae<2048?(V[W++]=ae>>6|192,V[W++]=63&ae|128):55296==(64512&ae)&&De+1<B.length&&56320==(64512&B.charCodeAt(De+1))?(ae=65536+((1023&ae)<<10)+(1023&B.charCodeAt(++De)),V[W++]=ae>>18|240,V[W++]=ae>>12&63|128,V[W++]=ae>>6&63|128,V[W++]=63&ae|128):(V[W++]=ae>>12|224,V[W++]=ae>>6&63|128,V[W++]=63&ae|128)}return V},he={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(B,V){if(!Array.isArray(B))throw Error("encodeByteArray takes an array as a parameter");this.init_();const W=V?this.byteToCharMapWebSafe_:this.byteToCharMap_,De=[];for(let ae=0;ae<B.length;ae+=3){const nt=B[ae],Mt=ae+1<B.length,bt=Mt?B[ae+1]:0,Nr=ae+2<B.length,Pt=Nr?B[ae+2]:0;let fr=(15&bt)<<2|Pt>>6,Ls=63&Pt;Nr||(Ls=64,Mt||(fr=64)),De.push(W[nt>>2],W[(3&nt)<<4|bt>>4],W[fr],W[Ls])}return De.join("")},encodeString(B,V){return this.HAS_NATIVE_SUPPORT&&!V?btoa(B):this.encodeByteArray(Y(B),V)},decodeString(B,V){return this.HAS_NATIVE_SUPPORT&&!V?atob(B):function(B){const V=[];let W=0,De=0;for(;W<B.length;){const ae=B[W++];if(ae<128)V[De++]=String.fromCharCode(ae);else if(ae>191&&ae<224){const nt=B[W++];V[De++]=String.fromCharCode((31&ae)<<6|63&nt)}else if(ae>239&&ae<365){const Nr=((7&ae)<<18|(63&B[W++])<<12|(63&B[W++])<<6|63&B[W++])-65536;V[De++]=String.fromCharCode(55296+(Nr>>10)),V[De++]=String.fromCharCode(56320+(1023&Nr))}else{const nt=B[W++],Mt=B[W++];V[De++]=String.fromCharCode((15&ae)<<12|(63&nt)<<6|63&Mt)}}return V.join("")}(this.decodeStringToByteArray(B,V))},decodeStringToByteArray(B,V){this.init_();const W=V?this.charToByteMapWebSafe_:this.charToByteMap_,De=[];for(let ae=0;ae<B.length;){const nt=W[B.charAt(ae++)],bt=ae<B.length?W[B.charAt(ae)]:0;++ae;const Pt=ae<B.length?W[B.charAt(ae)]:64;++ae;const Yt=ae<B.length?W[B.charAt(ae)]:64;if(++ae,null==nt||null==bt||null==Pt||null==Yt)throw new pe;De.push(nt<<2|bt>>4),64!==Pt&&(De.push(bt<<4&240|Pt>>2),64!==Yt&&De.push(Pt<<6&192|Yt))}return De},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let B=0;B<this.ENCODED_VALS.length;B++)this.byteToCharMap_[B]=this.ENCODED_VALS.charAt(B),this.charToByteMap_[this.byteToCharMap_[B]]=B,this.byteToCharMapWebSafe_[B]=this.ENCODED_VALS_WEBSAFE.charAt(B),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[B]]=B,B>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(B)]=B,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(B)]=B)}}};class pe extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ue=function(B){return function(B){const V=Y(B);return he.encodeByteArray(V,!0)}(B).replace(/\./g,"")},L=function(B){try{return he.decodeString(B,!0)}catch(V){console.error("base64Decode failed: ",V)}return null};function Q(B,V){if(!(V instanceof Object))return V;switch(V.constructor){case Date:return new Date(V.getTime());case Object:void 0===B&&(B={});break;case Array:B=[];break;default:return V}for(const W in V)!V.hasOwnProperty(W)||!Ve(W)||(B[W]=Q(B[W],V[W]));return B}function Ve(B){return"__proto__"!==B}const Pe=()=>{try{return function Se(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const B=process.env.__FIREBASE_DEFAULTS__;return B?JSON.parse(B):void 0})()||(()=>{if(typeof document>"u")return;let B;try{B=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const V=B&&L(B[1]);return V&&JSON.parse(V)})()}catch(B){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${B}`)}},re=()=>{var B;return null===(B=Pe())||void 0===B?void 0:B.config},ve=B=>{var V;return null===(V=Pe())||void 0===V?void 0:V[`_${B}`]};class ee{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((V,W)=>{this.resolve=V,this.reject=W})}wrapCallback(V){return(W,De)=>{W?this.reject(W):this.resolve(De),"function"==typeof V&&(this.promise.catch(()=>{}),1===V.length?V(W):V(W,De))}}}function Ee(B,V){if(B.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const De=V||"demo-project",ae=B.iat||0,nt=B.sub||B.user_id;if(!nt)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Mt=Object.assign({iss:`https://securetoken.google.com/${De}`,aud:De,iat:ae,exp:ae+3600,auth_time:ae,sub:nt,user_id:nt,firebase:{sign_in_provider:"custom",identities:{}}},B);return[ue(JSON.stringify({alg:"none",type:"JWT"})),ue(JSON.stringify(Mt)),""].join(".")}function ke(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function oe(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ke())}function q(){var B;const V=null===(B=Pe())||void 0===B?void 0:B.forceEnvironment;if("node"===V)return!0;if("browser"===V)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Be(){return"object"==typeof self&&self.self===self}function ht(){const B="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof B&&void 0!==B.id}function Qt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function pn(){const B=ke();return B.indexOf("MSIE ")>=0||B.indexOf("Trident/")>=0}function rr(){return!q()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ie(){try{return"object"==typeof indexedDB}catch{return!1}}function le(){return new Promise((B,V)=>{try{let W=!0;const De="validate-browser-context-for-indexeddb-analytics-module",ae=self.indexedDB.open(De);ae.onsuccess=()=>{ae.result.close(),W||self.indexedDB.deleteDatabase(De),B(!0)},ae.onupgradeneeded=()=>{W=!1},ae.onerror=()=>{var nt;V((null===(nt=ae.error)||void 0===nt?void 0:nt.message)||"")}}catch(W){V(W)}})}function de(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class Ie extends Error{constructor(V,W,De){super(W),this.code=V,this.customData=De,this.name="FirebaseError",Object.setPrototypeOf(this,Ie.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ae.prototype.create)}}class Ae{constructor(V,W,De){this.service=V,this.serviceName=W,this.errors=De}create(V,...W){const De=W[0]||{},ae=`${this.service}/${V}`,nt=this.errors[V],Mt=nt?function Ke(B,V){return B.replace(Ge,(W,De)=>{const ae=V[De];return null!=ae?String(ae):`<${De}?>`})}(nt,De):"Error";return new Ie(ae,`${this.serviceName}: ${Mt} (${ae}).`,De)}}const Ge=/\{\$([^}]+)}/g;function rn(B,V){return Object.prototype.hasOwnProperty.call(B,V)}function Xr(B){for(const V in B)if(Object.prototype.hasOwnProperty.call(B,V))return!1;return!0}function Hn(B,V){if(B===V)return!0;const W=Object.keys(B),De=Object.keys(V);for(const ae of W){if(!De.includes(ae))return!1;const nt=B[ae],Mt=V[ae];if(ei(nt)&&ei(Mt)){if(!Hn(nt,Mt))return!1}else if(nt!==Mt)return!1}for(const ae of De)if(!W.includes(ae))return!1;return!0}function ei(B){return null!==B&&"object"==typeof B}function lo(B){const V=[];for(const[W,De]of Object.entries(B))Array.isArray(De)?De.forEach(ae=>{V.push(encodeURIComponent(W)+"="+encodeURIComponent(ae))}):V.push(encodeURIComponent(W)+"="+encodeURIComponent(De));return V.length?"&"+V.join("&"):""}function _t(B){const V={};return B.replace(/^\?/,"").split("&").forEach(De=>{if(De){const[ae,nt]=De.split("=");V[decodeURIComponent(ae)]=decodeURIComponent(nt)}}),V}function Ct(B){const V=B.indexOf("?");if(!V)return"";const W=B.indexOf("#",V);return B.substring(V,W>0?W:void 0)}function cn(B,V){const W=new In(B,V);return W.subscribe.bind(W)}class In{constructor(V,W){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=W,this.task.then(()=>{V(this)}).catch(De=>{this.error(De)})}next(V){this.forEachObserver(W=>{W.next(V)})}error(V){this.forEachObserver(W=>{W.error(V)}),this.close(V)}complete(){this.forEachObserver(V=>{V.complete()}),this.close()}subscribe(V,W,De){let ae;if(void 0===V&&void 0===W&&void 0===De)throw new Error("Missing Observer.");ae=function tn(B,V){if("object"!=typeof B||null===B)return!1;for(const W of V)if(W in B&&"function"==typeof B[W])return!0;return!1}(V,["next","error","complete"])?V:{next:V,error:W,complete:De},void 0===ae.next&&(ae.next=kn),void 0===ae.error&&(ae.error=kn),void 0===ae.complete&&(ae.complete=kn);const nt=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?ae.error(this.finalError):ae.complete()}catch{}}),this.observers.push(ae),nt}unsubscribeOne(V){void 0===this.observers||void 0===this.observers[V]||(delete this.observers[V],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(V){if(!this.finalized)for(let W=0;W<this.observers.length;W++)this.sendOne(W,V)}sendOne(V,W){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[V])try{W(this.observers[V])}catch(De){typeof console<"u"&&console.error&&console.error(De)}})}close(V){this.finalized||(this.finalized=!0,void 0!==V&&(this.finalError=V),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function kn(){}const ns=1e3,ye=2,G=144e5,ge=.5;function $e(B,V=ns,W=ye){const De=V*Math.pow(W,B),ae=Math.round(ge*De*(Math.random()-.5)*2);return Math.min(G,De+ae)}function Jt(B){return B&&B._delegate?B._delegate:B}},2643:(at,Ce,O)=>{var g=O(5879);let K=null;function P(){return K}class ne{}const he=new g.OlP("DocumentToken");let pe=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=g.Yz7({token:n,factory:function(){return(0,g.f3M)(ue)},providedIn:"platform"})}return n})();const Ne=new g.OlP("Location Initialized");let ue=(()=>{class n extends pe{constructor(){super(),this._doc=(0,g.f3M)(he),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return P().getBaseHref(this._doc)}onPopState(t){const r=P().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=P().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,o){this._history.pushState(t,r,o)}replaceState(t,r,o){this._history.replaceState(t,r,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=g.Yz7({token:n,factory:function(){return new n},providedIn:"platform"})}return n})();function L(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function j(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Q(n){return n&&"?"!==n[0]?"?"+n:n}let Ve=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=g.Yz7({token:n,factory:function(){return(0,g.f3M)(qe)},providedIn:"root"})}return n})();const Se=new g.OlP("appBaseHref");let qe=(()=>{class n extends Ve{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,g.f3M)(he).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return L(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Q(this._platformLocation.search),o=this._platformLocation.hash;return o&&t?`${r}${o}`:r}pushState(t,r,o,u){const l=this.prepareExternalUrl(o+Q(u));this._platformLocation.pushState(t,r,l)}replaceState(t,r,o,u){const l=this.prepareExternalUrl(o+Q(u));this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(r){return new(r||n)(g.LFG(pe),g.LFG(Se,8))};static#t=this.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Oe=(()=>{class n extends Ve{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=L(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,o,u){let l=this.prepareExternalUrl(o+Q(u));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(t,r,l)}replaceState(t,r,o,u){let l=this.prepareExternalUrl(o+Q(u));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(r){return new(r||n)(g.LFG(pe),g.LFG(Se,8))};static#t=this.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac})}return n})(),We=(()=>{class n{constructor(t){this._subject=new g.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function re(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(j(lt(r))),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Q(r))}normalize(t){return n.stripTrailingSlash(function ct(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,lt(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",o=null){this._locationStrategy.pushState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Q(r)),o)}replaceState(t,r="",o=null){this._locationStrategy.replaceState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Q(r)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(o=>o(t,r))}subscribe(t,r,o){return this._subject.subscribe({next:t,error:r,complete:o})}static#e=this.normalizeQueryParams=Q;static#t=this.joinWithSlash=L;static#n=this.stripTrailingSlash=j;static#r=this.\u0275fac=function(r){return new(r||n)(g.LFG(Ve))};static#i=this.\u0275prov=g.Yz7({token:n,factory:function(){return function Pe(){return new We((0,g.LFG)(Ve))}()},providedIn:"root"})}return n})();function lt(n){return n.replace(/\/index.html$/,"")}class ho{constructor(e,t,r,o){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=o}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let $a=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,o){this._viewContainer=t,this._template=r,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((o,u,l)=>{if(null==o.previousIndex)r.createEmbeddedView(this._template,new ho(o.item,this._ngForOf,-1,-1),null===l?void 0:l);else if(null==l)r.remove(null===u?void 0:u);else if(null!==u){const m=r.get(u);r.move(m,l),el(m,o)}});for(let o=0,u=r.length;o<u;o++){const m=r.get(o).context;m.index=o,m.count=u,m.ngForOf=this._ngForOf}t.forEachIdentityChange(o=>{el(r.get(o.currentIndex),o)})}static ngTemplateContextGuard(t,r){return!0}static#e=this.\u0275fac=function(r){return new(r||n)(g.Y36(g.s_b),g.Y36(g.Rgc),g.Y36(g.ZZ4))};static#t=this.\u0275dir=g.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return n})();function el(n,e){n.context.$implicit=e.item}let fo=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new cm,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Uf("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Uf("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static#e=this.\u0275fac=function(r){return new(r||n)(g.Y36(g.s_b),g.Y36(g.Rgc))};static#t=this.\u0275dir=g.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return n})();class cm{constructor(){this.$implicit=null,this.ngIf=null}}function Uf(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,g.AaK)(e)}'.`)}let ta=(()=>{class n{transform(t){return JSON.stringify(t,null,2)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275pipe=g.Yjl({name:"json",type:n,pure:!1,standalone:!0})}return n})(),Mn=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=g.oAB({type:n});static#n=this.\u0275inj=g.cJS({})}return n})();function Is(n){return"server"===n}let ir=(()=>{class n{static#e=this.\u0275prov=(0,g.Yz7)({token:n,providedIn:"root",factory:()=>new Ds((0,g.LFG)(he),window)})}return n})();class Ds{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Cs(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&"function"==typeof n.body.attachShadow){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let o=r.currentNode;for(;o;){const u=o.shadowRoot;if(u){const l=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(l)return l}o=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.supportsScrolling()&&(this.window.history.scrollRestoration=e)}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,o=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],o-u[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class Kd extends ne{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class tc extends Kd{static makeCurrent(){!function Y(n){K||(K=n)}(new tc)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Wf(){return eu=eu||document.querySelector("base"),eu?eu.getAttribute("href"):null}();return null==t?null:function vm(n){yl=yl||document.createElement("a"),yl.setAttribute("href",n);const e=yl.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){eu=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Qo(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[o,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(o.trim()===e)return decodeURIComponent(u)}return null}(document.cookie,e)}}let yl,eu=null,Zf=(()=>{class n{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac})}return n})();const _l=new g.OlP("EventManagerPlugins");let Kf=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(o=>{o.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,o){return this._findPluginFor(r).addEventListener(t,r,o)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(u=>u.supports(t)),!r)throw new g.vHH(5101,!1);return this._eventNameToPlugin.set(t,r),r}static#e=this.\u0275fac=function(r){return new(r||n)(g.LFG(_l),g.LFG(g.R0b))};static#t=this.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac})}return n})();class nc{constructor(e){this._doc=e}}const tu="ng-app-id";let Yf=(()=>{class n{constructor(t,r,o,u={}){this.doc=t,this.appId=r,this.nonce=o,this.platformId=u,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Is(u),this.resetHostNodes()}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.elements?.forEach(o=>o.remove()),r.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${tu}="${this.appId}"]`);if(t?.length){const r=new Map;return t.forEach(o=>{null!=o.textContent&&r.set(o.textContent,o)}),r}return null}changeUsageCount(t,r){const o=this.styleRef;if(o.has(t)){const u=o.get(t);return u.usage+=r,u.usage}return o.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){const o=this.styleNodesInDOM,u=o?.get(r);if(u?.parentNode===t)return o.delete(r),u.removeAttribute(tu),u;{const l=this.doc.createElement("style");return this.nonce&&l.setAttribute("nonce",this.nonce),l.textContent=r,this.platformIsServer&&l.setAttribute(tu,this.appId),l}}addStyleToHost(t,r){const o=this.getStyleElement(t,r);t.appendChild(o);const u=this.styleRef,l=u.get(r)?.elements;l?l.push(o):u.set(r,{elements:[o],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}static#e=this.\u0275fac=function(r){return new(r||n)(g.LFG(he),g.LFG(g.AFp),g.LFG(g.Ojb,8),g.LFG(g.Lbi))};static#t=this.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac})}return n})();const Do={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},os=/%COMP%/g,Gi=new g.OlP("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function nn(n,e){return e.map(t=>t.replace(os,n))}let bo=(()=>{class n{constructor(t,r,o,u,l,m,E,b=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=o,this.removeStylesOnCompDestroy=u,this.doc=l,this.platformId=m,this.ngZone=E,this.nonce=b,this.rendererByCompId=new Map,this.platformIsServer=Is(m),this.defaultRenderer=new To(t,l,E,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===g.ifc.ShadowDom&&(r={...r,encapsulation:g.ifc.Emulated});const o=this.getOrCreateRenderer(t,r);return o instanceof Xf?o.applyToHost(t):o instanceof vr&&o.applyStyles(),o}getOrCreateRenderer(t,r){const o=this.rendererByCompId;let u=o.get(r.id);if(!u){const l=this.doc,m=this.ngZone,E=this.eventManager,b=this.sharedStylesHost,M=this.removeStylesOnCompDestroy,R=this.platformIsServer;switch(r.encapsulation){case g.ifc.Emulated:u=new Xf(E,b,r,this.appId,M,l,m,R);break;case g.ifc.ShadowDom:return new So(E,b,t,r,l,m,this.nonce,R);default:u=new vr(E,b,r,M,l,m,R)}o.set(r.id,u)}return u}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(r){return new(r||n)(g.LFG(Kf),g.LFG(Yf),g.LFG(g.AFp),g.LFG(Gi),g.LFG(he),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(g.Ojb))};static#t=this.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac})}return n})();class To{constructor(e,t,r,o){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=o,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(Do[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(wl(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(wl(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new g.vHH(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,o){if(o){t=o+":"+t;const u=Do[o];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const o=Do[r];o?e.removeAttributeNS(o,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,o){o&(g.JOm.DashCase|g.JOm.Important)?e.style.setProperty(t,r,o&g.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&g.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){if("string"==typeof e&&!(e=P().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function wl(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class So extends To{constructor(e,t,r,o,u,l,m,E){super(e,u,l,E),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const b=nn(o.id,o.styles);for(const M of b){const R=document.createElement("style");m&&R.setAttribute("nonce",m),R.textContent=M,this.shadowRoot.appendChild(R)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class vr extends To{constructor(e,t,r,o,u,l,m,E){super(e,u,l,m),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=o,this.styles=E?nn(E,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class Xf extends vr{constructor(e,t,r,o,u,l,m,E){const b=o+"-"+r.id;super(e,t,r,u,l,m,E,b),this.contentAttr=function Qd(n){return"_ngcontent-%COMP%".replace(os,n)}(b),this.hostAttr=function Jd(n){return"_nghost-%COMP%".replace(os,n)}(b)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let la=(()=>{class n extends nc{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,o){return t.addEventListener(r,o,!1),()=>this.removeEventListener(t,r,o)}removeEventListener(t,r,o){return t.removeEventListener(r,o)}static#e=this.\u0275fac=function(r){return new(r||n)(g.LFG(he))};static#t=this.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac})}return n})();const ep=["alt","control","meta","shift"],ii={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},tp={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let El=(()=>{class n extends nc{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,o){const u=n.parseEventName(r),l=n.eventCallback(u.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>P().onAndCancel(t,u.domEventName,l))}static parseEventName(t){const r=t.toLowerCase().split("."),o=r.shift();if(0===r.length||"keydown"!==o&&"keyup"!==o)return null;const u=n._normalizeKey(r.pop());let l="",m=r.indexOf("code");if(m>-1&&(r.splice(m,1),l="code."),ep.forEach(b=>{const M=r.indexOf(b);M>-1&&(r.splice(M,1),l+=b+".")}),l+=u,0!=r.length||0===u.length)return null;const E={};return E.domEventName=o,E.fullKey=l,E}static matchEventFullKeyCode(t,r){let o=ii[t.key]||t.key,u="";return r.indexOf("code.")>-1&&(o=t.code,u="code."),!(null==o||!o)&&(o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),ep.forEach(l=>{l!==o&&(0,tp[l])(t)&&(u+=l+".")}),u+=o,u===r)}static eventCallback(t,r,o){return u=>{n.matchEventFullKeyCode(u,t)&&o.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}static#e=this.\u0275fac=function(r){return new(r||n)(g.LFG(he))};static#t=this.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac})}return n})();const cr=(0,g.eFA)(g._c5,"browser",[{provide:g.Lbi,useValue:"browser"},{provide:g.g9A,useValue:function It(){tc.makeCurrent()},multi:!0},{provide:he,useFactory:function eh(){return(0,g.RDi)(document),document},deps:[]}]),th=new g.OlP(""),_r=[{provide:g.rWj,useClass:class vl{addToWindow(e){g.dqk.getAngularTestability=(r,o=!0)=>{const u=e.findTestabilityInTree(r,o);if(null==u)throw new g.vHH(5103,!1);return u},g.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),g.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),g.dqk.frameworkStabilizers||(g.dqk.frameworkStabilizers=[]),g.dqk.frameworkStabilizers.push(r=>{const o=g.dqk.getAllAngularTestabilities();let u=o.length,l=!1;const m=function(E){l=l||E,u--,0==u&&r(l)};o.forEach(E=>{E.whenStable(m)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?P().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:g.lri,useClass:g.dDg,deps:[g.R0b,g.eoX,g.rWj]},{provide:g.dDg,useClass:g.dDg,deps:[g.R0b,g.eoX,g.rWj]}],as=[{provide:g.zSh,useValue:"root"},{provide:g.qLn,useFactory:function Xd(){return new g.qLn},deps:[]},{provide:_l,useClass:la,multi:!0,deps:[he,g.R0b,g.Lbi]},{provide:_l,useClass:El,multi:!0,deps:[he]},bo,Yf,Kf,{provide:g.FYo,useExisting:bo},{provide:class xi{},useClass:Zf,deps:[]},[]];let Il=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:g.AFp,useValue:t.appId}]}}static#e=this.\u0275fac=function(r){return new(r||n)(g.LFG(th,12))};static#t=this.\u0275mod=g.oAB({type:n});static#n=this.\u0275inj=g.cJS({providers:[...as,..._r],imports:[Mn,g.hGG]})}return n})(),Me=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static#e=this.\u0275fac=function(r){return new(r||n)(g.LFG(he))};static#t=this.\u0275prov=g.Yz7({token:n,factory:function(r){let o=null;return o=r?new r:function Dl(){return new Me((0,g.LFG)(he))}(),o},providedIn:"root"})}return n})();typeof window<"u"&&window;var wr=O(6304),us=O(5592),cs=O(4674),ln=O(2459),yt=O(2096),oi=O(5619);const{isArray:ru}=Array,{getPrototypeOf:Er,prototype:Ts,keys:vn}=Object;function Ws(n){if(1===n.length){const e=n[0];if(ru(e))return{args:e,keys:null};if(function xo(n){return n&&"object"==typeof n&&Er(n)===Ts}(e)){const t=vn(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var zr=O(2737),Vt=O(7398);const{isArray:Tl}=Array;function Zs(n){return(0,Vt.U)(e=>function iu(n,e){return Tl(e)?n(...e):n(e)}(n,e))}var ai=O(4564);function qi(n,e){return n.reduce((t,r,o)=>(t[r]=e[o],t),{})}var dr=O(8251),su=O(7103);function ha(...n){const e=(0,ai.yG)(n),t=(0,ai.jO)(n),{args:r,keys:o}=Ws(n);if(0===r.length)return(0,ln.D)([],e);const u=new us.y(function ou(n,e,t=zr.y){return r=>{ch(e,()=>{const{length:o}=n,u=new Array(o);let l=o,m=o;for(let E=0;E<o;E++)ch(e,()=>{const b=(0,ln.D)(n[E],e);let M=!1;b.subscribe((0,dr.x)(r,R=>{u[E]=R,M||(M=!0,m--),m||r.next(t(u.slice()))},()=>{--l||r.complete()}))},r)},r)}}(r,e,o?l=>qi(o,l):zr.y));return t?u.pipe(Zs(t)):u}function ch(n,e,t){n?(0,su.f)(t,n,e):e()}const fa=(0,O(2306).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Ri=O(7537);function lh(...n){return function Ks(){return(0,Ri.J)(1)}()((0,ln.D)(n,(0,ai.yG)(n)))}var au=O(4829);function uu(n){return new us.y(e=>{(0,au.Xf)(n()).subscribe(e)})}var ip=O(8407);function pa(n,e){const t=(0,cs.m)(n)?n:()=>n,r=o=>o.error(t());return new us.y(e?o=>e.schedule(r,0,o):r)}var No=O(6232),fc=O(7394),Oi=O(9360);function Ro(){return(0,Oi.e)((n,e)=>{let t=null;n._refCount++;const r=(0,dr.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const o=n._connection,u=t;t=null,o&&(!u||o===u)&&o.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class Oo extends us.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Oi.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new fc.w0;const t=this.getSubject();e.add(this.source.subscribe((0,dr.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=fc.w0.EMPTY)}return e}refCount(){return Ro()(this)}}var Ss=O(8645),xn=O(4664);function Ys(n){return n<=0?()=>No.E:(0,Oi.e)((e,t)=>{let r=0;e.subscribe((0,dr.x)(t,o=>{++r<=n&&(t.next(o),n<=r&&t.complete())}))})}function Po(...n){const e=(0,ai.yG)(n);return(0,Oi.e)((t,r)=>{(e?lh(n,t,e):lh(n,t)).subscribe(r)})}function Pi(n,e){return(0,Oi.e)((t,r)=>{let o=0;t.subscribe((0,dr.x)(r,u=>n.call(e,u,o++)&&r.next(u)))})}var Pr=O(1631);function pc(n){return(0,Oi.e)((e,t)=>{let r=!1;e.subscribe((0,dr.x)(t,o=>{r=!0,t.next(o)},()=>{r||t.next(n),t.complete()}))})}function gc(n=ls){return(0,Oi.e)((e,t)=>{let r=!1;e.subscribe((0,dr.x)(t,o=>{r=!0,t.next(o)},()=>r?t.complete():t.error(n())))})}function ls(){return new fa}function ds(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Pi((o,u)=>n(o,u,r)):zr.y,Ys(1),t?pc(e):gc(()=>new fa))}function Wi(n,e){return(0,cs.m)(e)?(0,Pr.z)(n,e,1):(0,Pr.z)(n,1)}var Jn=O(9397);function Zi(n){return(0,Oi.e)((e,t)=>{let u,r=null,o=!1;r=e.subscribe((0,dr.x)(t,void 0,void 0,l=>{u=(0,au.Xf)(n(l,Zi(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):o=!0})),o&&(r.unsubscribe(),r=null,u.subscribe(t))})}function Js(n,e){return(0,Oi.e)(function Qs(n,e,t,r,o){return(u,l)=>{let m=t,E=e,b=0;u.subscribe((0,dr.x)(l,M=>{const R=b++;E=m?n(E,M,R):(m=!0,M),r&&l.next(E)},o&&(()=>{m&&l.next(E),l.complete()})))}}(n,e,arguments.length>=2,!0))}function ga(n){return n<=0?()=>No.E:(0,Oi.e)((e,t)=>{let r=[];e.subscribe((0,dr.x)(t,o=>{r.push(o),n<r.length&&r.shift()},()=>{for(const o of r)t.next(o);t.complete()},void 0,()=>{r=null}))})}function ma(n){return(0,Oi.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}var dh=O(2420);const xt="primary",Ki=Symbol("RouteTitle");class sp{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function ui(n){return new sp(n)}function Sl(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const o={};for(let u=0;u<r.length;u++){const l=r[u],m=n[u];if(l.startsWith(":"))o[l.substring(1)]=m;else if(l!==m.path)return null}return{consumed:n.slice(0,r.length),posParams:o}}function Yi(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let o;for(let u=0;u<t.length;u++)if(o=t[u],!Fn(n[o],e[o]))return!1;return!0}function Fn(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((o,u)=>r[u]===o)}return n===e}function hu(n){return n.length>0?n[n.length-1]:null}function qr(n){return function uh(n){return!!n&&(n instanceof us.y||(0,cs.m)(n.lift)&&(0,cs.m)(n.subscribe))}(n)?n:(0,g.QGY)(n)?(0,ln.D)(Promise.resolve(n)):(0,yt.of)(n)}const fh={exact:function ko(n,e,t){if(!ze(n.segments,e.segments)||!A(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!ko(n.children[r],e.children[r],t))return!1;return!0},subset:I},op={exact:function Al(n,e){return Yi(n,e)},subset:function fu(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Fn(n[t],e[t]))},ignored:()=>!0};function mc(n,e,t){return fh[t.paths](n.root,e.root,t.matrixParams)&&op[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function I(n,e,t){return C(n,e,e.segments,t)}function C(n,e,t,r){if(n.segments.length>t.length){const o=n.segments.slice(0,t.length);return!(!ze(o,t)||e.hasChildren()||!A(o,t,r))}if(n.segments.length===t.length){if(!ze(n.segments,t)||!A(n.segments,t,r))return!1;for(const o in e.children)if(!n.children[o]||!I(n.children[o],e.children[o],r))return!1;return!0}{const o=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(ze(n.segments,o)&&A(n.segments,o,r)&&n.children[xt])&&C(n.children[xt],e,u,r)}}function A(n,e,t){return e.every((r,o)=>op[t](n[o].parameters,r.parameters))}class k{constructor(e=new U([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ui(this.queryParams)),this._queryParamMap}toString(){return Nt.serialize(this)}}class U{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Xn(this)}}class Z{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=ui(this.parameters)),this._parameterMap}toString(){return Vo(this)}}function ze(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let st=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=g.Yz7({token:n,factory:function(){return new Tt},providedIn:"root"})}return n})();class Tt{parse(e){const t=new FE(e);return new k(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Nn(e.root,!0)}`,r=function ap(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(o=>`${Sn(t)}=${Sn(o)}`).join("&"):`${Sn(t)}=${Sn(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function Lo(n){return encodeURI(n)}(e.fragment)}`:""}`}}const Nt=new Tt;function Xn(n){return n.segments.map(e=>Vo(e)).join("/")}function Nn(n,e){if(!n.hasChildren())return Xn(n);if(e){const t=n.children[xt]?Nn(n.children[xt],!1):"",r=[];return Object.entries(n.children).forEach(([o,u])=>{o!==xt&&r.push(`${o}:${Nn(u,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function Ze(n,e){let t=[];return Object.entries(n.children).forEach(([r,o])=>{r===xt&&(t=t.concat(e(o,r)))}),Object.entries(n.children).forEach(([r,o])=>{r!==xt&&(t=t.concat(e(o,r)))}),t}(n,(r,o)=>o===xt?[Nn(n.children[xt],!1)]:[`${o}:${Nn(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[xt]?`${Xn(n)}/${t[0]}`:`${Xn(n)}/(${t.join("//")})`}}function Fo(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Sn(n){return Fo(n).replace(/%3B/gi,";")}function Ir(n){return Fo(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ki(n){return decodeURIComponent(n)}function ci(n){return ki(n.replace(/\+/g,"%20"))}function Vo(n){return`${Ir(n.path)}${function Dm(n){return Object.keys(n).map(e=>`;${Ir(e)}=${Ir(n[e])}`).join("")}(n.parameters)}`}const pu=/^[^\/()?;#]+/;function ph(n){const e=n.match(pu);return e?e[0]:""}const up=/^[^\/()?;=#]+/,o_=/^[^=?&#]+/,cp=/^[^&#]+/;class FE{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new U([],{}):new U([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[xt]=new U(e,t)),r}parseSegment(){const e=ph(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new g.vHH(4009,!1);return this.capture(e),new Z(ki(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=function Cm(n){const e=n.match(up);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=ph(this.remaining);o&&(r=o,this.capture(r))}e[ki(t)]=ki(r)}parseQueryParam(e){const t=function Qi(n){const e=n.match(o_);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const l=function yc(n){const e=n.match(cp);return e?e[0]:""}(this.remaining);l&&(r=l,this.capture(r))}const o=ci(t),u=ci(r);if(e.hasOwnProperty(o)){let l=e[o];Array.isArray(l)||(l=[l],e[o]=l),l.push(u)}else e[o]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=ph(this.remaining),o=this.remaining[r.length];if("/"!==o&&")"!==o&&";"!==o)throw new g.vHH(4010,!1);let u;r.indexOf(":")>-1?(u=r.slice(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=xt);const l=this.parseChildren();t[u]=1===Object.keys(l).length?l[xt]:new U([],l),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new g.vHH(4011,!1)}}function lp(n){return n.segments.length>0?new U([],{[xt]:n}):n}function dp(n){const e={};for(const r of Object.keys(n.children)){const u=dp(n.children[r]);if(r===xt&&0===u.segments.length&&u.hasChildren())for(const[l,m]of Object.entries(u.children))e[l]=m;else(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function a_(n){if(1===n.numberOfChildren&&n.children[xt]){const e=n.children[xt];return new U(n.segments.concat(e.segments),e.children)}return n}(new U(n.segments,e))}function vc(n){return n instanceof k}function bm(n){let e;const o=lp(function t(u){const l={};for(const E of u.children){const b=t(E);l[E.outlet]=b}const m=new U(u.url,l);return u===n&&(e=m),m}(n.root));return e??o}function Tm(n,e,t,r){let o=n;for(;o.parent;)o=o.parent;if(0===e.length)return Ml(o,o,o,t,r);const u=function _c(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Sm(!0,0,n);let e=0,t=!1;const r=n.reduce((o,u,l)=>{if("object"==typeof u&&null!=u){if(u.outlets){const m={};return Object.entries(u.outlets).forEach(([E,b])=>{m[E]="string"==typeof b?b.split("/"):b}),[...o,{outlets:m}]}if(u.segmentPath)return[...o,u.segmentPath]}return"string"!=typeof u?[...o,u]:0===l?(u.split("/").forEach((m,E)=>{0==E&&"."===m||(0==E&&""===m?t=!0:".."===m?e++:""!=m&&o.push(m))}),o):[...o,u]},[]);return new Sm(t,e,r)}(e);if(u.toRoot())return Ml(o,o,new U([],{}),t,r);const l=function Am(n,e,t){if(n.isAbsolute)return new gh(e,!0,0);if(!t)return new gh(e,!1,NaN);if(null===t.parent)return new gh(t,!0,0);const r=ya(n.commands[0])?0:1;return function Nl(n,e,t){let r=n,o=e,u=t;for(;u>o;){if(u-=o,r=r.parent,!r)throw new g.vHH(4005,!1);o=r.segments.length}return new gh(r,!1,o-u)}(t,t.segments.length-1+r,n.numberOfDoubleDots)}(u,o,n),m=l.processChildren?Rl(l.segmentGroup,l.index,u.commands):hp(l.segmentGroup,l.index,u.commands);return Ml(o,l.segmentGroup,m,t,r)}function ya(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function va(n){return"object"==typeof n&&null!=n&&n.outlets}function Ml(n,e,t,r,o){let l,u={};r&&Object.entries(r).forEach(([E,b])=>{u[E]=Array.isArray(b)?b.map(M=>`${M}`):`${b}`}),l=n===e?t:xl(n,e,t);const m=lp(dp(l));return new k(m,u,o)}function xl(n,e,t){const r={};return Object.entries(n.children).forEach(([o,u])=>{r[o]=u===e?t:xl(u,e,t)}),new U(n.segments,r)}class Sm{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&ya(r[0]))throw new g.vHH(4003,!1);const o=r.find(va);if(o&&o!==hu(r))throw new g.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class gh{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function hp(n,e,t){if(n||(n=new U([],{})),0===n.segments.length&&n.hasChildren())return Rl(n,e,t);const r=function u_(n,e,t){let r=0,o=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;o<n.segments.length;){if(r>=t.length)return u;const l=n.segments[o],m=t[r];if(va(m))break;const E=`${m}`,b=r<t.length-1?t[r+1]:null;if(o>0&&void 0===E)break;if(E&&b&&"object"==typeof b&&void 0===b.outlets){if(!c_(E,b,l))return u;r+=2}else{if(!c_(E,{},l))return u;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}(n,e,t),o=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new U(n.segments.slice(0,r.pathIndex),{});return u.children[xt]=new U(n.segments.slice(r.pathIndex),n.children),Rl(u,0,o)}return r.match&&0===o.length?new U(n.segments,{}):r.match&&!n.hasChildren()?_a(n,e,t):r.match?Rl(n,0,o):_a(n,e,t)}function Rl(n,e,t){if(0===t.length)return new U(n.segments,{});{const r=function mh(n){return va(n[0])?n[0].outlets:{[xt]:n}}(t),o={};if(Object.keys(r).some(u=>u!==xt)&&n.children[xt]&&1===n.numberOfChildren&&0===n.children[xt].segments.length){const u=Rl(n.children[xt],e,t);return new U(n.segments,u.children)}return Object.entries(r).forEach(([u,l])=>{"string"==typeof l&&(l=[l]),null!==l&&(o[u]=hp(n.children[u],e,l))}),Object.entries(n.children).forEach(([u,l])=>{void 0===r[u]&&(o[u]=l)}),new U(n.segments,o)}}function _a(n,e,t){const r=n.segments.slice(0,e);let o=0;for(;o<t.length;){const u=t[o];if(va(u)){const E=wc(u.outlets);return new U(r,E)}if(0===o&&ya(t[0])){r.push(new Z(n.segments[e].path,yh(t[0]))),o++;continue}const l=va(u)?u.outlets[xt]:`${u}`,m=o<t.length-1?t[o+1]:null;l&&m&&ya(m)?(r.push(new Z(l,yh(m))),o+=2):(r.push(new Z(l,{})),o++)}return new U(r,{})}function wc(n){const e={};return Object.entries(n).forEach(([t,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[t]=_a(new U([],{}),0,r))}),e}function yh(n){const e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function c_(n,e,t){return n==t.path&&Yi(e,t.parameters)}const Ec="imperative";class hs{constructor(e,t){this.id=e,this.url=t}}class Ol extends hs{constructor(e,t,r="imperative",o=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class wa extends hs{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Pl extends hs{constructor(e,t,r,o){super(e,t),this.reason=r,this.code=o,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Uo extends hs{constructor(e,t,r,o){super(e,t),this.reason=r,this.code=o,this.type=16}}class mu extends hs{constructor(e,t,r,o){super(e,t),this.error=r,this.target=o,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class fp extends hs{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class l_ extends hs{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class pp extends hs{constructor(e,t,r,o,u){super(e,t),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=u,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class LE extends hs{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Mm extends hs{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class VE{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class d_{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class kl{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class gp{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class h_{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class UE{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class vh{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class xm{}class Nm{constructor(e){this.url=e}}class Rm{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Ic,this.attachRef=null}}let Ic=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const o=this.getOrCreateContext(t);o.outlet=r,this.contexts.set(t,o)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Rm,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class mp{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Dc(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Dc(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Ea(e,this._root);return t.length<2?[]:t[t.length-2].children.map(o=>o.value).filter(o=>o!==e)}pathFromRoot(e){return Ea(e,this._root).map(t=>t.value)}}function Dc(n,e){if(n===e.value)return e;for(const t of e.children){const r=Dc(n,t);if(r)return r}return null}function Ea(n,e){if(n===e.value)return[e];for(const t of e.children){const r=Ea(n,t);if(r.length)return r.unshift(e),r}return[]}class Xs{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Dr(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class yu extends mp{constructor(e,t){super(e),this.snapshot=t,eo(this,e)}toString(){return this.snapshot.toString()}}function Ia(n,e){const t=function Om(n,e){const l=new Da([],{},{},"",{},xt,e,null,{});return new Pm("",new Xs(l,[]))}(0,e),r=new oi.X([new Z("",{})]),o=new oi.X({}),u=new oi.X({}),l=new oi.X({}),m=new oi.X(""),E=new Bo(r,o,l,m,u,xt,e,t.root);return E.snapshot=t.root,new yu(new Xs(E,[]),t)}class Bo{constructor(e,t,r,o,u,l,m,E){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=o,this.dataSubject=u,this.outlet=l,this.component=m,this._futureSnapshot=E,this.title=this.dataSubject?.pipe((0,Vt.U)(b=>b[Ki]))??(0,yt.of)(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Vt.U)(e=>ui(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Vt.U)(e=>ui(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function vu(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const o=t[r],u=t[r-1];if(o.routeConfig&&""===o.routeConfig.path)r--;else{if(u.component)break;r--}}return function _h(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Da{get title(){return this.data?.[Ki]}constructor(e,t,r,o,u,l,m,E,b){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=l,this.component=m,this.routeConfig=E,this._resolve=b}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=ui(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ui(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Pm extends mp{constructor(e,t){super(t),this.url=e,eo(this,t)}toString(){return yp(this._root)}}function eo(n,e){e.value._routerState=n,e.children.forEach(t=>eo(n,t))}function yp(n){const e=n.children.length>0?` { ${n.children.map(yp).join(", ")} } `:"";return`${n.value}${e}`}function wh(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Yi(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Yi(e.params,t.params)||n.paramsSubject.next(t.params),function du(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Yi(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.urlSubject.next(t.url),Yi(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Fl(n,e){const t=Yi(n.params,e.params)&&function fe(n,e){return ze(n,e)&&n.every((t,r)=>Yi(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Fl(n.parent,e.parent))}let km=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=xt,this.activateEvents=new g.vpe,this.deactivateEvents=new g.vpe,this.attachEvents=new g.vpe,this.detachEvents=new g.vpe,this.parentContexts=(0,g.f3M)(Ic),this.location=(0,g.f3M)(g.s_b),this.changeDetector=(0,g.f3M)(g.sBO),this.environmentInjector=(0,g.f3M)(g.lqb),this.inputBinder=(0,g.f3M)(Wr,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:o}=t.name;if(r)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new g.vHH(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new g.vHH(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new g.vHH(4012,!1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new g.vHH(4013,!1);this._activatedRoute=t;const o=this.location,l=t.snapshot.component,m=this.parentContexts.getOrCreateContext(this.name).children,E=new Fm(t,m,o.injector);this.activated=o.createComponent(l,{index:o.length,injector:E,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=g.lG2({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[g.TTD]})}return n})();class Fm{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Bo?this.route:e===Ic?this.childContexts:this.parent.get(e,t)}}const Wr=new g.OlP("");let Ll=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){const{activatedRoute:r}=t,o=ha([r.queryParams,r.params,r.data]).pipe((0,xn.w)(([u,l,m],E)=>(m={...u,...l,...m},0===E?(0,yt.of)(m):Promise.resolve(m)))).subscribe(u=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(t);const l=(0,g.qFp)(r.component);if(l)for(const{templateName:m}of l.inputs)t.activatedComponentRef.setInput(m,u[m]);else this.unsubscribeFromRouteData(t)});this.outletDataSubscriptions.set(t,o)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac})}return n})();function Vl(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const o=function er(n,e,t){return e.children.map(r=>{for(const o of t.children)if(n.shouldReuseRoute(r.value,o.value.snapshot))return Vl(n,r,o);return Vl(n,r)})}(n,e,t);return new Xs(r,o)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const l=u.route;return l.value._futureSnapshot=e.value,l.children=e.children.map(m=>Vl(n,m)),l}}const r=function _u(n){return new Bo(new oi.X(n.url),new oi.X(n.params),new oi.X(n.queryParams),new oi.X(n.fragment),new oi.X(n.data),n.outlet,n.component,n)}(e.value),o=e.children.map(u=>Vl(n,u));return new Xs(r,o)}}const Ul="ngNavigationCancelingError";function Bl(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=vc(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,o=Zr(!1,0,e);return o.url=t,o.navigationBehaviorOptions=r,o}function Zr(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[Ul]=!0,r.cancellationCode=e,t&&(r.url=t),r}function _p(n){return n&&n[Ul]}let wp=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=g.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[g.jDz],decls:1,vars:0,template:function(r,o){1&r&&g._UZ(0,"router-outlet")},dependencies:[km],encapsulation:2})}return n})();function X(n){const e=n.children&&n.children.map(X),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==xt&&(t.component=wp),t}function Te(n){return n.outlet||xt}function tt(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class fs{constructor(e,t,r,o,u){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=o,this.inputBindingEnabled=u}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),wh(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const o=Dr(t);e.children.forEach(u=>{const l=u.value.outlet;this.deactivateRoutes(u,o[l],r),delete o[l]}),Object.values(o).forEach(u=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(o===u)if(o.component){const l=r.getContext(o.outlet);l&&this.deactivateChildRoutes(e,t,l.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=Dr(e);for(const l of Object.keys(u))this.deactivateRouteAndItsChildren(u[l],o);if(r&&r.outlet){const l=r.outlet.detach(),m=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:l,route:e,contexts:m})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=Dr(e);for(const l of Object.keys(u))this.deactivateRouteAndItsChildren(u[l],o);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){const o=Dr(t);e.children.forEach(u=>{this.activateRoutes(u,o[u.value.outlet],r),this.forwardEvent(new UE(u.value.snapshot))}),e.children.length&&this.forwardEvent(new gp(e.value.snapshot))}activateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(wh(o),o===u)if(o.component){const l=r.getOrCreateContext(o.outlet);this.activateChildRoutes(e,t,l.children)}else this.activateChildRoutes(e,t,r);else if(o.component){const l=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const m=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),l.children.onOutletReAttached(m.contexts),l.attachRef=m.componentRef,l.route=m.route.value,l.outlet&&l.outlet.attach(m.componentRef,m.route.value),wh(m.route.value),this.activateChildRoutes(e,null,l.children)}else{const m=tt(o.snapshot);l.attachRef=null,l.route=o,l.injector=m,l.outlet&&l.outlet.activateWith(o,l.injector),this.activateChildRoutes(e,null,l.children)}}else this.activateChildRoutes(e,null,r)}}class Cc{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class to{constructor(e,t){this.component=e,this.route=t}}function bc(n,e,t){const r=n._root;return no(r,e?e._root:null,t,[r.value])}function jo(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,g.Z0I)(n)?e.get(n):n:r}function no(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=Dr(e);return n.children.forEach(l=>{(function Lm(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,l=e?e.value:null,m=t?t.getContext(n.value.outlet):null;if(l&&u.routeConfig===l.routeConfig){const E=function Vm(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!ze(n.url,e.url);case"pathParamsOrQueryParamsChange":return!ze(n.url,e.url)||!Yi(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Fl(n,e)||!Yi(n.queryParams,e.queryParams);default:return!Fl(n,e)}}(l,u,u.routeConfig.runGuardsAndResolvers);E?o.canActivateChecks.push(new Cc(r)):(u.data=l.data,u._resolvedData=l._resolvedData),no(n,e,u.component?m?m.children:null:t,r,o),E&&m&&m.outlet&&m.outlet.isActivated&&o.canDeactivateChecks.push(new to(m.outlet.component,l))}else l&&Eu(e,m,o),o.canActivateChecks.push(new Cc(r)),no(n,null,u.component?m?m.children:null:t,r,o)})(l,u[l.value.outlet],t,r.concat([l.value]),o),delete u[l.value.outlet]}),Object.entries(u).forEach(([l,m])=>Eu(m,t.getContext(l),o)),o}function Eu(n,e,t){const r=Dr(n),o=n.value;Object.entries(r).forEach(([u,l])=>{Eu(l,o.component?e?e.children.getContext(u):null:e,t)}),t.canDeactivateChecks.push(new to(o.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,o))}function Tc(n){return"function"==typeof n}function jm(n){return n instanceof fa||"EmptyError"===n?.name}const Dp=Symbol("INITIAL_VALUE");function ro(){return(0,xn.w)(n=>ha(n.map(e=>e.pipe(Ys(1),Po(Dp)))).pipe((0,Vt.U)(e=>{for(const t of e)if(!0!==t){if(t===Dp)return Dp;if(!1===t||t instanceof k)return t}return!0}),Pi(e=>e!==Dp),Ys(1)))}function Hm(n){return(0,ip.z)((0,Jn.b)(e=>{if(vc(e))throw Bl(0,e)}),(0,Vt.U)(e=>!0===e))}class jl{constructor(e){this.segmentGroup=e||null}}class Eh{constructor(e){this.urlTree=e}}function $l(n){return pa(new jl(n))}function Gm(n){return pa(new Eh(n))}class v_{constructor(e,t){this.urlSerializer=e,this.urlTree=t}noMatchError(e){return new g.vHH(4002,!1)}lineralizeSegments(e,t){let r=[],o=t.root;for(;;){if(r=r.concat(o.segments),0===o.numberOfChildren)return(0,yt.of)(r);if(o.numberOfChildren>1||!o.children[xt])return pa(new g.vHH(4e3,!1));o=o.children[xt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,o){const u=this.createSegmentGroup(e,t.root,r,o);return new k(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Object.entries(e).forEach(([o,u])=>{if("string"==typeof u&&u.startsWith(":")){const m=u.substring(1);r[o]=t[m]}else r[o]=u}),r}createSegmentGroup(e,t,r,o){const u=this.createSegments(e,t.segments,r,o);let l={};return Object.entries(t.children).forEach(([m,E])=>{l[m]=this.createSegmentGroup(e,E,r,o)}),new U(u,l)}createSegments(e,t,r,o){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,o):this.findOrReturn(u,r))}findPosParam(e,t,r){const o=r[t.path.substring(1)];if(!o)throw new g.vHH(4001,!1);return o}findOrReturn(e,t){let r=0;for(const o of t){if(o.path===e.path)return t.splice(r),o;r++}return e}}const Hl={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function PT(n,e,t,r,o){const u=qm(n,e,t);return u.matched?(r=function f_(n,e){return n.providers&&!n._injector&&(n._injector=(0,g.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}(e,r),function qE(n,e,t,r){const o=e.canMatch;if(!o||0===o.length)return(0,yt.of)(!0);const u=o.map(l=>{const m=jo(l,n);return qr(function y_(n){return n&&Tc(n.canMatch)}(m)?m.canMatch(e,t):n.runInContext(()=>m(e,t)))});return(0,yt.of)(u).pipe(ro(),Hm())}(r,e,t).pipe((0,Vt.U)(l=>!0===l?u:{...Hl}))):(0,yt.of)(u)}function qm(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...Hl}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const o=(e.matcher||Sl)(t,n,e);if(!o)return{...Hl};const u={};Object.entries(o.posParams??{}).forEach(([m,E])=>{u[m]=E.path});const l=o.consumed.length>0?{...u,...o.consumed[o.consumed.length-1].parameters}:u;return{matched:!0,consumedSegments:o.consumed,remainingSegments:t.slice(o.consumed.length),parameters:l,positionalParamSegments:o.posParams??{}}}function ZE(n,e,t,r){return t.length>0&&function KE(n,e,t){return t.some(r=>Gl(n,e,r)&&Te(r)!==xt)}(n,t,r)?{segmentGroup:new U(e,FT(r,new U(t,n.children))),slicedSegments:[]}:0===t.length&&function YE(n,e,t){return t.some(r=>Gl(n,e,r))}(n,t,r)?{segmentGroup:new U(n.segments,kT(n,0,t,r,n.children)),slicedSegments:t}:{segmentGroup:new U(n.segments,n.children),slicedSegments:t}}function kT(n,e,t,r,o){const u={};for(const l of r)if(Gl(n,t,l)&&!o[Te(l)]){const m=new U([],{});u[Te(l)]=m}return{...o,...u}}function FT(n,e){const t={};t[xt]=e;for(const r of n)if(""===r.path&&Te(r)!==xt){const o=new U([],{});t[Te(r)]=o}return t}function Gl(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}class VT{constructor(e,t,r,o,u,l,m){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=o,this.urlTree=u,this.paramsInheritanceStrategy=l,this.urlSerializer=m,this.allowRedirects=!0,this.applyRedirects=new v_(this.urlSerializer,this.urlTree)}noMatchError(e){return new g.vHH(4002,!1)}recognize(){const e=ZE(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,xt).pipe(Zi(t=>{if(t instanceof Eh)return this.allowRedirects=!1,this.urlTree=t.urlTree,this.match(t.urlTree);throw t instanceof jl?this.noMatchError(t):t}),(0,Vt.U)(t=>{const r=new Da([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},xt,this.rootComponentType,null,{}),o=new Xs(r,t),u=new Pm("",o),l=function gu(n,e,t=null,r=null){return Tm(bm(n),e,t,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return l.queryParams=this.urlTree.queryParams,u.url=this.urlSerializer.serialize(l),this.inheritParamsAndData(u._root),{state:u,tree:l}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e.root,xt).pipe(Zi(r=>{throw r instanceof jl?this.noMatchError(r):r}))}inheritParamsAndData(e){const t=e.value,r=vu(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(o=>this.inheritParamsAndData(o))}processSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,o,!0)}processChildren(e,t,r){const o=[];for(const u of Object.keys(r.children))"primary"===u?o.unshift(u):o.push(u);return(0,ln.D)(o).pipe(Wi(u=>{const l=r.children[u],m=function je(n,e){const t=n.filter(r=>Te(r)===e);return t.push(...n.filter(r=>Te(r)!==e)),t}(t,u);return this.processSegmentGroup(e,m,l,u)}),Js((u,l)=>(u.push(...l),u)),pc(null),function cu(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Pi((o,u)=>n(o,u,r)):zr.y,ga(1),t?pc(e):gc(()=>new fa))}(),(0,Pr.z)(u=>{if(null===u)return $l(r);const l=Wm(u);return function ix(n){n.sort((e,t)=>e.value.outlet===xt?-1:t.value.outlet===xt?1:e.value.outlet.localeCompare(t.value.outlet))}(l),(0,yt.of)(l)}))}processSegment(e,t,r,o,u,l){return(0,ln.D)(t).pipe(Wi(m=>this.processSegmentAgainstRoute(m._injector??e,t,m,r,o,u,l).pipe(Zi(E=>{if(E instanceof jl)return(0,yt.of)(null);throw E}))),ds(m=>!!m),Zi(m=>{if(jm(m))return function Ih(n,e,t){return 0===e.length&&!n.children[t]}(r,o,u)?(0,yt.of)([]):$l(r);throw m}))}processSegmentAgainstRoute(e,t,r,o,u,l,m){return function __(n,e,t,r){return!!(Te(n)===r||r!==xt&&Gl(e,t,n))&&("**"===n.path||qm(e,n,t).matched)}(r,o,u,l)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,o,r,u,l,m):m&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,o,t,r,u,l):$l(o):$l(o)}expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,l){return"**"===o.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,o,l):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,o){const u=this.applyRedirects.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?Gm(u):this.applyRedirects.lineralizeSegments(r,u).pipe((0,Pr.z)(l=>{const m=new U(l,{});return this.processSegment(e,t,m,l,o,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,l){const{matched:m,consumedSegments:E,remainingSegments:b,positionalParamSegments:M}=qm(t,o,u);if(!m)return $l(t);const R=this.applyRedirects.applyRedirectCommands(E,o.redirectTo,M);return o.redirectTo.startsWith("/")?Gm(R):this.applyRedirects.lineralizeSegments(o,R).pipe((0,Pr.z)(H=>this.processSegment(e,r,t,H.concat(b),l,!1)))}matchSegmentAgainstRoute(e,t,r,o,u,l){let m;if("**"===r.path){const E=o.length>0?hu(o).parameters:{},b=new Da(o,E,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,zl(r),Te(r),r.component??r._loadedComponent??null,r,Cp(r));m=(0,yt.of)({snapshot:b,consumedSegments:[],remainingSegments:[]}),t.children={}}else m=PT(t,r,o,e).pipe((0,Vt.U)(({matched:E,consumedSegments:b,remainingSegments:M,parameters:R})=>E?{snapshot:new Da(b,R,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,zl(r),Te(r),r.component??r._loadedComponent??null,r,Cp(r)),consumedSegments:b,remainingSegments:M}:null));return m.pipe((0,xn.w)(E=>null===E?$l(t):this.getChildConfig(e=r._injector??e,r,o).pipe((0,xn.w)(({routes:b})=>{const M=r._loadedInjector??e,{snapshot:R,consumedSegments:H,remainingSegments:te}=E,{segmentGroup:be,slicedSegments:Ue}=ZE(t,H,te,b);if(0===Ue.length&&be.hasChildren())return this.processChildren(M,b,be).pipe((0,Vt.U)(pt=>null===pt?null:[new Xs(R,pt)]));if(0===b.length&&0===Ue.length)return(0,yt.of)([new Xs(R,[])]);const He=Te(r)===u;return this.processSegment(M,b,be,Ue,He?xt:u,!0).pipe((0,Vt.U)(pt=>[new Xs(R,pt)]))}))))}getChildConfig(e,t,r){return t.children?(0,yt.of)({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?(0,yt.of)({routes:t._loadedRoutes,injector:t._loadedInjector}):function zE(n,e,t,r){const o=e.canLoad;if(void 0===o||0===o.length)return(0,yt.of)(!0);const u=o.map(l=>{const m=jo(l,n);return qr(function Ip(n){return n&&Tc(n.canLoad)}(m)?m.canLoad(e,t):n.runInContext(()=>m(e,t)))});return(0,yt.of)(u).pipe(ro(),Hm())}(e,t,r).pipe((0,Pr.z)(o=>o?this.configLoader.loadChildren(e,t).pipe((0,Jn.b)(u=>{t._loadedRoutes=u.routes,t._loadedInjector=u.injector})):function WE(n){return pa(Zr(!1,3))}())):(0,yt.of)({routes:[],injector:e})}}function UT(n){const e=n.value.routeConfig;return e&&""===e.path}function Wm(n){const e=[],t=new Set;for(const r of n){if(!UT(r)){e.push(r);continue}const o=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==o?(o.children.push(...r.children),t.add(o)):e.push(r)}for(const r of t){const o=Wm(r.children);e.push(new Xs(r.value,o))}return e.filter(r=>!t.has(r))}function zl(n){return n.data||{}}function Cp(n){return n.resolve||{}}function tI(n){return"string"==typeof n.title||null===n.title}function E_(n){return(0,xn.w)(e=>{const t=n(e);return t?(0,ln.D)(t).pipe((0,Vt.U)(()=>e)):(0,yt.of)(e)})}const Dh=new g.OlP("ROUTES");let I_=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,g.f3M)(g.Sil)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return(0,yt.of)(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=qr(t.loadComponent()).pipe((0,Vt.U)(nI),(0,Jn.b)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=u}),ma(()=>{this.componentLoaders.delete(t)})),o=new Oo(r,()=>new Ss.x).pipe(Ro());return this.componentLoaders.set(t,o),o}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return(0,yt.of)({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const u=function Sc(n,e,t,r){return qr(n.loadChildren()).pipe((0,Vt.U)(nI),(0,Pr.z)(o=>o instanceof g.YKP||Array.isArray(o)?(0,yt.of)(o):(0,ln.D)(e.compileModuleAsync(o))),(0,Vt.U)(o=>{r&&r(n);let u,l,m=!1;return Array.isArray(o)?(l=o,!0):(u=o.create(t).injector,l=u.get(Dh,[],{optional:!0,self:!0}).flat()),{routes:l.map(X),injector:u}}))}(r,this.compiler,t,this.onLoadEndListener).pipe(ma(()=>{this.childrenLoaders.delete(r)})),l=new Oo(u,()=>new Ss.x).pipe(Ro());return this.childrenLoaders.set(r,l),l}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function nI(n){return function bp(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let D_=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Ss.x,this.transitionAbortSubject=new Ss.x,this.configLoader=(0,g.f3M)(I_),this.environmentInjector=(0,g.f3M)(g.lqb),this.urlSerializer=(0,g.f3M)(st),this.rootContexts=(0,g.f3M)(Ic),this.inputBindingEnabled=null!==(0,g.f3M)(Wr,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>(0,yt.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=o=>this.events.next(new d_(o)),this.configLoader.onLoadStartListener=o=>this.events.next(new VE(o))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t,r,o){return this.transitions=new oi.X({id:0,currentUrlTree:r,currentRawUrl:r,currentBrowserUrl:r,extractedUrl:t.urlHandlingStrategy.extract(r),urlAfterRedirects:t.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Ec,restoredState:null,currentSnapshot:o.snapshot,targetSnapshot:null,currentRouterState:o,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Pi(u=>0!==u.id),(0,Vt.U)(u=>({...u,extractedUrl:t.urlHandlingStrategy.extract(u.rawUrl)})),(0,xn.w)(u=>{this.currentTransition=u;let l=!1,m=!1;return(0,yt.of)(u).pipe((0,Jn.b)(E=>{this.currentNavigation={id:E.id,initialUrl:E.rawUrl,extractedUrl:E.extractedUrl,trigger:E.source,extras:E.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,xn.w)(E=>{const b=E.currentBrowserUrl.toString(),M=!t.navigated||E.extractedUrl.toString()!==b||b!==E.currentUrlTree.toString();if(!M&&"reload"!==(E.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const H="";return this.events.next(new Uo(E.id,this.urlSerializer.serialize(E.rawUrl),H,0)),E.resolve(null),No.E}if(t.urlHandlingStrategy.shouldProcessUrl(E.rawUrl))return(0,yt.of)(E).pipe((0,xn.w)(H=>{const te=this.transitions?.getValue();return this.events.next(new Ol(H.id,this.urlSerializer.serialize(H.extractedUrl),H.source,H.restoredState)),te!==this.transitions?.getValue()?No.E:Promise.resolve(H)}),function w_(n,e,t,r,o,u){return(0,Pr.z)(l=>function LT(n,e,t,r,o,u,l="emptyOnly"){return new VT(n,e,t,r,o,l,u).recognize()}(n,e,t,r,l.extractedUrl,o,u).pipe((0,Vt.U)(({state:m,tree:E})=>({...l,targetSnapshot:m,urlAfterRedirects:E}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),(0,Jn.b)(H=>{u.targetSnapshot=H.targetSnapshot,u.urlAfterRedirects=H.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:H.urlAfterRedirects};const te=new fp(H.id,this.urlSerializer.serialize(H.extractedUrl),this.urlSerializer.serialize(H.urlAfterRedirects),H.targetSnapshot);this.events.next(te)}));if(M&&t.urlHandlingStrategy.shouldProcessUrl(E.currentRawUrl)){const{id:H,extractedUrl:te,source:be,restoredState:Ue,extras:He}=E,pt=new Ol(H,this.urlSerializer.serialize(te),be,Ue);this.events.next(pt);const St=Ia(0,this.rootComponentType).snapshot;return this.currentTransition=u={...E,targetSnapshot:St,urlAfterRedirects:te,extras:{...He,skipLocationChange:!1,replaceUrl:!1}},(0,yt.of)(u)}{const H="";return this.events.next(new Uo(E.id,this.urlSerializer.serialize(E.extractedUrl),H,1)),E.resolve(null),No.E}}),(0,Jn.b)(E=>{const b=new l_(E.id,this.urlSerializer.serialize(E.extractedUrl),this.urlSerializer.serialize(E.urlAfterRedirects),E.targetSnapshot);this.events.next(b)}),(0,Vt.U)(E=>(this.currentTransition=u={...E,guards:bc(E.targetSnapshot,E.currentSnapshot,this.rootContexts)},u)),function jE(n,e){return(0,Pr.z)(t=>{const{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:u,canDeactivateChecks:l}}=t;return 0===l.length&&0===u.length?(0,yt.of)({...t,guardsResult:!0}):function $E(n,e,t,r){return(0,ln.D)(n).pipe((0,Pr.z)(o=>function GE(n,e,t,r,o){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!u||0===u.length)return(0,yt.of)(!0);const l=u.map(m=>{const E=tt(e)??o,b=jo(m,E);return qr(function m_(n){return n&&Tc(n.canDeactivate)}(b)?b.canDeactivate(n,e,t,r):E.runInContext(()=>b(n,e,t,r))).pipe(ds())});return(0,yt.of)(l).pipe(ro())}(o.component,o.route,t,e,r)),ds(o=>!0!==o,!0))}(l,r,o,n).pipe((0,Pr.z)(m=>m&&function g_(n){return"boolean"==typeof n}(m)?function RT(n,e,t,r){return(0,ln.D)(e).pipe(Wi(o=>lh(function $m(n,e){return null!==n&&e&&e(new kl(n)),(0,yt.of)(!0)}(o.route.parent,r),function rx(n,e){return null!==n&&e&&e(new h_(n)),(0,yt.of)(!0)}(o.route,r),function HE(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(l=>function Ep(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(l)).filter(l=>null!==l).map(l=>uu(()=>{const m=l.guards.map(E=>{const b=tt(l.node)??t,M=jo(E,b);return qr(function Bm(n){return n&&Tc(n.canActivateChild)}(M)?M.canActivateChild(r,n):b.runInContext(()=>M(r,n))).pipe(ds())});return(0,yt.of)(m).pipe(ro())}));return(0,yt.of)(u).pipe(ro())}(n,o.path,t),function OT(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return(0,yt.of)(!0);const o=r.map(u=>uu(()=>{const l=tt(e)??t,m=jo(u,l);return qr(function Um(n){return n&&Tc(n.canActivate)}(m)?m.canActivate(e,n):l.runInContext(()=>m(e,n))).pipe(ds())}));return(0,yt.of)(o).pipe(ro())}(n,o.route,t))),ds(o=>!0!==o,!0))}(r,u,n,e):(0,yt.of)(m)),(0,Vt.U)(m=>({...t,guardsResult:m})))})}(this.environmentInjector,E=>this.events.next(E)),(0,Jn.b)(E=>{if(u.guardsResult=E.guardsResult,vc(E.guardsResult))throw Bl(0,E.guardsResult);const b=new pp(E.id,this.urlSerializer.serialize(E.extractedUrl),this.urlSerializer.serialize(E.urlAfterRedirects),E.targetSnapshot,!!E.guardsResult);this.events.next(b)}),Pi(E=>!!E.guardsResult||(this.cancelNavigationTransition(E,"",3),!1)),E_(E=>{if(E.guards.canActivateChecks.length)return(0,yt.of)(E).pipe((0,Jn.b)(b=>{const M=new LE(b.id,this.urlSerializer.serialize(b.extractedUrl),this.urlSerializer.serialize(b.urlAfterRedirects),b.targetSnapshot);this.events.next(M)}),(0,xn.w)(b=>{let M=!1;return(0,yt.of)(b).pipe(function QE(n,e){return(0,Pr.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:o}}=t;if(!o.length)return(0,yt.of)(t);let u=0;return(0,ln.D)(o).pipe(Wi(l=>function JE(n,e,t,r){const o=n.routeConfig,u=n._resolve;return void 0!==o?.title&&!tI(o)&&(u[Ki]=o.title),function XE(n,e,t,r){const o=function eI(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===o.length)return(0,yt.of)({});const u={};return(0,ln.D)(o).pipe((0,Pr.z)(l=>function BT(n,e,t,r){const o=tt(e)??r,u=jo(n,o);return qr(u.resolve?u.resolve(e,t):o.runInContext(()=>u(e,t)))}(n[l],e,t,r).pipe(ds(),(0,Jn.b)(m=>{u[l]=m}))),ga(1),function lu(n){return(0,Vt.U)(()=>n)}(u),Zi(l=>jm(l)?No.E:pa(l)))}(u,n,e,r).pipe((0,Vt.U)(l=>(n._resolvedData=l,n.data=vu(n,t).resolve,o&&tI(o)&&(n.data[Ki]=o.title),null)))}(l.route,r,n,e)),(0,Jn.b)(()=>u++),ga(1),(0,Pr.z)(l=>u===o.length?(0,yt.of)(t):No.E))})}(t.paramsInheritanceStrategy,this.environmentInjector),(0,Jn.b)({next:()=>M=!0,complete:()=>{M||this.cancelNavigationTransition(b,"",2)}}))}),(0,Jn.b)(b=>{const M=new Mm(b.id,this.urlSerializer.serialize(b.extractedUrl),this.urlSerializer.serialize(b.urlAfterRedirects),b.targetSnapshot);this.events.next(M)}))}),E_(E=>{const b=M=>{const R=[];M.routeConfig?.loadComponent&&!M.routeConfig._loadedComponent&&R.push(this.configLoader.loadComponent(M.routeConfig).pipe((0,Jn.b)(H=>{M.component=H}),(0,Vt.U)(()=>{})));for(const H of M.children)R.push(...b(H));return R};return ha(b(E.targetSnapshot.root)).pipe(pc(),Ys(1))}),E_(()=>this.afterPreactivation()),(0,Vt.U)(E=>{const b=function vp(n,e,t){const r=Vl(n,e._root,t?t._root:void 0);return new yu(r,e)}(t.routeReuseStrategy,E.targetSnapshot,E.currentRouterState);return this.currentTransition=u={...E,targetRouterState:b},u}),(0,Jn.b)(()=>{this.events.next(new xm)}),((n,e,t,r)=>(0,Vt.U)(o=>(new fs(e,o.targetRouterState,o.currentRouterState,t,r).activate(n),o)))(this.rootContexts,t.routeReuseStrategy,E=>this.events.next(E),this.inputBindingEnabled),Ys(1),(0,Jn.b)({next:E=>{l=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new wa(E.id,this.urlSerializer.serialize(E.extractedUrl),this.urlSerializer.serialize(E.urlAfterRedirects))),t.titleStrategy?.updateTitle(E.targetRouterState.snapshot),E.resolve(!0)},complete:()=>{l=!0}}),function hh(n){return(0,Oi.e)((e,t)=>{(0,au.Xf)(n).subscribe((0,dr.x)(t,()=>t.complete(),dh.Z)),!t.closed&&e.subscribe(t)})}(this.transitionAbortSubject.pipe((0,Jn.b)(E=>{throw E}))),ma(()=>{l||m||this.cancelNavigationTransition(u,"",1),this.currentNavigation?.id===u.id&&(this.currentNavigation=null)}),Zi(E=>{if(m=!0,_p(E))this.events.next(new Pl(u.id,this.urlSerializer.serialize(u.extractedUrl),E.message,E.cancellationCode)),function wu(n){return _p(n)&&vc(n.url)}(E)?this.events.next(new Nm(E.url)):u.resolve(!1);else{this.events.next(new mu(u.id,this.urlSerializer.serialize(u.extractedUrl),E,u.targetSnapshot??void 0));try{u.resolve(t.errorHandler(E))}catch(b){u.reject(b)}}return No.E}))}))}cancelNavigationTransition(t,r,o){const u=new Pl(t.id,this.urlSerializer.serialize(t.extractedUrl),r,o);this.events.next(u),t.resolve(!1)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function jT(n){return n!==Ec}let $T=(()=>{class n{buildTitle(t){let r,o=t.root;for(;void 0!==o;)r=this.getResolvedTitleForRoute(o)??r,o=o.children.find(u=>u.outlet===xt);return r}getResolvedTitleForRoute(t){return t.data[Ki]}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=g.Yz7({token:n,factory:function(){return(0,g.f3M)(ox)},providedIn:"root"})}return n})(),ox=(()=>{class n extends $T{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}static#e=this.\u0275fac=function(r){return new(r||n)(g.LFG(Me))};static#t=this.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ax=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=g.Yz7({token:n,factory:function(){return(0,g.f3M)(HT)},providedIn:"root"})}return n})();class rI{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let HT=(()=>{class n extends rI{static#e=this.\u0275fac=function(){let t;return function(o){return(t||(t=g.n5z(n)))(o||n)}}();static#t=this.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const Zm=new g.OlP("",{providedIn:"root",factory:()=>({})});let GT=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=g.Yz7({token:n,factory:function(){return(0,g.f3M)(zT)},providedIn:"root"})}return n})(),zT=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var ql=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(ql||{});function Ca(n,e){n.events.pipe(Pi(t=>t instanceof wa||t instanceof Pl||t instanceof mu||t instanceof Uo),(0,Vt.U)(t=>t instanceof wa||t instanceof Uo?ql.COMPLETE:t instanceof Pl&&(0===t.code||1===t.code)?ql.REDIRECTING:ql.FAILED),Pi(t=>t!==ql.REDIRECTING),Ys(1)).subscribe(()=>{e()})}function Tp(n){throw n}function iI(n,e,t){return e.parse("/")}const sI={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},oI={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let $o=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,g.f3M)(g.c2e),this.isNgZoneEnabled=!1,this._events=new Ss.x,this.options=(0,g.f3M)(Zm,{optional:!0})||{},this.pendingTasks=(0,g.f3M)(g.HDt),this.errorHandler=this.options.errorHandler||Tp,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||iI,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,g.f3M)(GT),this.routeReuseStrategy=(0,g.f3M)(ax),this.titleStrategy=(0,g.f3M)($T),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=(0,g.f3M)(Dh,{optional:!0})?.flat()??[],this.navigationTransitions=(0,g.f3M)(D_),this.urlSerializer=(0,g.f3M)(st),this.location=(0,g.f3M)(We),this.componentInputBindingEnabled=!!(0,g.f3M)(Wr,{optional:!0}),this.eventsSubscription=new fc.w0,this.isNgZoneEnabled=(0,g.f3M)(g.R0b)instanceof g.R0b&&g.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new k,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Ia(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const t=this.navigationTransitions.events.subscribe(r=>{try{const{currentTransition:o}=this.navigationTransitions;if(null===o)return void(qT(r)&&this._events.next(r));if(r instanceof Ol)jT(o.source)&&(this.browserUrlTree=o.extractedUrl);else if(r instanceof Uo)this.rawUrlTree=o.rawUrl;else if(r instanceof fp){if("eager"===this.urlUpdateStrategy){if(!o.extras.skipLocationChange){const u=this.urlHandlingStrategy.merge(o.urlAfterRedirects,o.rawUrl);this.setBrowserUrl(u,o)}this.browserUrlTree=o.urlAfterRedirects}}else if(r instanceof xm)this.currentUrlTree=o.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(o.urlAfterRedirects,o.rawUrl),this.routerState=o.targetRouterState,"deferred"===this.urlUpdateStrategy&&(o.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,o),this.browserUrlTree=o.urlAfterRedirects);else if(r instanceof Pl)0!==r.code&&1!==r.code&&(this.navigated=!0),(3===r.code||2===r.code)&&this.restoreHistory(o);else if(r instanceof Nm){const u=this.urlHandlingStrategy.merge(r.url,o.currentRawUrl),l={skipLocationChange:o.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||jT(o.source)};this.scheduleNavigation(u,Ec,null,l,{resolve:o.resolve,reject:o.reject,promise:o.promise})}r instanceof mu&&this.restoreHistory(o,!0),r instanceof wa&&(this.navigated=!0),qT(r)&&this._events.next(r)}catch(o){this.navigationTransitions.transitionAbortSubject.next(o)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Ec,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,o){const u={replaceUrl:!0},l=o?.navigationId?o:null;if(o){const E={...o};delete E.navigationId,delete E.\u0275routerPageId,0!==Object.keys(E).length&&(u.state=E)}const m=this.parseUrl(t);this.scheduleNavigation(m,r,l,u)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(X),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){const{relativeTo:o,queryParams:u,fragment:l,queryParamsHandling:m,preserveFragment:E}=r,b=E?this.currentUrlTree.fragment:l;let R,M=null;switch(m){case"merge":M={...this.currentUrlTree.queryParams,...u};break;case"preserve":M=this.currentUrlTree.queryParams;break;default:M=u||null}null!==M&&(M=this.removeEmptyProps(M));try{R=bm(o?o.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof t[0]||!t[0].startsWith("/"))&&(t=[]),R=this.currentUrlTree.root}return Tm(R,t,M,b??null)}navigateByUrl(t,r={skipLocationChange:!1}){const o=vc(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(u,Ec,null,r)}navigate(t,r={skipLocationChange:!1}){return function ux(n){for(let e=0;e<n.length;e++)if(null==n[e])throw new g.vHH(4008,!1)}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(o){r=this.malformedUriErrorHandler(o,this.urlSerializer,t)}return r}isActive(t,r){let o;if(o=!0===r?{...sI}:!1===r?{...oI}:r,vc(t))return mc(this.currentUrlTree,t,o);const u=this.parseUrl(t);return mc(this.currentUrlTree,u,o)}removeEmptyProps(t){return Object.keys(t).reduce((r,o)=>{const u=t[o];return null!=u&&(r[o]=u),r},{})}scheduleNavigation(t,r,o,u,l){if(this.disposed)return Promise.resolve(!1);let m,E,b;l?(m=l.resolve,E=l.reject,b=l.promise):b=new Promise((R,H)=>{m=R,E=H});const M=this.pendingTasks.add();return Ca(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(M))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:t,extras:u,resolve:m,reject:E,promise:b,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),b.catch(R=>Promise.reject(R))}setBrowserUrl(t,r){const o=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl){const l={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(o,"",l)}else{const u={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId+1)};this.location.go(o,"",u)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const u=this.currentPageId-this.browserPageId;0!==u?this.location.historyGo(u):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===u&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function qT(n){return!(n instanceof xm||n instanceof Nm)}class WT{}let KT=(()=>{class n{constructor(t,r,o,u,l){this.router=t,this.injector=o,this.preloadingStrategy=u,this.loader=l}setUpPreloading(){this.subscription=this.router.events.pipe(Pi(t=>t instanceof wa),Wi(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const o=[];for(const u of r){u.providers&&!u._injector&&(u._injector=(0,g.MMx)(u.providers,t,`Route: ${u.path}`));const l=u._injector??t,m=u._loadedInjector??l;(u.loadChildren&&!u._loadedRoutes&&void 0===u.canLoad||u.loadComponent&&!u._loadedComponent)&&o.push(this.preloadConfig(l,u)),(u.children||u._loadedRoutes)&&o.push(this.processRoutes(m,u.children??u._loadedRoutes))}return(0,ln.D)(o).pipe((0,Ri.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let o;o=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):(0,yt.of)(null);const u=o.pipe((0,Pr.z)(l=>null===l?(0,yt.of)(void 0):(r._loadedRoutes=l.routes,r._loadedInjector=l.injector,this.processRoutes(l.injector??t,l.routes))));if(r.loadComponent&&!r._loadedComponent){const l=this.loader.loadComponent(r);return(0,ln.D)([u,l]).pipe((0,Ri.J)())}return u})}static#e=this.\u0275fac=function(r){return new(r||n)(g.LFG($o),g.LFG(g.Sil),g.LFG(g.lqb),g.LFG(WT),g.LFG(I_))};static#t=this.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const b_=new g.OlP("");let aI=(()=>{class n{constructor(t,r,o,u,l={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=o,this.zone=u,this.options=l,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},l.scrollPositionRestoration=l.scrollPositionRestoration||"disabled",l.anchorScrolling=l.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Ol?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof wa?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof Uo&&0===t.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof vh&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new vh(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){g.$Z()};static#t=this.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac})}return n})();function Iu(n,e){return{\u0275kind:n,\u0275providers:e}}function uI(){const n=(0,g.f3M)(g.zs3);return e=>{const t=n.get(g.z2F);if(e!==t.components[0])return;const r=n.get($o),o=n.get(S_);1===n.get(Km)&&r.initialNavigation(),n.get(cI,null,g.XFs.Optional)?.setUpPreloading(),n.get(b_,null,g.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),o.closed||(o.next(),o.complete(),o.unsubscribe())}}const S_=new g.OlP("",{factory:()=>new Ss.x}),Km=new g.OlP("",{providedIn:"root",factory:()=>1}),cI=new g.OlP("");function lI(n){return Iu(0,[{provide:cI,useExisting:KT},{provide:WT,useExisting:n}])}const A_=new g.OlP("ROUTER_FORROOT_GUARD"),dI=[We,{provide:st,useClass:Tt},$o,Ic,{provide:Bo,useFactory:function Ap(n){return n.routerState.root},deps:[$o]},I_,[]];function M_(){return new g.PXZ("Router",$o)}let x_=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[dI,[],{provide:Dh,multi:!0,useValue:t},{provide:A_,useFactory:Jm,deps:[[$o,new g.FiY,new g.tp0]]},{provide:Zm,useValue:r||{}},r?.useHash?{provide:Ve,useClass:Oe}:{provide:Ve,useClass:qe},{provide:b_,useFactory:()=>{const n=(0,g.f3M)(ir),e=(0,g.f3M)(g.R0b),t=(0,g.f3M)(Zm),r=(0,g.f3M)(D_),o=(0,g.f3M)(st);return t.scrollOffset&&n.setOffset(t.scrollOffset),new aI(o,r,n,e,t)}},r?.preloadingStrategy?lI(r.preloadingStrategy).\u0275providers:[],{provide:g.PXZ,multi:!0,useFactory:M_},r?.initialNavigation?px(r):[],r?.bindToComponentInputs?Iu(8,[Ll,{provide:Wr,useExisting:Ll}]).\u0275providers:[],[{provide:Xm,useFactory:uI},{provide:g.tb,multi:!0,useExisting:Xm}]]}}static forChild(t){return{ngModule:n,providers:[{provide:Dh,multi:!0,useValue:t}]}}static#e=this.\u0275fac=function(r){return new(r||n)(g.LFG(A_,8))};static#t=this.\u0275mod=g.oAB({type:n});static#n=this.\u0275inj=g.cJS({})}return n})();function Jm(n){return"guarded"}function px(n){return["disabled"===n.initialNavigation?Iu(3,[{provide:g.ip1,multi:!0,useFactory:()=>{const e=(0,g.f3M)($o);return()=>{e.setUpLocationChangeListener()}}},{provide:Km,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Iu(2,[{provide:Km,useValue:0},{provide:g.ip1,multi:!0,deps:[g.zs3],useFactory:e=>{const t=e.get(Ne,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const o=e.get($o),u=e.get(S_);Ca(o,()=>{r(!0)}),e.get(D_).afterPreactivation=()=>(r(!0),u.closed?(0,yt.of)(void 0):u),o.initialNavigation()}))}}]).\u0275providers:[]]}const Xm=new g.OlP(""),ey=[];let rS=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=g.oAB({type:n});static#n=this.\u0275inj=g.cJS({imports:[x_.forRoot(ey),x_]})}return n})(),N_=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=g.Xpm({type:n,selectors:[["app-navbar"]],decls:4,vars:0,consts:[[1,"nav-wrapper"],["href","",1,"brand-logo","center"]],template:function(r,o){1&r&&(g.TgZ(0,"nav")(1,"div",0)(2,"a",1),g._uU(3,"App Contacts"),g.qZA()()())}})}return n})();var ty=O(6321),Vn=O(2793);function bh(){return(0,Oi.e)((n,e)=>{let t,r=!1;n.subscribe((0,dr.x)(e,o=>{const u=t;t=o,r&&e.next([u,o]),r=!0}))})}var rt,R_=O(3997),iS=(O(8977),O(3399)),we=O(5861),Du=O(7592),ny=O(4537),Ac=O(7879),an=O(9058),O_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},io={},ry=ry||{},kt=O_||self;function P_(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function iy(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var k_="closure_uid_"+(1e9*Math.random()>>>0),yx=0;function vx(n,e,t){return n.call.apply(n.bind,arguments)}function sy(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var o=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(o,r),n.apply(e,o)}}return function(){return n.apply(e,arguments)}}function Fi(n,e,t){return(Fi=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?vx:sy).apply(null,arguments)}function Th(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function kr(n,e){function t(){}t.prototype=e.prototype,n.$=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.ac=function(r,o,u){for(var l=Array(arguments.length-2),m=2;m<arguments.length;m++)l[m-2]=arguments[m];return e.prototype[o].apply(r,l)}}function As(){this.s=this.s,this.o=this.o}As.prototype.s=!1,As.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function sS(n){Object.prototype.hasOwnProperty.call(n,k_)&&n[k_]||(n[k_]=++yx)}(this)},As.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const oy=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function Wl(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function xp(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(P_(r)){const o=n.length||0,u=r.length||0;n.length=o+u;for(let l=0;l<u;l++)n[o+l]=r[l]}else n.push(r)}}function Cr(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}Cr.prototype.h=function(){this.defaultPrevented=!0};var L_=function(){if(!kt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{kt.addEventListener("test",()=>{},e),kt.removeEventListener("test",()=>{},e)}catch{}return n}();function Zl(n){return/^[\s\xa0]*$/.test(n)}function Kl(){var n=kt.navigator;return n&&(n=n.userAgent)?n:""}function Cu(n){return-1!=Kl().indexOf(n)}function Np(n){return Np[" "](n),n}Np[" "]=function(){};var U_,n,oS=Cu("Opera"),Yl=Cu("Trident")||Cu("MSIE"),mI=Cu("Edge"),V_=mI||Yl,ay=Cu("Gecko")&&!(-1!=Kl().toLowerCase().indexOf("webkit")&&!Cu("Edge"))&&!(Cu("Trident")||Cu("MSIE"))&&!Cu("Edge"),yI=-1!=Kl().toLowerCase().indexOf("webkit")&&!Cu("Edge");function vI(){var n=kt.document;return n?n.documentMode:void 0}e:{var _I="",B_=(n=Kl(),ay?/rv:([^\);]+)(\)|;)/.exec(n):mI?/Edge\/([\d\.]+)/.exec(n):Yl?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):yI?/WebKit\/(\S+)/.exec(n):oS?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(B_&&(_I=B_?B_[1]:""),Yl){var Sh=vI();if(null!=Sh&&Sh>parseFloat(_I)){U_=String(Sh);break e}}U_=_I}var EI=kt.document&&Yl&&(vI()||parseInt(U_,10))||void 0;function Ql(n,e){if(Cr.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(ay){e:{try{Np(e.nodeName);var o=!0;break e}catch{}o=!1}o||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:uy[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Ql.$.h.call(this)}}kr(Ql,Cr);var uy={2:"touch",3:"pen",4:"mouse"};Ql.prototype.h=function(){Ql.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Pp="closure_listenable_"+(1e6*Math.random()|0),II=0;function aS(n,e,t,r,o){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.la=o,this.key=++II,this.fa=this.ia=!1}function kp(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function DI(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function Fp(n){const e={};for(const t in n)e[t]=n[t];return e}const CI="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Jl(n,e){let t,r;for(let o=1;o<arguments.length;o++){for(t in r=arguments[o],r)n[t]=r[t];for(let u=0;u<CI.length;u++)t=CI[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Mc(n){this.src=n,this.g={},this.h=0}function j_(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],o=oy(r,e);(u=0<=o)&&Array.prototype.splice.call(r,o,1),u&&(kp(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function cy(n,e,t,r){for(var o=0;o<n.length;++o){var u=n[o];if(!u.fa&&u.listener==e&&u.capture==!!t&&u.la==r)return o}return-1}Mc.prototype.add=function(n,e,t,r,o){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var l=cy(n,e,r,o);return-1<l?(e=n[l],t||(e.ia=!1)):((e=new aS(e,this.src,u,!!r,o)).ia=t,n.push(e)),e};var $_="closure_lm_"+(1e6*Math.random()|0),H_={};function bI(n,e,t,r,o){if(r&&r.once)return ly(n,e,t,r,o);if(Array.isArray(e)){for(var u=0;u<e.length;u++)bI(n,e[u],t,r,o);return null}return t=W_(t),n&&n[Pp]?n.O(e,t,iy(r)?!!r.capture:!!r,o):G_(n,e,t,!1,r,o)}function G_(n,e,t,r,o,u){if(!e)throw Error("Invalid event type");var l=iy(o)?!!o.capture:!!o,m=q_(n);if(m||(n[$_]=m=new Mc(n)),(t=m.add(e,t,r,l,u)).proxy)return t;if(r=function TI(){const e=lS;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)L_||(o=l),void 0===o&&(o=!1),n.addEventListener(e.toString(),r,o);else if(n.attachEvent)n.attachEvent(z_(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function ly(n,e,t,r,o){if(Array.isArray(e)){for(var u=0;u<e.length;u++)ly(n,e[u],t,r,o);return null}return t=W_(t),n&&n[Pp]?n.P(e,t,iy(r)?!!r.capture:!!r,o):G_(n,e,t,!0,r,o)}function cS(n,e,t,r,o){if(Array.isArray(e))for(var u=0;u<e.length;u++)cS(n,e[u],t,r,o);else r=iy(r)?!!r.capture:!!r,t=W_(t),n&&n[Pp]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=cy(u=n.g[e],t,r,o))&&(kp(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=q_(n))&&(e=n.g[e.toString()],n=-1,e&&(n=cy(e,t,r,o)),(t=-1<n?e[n]:null)&&Lp(t))}function Lp(n){if("number"!=typeof n&&n&&!n.fa){var e=n.src;if(e&&e[Pp])j_(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(z_(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=q_(e))?(j_(t,n),0==t.h&&(t.src=null,e[$_]=null)):kp(n)}}}function z_(n){return n in H_?H_[n]:H_[n]="on"+n}function lS(n,e){if(n.fa)n=!0;else{e=new Ql(e,this);var t=n.listener,r=n.la||n.src;n.ia&&Lp(n),n=t.call(r,e)}return n}function q_(n){return(n=n[$_])instanceof Mc?n:null}var dy="__closure_events_fn_"+(1e9*Math.random()>>>0);function W_(n){return"function"==typeof n?n:(n[dy]||(n[dy]=function(e){return n.handleEvent(e)}),n[dy])}function Kr(){As.call(this),this.i=new Mc(this),this.S=this,this.J=null}function Ei(n,e){var t,r=n.J;if(r)for(t=[];r;r=r.J)t.push(r);if(n=n.S,r=e.type||e,"string"==typeof e)e=new Cr(e,n);else if(e instanceof Cr)e.target=e.target||n;else{var o=e;Jl(e=new Cr(r,n),o)}if(o=!0,t)for(var u=t.length-1;0<=u;u--){var l=e.g=t[u];o=hy(l,r,!0,e)&&o}if(o=hy(l=e.g=n,r,!0,e)&&o,o=hy(l,r,!1,e)&&o,t)for(u=0;u<t.length;u++)o=hy(l=e.g=t[u],r,!1,e)&&o}function hy(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var o=!0,u=0;u<e.length;++u){var l=e[u];if(l&&!l.fa&&l.capture==t){var m=l.listener,E=l.la||l.src;l.ia&&j_(n.i,l),o=!1!==m.call(E,r)&&o}}return o&&!r.defaultPrevented}kr(Kr,As),Kr.prototype[Pp]=!0,Kr.prototype.removeEventListener=function(n,e,t,r){cS(this,n,e,t,r)},Kr.prototype.N=function(){if(Kr.$.N.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)kp(t[r]);delete n.g[e],n.h--}}this.J=null},Kr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Kr.prototype.P=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var SI=kt.JSON.stringify;function MI(){var n=xI;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Z_=new class AI{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new _x,n=>n.reset());class _x{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function K_(n){var e=1;n=n.split(":");const t=[];for(;0<e&&n.length;)t.push(n.shift()),e--;return n.length&&t.push(n.join(":")),t}function xc(n){kt.setTimeout(()=>{throw n},0)}let Xl,Vp=!1,xI=new class Ho{constructor(){this.h=this.g=null}add(e,t){const r=Z_.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}},NI=()=>{const n=kt.Promise.resolve(void 0);Xl=()=>{n.then(Y_)}};var Y_=()=>{for(var n;n=MI();){try{n.h.call(n.g)}catch(t){xc(t)}var e=Z_;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Vp=!1};function Ms(n,e){Kr.call(this),this.h=n||1,this.g=e||kt,this.j=Fi(this.qb,this),this.l=Date.now()}function fy(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}function Q_(n,e,t){if("function"==typeof n)t&&(n=Fi(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Fi(n.handleEvent,n)}return 2147483647<Number(e)?-1:kt.setTimeout(n,e||0)}function dS(n){n.g=Q_(()=>{n.g=null,n.i&&(n.i=!1,dS(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}kr(Ms,Kr),(rt=Ms.prototype).ga=!1,rt.T=null,rt.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Ei(this,"tick"),this.ga&&(fy(this),this.start()))}},rt.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},rt.N=function(){Ms.$.N.call(this),fy(this),delete this.g};class li extends As{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:dS(this)}N(){super.N(),this.g&&(kt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Up(n){As.call(this),this.h=n,this.g={}}kr(Up,As);var py=[];function RI(n,e,t,r){Array.isArray(t)||(t&&(py[0]=t.toString()),t=py);for(var o=0;o<t.length;o++){var u=bI(e,t[o],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function OI(n){DI(n.g,function(e,t){this.g.hasOwnProperty(t)&&Lp(e)},n),n.g={}}function Ah(){this.g=!0}function Mh(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function LI(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var o=r[1];if(Array.isArray(o)&&!(1>o.length)){var u=o[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var l=1;l<o.length;l++)o[l]=""}}}return SI(t)}catch{return e}}(n,t)+(r?" "+r:"")})}Up.prototype.N=function(){Up.$.N.call(this),OI(this)},Up.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Ah.prototype.Ea=function(){this.g=!1},Ah.prototype.info=function(){};var ed={},VI=null;function gy(){return VI=VI||new Kr}function J_(n){Cr.call(this,ed.Ta,n)}function ba(n){const e=gy();Ei(e,new J_(e))}function Ta(n,e){Cr.call(this,ed.STAT_EVENT,n),this.stat=e}function Fr(n){const e=gy();Ei(e,new Ta(e,n))}function UI(n,e){Cr.call(this,ed.Ua,n),this.size=e}function Bp(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return kt.setTimeout(function(){n()},e)}ed.Ta="serverreachability",kr(J_,Cr),ed.STAT_EVENT="statevent",kr(Ta,Cr),ed.Ua="timingevent",kr(UI,Cr);var jp={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},X_={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function $p(){}function Hp(){}$p.prototype.h=null;var t0,Nh={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function my(){Cr.call(this,"d")}function e0(){Cr.call(this,"c")}function yy(){}function Gp(n,e,t,r){this.l=n,this.j=e,this.m=t,this.W=r||1,this.U=new Up(this),this.P=wx,this.V=new Ms(n=V_?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new n0}function n0(){this.i=null,this.g="",this.h=!1}kr(my,Cr),kr(e0,Cr),kr(yy,$p),yy.prototype.g=function(){return new XMLHttpRequest},yy.prototype.i=function(){return{}},t0=new yy;var wx=45e3,r0={},s0={};function BI(n,e,t){n.L=1,n.v=Ph(so(e)),n.s=t,n.S=!0,o0(n,null)}function o0(n,e){n.G=Date.now(),_y(n),n.A=so(n.v);var t=n.A,r=n.W;Array.isArray(r)||(r=[String(r)]),l0(t.i,"t",r),n.C=0,t=n.l.J,n.h=new n0,n.g=D0(n.l,t?e:null,!n.s),0<n.O&&(n.M=new li(Fi(n.Pa,n,n.g),n.O)),RI(n.U,n.g,"readystatechange",n.nb),e=n.I?Fp(n.I):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.A,n.u,n.s,e)):(n.u="GET",n.g.ha(n.A,n.u,null,e)),ba(),function PI(n,e,t,r,o,u){n.info(function(){if(n.g)if(u)for(var l="",m=u.split("&"),E=0;E<m.length;E++){var b=m[E].split("=");if(1<b.length){var M=b[0];b=b[1];var R=M.split("_");l=2<=R.length&&"type"==R[1]?l+(M+"=")+b+"&":l+(M+"=redacted&")}}else l=null;else l=u;return"XMLHTTP REQ ("+r+") [attempt "+o+"]: "+e+"\n"+t+"\n"+l})}(n.j,n.u,n.A,n.m,n.W,n.s)}function a0(n){return!!n.g&&"GET"==n.u&&2!=n.L&&n.l.Ha}function hS(n,e,t){let o,r=!0;for(;!n.J&&n.C<t.length;){if(o=vy(n,t),o==s0){4==e&&(n.o=4,Fr(14),r=!1),Mh(n.j,n.m,null,"[Incomplete Response]");break}if(o==r0){n.o=4,Fr(15),Mh(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Mh(n.j,n.m,o,null),wy(n,o)}a0(n)&&o!=s0&&o!=r0&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Fr(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.ba&&(n.ba=!0,(e=n.l).g==n&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),Sy(e),e.M=!0,Fr(11))):(Mh(n.j,n.m,t,"[Invalid Chunked Response]"),Nc(n),qp(n))}function vy(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?s0:(t=Number(e.substring(t,r)),isNaN(t)?r0:(r+=1)+t>e.length?s0:(e=e.slice(r,r+t),n.C=r+t,e))}function _y(n){n.Y=Date.now()+n.P,u0(n,n.P)}function u0(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Bp(Fi(n.lb,n),e)}function zp(n){n.B&&(kt.clearTimeout(n.B),n.B=null)}function qp(n){0==n.l.H||n.J||w0(n.l,n)}function Nc(n){zp(n);var e=n.M;e&&"function"==typeof e.sa&&e.sa(),n.M=null,fy(n.V),OI(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.sa())}function wy(n,e){try{var t=n.l;if(0!=t.H&&(t.g==n||Zp(t.i,n)))if(!n.K&&Zp(t.i,n)&&3==t.H){try{var r=t.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var o=r;if(0==o[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<n.G))break e;Ay(t),eg(t)}Ty(t),Fr(18)}}else t.Fa=o[1],0<t.Fa-t.V&&37500>o[2]&&t.G&&0==t.A&&!t.v&&(t.v=Bp(Fi(t.ib,t),6e3));if(1>=_S(t.i)&&t.oa){try{t.oa()}catch{}t.oa=void 0}}else zo(t,11)}else if((n.K||t.g==n)&&Ay(t),!Zl(e))for(o=t.Ja.g.parse(e),e=0;e<o.length;e++){let b=o[e];if(t.V=b[0],b=b[1],2==t.H)if("c"==b[0]){t.K=b[1],t.pa=b[2];const M=b[3];null!=M&&(t.ra=M,t.l.info("VER="+t.ra));const R=b[4];null!=R&&(t.Ga=R,t.l.info("SVER="+t.Ga));const H=b[5];null!=H&&"number"==typeof H&&0<H&&(t.L=r=1.5*H,t.l.info("backChannelRequestTimeoutMs_="+r)),r=t;const te=n.g;if(te){const be=te.g?te.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(be){var u=r.i;u.g||-1==be.indexOf("spdy")&&-1==be.indexOf("quic")&&-1==be.indexOf("h2")||(u.j=u.l,u.g=new Set,u.h&&(Iy(u,u.h),u.h=null))}if(r.F){const Ue=te.g?te.g.getResponseHeader("X-HTTP-Session-Id"):null;Ue&&(r.Da=Ue,Un(r.I,r.F,Ue))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-n.G,t.l.info("Handshake RTT: "+t.S+"ms"));var l=n;if((r=t).wa=I0(r,r.J?r.pa:null,r.Y),l.K){ZI(r.i,l);var m=l,E=r.L;E&&m.setTimeout(E),m.B&&(zp(m),_y(m)),r.g=l}else tD(r);0<t.j.length&&od(t)}else"stop"!=b[0]&&"close"!=b[0]||zo(t,7);else 3==t.H&&("stop"==b[0]||"close"==b[0]?"stop"==b[0]?zo(t,7):v0(t):"noop"!=b[0]&&t.h&&t.h.Aa(b),t.A=0)}ba()}catch{}}function c0(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(P_(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function jI(n){if(n.ta&&"function"==typeof n.ta)return n.ta();if(!n.Z||"function"!=typeof n.Z){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(P_(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function Ut(n){if(n.Z&&"function"==typeof n.Z)return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(P_(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),o=r.length,u=0;u<o;u++)e.call(void 0,r[u],t&&t[u],n)}(rt=Gp.prototype).setTimeout=function(n){this.P=n},rt.nb=function(n){n=n.target;const e=this.M;e&&3==Go(n)?e.l():this.Pa(n)},rt.Pa=function(n){try{if(n==this.g)e:{const M=Go(this.g);var e=this.g.Ia();if(this.g.da(),!(3>M)&&(3!=M||V_||this.g&&(this.h.h||this.g.ja()||g0(this.g)))){this.J||4!=M||7==e||ba(),zp(this);var t=this.g.da();this.ca=t;t:if(a0(this)){var r=g0(this.g);n="";var o=r.length,u=4==Go(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Nc(this),qp(this);var l="";break t}this.h.i=new kt.TextDecoder}for(e=0;e<o;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==o-1});r.splice(0,o),this.h.g+=n,this.C=0,l=this.h.g}else l=this.g.ja();if(this.i=200==t,function kI(n,e,t,r,o,u,l){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+o+"]: "+e+"\n"+t+"\n"+u+" "+l})}(this.j,this.u,this.A,this.m,this.W,M,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var m,E=this.g;if((m=E.g?E.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Zl(m)){var b=m;break t}}b=null}if(!(t=b)){this.i=!1,this.o=3,Fr(12),Nc(this),qp(this);break e}Mh(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,wy(this,t)}this.S?(hS(this,M,l),V_&&this.i&&3==M&&(RI(this.U,this.V,"tick",this.mb),this.V.start())):(Mh(this.j,this.m,l,null),wy(this,l)),4==M&&Nc(this),this.i&&!this.J&&(4==M?w0(this.l,this):(this.i=!1,_y(this)))}else(function m0(n){const e={};n=(n.g&&2<=Go(n)&&n.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<n.length;r++){if(Zl(n[r]))continue;var t=K_(n[r]);const o=t[0];if("string"!=typeof(t=t[1]))continue;t=t.trim();const u=e[o]||[];e[o]=u,u.push(t)}!function uS(n,e){for(const t in n)e.call(void 0,n[t],t,n)}(e,function(r){return r.join(", ")})})(this.g),400==t&&0<l.indexOf("Unknown SID")?(this.o=3,Fr(12)):(this.o=0,Fr(13)),Nc(this),qp(this)}}}catch{}},rt.mb=function(){if(this.g){var n=Go(this.g),e=this.g.ja();this.C<e.length&&(zp(this),hS(this,n,e),this.i&&4!=n&&_y(this))}},rt.cancel=function(){this.J=!0,Nc(this)},rt.lb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function FI(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(ba(),Fr(17)),Nc(this),this.o=2,qp(this)):u0(this,this.Y-n)};var td=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function nd(n){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof nd){this.h=n.h,bu(this,n.j),this.s=n.s,this.g=n.g,Rh(this,n.m),this.l=n.l;var e=n.i,t=new Wp;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),Oh(this,t),this.o=n.o}else n&&(e=String(n).match(td))?(this.h=!1,bu(this,e[1]||"",!0),this.s=rd(e[2]||""),this.g=rd(e[3]||"",!0),Rh(this,e[4]),this.l=rd(e[5]||"",!0),Oh(this,e[6]||"",!0),this.o=rd(e[7]||"")):(this.h=!1,this.i=new Wp(null,this.h))}function so(n){return new nd(n)}function bu(n,e,t){n.j=t?rd(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Rh(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function Oh(n,e,t){e instanceof Wp?(n.i=e,function mS(n,e){e&&!n.j&&(Rc(n),n.i=null,n.g.forEach(function(t,r){var o=r.toLowerCase();r!=o&&(zI(this,r),l0(this,o,t))},n)),n.j=e}(n.i,n.h)):(t||(e=id(e,gS)),n.i=new Wp(e,n.h))}function Un(n,e,t){n.i.set(e,t)}function Ph(n){return Un(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function rd(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function id(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,HI),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function HI(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}nd.prototype.toString=function(){var n=[],e=this.j;e&&n.push(id(e,Ey,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(id(e,Ey,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(id(t,"/"==t.charAt(0)?pS:fS,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",id(t,GI)),n.join("")};var Ey=/[#\/\?@]/g,fS=/[#\?:]/g,pS=/[#\?]/g,gS=/[#\?@]/g,GI=/#/g;function Wp(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Rc(n){n.g||(n.g=new Map,n.h=0,n.i&&function $I(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),o=null;if(0<=r){var u=n[t].substring(0,r);o=n[t].substring(r+1)}else u=n[t];e(u,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function zI(n,e){Rc(n),e=sd(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function qI(n,e){return Rc(n),e=sd(n,e),n.g.has(e)}function l0(n,e,t){zI(n,e),0<t.length&&(n.i=null,n.g.set(sd(n,e),Wl(t)),n.h+=t.length)}function sd(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function ps(n){this.l=n||vS,n=kt.PerformanceNavigationTiming?0<(n=kt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(kt.g&&kt.g.Ka&&kt.g.Ka()&&kt.g.Ka().ec),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(rt=Wp.prototype).add=function(n,e){Rc(this),this.i=null,n=sd(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},rt.forEach=function(n,e){Rc(this),this.g.forEach(function(t,r){t.forEach(function(o){n.call(e,o,r,this)},this)},this)},rt.ta=function(){Rc(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const o=n[r];for(let u=0;u<o.length;u++)t.push(e[r])}return t},rt.Z=function(n){Rc(this);let e=[];if("string"==typeof n)qI(this,n)&&(e=e.concat(this.g.get(sd(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},rt.set=function(n,e){return Rc(this),this.i=null,qI(this,n=sd(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},rt.get=function(n,e){return n&&0<(n=this.Z(n)).length?String(n[0]):e},rt.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const u=encodeURIComponent(String(r)),l=this.Z(r);for(r=0;r<l.length;r++){var o=u;""!==l[r]&&(o+="="+encodeURIComponent(String(l[r]))),n.push(o)}}return this.i=n.join("&")};var vS=10;function WI(n){return!!n.h||!!n.g&&n.g.size>=n.j}function _S(n){return n.h?1:n.g?n.g.size:0}function Zp(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Iy(n,e){n.g?n.g.add(e):n.h=e}function ZI(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function KI(n){if(null!=n.h)return n.i.concat(n.h.F);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.F);return e}return Wl(n.i)}ps.prototype.cancel=function(){if(this.i=KI(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}};var wS=class{stringify(n){return kt.JSON.stringify(n,void 0)}parse(n){return kt.JSON.parse(n,void 0)}};function YI(){this.g=new wS}function ES(n,e,t){const r=t||"";try{c0(n,function(o,u){let l=o;iy(o)&&(l=SI(o)),e.push(r+u+"="+encodeURIComponent(l))})}catch(o){throw e.push(r+"type="+encodeURIComponent("_badmap")),o}}function kh(n,e,t,r,o){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,o(r)}catch{}}function Kp(n){this.l=n.fc||null,this.j=n.ob||!1}function Dy(n,e){Kr.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=d0,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}kr(Kp,$p),Kp.prototype.g=function(){return new Dy(this.l,this.j)},Kp.prototype.i=function(n){return function(){return n}}({}),kr(Dy,Kr);var d0=0;function QI(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}function Yp(n){n.readyState=4,n.l=null,n.j=null,n.A=null,gs(n)}function gs(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(rt=Dy.prototype).open=function(n,e){if(this.readyState!=d0)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,gs(this)},rt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||kt).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},rt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Yp(this)),this.readyState=d0},rt.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,gs(this)),this.g&&(this.readyState=3,gs(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof kt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;QI(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))},rt.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Yp(this):gs(this),3==this.readyState&&QI(this)}},rt.Za=function(n){this.g&&(this.response=this.responseText=n,Yp(this))},rt.Ya=function(n){this.g&&(this.response=n,Yp(this))},rt.ka=function(){this.g&&Yp(this)},rt.setRequestHeader=function(n,e){this.v.append(n,e)},rt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},rt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Dy.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var h0=kt.JSON.parse;function hr(n){Kr.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=f0,this.L=this.M=!1}kr(hr,Kr);var f0="",DS=/^https?$/i,JI=["POST","PUT"];function Qp(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,Cy(n),Jp(n)}function Cy(n){n.F||(n.F=!0,Ei(n,"complete"),Ei(n,"error"))}function CS(n){if(n.h&&typeof ry<"u"&&(!n.C[1]||4!=Go(n)||2!=n.da()))if(n.v&&4==Go(n))Q_(n.La,0,n);else if(Ei(n,"readystatechange"),4==Go(n)){n.h=!1;try{const l=n.da();e:switch(l){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===l){var o=String(n.I).match(td)[1]||null;!o&&kt.self&&kt.self.location&&(o=kt.self.location.protocol.slice(0,-1)),r=!DS.test(o?o.toLowerCase():"")}t=r}if(t)Ei(n,"complete"),Ei(n,"success");else{n.m=6;try{var u=2<Go(n)?n.g.statusText:""}catch{u=""}n.j=u+" ["+n.da()+"]",Cy(n)}}finally{Jp(n)}}}function Jp(n,e){if(n.g){p0(n);const t=n.g,r=n.C[0]?()=>{}:null;n.g=null,n.C=null,e||Ei(n,"ready");try{t.onreadystatechange=r}catch{}}}function p0(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(kt.clearTimeout(n.A),n.A=null)}function Go(n){return n.g?n.g.readyState:0}function g0(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case f0:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function Sa(n){let e="";return DI(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function y0(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=Sa(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Un(n,e,t))}function Xp(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function by(n){this.Ga=0,this.j=[],this.l=new Ah,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Xp("failFast",!1,n),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Xp("baseRetryDelayMs",5e3,n),this.hb=Xp("retryDelaySeedMs",1e4,n),this.eb=Xp("forwardChannelMaxRetries",2,n),this.xa=Xp("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.dc||!1,this.L=void 0,this.J=n&&n.supportsCrossDomainXhr||!1,this.K="",this.i=new ps(n&&n.concurrentRequestLimit),this.Ja=new YI,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.l.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.qa=void 0,n&&n.longPollingTimeout&&0<n.longPollingTimeout&&(this.qa=n.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function v0(n){if(eD(n),3==n.H){var e=n.W++,t=so(n.I);if(Un(t,"SID",n.K),Un(t,"RID",e),Un(t,"TYPE","terminate"),Oc(n,t),(e=new Gp(n,n.l,e)).L=2,e.v=Ph(so(t)),t=!1,kt.navigator&&kt.navigator.sendBeacon)try{t=kt.navigator.sendBeacon(e.v.toString(),"")}catch{}!t&&kt.Image&&((new Image).src=e.v,t=!0),t||(e.g=D0(e.l,null),e.g.ha(e.v)),e.G=Date.now(),_y(e)}rD(n)}function eg(n){n.g&&(Sy(n),n.g.cancel(),n.g=null)}function eD(n){eg(n),n.u&&(kt.clearTimeout(n.u),n.u=null),Ay(n),n.i.cancel(),n.m&&("number"==typeof n.m&&kt.clearTimeout(n.m),n.m=null)}function od(n){if(!WI(n.i)&&!n.m){n.m=!0;var e=n.Na;Xl||NI(),Vp||(Xl(),Vp=!0),xI.add(e,n),n.C=0}}function _0(n,e){var t;t=e?e.m:n.W++;const r=so(n.I);Un(r,"SID",n.K),Un(r,"RID",t),Un(r,"AID",n.V),Oc(n,r),n.o&&n.s&&y0(r,n.o,n.s),t=new Gp(n,n.l,t,n.C+1),null===n.o&&(t.I=n.s),e&&(n.j=e.F.concat(n.j)),e=bS(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),Iy(n.i,t),BI(t,r,e)}function Oc(n,e){n.na&&DI(n.na,function(t,r){Un(e,r,t)}),n.h&&c0({},function(t,r){Un(e,r,t)})}function bS(n,e,t){t=Math.min(n.j.length,t);var r=n.h?Fi(n.h.Va,n.h,n):null;e:{var o=n.j;let u=-1;for(;;){const l=["count="+t];-1==u?0<t?(u=o[0].g,l.push("ofs="+u)):u=0:l.push("ofs="+u);let m=!0;for(let E=0;E<t;E++){let b=o[E].g;const M=o[E].map;if(b-=u,0>b)u=Math.max(0,o[E].g-100),m=!1;else try{ES(M,l,"req"+b+"_")}catch{r&&r(M)}}if(m){r=l.join("&");break e}}}return n=n.j.splice(0,t),e.F=n,r}function tD(n){if(!n.g&&!n.u){n.ba=1;var e=n.Ma;Xl||NI(),Vp||(Xl(),Vp=!0),xI.add(e,n),n.A=0}}function Ty(n){return!(n.g||n.u||3<=n.A||(n.ba++,n.u=Bp(Fi(n.Ma,n),E0(n,n.A)),n.A++,0))}function Sy(n){null!=n.B&&(kt.clearTimeout(n.B),n.B=null)}function nD(n){n.g=new Gp(n,n.l,"rpc",n.ba),null===n.o&&(n.g.I=n.s),n.g.O=0;var e=so(n.wa);Un(e,"RID","rpc"),Un(e,"SID",n.K),Un(e,"AID",n.V),Un(e,"CI",n.G?"0":"1"),!n.G&&n.qa&&Un(e,"TO",n.qa),Un(e,"TYPE","xmlhttp"),Oc(n,e),n.o&&n.s&&y0(e,n.o,n.s),n.L&&n.g.setTimeout(n.L);var t=n.g;n=n.pa,t.L=1,t.v=Ph(so(e)),t.s=null,t.S=!0,o0(t,n)}function Ay(n){null!=n.v&&(kt.clearTimeout(n.v),n.v=null)}function w0(n,e){var t=null;if(n.g==e){Ay(n),Sy(n),n.g=null;var r=2}else{if(!Zp(n.i,e))return;t=e.F,ZI(n.i,e),r=1}if(0!=n.H)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.G;var o=n.C;Ei(r=gy(),new UI(r,t)),od(n)}else tD(n);else if(3==(o=e.o)||0==o&&0<e.ca||!(1==r&&function tg(n,e){return!(_S(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.j=e.F.concat(n.j),0):1==n.H||2==n.H||n.C>=(n.cb?0:n.eb)||(n.m=Bp(Fi(n.Na,n,e),E0(n,n.C)),n.C++,0)))}(n,e)||2==r&&Ty(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),o){case 1:zo(n,5);break;case 4:zo(n,10);break;case 3:zo(n,6);break;default:zo(n,2)}}function E0(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.isActive()||(t*=2),t*e}function zo(n,e){if(n.l.info("Error code "+e),2==e){var t=null;n.h&&(t=null);var r=Fi(n.pb,n);t||(t=new nd("//www.google.com/images/cleardot.gif"),kt.location&&"http"==kt.location.protocol||bu(t,"https"),Ph(t)),function IS(n,e){const t=new Ah;if(kt.Image){const r=new Image;r.onload=Th(kh,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Th(kh,t,r,"TestLoadImage: error",!1,e),r.onabort=Th(kh,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Th(kh,t,r,"TestLoadImage: timeout",!1,e),kt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Fr(2);n.H=0,n.h&&n.h.za(e),rD(n),eD(n)}function rD(n){if(n.H=0,n.ma=[],n.h){const e=KI(n.i);(0!=e.length||0!=n.j.length)&&(xp(n.ma,e),xp(n.ma,n.j),n.i.i.length=0,Wl(n.j),n.j.length=0),n.h.ya()}}function I0(n,e,t){var r=t instanceof nd?so(t):new nd(t);if(""!=r.g)e&&(r.g=e+"."+r.g),Rh(r,r.m);else{var o=kt.location;r=o.protocol,e=e?e+"."+o.hostname:o.hostname,o=+o.port;var u=new nd(null);r&&bu(u,r),e&&(u.g=e),o&&Rh(u,o),t&&(u.l=t),r=u}return e=n.Da,(t=n.F)&&e&&Un(r,t,e),Un(r,"VER",n.ra),Oc(n,r),r}function D0(n,e,t){if(e&&!n.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new hr(t&&n.Ha&&!n.va?new Kp({ob:!0}):n.va)).Oa(n.J),e}function iD(){}function My(){if(Yl&&!(10<=Number(EI)))throw Error("Environmental error: no available transport.")}function Ii(n,e){Kr.call(this),this.g=new by(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!Zl(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Zl(e)&&(this.g.F=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Fh(this)}function sD(n){my.call(this),n.__headers__&&(this.headers=n.__headers__,this.statusCode=n.__status__,delete n.__headers__,delete n.__status__);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function oD(){e0.call(this),this.status=1}function Fh(n){this.g=n}function qo(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function C0(n,e,t){t||(t=0);var r=Array(16);if("string"==typeof e)for(var o=0;16>o;++o)r[o]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(o=0;16>o;++o)r[o]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var u=n.g[3],l=(e=n.g[0])+(u^(t=n.g[1])&((o=n.g[2])^u))+r[0]+3614090360&4294967295;l=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=t+(l<<7&4294967295|l>>>25))+((l=u+(o^e&(t^o))+r[1]+3905402710&4294967295)<<12&4294967295|l>>>20))+((l=o+(t^u&(e^t))+r[2]+606105819&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^o&(u^e))+r[3]+3250441966&4294967295)<<22&4294967295|l>>>10))+((l=e+(u^t&(o^u))+r[4]+4118548399&4294967295)<<7&4294967295|l>>>25))+((l=u+(o^e&(t^o))+r[5]+1200080426&4294967295)<<12&4294967295|l>>>20))+((l=o+(t^u&(e^t))+r[6]+2821735955&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^o&(u^e))+r[7]+4249261313&4294967295)<<22&4294967295|l>>>10))+((l=e+(u^t&(o^u))+r[8]+1770035416&4294967295)<<7&4294967295|l>>>25))+((l=u+(o^e&(t^o))+r[9]+2336552879&4294967295)<<12&4294967295|l>>>20))+((l=o+(t^u&(e^t))+r[10]+4294925233&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^o&(u^e))+r[11]+2304563134&4294967295)<<22&4294967295|l>>>10))+((l=e+(u^t&(o^u))+r[12]+1804603682&4294967295)<<7&4294967295|l>>>25))+((l=u+(o^e&(t^o))+r[13]+4254626195&4294967295)<<12&4294967295|l>>>20))+((l=o+(t^u&(e^t))+r[14]+2792965006&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^o&(u^e))+r[15]+1236535329&4294967295)<<22&4294967295|l>>>10))+((l=e+(o^u&(t^o))+r[1]+4129170786&4294967295)<<5&4294967295|l>>>27))+((l=u+(t^o&(e^t))+r[6]+3225465664&4294967295)<<9&4294967295|l>>>23))+((l=o+(e^t&(u^e))+r[11]+643717713&4294967295)<<14&4294967295|l>>>18))+((l=t+(u^e&(o^u))+r[0]+3921069994&4294967295)<<20&4294967295|l>>>12))+((l=e+(o^u&(t^o))+r[5]+3593408605&4294967295)<<5&4294967295|l>>>27))+((l=u+(t^o&(e^t))+r[10]+38016083&4294967295)<<9&4294967295|l>>>23))+((l=o+(e^t&(u^e))+r[15]+3634488961&4294967295)<<14&4294967295|l>>>18))+((l=t+(u^e&(o^u))+r[4]+3889429448&4294967295)<<20&4294967295|l>>>12))+((l=e+(o^u&(t^o))+r[9]+568446438&4294967295)<<5&4294967295|l>>>27))+((l=u+(t^o&(e^t))+r[14]+3275163606&4294967295)<<9&4294967295|l>>>23))+((l=o+(e^t&(u^e))+r[3]+4107603335&4294967295)<<14&4294967295|l>>>18))+((l=t+(u^e&(o^u))+r[8]+1163531501&4294967295)<<20&4294967295|l>>>12))+((l=e+(o^u&(t^o))+r[13]+2850285829&4294967295)<<5&4294967295|l>>>27))+((l=u+(t^o&(e^t))+r[2]+4243563512&4294967295)<<9&4294967295|l>>>23))+((l=o+(e^t&(u^e))+r[7]+1735328473&4294967295)<<14&4294967295|l>>>18))+((l=t+(u^e&(o^u))+r[12]+2368359562&4294967295)<<20&4294967295|l>>>12))+((l=e+(t^o^u)+r[5]+4294588738&4294967295)<<4&4294967295|l>>>28))+((l=u+(e^t^o)+r[8]+2272392833&4294967295)<<11&4294967295|l>>>21))+((l=o+(u^e^t)+r[11]+1839030562&4294967295)<<16&4294967295|l>>>16))+((l=t+(o^u^e)+r[14]+4259657740&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^o^u)+r[1]+2763975236&4294967295)<<4&4294967295|l>>>28))+((l=u+(e^t^o)+r[4]+1272893353&4294967295)<<11&4294967295|l>>>21))+((l=o+(u^e^t)+r[7]+4139469664&4294967295)<<16&4294967295|l>>>16))+((l=t+(o^u^e)+r[10]+3200236656&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^o^u)+r[13]+681279174&4294967295)<<4&4294967295|l>>>28))+((l=u+(e^t^o)+r[0]+3936430074&4294967295)<<11&4294967295|l>>>21))+((l=o+(u^e^t)+r[3]+3572445317&4294967295)<<16&4294967295|l>>>16))+((l=t+(o^u^e)+r[6]+76029189&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^o^u)+r[9]+3654602809&4294967295)<<4&4294967295|l>>>28))+((l=u+(e^t^o)+r[12]+3873151461&4294967295)<<11&4294967295|l>>>21))+((l=o+(u^e^t)+r[15]+530742520&4294967295)<<16&4294967295|l>>>16))+((l=t+(o^u^e)+r[2]+3299628645&4294967295)<<23&4294967295|l>>>9))+((l=e+(o^(t|~u))+r[0]+4096336452&4294967295)<<6&4294967295|l>>>26))+((l=u+(t^(e|~o))+r[7]+1126891415&4294967295)<<10&4294967295|l>>>22))+((l=o+(e^(u|~t))+r[14]+2878612391&4294967295)<<15&4294967295|l>>>17))+((l=t+(u^(o|~e))+r[5]+4237533241&4294967295)<<21&4294967295|l>>>11))+((l=e+(o^(t|~u))+r[12]+1700485571&4294967295)<<6&4294967295|l>>>26))+((l=u+(t^(e|~o))+r[3]+2399980690&4294967295)<<10&4294967295|l>>>22))+((l=o+(e^(u|~t))+r[10]+4293915773&4294967295)<<15&4294967295|l>>>17))+((l=t+(u^(o|~e))+r[1]+2240044497&4294967295)<<21&4294967295|l>>>11))+((l=e+(o^(t|~u))+r[8]+1873313359&4294967295)<<6&4294967295|l>>>26))+((l=u+(t^(e|~o))+r[15]+4264355552&4294967295)<<10&4294967295|l>>>22))+((l=o+(e^(u|~t))+r[6]+2734768916&4294967295)<<15&4294967295|l>>>17))+((l=t+(u^(o|~e))+r[13]+1309151649&4294967295)<<21&4294967295|l>>>11))+((u=(e=t+((l=e+(o^(t|~u))+r[4]+4149444226&4294967295)<<6&4294967295|l>>>26))+((l=u+(t^(e|~o))+r[11]+3174756917&4294967295)<<10&4294967295|l>>>22))^((o=u+((l=o+(e^(u|~t))+r[2]+718787259&4294967295)<<15&4294967295|l>>>17))|~e))+r[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(o+(l<<21&4294967295|l>>>11))&4294967295,n.g[2]=n.g[2]+o&4294967295,n.g[3]=n.g[3]+u&4294967295}function _n(n,e){this.h=e;for(var t=[],r=!0,o=n.length-1;0<=o;o--){var u=0|n[o];r&&u==e||(t[o]=u,r=!1)}this.g=t}(rt=hr.prototype).Oa=function(n){this.M=n},rt.ha=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():t0.g(),this.C=function xh(n){return n.h||(n.h=n.i())}(this.u?this.u:t0),this.g.onreadystatechange=Fi(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(u){return void Qp(this,u)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var o in r)t.set(o,r[o]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const u of r.keys())t.set(u,r.get(u))}r=Array.from(t.keys()).find(u=>"content-type"==u.toLowerCase()),o=kt.FormData&&n instanceof kt.FormData,!(0<=oy(JI,e))||r||o||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[u,l]of t)this.g.setRequestHeader(u,l);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{p0(this),0<this.B&&((this.L=function XI(n){return Yl&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Fi(this.ua,this)):this.A=Q_(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){Qp(this,u)}},rt.ua=function(){typeof ry<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ei(this,"timeout"),this.abort(8))},rt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Ei(this,"complete"),Ei(this,"abort"),Jp(this))},rt.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Jp(this,!0)),hr.$.N.call(this)},rt.La=function(){this.s||(this.G||this.v||this.l?CS(this):this.kb())},rt.kb=function(){CS(this)},rt.isActive=function(){return!!this.g},rt.da=function(){try{return 2<Go(this)?this.g.status:-1}catch{return-1}},rt.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},rt.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),h0(e)}},rt.Ia=function(){return this.m},rt.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(rt=by.prototype).ra=8,rt.H=1,rt.Na=function(n){if(this.m)if(this.m=null,1==this.H){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const o=new Gp(this,this.l,n);let u=this.s;if(this.U&&(u?(u=Fp(u),Jl(u,this.U)):u=this.U),null!==this.o||this.O||(o.I=u,u=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){var r=this.j[t];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=bS(this,o,e),Un(t=so(this.I),"RID",n),Un(t,"CVER",22),this.F&&Un(t,"X-HTTP-Session-Id",this.F),Oc(this,t),u&&(this.O?e="headers="+encodeURIComponent(String(Sa(u)))+"&"+e:this.o&&y0(t,this.o,u)),Iy(this.i,o),this.bb&&Un(t,"TYPE","init"),this.P?(Un(t,"$req",e),Un(t,"SID","null"),o.aa=!0,BI(o,t,null)):BI(o,t,e),this.H=2}}else 3==this.H&&(n?_0(this,n):0==this.j.length||WI(this.i)||_0(this))},rt.Ma=function(){if(this.u=null,nD(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var n=2*this.S;this.l.info("BP detection timer enabled: "+n),this.B=Bp(Fi(this.jb,this),n)}},rt.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Fr(10),eg(this),nD(this))},rt.ib=function(){null!=this.v&&(this.v=null,eg(this),Ty(this),Fr(19))},rt.pb=function(n){n?(this.l.info("Successfully pinged google.com"),Fr(2)):(this.l.info("Failed to ping google.com"),Fr(1))},rt.isActive=function(){return!!this.h&&this.h.isActive(this)},(rt=iD.prototype).Ba=function(){},rt.Aa=function(){},rt.za=function(){},rt.ya=function(){},rt.isActive=function(){return!0},rt.Va=function(){},My.prototype.g=function(n,e){return new Ii(n,e)},kr(Ii,Kr),Ii.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var n=this.g,e=this.l,t=this.h||void 0;Fr(0),n.Y=e,n.na=t||{},n.G=n.aa,n.I=I0(n,null,n.Y),od(n)},Ii.prototype.close=function(){v0(this.g)},Ii.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=SI(n),n=t);e.j.push(new class{constructor(n,e){this.g=n,this.map=e}}(e.fb++,n)),3==e.H&&od(e)},Ii.prototype.N=function(){this.g.h=null,delete this.j,v0(this.g),delete this.g,Ii.$.N.call(this)},kr(sD,my),kr(oD,e0),kr(Fh,iD),Fh.prototype.Ba=function(){Ei(this.g,"a")},Fh.prototype.Aa=function(n){Ei(this.g,new sD(n))},Fh.prototype.za=function(n){Ei(this.g,new oD)},Fh.prototype.ya=function(){Ei(this.g,"b")},kr(qo,function TS(){this.blockSize=-1}),qo.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},qo.prototype.j=function(n,e){void 0===e&&(e=n.length);for(var t=e-this.blockSize,r=this.m,o=this.h,u=0;u<e;){if(0==o)for(;u<=t;)C0(this,n,u),u+=this.blockSize;if("string"==typeof n){for(;u<e;)if(r[o++]=n.charCodeAt(u++),o==this.blockSize){C0(this,r),o=0;break}}else for(;u<e;)if(r[o++]=n[u++],o==this.blockSize){C0(this,r),o=0;break}}this.h=o,this.i+=e},qo.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=255&t,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var r=0;32>r;r+=8)n[t++]=this.g[e]>>>r&255;return n};var SS={};function xy(n){return-128<=n&&128>n?function Rp(n,e){var t=SS;return Object.prototype.hasOwnProperty.call(t,n)?t[n]:t[n]=e(n)}(n,function(e){return new _n([0|e],0>e?-1:0)}):new _n([0|n],0>n?-1:0)}function oo(n){if(isNaN(n)||!isFinite(n))return Vh;if(0>n)return Di(oo(-n));for(var e=[],t=1,r=0;n>=t;r++)e[r]=n/t|0,t*=Lh;return new _n(e,0)}var Lh=4294967296,Vh=xy(0),b0=xy(1),uD=xy(16777216);function Tu(n){if(0!=n.h)return!1;for(var e=0;e<n.g.length;e++)if(0!=n.g[e])return!1;return!0}function ao(n){return-1==n.h}function Di(n){for(var e=n.g.length,t=[],r=0;r<e;r++)t[r]=~n.g[r];return new _n(t,~n.h).add(b0)}function Ny(n,e){return n.add(Di(e))}function ng(n,e){for(;(65535&n[e])!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function Uh(n,e){this.g=n,this.h=e}function Ry(n,e){if(Tu(e))throw Error("division by zero");if(Tu(n))return new Uh(Vh,Vh);if(ao(n))return e=Ry(Di(n),e),new Uh(Di(e.g),Di(e.h));if(ao(e))return e=Ry(n,Di(e)),new Uh(Di(e.g),e.h);if(30<n.g.length){if(ao(n)||ao(e))throw Error("slowDivide_ only works with positive integers.");for(var t=b0,r=e;0>=r.X(n);)t=AS(t),r=AS(r);var o=ad(t,1),u=ad(r,1);for(r=ad(r,2),t=ad(t,2);!Tu(r);){var l=u.add(r);0>=l.X(n)&&(o=o.add(t),u=l),r=ad(r,1),t=ad(t,1)}return e=Ny(n,o.R(e)),new Uh(o,e)}for(o=Vh;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,r-48),l=(u=oo(t)).R(e);ao(l)||0<l.X(n);)l=(u=oo(t-=r)).R(e);Tu(u)&&(u=b0),o=o.add(u),n=Ny(n,l)}return new Uh(o,n)}function AS(n){for(var e=n.g.length+1,t=[],r=0;r<e;r++)t[r]=n.D(r)<<1|n.D(r-1)>>>31;return new _n(t,n.h)}function ad(n,e){var t=e>>5;e%=32;for(var r=n.g.length-t,o=[],u=0;u<r;u++)o[u]=0<e?n.D(u+t)>>>e|n.D(u+t+1)<<32-e:n.D(u+t);return new _n(o,n.h)}(rt=_n.prototype).ea=function(){if(ao(this))return-Di(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var r=this.D(t);n+=(0<=r?r:Lh+r)*e,e*=Lh}return n},rt.toString=function(n){if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if(Tu(this))return"0";if(ao(this))return"-"+Di(this).toString(n);for(var e=oo(Math.pow(n,6)),t=this,r="";;){var o=Ry(t,e).g,u=((0<(t=Ny(t,o.R(e))).g.length?t.g[0]:t.h)>>>0).toString(n);if(Tu(t=o))return u+r;for(;6>u.length;)u="0"+u;r=u+r}},rt.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h},rt.X=function(n){return ao(n=Ny(this,n))?-1:Tu(n)?0:1},rt.abs=function(){return ao(this)?Di(this):this},rt.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0,o=0;o<=e;o++){var u=r+(65535&this.D(o))+(65535&n.D(o)),l=(u>>>16)+(this.D(o)>>>16)+(n.D(o)>>>16);r=l>>>16,t[o]=(l&=65535)<<16|(u&=65535)}return new _n(t,-2147483648&t[t.length-1]?-1:0)},rt.R=function(n){if(Tu(this)||Tu(n))return Vh;if(ao(this))return ao(n)?Di(this).R(Di(n)):Di(Di(this).R(n));if(ao(n))return Di(this.R(Di(n)));if(0>this.X(uD)&&0>n.X(uD))return oo(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],r=0;r<2*e;r++)t[r]=0;for(r=0;r<this.g.length;r++)for(var o=0;o<n.g.length;o++){var u=this.D(r)>>>16,l=65535&this.D(r),m=n.D(o)>>>16,E=65535&n.D(o);t[2*r+2*o]+=l*E,ng(t,2*r+2*o),t[2*r+2*o+1]+=u*E,ng(t,2*r+2*o+1),t[2*r+2*o+1]+=l*m,ng(t,2*r+2*o+1),t[2*r+2*o+2]+=u*m,ng(t,2*r+2*o+2)}for(r=0;r<e;r++)t[r]=t[2*r+1]<<16|t[2*r];for(r=e;r<2*e;r++)t[r]=0;return new _n(t,0)},rt.gb=function(n){return Ry(this,n).h},rt.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)&n.D(r);return new _n(t,this.h&n.h)},rt.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)|n.D(r);return new _n(t,this.h|n.h)},rt.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)^n.D(r);return new _n(t,this.h^n.h)},My.prototype.createWebChannel=My.prototype.g,Ii.prototype.send=Ii.prototype.u,Ii.prototype.open=Ii.prototype.m,Ii.prototype.close=Ii.prototype.close,jp.NO_ERROR=0,jp.TIMEOUT=8,jp.HTTP_ERROR=6,X_.COMPLETE="complete",Hp.EventType=Nh,Nh.OPEN="a",Nh.CLOSE="b",Nh.ERROR="c",Nh.MESSAGE="d",Kr.prototype.listen=Kr.prototype.O,hr.prototype.listenOnce=hr.prototype.P,hr.prototype.getLastError=hr.prototype.Sa,hr.prototype.getLastErrorCode=hr.prototype.Ia,hr.prototype.getStatus=hr.prototype.da,hr.prototype.getResponseJson=hr.prototype.Wa,hr.prototype.getResponseText=hr.prototype.ja,hr.prototype.send=hr.prototype.ha,hr.prototype.setWithCredentials=hr.prototype.Oa,qo.prototype.digest=qo.prototype.l,qo.prototype.reset=qo.prototype.reset,qo.prototype.update=qo.prototype.j,_n.prototype.add=_n.prototype.add,_n.prototype.multiply=_n.prototype.R,_n.prototype.modulo=_n.prototype.gb,_n.prototype.compare=_n.prototype.X,_n.prototype.toNumber=_n.prototype.ea,_n.prototype.toString=_n.prototype.toString,_n.prototype.getBits=_n.prototype.D,_n.fromNumber=oo,_n.fromString=function aD(n,e){if(0==n.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==n.charAt(0))return Di(aD(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=oo(Math.pow(e,8)),r=Vh,o=0;o<n.length;o+=8){var u=Math.min(8,n.length-o),l=parseInt(n.substring(o,o+u),e);8>u?(u=oo(Math.pow(e,u)),r=r.R(u).add(oo(l))):r=(r=r.R(t)).add(oo(l))}return r};var cD=io.createWebChannelTransport=function(){return new My},Ex=io.getStatEventTarget=function(){return gy()},Bh=io.ErrorCode=jp,MS=io.EventType=X_,xS=io.Event=ed,Oy=io.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},NS=io.FetchXmlHttpFactory=Kp,xs=io.WebChannel=Hp,rg=io.XhrIo=hr,Li=io.Md5=qo,uo=io.Integer=_n;const ig="@firebase/firestore";class wn{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}wn.UNAUTHENTICATED=new wn(null),wn.GOOGLE_CREDENTIALS=new wn("google-credentials-uid"),wn.FIRST_PARTY=new wn("first-party-uid"),wn.MOCK_USER=new wn("mock-user");let Pc="9.23.0";const Ns=new Ac.Yd("@firebase/firestore");function kc(){return Ns.logLevel}function Fe(n,...e){if(Ns.logLevel<=Ac.in.DEBUG){const t=e.map(Fc);Ns.debug(`Firestore (${Pc}): ${n}`,...t)}}function Bn(n,...e){if(Ns.logLevel<=Ac.in.ERROR){const t=e.map(Fc);Ns.error(`Firestore (${Pc}): ${n}`,...t)}}function Ci(n,...e){if(Ns.logLevel<=Ac.in.WARN){const t=e.map(Fc);Ns.warn(`Firestore (${Pc}): ${n}`,...t)}}function Fc(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function it(n="Unexpected state"){const e=`FIRESTORE (${Pc}) INTERNAL ASSERTION FAILED: `+n;throw Bn(e),new Error(e)}function dt(n,e){n||it()}function Xe(n,e){return n}const ce={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Re extends an.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Lr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class T0{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class dD{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(wn.UNAUTHENTICATED))}shutdown(){}}class hD{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class fD{constructor(e){this.t=e,this.currentUser=wn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let o=this.i;const u=b=>this.i!==o?(o=this.i,t(b)):Promise.resolve();let l=new Lr;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Lr,e.enqueueRetryable(()=>u(this.currentUser))};const m=()=>{const b=l;e.enqueueRetryable((0,we.Z)(function*(){yield b.promise,yield u(r.currentUser)}))},E=b=>{Fe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=b,this.auth.addAuthTokenListener(this.o),m()};this.t.onInit(b=>E(b)),setTimeout(()=>{if(!this.auth){const b=this.t.getImmediate({optional:!0});b?E(b):(Fe("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Lr)}},0),m()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Fe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(dt("string"==typeof r.accessToken),new T0(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return dt(null===e||"string"==typeof e),new wn(e)}}class S0{constructor(e,t,r){this.h=e,this.l=t,this.m=r,this.type="FirstParty",this.user=wn.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class RS{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new S0(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(wn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class OS{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Ix{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const r=u=>{null!=u.error&&Fe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const l=u.token!==this.T;return this.T=u.token,Fe("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const o=u=>{Fe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.I.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.I.getImmediate({optional:!0});u?o(u):Fe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(dt("string"==typeof t.token),this.T=t.token,new OS(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function PS(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class kS{static A(){const t=62*Math.floor(256/62);let r="";for(;r.length<20;){const o=PS(40);for(let u=0;u<o.length;++u)r.length<20&&o[u]<t&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(o[u]%62))}return r}}function Lt(n,e){return n<e?-1:n>e?1:0}function sg(n,e,t){return n.length===e.length&&n.every((r,o)=>t(r,e[o]))}function pD(n){return n+"\0"}class tr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Re(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Re(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Re(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Re(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return tr.fromMillis(Date.now())}static fromDate(e){return tr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new tr(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Lt(this.nanoseconds,e.nanoseconds):Lt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class vt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new vt(e)}static min(){return new vt(new tr(0,0))}static max(){return new vt(new tr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class ud{constructor(e,t,r){void 0===t?t=0:t>e.length&&it(),void 0===r?r=e.length-t:r>e.length-t&&it(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===ud.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ud?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const u=e.get(o),l=t.get(o);if(u<l)return-1;if(u>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Zt extends ud{construct(e,t,r){return new Zt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Re(ce.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(o=>o.length>0))}return new Zt(t)}static emptyPath(){return new Zt([])}}const A0=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class zn extends ud{construct(e,t,r){return new zn(e,t,r)}static isValidIdentifier(e){return A0.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),zn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new zn(["__name__"])}static fromServerFormat(e){const t=[];let r="",o=0;const u=()=>{if(0===r.length)throw new Re(ce.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;o<e.length;){const m=e[o];if("\\"===m){if(o+1===e.length)throw new Re(ce.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const E=e[o+1];if("\\"!==E&&"."!==E&&"`"!==E)throw new Re(ce.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=E,o+=2}else"`"===m?(l=!l,o++):"."!==m||l?(r+=m,o++):(u(),o++)}if(u(),l)throw new Re(ce.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new zn(t)}static emptyPath(){return new zn([])}}class Qe{constructor(e){this.path=e}static fromPath(e){return new Qe(Zt.fromString(e))}static fromName(e){return new Qe(Zt.fromString(e).popFirst(5))}static empty(){return new Qe(Zt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Zt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Zt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Qe(new Zt(e.slice()))}}class Lc{constructor(e,t,r,o){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=o}}function Py(n){return n.fields.find(e=>2===e.kind)}function cd(n){return n.fields.filter(e=>2!==e.kind)}Lc.UNKNOWN_ID=-1;class ky{constructor(e,t){this.fieldPath=e,this.kind=t}}class ag{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new ag(0,Vi.min())}}function gD(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,o=vt.fromTimestamp(1e9===r?new tr(t+1,0):new tr(t,r));return new Vi(o,Qe.empty(),e)}function Fy(n){return new Vi(n.readTime,n.key,-1)}class Vi{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Vi(vt.min(),Qe.empty(),-1)}static max(){return new Vi(vt.max(),Qe.empty(),-1)}}function $h(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Qe.comparator(n.documentKey,e.documentKey),0!==t?t:Lt(n.largestBatchId,e.largestBatchId))}const LS="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class mD{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Vc(n){return ug.apply(this,arguments)}function ug(){return ug=(0,we.Z)(function*(n){if(n.code!==ce.FAILED_PRECONDITION||n.message!==LS)throw n;Fe("LocalStore","Unexpectedly lost primary lease")}),ug.apply(this,arguments)}class se{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&it(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new se((r,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,o)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof se?t:se.resolve(t)}catch(t){return se.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):se.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):se.reject(t)}static resolve(e){return new se((t,r)=>{t(e)})}static reject(e){return new se((t,r)=>{r(e)})}static waitFor(e){return new se((t,r)=>{let o=0,u=0,l=!1;e.forEach(m=>{++o,m.next(()=>{++u,l&&u===o&&t()},E=>r(E))}),l=!0,u===o&&t()})}static or(e){let t=se.resolve(!1);for(const r of e)t=t.next(o=>o?se.resolve(o):r());return t}static forEach(e,t){const r=[];return e.forEach((o,u)=>{r.push(t.call(this,o,u))}),this.waitFor(r)}static mapArray(e,t){return new se((r,o)=>{const u=e.length,l=new Array(u);let m=0;for(let E=0;E<u;E++){const b=E;t(e[b]).next(M=>{l[b]=M,++m,m===u&&r(l)},M=>o(M))}})}static doWhile(e,t){return new se((r,o)=>{const u=()=>{!0===e()?t().next(()=>{u()},o):r()};u()})}}class cg{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.v=new Lr,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{t.error?this.v.reject(new Hh(e,t.error)):this.v.resolve()},this.transaction.onerror=r=>{const o=M0(r.target.error);this.v.reject(new Hh(e,o))}}static open(e,t,r,o){try{return new cg(t,e.transaction(o,r))}catch(u){throw new Hh(t,u)}}get R(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||(Fe("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new yD(t)}}class Wo{constructor(e,t,r){this.name=e,this.version=t,this.V=r,12.2===Wo.S((0,an.z$)())&&Bn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Fe("SimpleDb","Removing database:",e),ld(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,an.hl)())return!1;if(Wo.C())return!0;const e=(0,an.z$)(),t=Wo.S(e),r=0<t&&t<10,o=Wo.N(e),u=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static N(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}$(e){var t=this;return(0,we.Z)(function*(){return t.db||(Fe("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,o)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=l=>{r(l.target.result)},u.onblocked=()=>{o(new Hh(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=l=>{const m=l.target.error;o("VersionError"===m.name?new Re(ce.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===m.name?new Re(ce.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+m):new Hh(e,m))},u.onupgradeneeded=l=>{Fe("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',l.oldVersion),t.V.O(l.target.result,u.transaction,l.oldVersion,t.version).next(()=>{Fe("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.F&&(t.db.onversionchange=r=>t.F(r)),t.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,o){var u=this;return(0,we.Z)(function*(){const l="readonly"===t;let m=0;for(;;){++m;try{u.db=yield u.$(e);const E=cg.open(u.db,e,l?"readonly":"readwrite",r),b=o(E).next(M=>(E.P(),M)).catch(M=>(E.abort(M),se.reject(M))).toPromise();return b.catch(()=>{}),yield E.R,b}catch(E){const b=E,M="FirebaseError"!==b.name&&m<3;if(Fe("SimpleDb","Transaction failed with error:",b.message,"Retrying:",M),u.close(),!M)return Promise.reject(b)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class VS{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return ld(this.L.delete())}}class Hh extends Re{constructor(e,t){super(ce.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Su(n){return"IndexedDbTransactionError"===n.name}class yD{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Fe("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Fe("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),ld(r)}add(e){return Fe("SimpleDb","ADD",this.store.name,e,e),ld(this.store.add(e))}get(e){return ld(this.store.get(e)).next(t=>(void 0===t&&(t=null),Fe("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Fe("SimpleDb","DELETE",this.store.name,e),ld(this.store.delete(e))}count(){return Fe("SimpleDb","COUNT",this.store.name),ld(this.store.count())}j(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const o=this.cursor(r),u=[];return this.W(o,(l,m)=>{u.push(m)}).next(()=>u)}{const o=this.store.getAll(r.range);return new se((u,l)=>{o.onerror=m=>{l(m.target.error)},o.onsuccess=m=>{u(m.target.result)}})}}H(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new se((o,u)=>{r.onerror=l=>{u(l.target.error)},r.onsuccess=l=>{o(l.target.result)}})}J(e,t){Fe("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.Y=!1;const o=this.cursor(r);return this.W(o,(u,l,m)=>m.delete())}X(e,t){let r;t?r=e:(r={},t=e);const o=this.cursor(r);return this.W(o,t)}Z(e){const t=this.cursor({});return new se((r,o)=>{t.onerror=u=>{const l=M0(u.target.error);o(l)},t.onsuccess=u=>{const l=u.target.result;l?e(l.primaryKey,l.value).next(m=>{m?l.continue():r()}):r()}})}W(e,t){const r=[];return new se((o,u)=>{e.onerror=l=>{u(l.target.error)},e.onsuccess=l=>{const m=l.target.result;if(!m)return void o();const E=new VS(m),b=t(m.primaryKey,m.value,E);if(b instanceof se){const M=b.catch(R=>(E.done(),se.reject(R)));r.push(M)}E.isDone?o():null===E.K?m.continue():m.continue(E.K)}}).next(()=>se.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function ld(n){return new se((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const o=M0(r.target.error);t(o)}})}let vD=!1;function M0(n){const e=Wo.S((0,an.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Re("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return vD||(vD=!0,setTimeout(()=>{throw r},0)),r}}return n}class _D{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var t=this;Fe("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,we.Z)(function*(){t.task=null;try{Fe("IndexBackiller",`Documents written: ${yield t.tt.nt()}`)}catch(r){Su(r)?Fe("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield Vc(r)}yield t.et(6e4)}))}}class x0{constructor(e,t){this.localStore=e,this.persistence=t}nt(e=50){var t=this;return(0,we.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.st(r,e))})()}st(e,t){const r=new Set;let o=t,u=!0;return se.doWhile(()=>!0===u&&o>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(l=>{if(null!==l&&!r.has(l))return Fe("IndexBackiller",`Processing collection: ${l}`),this.it(e,l,o).next(m=>{o-=m,r.add(l)});u=!1})).next(()=>t-o)}it(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(o=>this.localStore.localDocuments.getNextDocuments(e,t,o,r).next(u=>{const l=u.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next(()=>this.rt(o,u)).next(m=>(Fe("IndexBackiller",`Updating offset: ${m}`),this.localStore.indexManager.updateCollectionGroup(e,t,m))).next(()=>l.size)}))}rt(e,t){let r=e;return t.changes.forEach((o,u)=>{const l=Fy(u);$h(l,r)>0&&(r=l)}),new Vi(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let Ji=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=o=>this.ot(o),this.ut=o=>r.writeSequenceNumber(o))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return n.ct=-1,n})();function lg(n){return null==n}function Uc(n){return 0===n&&1/n==-1/0}function dg(n){return"number"==typeof n&&Number.isInteger(n)&&!Uc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function di(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=ED(e)),e=wD(n.get(t),e);return ED(e)}function wD(n,e){let t=e;const r=n.length;for(let o=0;o<r;o++){const u=n.charAt(o);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function ED(n){return n+"\x01\x01"}function Aa(n){const e=n.length;if(dt(e>=2),2===e)return dt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Zt.emptyPath();const t=e-2,r=[];let o="";for(let u=0;u<e;){const l=n.indexOf("\x01",u);switch((l<0||l>t)&&it(),n.charAt(l+1)){case"\x01":const m=n.substring(u,l);let E;0===o.length?E=m:(o+=m,E=o,o=""),r.push(E);break;case"\x10":o+=n.substring(u,l),o+="\0";break;case"\x11":o+=n.substring(u,l+1);break;default:it()}u=l+2}return new Zt(r)}const ID=["userId","batchId"];function Gh(n,e){return[n,di(e)]}function Ly(n,e,t){return[n,di(e),t]}const DD={},CD=["prefixPath","collectionGroup","readTime","documentId"],US=["prefixPath","collectionGroup","documentId"],BS=["collectionGroup","readTime","prefixPath","documentId"],bD=["canonicalId","targetId"],N0=["targetId","path"],TD=["path","targetId"],R0=["collectionId","parent"],SD=["indexId","uid"],jS=["uid","sequenceNumber"],AD=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],MD=["indexId","uid","orderedDocumentKey"],xD=["userId","collectionPath","documentId"],ND=["userId","collectionPath","largestBatchId"],$S=["userId","collectionGroup","largestBatchId"],RD=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],HS=[...RD,"documentOverlays"],O0=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Vy=O0,OD=[...Vy,"indexConfiguration","indexState","indexEntries"];class Uy extends mD{constructor(e,t){super(),this.ht=e,this.currentSequenceNumber=t}}function Yr(n,e){const t=Xe(n);return Wo.M(t.ht,e)}function P0(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Au(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function k0(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Rn{constructor(e,t){this.comparator=e,this.root=t||Vr.EMPTY}insert(e,t){return new Rn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Vr.BLACK,null,null))}remove(e){return new Rn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Vr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(0===o)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new hg(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new hg(this.root,e,this.comparator,!1)}getReverseIterator(){return new hg(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new hg(this.root,e,this.comparator,!0)}}class hg{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Vr{constructor(e,t,r,o,u){this.key=e,this.value=t,this.color=r??Vr.RED,this.left=o??Vr.EMPTY,this.right=u??Vr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,u){return new Vr(e??this.key,t??this.value,r??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const u=r(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,t,r),null):0===u?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Vr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),0===t(e,o.key)){if(o.right.isEmpty())return Vr.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Vr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Vr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw it();const e=this.left.check();if(e!==this.right.check())throw it();return e+(this.isRed()?0:1)}}Vr.EMPTY=null,Vr.RED=!0,Vr.BLACK=!1,Vr.EMPTY=new class{constructor(){this.size=0}get key(){throw it()}get value(){throw it()}get color(){throw it()}get left(){throw it()}get right(){throw it()}copy(n,e,t,r,o){return this}insert(n,e,t){return new Vr(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class un{constructor(e){this.comparator=e,this.data=new Rn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new PD(this.data.getIterator())}getIteratorFrom(e){return new PD(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof un)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(o,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new un(this.comparator);return t.data=e,t}}class PD{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function zh(n){return n.hasNext()?n.getNext():void 0}class Ui{constructor(e){this.fields=e,e.sort(zn.comparator)}static empty(){return new Ui([])}unionWith(e){let t=new un(zn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Ui(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return sg(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Bc extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Qr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(r){try{return atob(r)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Bc("Invalid base64 string: "+o):o}}(e);return new Qr(t)}static fromUint8Array(e){const t=function(r){let o="";for(let u=0;u<r.length;++u)o+=String.fromCharCode(r[u]);return o}(e);return new Qr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Lt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Qr.EMPTY_BYTE_STRING=new Qr("");const L0=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function dd(n){if(dt(!!n),"string"==typeof n){let e=0;const t=L0.exec(n);if(dt(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:br(n.seconds),nanos:br(n.nanos)}}function br(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Mu(n){return"string"==typeof n?Qr.fromBase64String(n):Qr.fromUint8Array(n)}function By(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function fg(n){const e=n.mapValue.fields.__previous_value__;return By(e)?fg(e):e}function pg(n){const e=dd(n.mapValue.fields.__local_write_time__.timestampValue);return new tr(e.seconds,e.nanos)}class Jr{constructor(e,t,r,o,u,l,m,E,b){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=u,this.forceLongPolling=l,this.autoDetectLongPolling=m,this.longPollingOptions=E,this.useFetchStreams=b}}class xu{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new xu("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof xu&&e.projectId===this.projectId&&e.database===this.database}}const jc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},jy={nullValue:"NULL_VALUE"};function Nu(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?By(n)?4:kD(n)?9007199254740991:10:it()}function Ma(n,e){if(n===e)return!0;const t=Nu(n);if(t!==Nu(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return pg(n).isEqual(pg(e));case 3:return function(r,o){if("string"==typeof r.timestampValue&&"string"==typeof o.timestampValue&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const u=dd(r.timestampValue),l=dd(o.timestampValue);return u.seconds===l.seconds&&u.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return o=e,Mu(n.bytesValue).isEqual(Mu(o.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,o){return br(r.geoPointValue.latitude)===br(o.geoPointValue.latitude)&&br(r.geoPointValue.longitude)===br(o.geoPointValue.longitude)}(n,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return br(r.integerValue)===br(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const u=br(r.doubleValue),l=br(o.doubleValue);return u===l?Uc(u)===Uc(l):isNaN(u)&&isNaN(l)}return!1}(n,e);case 9:return sg(n.arrayValue.values||[],e.arrayValue.values||[],Ma);case 10:return function(r,o){const u=r.mapValue.fields||{},l=o.mapValue.fields||{};if(P0(u)!==P0(l))return!1;for(const m in u)if(u.hasOwnProperty(m)&&(void 0===l[m]||!Ma(u[m],l[m])))return!1;return!0}(n,e);default:return it()}var o}function qh(n,e){return void 0!==(n.values||[]).find(t=>Ma(t,e))}function Ru(n,e){if(n===e)return 0;const t=Nu(n),r=Nu(e);if(t!==r)return Lt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Lt(n.booleanValue,e.booleanValue);case 2:return function(o,u){const l=br(o.integerValue||o.doubleValue),m=br(u.integerValue||u.doubleValue);return l<m?-1:l>m?1:l===m?0:isNaN(l)?isNaN(m)?0:-1:1}(n,e);case 3:return hd(n.timestampValue,e.timestampValue);case 4:return hd(pg(n),pg(e));case 5:return Lt(n.stringValue,e.stringValue);case 6:return function(o,u){const l=Mu(o),m=Mu(u);return l.compareTo(m)}(n.bytesValue,e.bytesValue);case 7:return function(o,u){const l=o.split("/"),m=u.split("/");for(let E=0;E<l.length&&E<m.length;E++){const b=Lt(l[E],m[E]);if(0!==b)return b}return Lt(l.length,m.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,u){const l=Lt(br(o.latitude),br(u.latitude));return 0!==l?l:Lt(br(o.longitude),br(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(o,u){const l=o.values||[],m=u.values||[];for(let E=0;E<l.length&&E<m.length;++E){const b=Ru(l[E],m[E]);if(b)return b}return Lt(l.length,m.length)}(n.arrayValue,e.arrayValue);case 10:return function(o,u){if(o===jc.mapValue&&u===jc.mapValue)return 0;if(o===jc.mapValue)return 1;if(u===jc.mapValue)return-1;const l=o.fields||{},m=Object.keys(l),E=u.fields||{},b=Object.keys(E);m.sort(),b.sort();for(let M=0;M<m.length&&M<b.length;++M){const R=Lt(m[M],b[M]);if(0!==R)return R;const H=Ru(l[m[M]],E[b[M]]);if(0!==H)return H}return Lt(m.length,b.length)}(n.mapValue,e.mapValue);default:throw it()}}function hd(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Lt(n,e);const t=dd(n),r=dd(e),o=Lt(t.seconds,r.seconds);return 0!==o?o:Lt(t.nanos,r.nanos)}function Wh(n){return V0(n)}function V0(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const o=dd(r);return`time(${o.seconds},${o.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Mu(n.bytesValue).toBase64():"referenceValue"in n?Qe.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let o="[",u=!0;for(const l of r.values||[])u?u=!1:o+=",",o+=V0(l);return o+"]"}(n.arrayValue):"mapValue"in n?function(r){const o=Object.keys(r.fields||{}).sort();let u="{",l=!0;for(const m of o)l?l=!1:u+=",",u+=`${m}:${V0(r.fields[m])}`;return u+"}"}(n.mapValue):it();var e}function fd(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function $y(n){return!!n&&"integerValue"in n}function Hy(n){return!!n&&"arrayValue"in n}function U0(n){return!!n&&"nullValue"in n}function Gy(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Rs(n){return!!n&&"mapValue"in n}function mg(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Au(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=mg(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=mg(n.arrayValue.values[t]);return e}return Object.assign({},n)}function kD(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function xa(n){return"nullValue"in n?jy:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?fd(xu.empty(),Qe.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:it()}function Zo(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?fd(xu.empty(),Qe.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?jc:it()}function co(n,e){const t=Ru(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function B0(n,e){const t=Ru(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class hi{constructor(e){this.value=e}static empty(){return new hi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Rs(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=mg(t)}setAll(e){let t=zn.emptyPath(),r={},o=[];e.forEach((l,m)=>{if(!t.isImmediateParentOf(m)){const E=this.getFieldsMap(t);this.applyChanges(E,r,o),r={},o=[],t=m.popLast()}l?r[m.lastSegment()]=mg(l):o.push(m.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,o)}delete(e){const t=this.field(e.popLast());Rs(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ma(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];Rs(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){Au(t,(o,u)=>e[o]=u);for(const o of r)delete e[o]}clone(){return new hi(mg(this.value))}}function FD(n){const e=[];return Au(n.fields,(t,r)=>{const o=new zn([t]);if(Rs(r)){const u=FD(r.mapValue).fields;if(0===u.length)e.push(o);else for(const l of u)e.push(o.child(l))}else e.push(o)}),new Ui(e)}class qn{constructor(e,t,r,o,u,l,m){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.createTime=u,this.data=l,this.documentState=m}static newInvalidDocument(e){return new qn(e,0,vt.min(),vt.min(),vt.min(),hi.empty(),0)}static newFoundDocument(e,t,r,o){return new qn(e,1,t,vt.min(),r,o,0)}static newNoDocument(e,t){return new qn(e,2,t,vt.min(),vt.min(),hi.empty(),0)}static newUnknownDocument(e,t){return new qn(e,3,t,vt.min(),vt.min(),hi.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(vt.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=hi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=hi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=vt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof qn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new qn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class $c{constructor(e,t){this.position=e,this.inclusive=t}}function LD(n,e,t){let r=0;for(let o=0;o<n.position.length;o++){const u=e[o],l=n.position[o];if(r=u.field.isKeyField()?Qe.comparator(Qe.fromName(l.referenceValue),t.key):Ru(l,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function zy(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ma(n.position[t],e.position[t]))return!1;return!0}class Na{constructor(e,t="asc"){this.field=e,this.dir=t}}function GS(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class j0{}class Xt extends j0{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new zS(e,t,r):"array-contains"===t?new BD(e,r):"in"===t?new q0(e,r):"not-in"===t?new jD(e,r):"array-contains-any"===t?new $D(e,r):new Xt(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new G0(e,r):new Zy(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Ru(t,this.value)):null!==t&&Nu(this.value)===Nu(t)&&this.matchesComparison(Ru(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return it()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class En extends j0{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new En(e,t)}matches(e){return pd(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(t=>t.isInequality());return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function pd(n){return"and"===n.op}function qy(n){return"or"===n.op}function Zh(n){return VD(n)&&pd(n)}function VD(n){for(const e of n.filters)if(e instanceof En)return!1;return!0}function Wy(n){if(n instanceof Xt)return n.field.canonicalString()+n.op.toString()+Wh(n.value);if(Zh(n))return n.filters.map(e=>Wy(e)).join(",");{const e=n.filters.map(t=>Wy(t)).join(",");return`${n.op}(${e})`}}function $0(n,e){return n instanceof Xt?(t=n,(r=e)instanceof Xt&&t.op===r.op&&t.field.isEqual(r.field)&&Ma(t.value,r.value)):n instanceof En?function(t,r){return r instanceof En&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((o,u,l)=>o&&$0(u,r.filters[l]),!0)}(n,e):void it();var t,r}function H0(n,e){const t=n.filters.concat(e);return En.create(t,n.op)}function UD(n){return n instanceof Xt?`${(e=n).field.canonicalString()} ${e.op} ${Wh(e.value)}`:n instanceof En?function(e){return e.op.toString()+" {"+e.getFilters().map(UD).join(" ,")+"}"}(n):"Filter";var e}class zS extends Xt{constructor(e,t,r){super(e,t,r),this.key=Qe.fromName(r.referenceValue)}matches(e){const t=Qe.comparator(e.key,this.key);return this.matchesComparison(t)}}class G0 extends Xt{constructor(e,t){super(e,"in",t),this.keys=z0(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Zy extends Xt{constructor(e,t){super(e,"not-in",t),this.keys=z0(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function z0(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Qe.fromName(r.referenceValue))}class BD extends Xt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Hy(t)&&qh(t.arrayValue,this.value)}}class q0 extends Xt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&qh(this.value.arrayValue,t)}}class jD extends Xt{constructor(e,t){super(e,"not-in",t)}matches(e){if(qh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!qh(this.value.arrayValue,t)}}class $D extends Xt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Hy(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>qh(this.value.arrayValue,r))}}class HD{constructor(e,t=null,r=[],o=[],u=null,l=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=u,this.startAt=l,this.endAt=m,this.dt=null}}function Ky(n,e=null,t=[],r=[],o=null,u=null,l=null){return new HD(n,e,t,r,o,u,l)}function Hc(n){const e=Xe(n);if(null===e.dt){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Wy(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),lg(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Wh(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Wh(r)).join(",")),e.dt=t}return e.dt}function yg(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!GS(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!$0(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!zy(n.startAt,e.startAt)&&zy(n.endAt,e.endAt)}function Yy(n){return Qe.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function Qy(n,e){return n.filters.filter(t=>t instanceof Xt&&t.field.isEqual(e))}function GD(n,e,t){let r=jy,o=!0;for(const u of Qy(n,e)){let l=jy,m=!0;switch(u.op){case"<":case"<=":l=xa(u.value);break;case"==":case"in":case">=":l=u.value;break;case">":l=u.value,m=!1;break;case"!=":case"not-in":l=jy}co({value:r,inclusive:o},{value:l,inclusive:m})<0&&(r=l,o=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const l=t.position[u];co({value:r,inclusive:o},{value:l,inclusive:t.inclusive})<0&&(r=l,o=t.inclusive);break}return{value:r,inclusive:o}}function zD(n,e,t){let r=jc,o=!0;for(const u of Qy(n,e)){let l=jc,m=!0;switch(u.op){case">=":case">":l=Zo(u.value),m=!1;break;case"==":case"in":case"<=":l=u.value;break;case"<":l=u.value,m=!1;break;case"!=":case"not-in":l=jc}B0({value:r,inclusive:o},{value:l,inclusive:m})>0&&(r=l,o=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const l=t.position[u];B0({value:r,inclusive:o},{value:l,inclusive:t.inclusive})>0&&(r=l,o=t.inclusive);break}return{value:r,inclusive:o}}class Ou{constructor(e,t=null,r=[],o=[],u=null,l="F",m=null,E=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=u,this.limitType=l,this.startAt=m,this.endAt=E,this.wt=null,this._t=null}}function qD(n,e,t,r,o,u,l,m){return new Ou(n,e,t,r,o,u,l,m)}function Kh(n){return new Ou(n)}function WD(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function W0(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function Jy(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function Z0(n){return null!==n.collectionGroup}function gd(n){const e=Xe(n);if(null===e.wt){e.wt=[];const t=Jy(e),r=W0(e);if(null!==t&&null===r)t.isKeyField()||e.wt.push(new Na(t)),e.wt.push(new Na(zn.keyField(),"asc"));else{let o=!1;for(const u of e.explicitOrderBy)e.wt.push(u),u.field.isKeyField()&&(o=!0);if(!o){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new Na(zn.keyField(),u))}}}return e.wt}function Xi(n){const e=Xe(n);if(!e._t)if("F"===e.limitType)e._t=Ky(e.path,e.collectionGroup,gd(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of gd(e))t.push(new Na(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new $c(e.endAt.position,e.endAt.inclusive):null,o=e.startAt?new $c(e.startAt.position,e.startAt.inclusive):null;e._t=Ky(e.path,e.collectionGroup,t,e.filters,e.limit,r,o)}return e._t}function K0(n,e){e.getFirstInequalityField(),Jy(n);const t=n.filters.concat([e]);return new Ou(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Xy(n,e,t){return new Ou(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function vg(n,e){return yg(Xi(n),Xi(e))&&n.limitType===e.limitType}function ZD(n){return`${Hc(Xi(n))}|lt:${n.limitType}`}function ev(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>UD(r)).join(", ")}]`),lg(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(o=r).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Wh(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Wh(r)).join(",")),`Target(${t})`}(Xi(n))}; limitType=${n.limitType})`}function Yh(n,e){return e.isFoundDocument()&&function(t,r){const o=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(o):Qe.isDocumentKey(t.path)?t.path.isEqual(o):t.path.isImmediateParentOf(o)}(n,e)&&function(t,r){for(const o of gd(t))if(!o.field.isKeyField()&&null===r.data.field(o.field))return!1;return!0}(n,e)&&function(t,r){for(const o of t.filters)if(!o.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(o,u,l){const m=LD(o,u,l);return o.inclusive?m<=0:m<0}(t.startAt,gd(t),r)||t.endAt&&!function(o,u,l){const m=LD(o,u,l);return o.inclusive?m>=0:m>0}(t.endAt,gd(t),r)));var t,r}function Y0(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Q0(n){return(e,t)=>{let r=!1;for(const o of gd(n)){const u=KD(o,e,t);if(0!==u)return u;r=r||o.field.isKeyField()}return 0}}function KD(n,e,t){const r=n.field.isKeyField()?Qe.comparator(e.key,t.key):function(o,u,l){const m=u.data.field(o),E=l.data.field(o);return null!==m&&null!==E?Ru(m,E):it()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return it()}}class Ra{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[o,u]of r)if(this.equalsFn(o,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(void 0===o)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return 1===r.length?delete this.inner[t]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Au(this.inner,(t,r)=>{for(const[o,u]of r)e(o,u)})}isEmpty(){return k0(this.inner)}size(){return this.innerSize}}const YD=new Rn(Qe.comparator);function es(){return YD}const J0=new Rn(Qe.comparator);function Qh(...n){let e=J0;for(const t of n)e=e.insert(t.key,t);return e}function X0(n){let e=J0;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Bi(){return _g()}function QD(){return _g()}function _g(){return new Ra(n=>n.toString(),(n,e)=>n.isEqual(e))}const Jh=new Rn(Qe.comparator),Cx=new un(Qe.comparator);function Bt(...n){let e=Cx;for(const t of n)e=e.add(t);return e}const bx=new un(Lt);function tv(){return bx}function ew(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Uc(e)?"-0":e}}function qS(n){return{integerValue:""+n}}function md(n,e){return dg(e)?qS(e):ew(n,e)}class nv{constructor(){this._=void 0}}function WS(n,e,t){return n instanceof Xh?function(r,o){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&By(o)&&(o=fg(o)),o&&(u.fields.__previous_value__=o),{mapValue:u}}(t,e):n instanceof Oa?wg(n,e):n instanceof Ur?KS(n,e):function(r,o){const u=yd(r,o),l=tw(u)+tw(r.gt);return $y(u)&&$y(r.gt)?qS(l):ew(r.serializer,l)}(n,e)}function ZS(n,e,t){return n instanceof Oa?wg(n,e):n instanceof Ur?KS(n,e):t}function yd(n,e){return n instanceof vd?$y(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Xh extends nv{}class Oa extends nv{constructor(e){super(),this.elements=e}}function wg(n,e){const t=JD(e);for(const r of n.elements)t.some(o=>Ma(o,r))||t.push(r);return{arrayValue:{values:t}}}class Ur extends nv{constructor(e){super(),this.elements=e}}function KS(n,e){let t=JD(e);for(const r of n.elements)t=t.filter(o=>!Ma(o,r));return{arrayValue:{values:t}}}class vd extends nv{constructor(e,t){super(),this.serializer=e,this.gt=t}}function tw(n){return br(n.integerValue||n.doubleValue)}function JD(n){return Hy(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class ef{constructor(e,t){this.field=e,this.transform=t}}class eC{constructor(e,t){this.version=e,this.transformResults=t}}class Wn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Wn}static exists(e){return new Wn(void 0,e)}static updateTime(e){return new Wn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function rv(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class iv{}function tC(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new ka(n.key,Wn.none()):new Pu(n.key,n.data,Wn.none());{const t=n.data,r=hi.empty();let o=new un(zn.comparator);for(let u of e.fields)if(!o.has(u)){let l=t.field(u);null===l&&u.length>1&&(u=u.popLast(),l=t.field(u)),null===l?r.delete(u):r.set(u,l),o=o.add(u)}return new Pa(n.key,r,new Ui(o.toArray()),Wn.none())}}function Eg(n,e,t){n instanceof Pu?function(r,o,u){const l=r.value.clone(),m=rw(r.fieldTransforms,o,u.transformResults);l.setAll(m),o.convertToFoundDocument(u.version,l).setHasCommittedMutations()}(n,e,t):n instanceof Pa?function(r,o,u){if(!rv(r.precondition,o))return void o.convertToUnknownDocument(u.version);const l=rw(r.fieldTransforms,o,u.transformResults),m=o.data;m.setAll(nw(r)),m.setAll(l),o.convertToFoundDocument(u.version,m).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Ig(n,e,t,r){return n instanceof Pu?function(o,u,l,m){if(!rv(o.precondition,u))return l;const E=o.value.clone(),b=rC(o.fieldTransforms,m,u);return E.setAll(b),u.convertToFoundDocument(u.version,E).setHasLocalMutations(),null}(n,e,t,r):n instanceof Pa?function(o,u,l,m){if(!rv(o.precondition,u))return l;const E=rC(o.fieldTransforms,m,u),b=u.data;return b.setAll(nw(o)),b.setAll(E),u.convertToFoundDocument(u.version,b).setHasLocalMutations(),null===l?null:l.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(M=>M.field))}(n,e,t,r):(l=t,rv(n.precondition,u=e)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):l);var u,l}function YS(n,e){let t=null;for(const r of n.fieldTransforms){const o=e.data.field(r.field),u=yd(r.transform,o||null);null!=u&&(null===t&&(t=hi.empty()),t.set(r.field,u))}return t||null}function nC(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&sg(t,r,(o,u)=>function XD(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Oa&&r instanceof Oa||t instanceof Ur&&r instanceof Ur?sg(t.elements,r.elements,Ma):t instanceof vd&&r instanceof vd?Ma(t.gt,r.gt):t instanceof Xh&&r instanceof Xh);var t,r}(o,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class Pu extends iv{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Pa extends iv{constructor(e,t,r,o,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function nw(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function rw(n,e,t){const r=new Map;dt(n.length===t.length);for(let o=0;o<t.length;o++){const u=n[o],l=u.transform,m=e.data.field(u.field);r.set(u.field,ZS(l,m,t[o]))}return r}function rC(n,e,t){const r=new Map;for(const o of n){const u=o.transform,l=t.data.field(o.field);r.set(o.field,WS(u,l,e))}return r}class ka extends iv{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class _d extends iv{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class iw{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&Eg(u,e,r[o])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Ig(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Ig(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=QD();return this.mutations.forEach(o=>{const u=e.get(o.key),l=u.overlayedDocument;let m=this.applyToLocalView(l,u.mutatedFields);m=t.has(o.key)?null:m;const E=tC(l,m);null!==E&&r.set(o.key,E),l.isValidDocument()||l.convertToNoDocument(vt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Bt())}isEqual(e){return this.batchId===e.batchId&&sg(this.mutations,e.mutations,(t,r)=>nC(t,r))&&sg(this.baseMutations,e.baseMutations,(t,r)=>nC(t,r))}}class sw{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){dt(e.mutations.length===r.length);let o=Jh;const u=e.mutations;for(let l=0;l<u.length;l++)o=o.insert(u[l].key,r[l].version);return new sw(e,t,r,o)}}class ow{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class sC{constructor(e,t){this.count=e,this.unchangedNames=t}}var Tr,sn;function aw(n){switch(n){default:return it();case ce.CANCELLED:case ce.UNKNOWN:case ce.DEADLINE_EXCEEDED:case ce.RESOURCE_EXHAUSTED:case ce.INTERNAL:case ce.UNAVAILABLE:case ce.UNAUTHENTICATED:return!1;case ce.INVALID_ARGUMENT:case ce.NOT_FOUND:case ce.ALREADY_EXISTS:case ce.PERMISSION_DENIED:case ce.FAILED_PRECONDITION:case ce.ABORTED:case ce.OUT_OF_RANGE:case ce.UNIMPLEMENTED:case ce.DATA_LOSS:return!0}}function oC(n){if(void 0===n)return Bn("GRPC error has no .code"),ce.UNKNOWN;switch(n){case Tr.OK:return ce.OK;case Tr.CANCELLED:return ce.CANCELLED;case Tr.UNKNOWN:return ce.UNKNOWN;case Tr.DEADLINE_EXCEEDED:return ce.DEADLINE_EXCEEDED;case Tr.RESOURCE_EXHAUSTED:return ce.RESOURCE_EXHAUSTED;case Tr.INTERNAL:return ce.INTERNAL;case Tr.UNAVAILABLE:return ce.UNAVAILABLE;case Tr.UNAUTHENTICATED:return ce.UNAUTHENTICATED;case Tr.INVALID_ARGUMENT:return ce.INVALID_ARGUMENT;case Tr.NOT_FOUND:return ce.NOT_FOUND;case Tr.ALREADY_EXISTS:return ce.ALREADY_EXISTS;case Tr.PERMISSION_DENIED:return ce.PERMISSION_DENIED;case Tr.FAILED_PRECONDITION:return ce.FAILED_PRECONDITION;case Tr.ABORTED:return ce.ABORTED;case Tr.OUT_OF_RANGE:return ce.OUT_OF_RANGE;case Tr.UNIMPLEMENTED:return ce.UNIMPLEMENTED;case Tr.DATA_LOSS:return ce.DATA_LOSS;default:return it()}}(sn=Tr||(Tr={}))[sn.OK=0]="OK",sn[sn.CANCELLED=1]="CANCELLED",sn[sn.UNKNOWN=2]="UNKNOWN",sn[sn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",sn[sn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",sn[sn.NOT_FOUND=5]="NOT_FOUND",sn[sn.ALREADY_EXISTS=6]="ALREADY_EXISTS",sn[sn.PERMISSION_DENIED=7]="PERMISSION_DENIED",sn[sn.UNAUTHENTICATED=16]="UNAUTHENTICATED",sn[sn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",sn[sn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",sn[sn.ABORTED=10]="ABORTED",sn[sn.OUT_OF_RANGE=11]="OUT_OF_RANGE",sn[sn.UNIMPLEMENTED=12]="UNIMPLEMENTED",sn[sn.INTERNAL=13]="INTERNAL",sn[sn.UNAVAILABLE=14]="UNAVAILABLE",sn[sn.DATA_LOSS=15]="DATA_LOSS";class uw{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return cw}static getOrCreateInstance(){return null===cw&&(cw=new uw),cw}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let cw=null;function QS(){return new TextEncoder}const Tx=new uo([4294967295,4294967295],0);function JS(n){const e=QS().encode(n),t=new Li;return t.update(e),new Uint8Array(t.digest())}function lw(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new uo([t,r],0),new uo([o,u],0)]}class tf{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Dg(`Invalid padding: ${t}`);if(r<0)throw new Dg(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new Dg(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new Dg(`Invalid padding when bitmap length is 0: ${t}`);this.It=8*e.length-t,this.Tt=uo.fromNumber(this.It)}Et(e,t,r){let o=e.add(t.multiply(uo.fromNumber(r)));return 1===o.compare(Tx)&&(o=new uo([o.getBits(0),o.getBits(1)],0)),o.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=JS(e),[r,o]=lw(t);for(let u=0;u<this.hashCount;u++){const l=this.Et(r,o,u);if(!this.At(l))return!1}return!0}static create(e,t,r){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),l=new tf(u,o,t);return r.forEach(m=>l.insert(m)),l}insert(e){if(0===this.It)return;const t=JS(e),[r,o]=lw(t);for(let u=0;u<this.hashCount;u++){const l=this.Et(r,o,u);this.Rt(l)}}Rt(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class Dg extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Cg{constructor(e,t,r,o,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const o=new Map;return o.set(e,nf.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Cg(vt.min(),o,new Rn(Lt),es(),Bt())}}class nf{constructor(e,t,r,o,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new nf(r,t,Bt(),Bt(),Bt())}}class Gc{constructor(e,t,r,o){this.Pt=e,this.removedTargetIds=t,this.key=r,this.bt=o}}class aC{constructor(e,t){this.targetId=e,this.Vt=t}}class uC{constructor(e,t,r=Qr.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class cC{constructor(){this.St=0,this.Dt=lC(),this.Ct=Qr.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=Bt(),t=Bt(),r=Bt();return this.Dt.forEach((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:it()}}),new nf(this.Ct,this.xt,e,t,r)}Ft(){this.Nt=!1,this.Dt=lC()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class XS{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=es(),this.zt=eA(),this.Wt=new Rn(Lt)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,t=>{const r=this.Zt(t);switch(e.state){case 0:this.te(t)&&r.$t(e.resumeToken);break;case 1:r.Ut(),r.kt||r.Ft(),r.$t(e.resumeToken);break;case 2:r.Ut(),r.kt||this.removeTarget(t);break;case 3:this.te(t)&&(r.Kt(),r.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),r.$t(e.resumeToken));break;default:it()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((r,o)=>{this.te(o)&&t(o)})}ne(e){var t;const r=e.targetId,o=e.Vt.count,u=this.se(r);if(u){const l=u.target;if(Yy(l))if(0===o){const m=new Qe(l.path);this.Yt(r,m,qn.newNoDocument(m,vt.min()))}else dt(1===o);else{const m=this.ie(r);if(m!==o){const E=this.re(e,m);0!==E&&(this.ee(r),this.Wt=this.Wt.insert(r,2===E?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(t=uw.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(b,M,R){var H,te,be,Ue,He,pt;const St={localCacheCount:M,existenceFilterCount:R.count},Dt=R.unchangedNames;return Dt&&(St.bloomFilter={applied:0===b,hashCount:null!==(H=Dt?.hashCount)&&void 0!==H?H:0,bitmapLength:null!==(Ue=null===(be=null===(te=Dt?.bits)||void 0===te?void 0:te.bitmap)||void 0===be?void 0:be.length)&&void 0!==Ue?Ue:0,padding:null!==(pt=null===(He=Dt?.bits)||void 0===He?void 0:He.padding)&&void 0!==pt?pt:0}),St}(E,m,e.Vt))}}}}re(e,t){const{unchangedNames:r,count:o}=e.Vt;if(!r||!r.bits)return 1;const{bits:{bitmap:u="",padding:l=0},hashCount:m=0}=r;let E,b;try{E=Mu(u).toUint8Array()}catch(M){if(M instanceof Bc)return Ci("Decoding the base64 bloom filter in existence filter failed ("+M.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw M}try{b=new tf(E,l,m)}catch(M){return Ci(M instanceof Dg?"BloomFilter error: ":"Applying bloom filter failed: ",M),1}return 0===b.It?1:o!==t-this.oe(e.targetId,b)?2:0}oe(e,t){const r=this.Gt.getRemoteKeysForTarget(e);let o=0;return r.forEach(u=>{const l=this.Gt.ue(),m=`projects/${l.projectId}/databases/${l.database}/documents/${u.path.canonicalString()}`;t.vt(m)||(this.Yt(e,u,null),o++)}),o}ce(e){const t=new Map;this.Qt.forEach((u,l)=>{const m=this.se(l);if(m){if(u.current&&Yy(m.target)){const E=new Qe(m.target.path);null!==this.jt.get(E)||this.ae(l,E)||this.Yt(l,E,qn.newNoDocument(E,e))}u.Mt&&(t.set(l,u.Ot()),u.Ft())}});let r=Bt();this.zt.forEach((u,l)=>{let m=!0;l.forEachWhile(E=>{const b=this.se(E);return!b||"TargetPurposeLimboResolution"===b.purpose||(m=!1,!1)}),m&&(r=r.add(u))}),this.jt.forEach((u,l)=>l.setReadTime(e));const o=new Cg(e,t,this.Wt,this.jt,r);return this.jt=es(),this.zt=eA(),this.Wt=new Rn(Lt),o}Jt(e,t){if(!this.te(e))return;const r=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,r),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,r){if(!this.te(e))return;const o=this.Zt(e);this.ae(e,t)?o.Bt(t,1):o.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),r&&(this.jt=this.jt.insert(t,r))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new cC,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new un(Lt),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||Fe("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new cC),this.Gt.getRemoteKeysForTarget(e).forEach(t=>{this.Yt(e,t,null)})}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function eA(){return new Rn(Qe.comparator)}function lC(){return new Rn(Qe.comparator)}const dC={asc:"ASCENDING",desc:"DESCENDING"},tA={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},nA={and:"AND",or:"OR"};class bg{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function dw(n,e){return n.useProto3Json||lg(e)?e:{value:e}}function wd(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function hC(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function fC(n,e){return wd(n,e.toTimestamp())}function Sr(n){return dt(!!n),vt.fromTimestamp(function(e){const t=dd(e);return new tr(t.seconds,t.nanos)}(n))}function sv(n,e){return(t=n,new Zt(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function pC(n){const e=Zt.fromString(n);return dt(CC(e)),e}function Ed(n,e){return sv(n.databaseId,e.path)}function Fa(n,e){const t=pC(e);if(t.get(1)!==n.databaseId.projectId)throw new Re(ce.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Re(ce.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Qe(gC(t))}function ov(n,e){return sv(n.databaseId,e)}function hw(n){const e=pC(n);return 4===e.length?Zt.emptyPath():gC(e)}function Tg(n){return new Zt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function gC(n){return dt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function mC(n,e,t){return{name:Ed(n,e),fields:t.value.mapValue.fields}}function av(n,e,t){const r=Fa(n,e.name),o=Sr(e.updateTime),u=e.createTime?Sr(e.createTime):vt.min(),l=new hi({mapValue:{fields:e.fields}}),m=qn.newFoundDocument(r,o,u,l);return t&&m.setHasCommittedMutations(),t?m.setHasCommittedMutations():m}function Sg(n,e){let t;if(e instanceof Pu)t={update:mC(n,e.key,e.value)};else if(e instanceof ka)t={delete:Ed(n,e.key)};else if(e instanceof Pa)t={update:mC(n,e.key,e.data),updateMask:aA(e.fieldMask)};else{if(!(e instanceof _d))return it();t={verify:Ed(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,u){const l=u.transform;if(l instanceof Xh)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Oa)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Ur)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof vd)return{fieldPath:u.field.canonicalString(),increment:l.gt};throw it()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:fC(n,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:it()),t;var o}function fw(n,e){const t=e.currentDocument?void 0!==(o=e.currentDocument).updateTime?Wn.updateTime(Sr(o.updateTime)):void 0!==o.exists?Wn.exists(o.exists):Wn.none():Wn.none(),r=e.updateTransforms?e.updateTransforms.map(o=>function(u,l){let m=null;"setToServerValue"in l?(dt("REQUEST_TIME"===l.setToServerValue),m=new Xh):"appendMissingElements"in l?m=new Oa(l.appendMissingElements.values||[]):"removeAllFromArray"in l?m=new Ur(l.removeAllFromArray.values||[]):"increment"in l?m=new vd(u,l.increment):it();const E=zn.fromServerFormat(l.fieldPath);return new ef(E,m)}(n,o)):[];var o;if(e.update){const o=Fa(n,e.update.name),u=new hi({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=new Ui((e.updateMask.fieldPaths||[]).map(b=>zn.fromServerFormat(b)));return new Pa(o,u,l,t,r)}return new Pu(o,u,t,r)}if(e.delete){const o=Fa(n,e.delete);return new ka(o,t)}if(e.verify){const o=Fa(n,e.verify);return new _d(o,t)}return it()}function vC(n,e){return{documents:[ov(n,e.path)]}}function pw(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=ov(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=ov(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const o=function(E){if(0!==E.length)return DC(En.create(E,"and"))}(e.filters);o&&(t.structuredQuery.where=o);const u=function(E){if(0!==E.length)return E.map(b=>{return{field:zc((M=b).field),direction:EC(M.dir)};var M})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const l=dw(n,e.limit);var m,E;return null!==l&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt={before:(m=e.startAt).inclusive,values:m.position}),e.endAt&&(t.structuredQuery.endAt={before:!(E=e.endAt).inclusive,values:E.position}),t}function _C(n){let e=hw(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){dt(1===r);const M=t.from[0];M.allDescendants?o=M.collectionId:e=e.child(M.collectionId)}let u=[];t.where&&(u=function(M){const R=wC(M);return R instanceof En&&Zh(R)?R.getFilters():[R]}(t.where));let l=[];t.orderBy&&(l=t.orderBy.map(M=>{return new Na(Id((R=M).field),function(H){switch(H){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(R.direction));var R}));let m=null;t.limit&&(m=function(M){let R;return R="object"==typeof M?M.value:M,lg(R)?null:R}(t.limit));let E=null;var M;t.startAt&&(E=new $c((M=t.startAt).values||[],!!M.before));let b=null;return t.endAt&&(b=function(M){return new $c(M.values||[],!M.before)}(t.endAt)),qD(e,o,l,u,m,"F",E,b)}function wC(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Id(e.unaryFilter.field);return Xt.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=Id(e.unaryFilter.field);return Xt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Id(e.unaryFilter.field);return Xt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Id(e.unaryFilter.field);return Xt.create(u,"!=",{nullValue:"NULL_VALUE"});default:return it()}}(n):void 0!==n.fieldFilter?Xt.create(Id((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return it()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return En.create(e.compositeFilter.filters.map(t=>wC(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return it()}}(e.compositeFilter.op))}(n):it();var e}function EC(n){return dC[n]}function IC(n){return tA[n]}function oA(n){return nA[n]}function zc(n){return{fieldPath:n.canonicalString()}}function Id(n){return zn.fromServerFormat(n.fieldPath)}function DC(n){return n instanceof Xt?function(e){if("=="===e.op){if(Gy(e.value))return{unaryFilter:{field:zc(e.field),op:"IS_NAN"}};if(U0(e.value))return{unaryFilter:{field:zc(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Gy(e.value))return{unaryFilter:{field:zc(e.field),op:"IS_NOT_NAN"}};if(U0(e.value))return{unaryFilter:{field:zc(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:zc(e.field),op:IC(e.op),value:e.value}}}(n):n instanceof En?function(e){const t=e.getFilters().map(r=>DC(r));return 1===t.length?t[0]:{compositeFilter:{op:oA(e.op),filters:t}}}(n):it()}function aA(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function CC(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class ku{constructor(e,t,r,o,u=vt.min(),l=vt.min(),m=Qr.EMPTY_BYTE_STRING,E=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=m,this.expectedCount=E}withSequenceNumber(e){return new ku(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ku(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ku(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ku(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class uv{constructor(e){this.fe=e}}function mw(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:rf(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Ed(o=n.fe,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:wd(o,u.version.toTimestamp()),createTime:wd(o,u.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Dd(e.version)};else{if(!e.isUnknownDocument())return it();r.unknownDocument={path:t.path.toArray(),version:Dd(e.version)}}var o,u;return r}function rf(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Dd(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Cd(n){const e=new tr(n.seconds,n.nanoseconds);return vt.fromTimestamp(e)}function Fu(n,e){const t=(e.baseMutations||[]).map(u=>fw(n.fe,u));for(let u=0;u<e.mutations.length-1;++u)u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(e.mutations[u].updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u);const r=e.mutations.map(u=>fw(n.fe,u)),o=tr.fromMillis(e.localWriteTimeMs);return new iw(e.batchId,o,t,r)}function Ag(n){const e=Cd(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Cd(n.lastLimboFreeSnapshotVersion):vt.min();let r;var o;return void 0!==n.query.documents?(dt(1===(o=n.query).documents.length),r=Xi(Kh(hw(o.documents[0])))):r=Xi(_C(n.query)),new ku(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Qr.fromBase64String(n.resumeToken))}function yw(n,e){const t=Dd(e.snapshotVersion),r=Dd(e.lastLimboFreeSnapshotVersion);let o;o=Yy(e.target)?vC(n.fe,e.target):pw(n.fe,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Hc(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:o}}function Lu(n){const e=_C({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Xy(e,e.limit,"L"):e}function cv(n,e){return new ow(e.largestBatchId,fw(n.fe,e.overlayMutation))}function bC(n,e){const t=e.path.lastSegment();return[n,di(e.path.popLast()),t]}function uA(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:Dd(r.readTime),documentKey:di(r.documentKey.path),largestBatchId:r.largestBatchId}}class vw{getBundleMetadata(e,t){return lv(e).get(t).next(r=>{if(r)return{id:(o=r).bundleId,createTime:Cd(o.createTime),version:o.version};var o})}saveBundleMetadata(e,t){return lv(e).put({bundleId:(r=t).id,createTime:Dd(Sr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return TC(e).get(t).next(r=>{if(r)return{name:(o=r).name,query:Lu(o.bundledQuery),readTime:Cd(o.readTime)};var o})}saveNamedQuery(e,t){return TC(e).put({name:(r=t).name,readTime:Dd(Sr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function lv(n){return Yr(n,"bundles")}function TC(n){return Yr(n,"namedQueries")}class Mg{constructor(e,t){this.serializer=e,this.userId=t}static de(e,t){return new Mg(e,t.uid||"")}getOverlay(e,t){return sf(e).get(bC(this.userId,t)).next(r=>r?cv(this.serializer,r):null)}getOverlays(e,t){const r=Bi();return se.forEach(t,o=>this.getOverlay(e,o).next(u=>{null!==u&&r.set(o,u)})).next(()=>r)}saveOverlays(e,t,r){const o=[];return r.forEach((u,l)=>{const m=new ow(t,l);o.push(this.we(e,m))}),se.waitFor(o)}removeOverlaysForBatchId(e,t,r){const o=new Set;t.forEach(l=>o.add(di(l.getCollectionPath())));const u=[];return o.forEach(l=>{const m=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);u.push(sf(e).J("collectionPathOverlayIndex",m))}),se.waitFor(u)}getOverlaysForCollection(e,t,r){const o=Bi(),u=di(t),l=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return sf(e).j("collectionPathOverlayIndex",l).next(m=>{for(const E of m){const b=cv(this.serializer,E);o.set(b.getKey(),b)}return o})}getOverlaysForCollectionGroup(e,t,r,o){const u=Bi();let l;const m=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return sf(e).X({index:"collectionGroupOverlayIndex",range:m},(E,b,M)=>{const R=cv(this.serializer,b);u.size()<o||R.largestBatchId===l?(u.set(R.getKey(),R),l=R.largestBatchId):M.done()}).next(()=>u)}we(e,t){return sf(e).put(function(r,o,u){const[l,m,E]=bC(o,u.mutation.key);return{userId:o,collectionPath:m,documentId:E,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:Sg(r.fe,u.mutation)}}(this.serializer,this.userId,t))}}function sf(n){return Yr(n,"documentOverlays")}class bd{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(br(e.integerValue));else if("doubleValue"in e){const r=br(e.doubleValue);isNaN(r)?this.ye(t,13):(this.ye(t,15),Uc(r)?t.pe(0):t.pe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ye(t,20),"string"==typeof r?t.Ie(r):(t.Ie(`${r.seconds||""}`),t.pe(r.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(Mu(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ye(t,45),t.pe(r.latitude||0),t.pe(r.longitude||0)}else"mapValue"in e?kD(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):it()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const r=e.fields||{};this.ye(t,55);for(const o of Object.keys(r))this.Te(o,t),this.me(r[o],t)}Pe(e,t){const r=e.values||[];this.ye(t,50);for(const o of r)this.me(o,t)}ve(e,t){this.ye(t,37),Qe.fromName(e).path.forEach(r=>{this.ye(t,60),this.be(r,t)})}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}function SC(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function dv(n){const e=64-function(t){let r=0;for(let o=0;o<8;++o){const u=SC(255&t[o]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}bd.Ve=new bd;class AC{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.De(r.value),r=t.next();this.Ce()}xe(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ne(r.value),r=t.next();this.ke()}Me(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.De(r);else if(r<2048)this.De(960|r>>>6),this.De(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.De(480|r>>>12),this.De(128|63&r>>>6),this.De(128|63&r);else{const o=t.codePointAt(0);this.De(240|o>>>18),this.De(128|63&o>>>12),this.De(128|63&o>>>6),this.De(128|63&o)}}this.Ce()}$e(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ne(r);else if(r<2048)this.Ne(960|r>>>6),this.Ne(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ne(480|r>>>12),this.Ne(128|63&r>>>6),this.Ne(128|63&r);else{const o=t.codePointAt(0);this.Ne(240|o>>>18),this.Ne(128|63&o>>>12),this.Ne(128|63&o>>>6),this.Ne(128|63&o)}}this.ke()}Oe(e){const t=this.Fe(e),r=dv(t);this.Be(1+r),this.buffer[this.position++]=255&r;for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=255&t[o]}Le(e){const t=this.Fe(e),r=dv(t);this.Be(1+r),this.buffer[this.position++]=~(255&r);for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=~(255&t[o])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}Qe(){return this.buffer.slice(0,this.position)}Fe(e){const t=function(o){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,o,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let o=1;o<t.length;++o)t[o]^=r?255:0;return t}De(e){const t=255&e;0===t?(this.Ue(0),this.Ue(255)):255===t?(this.Ue(255),this.Ue(0)):this.Ue(t)}Ne(e){const t=255&e;0===t?(this.Ge(0),this.Ge(255)):255===t?(this.Ge(255),this.Ge(0)):this.Ge(e)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(e){this.Be(1),this.buffer[this.position++]=e}Ge(e){this.Be(1),this.buffer[this.position++]=~e}Be(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const o=new Uint8Array(r);o.set(this.buffer),this.buffer=o}}class MC{constructor(e){this.je=e}Ae(e){this.je.Se(e)}Ie(e){this.je.Me(e)}pe(e){this.je.Oe(e)}ge(){this.je.qe()}}class xC{constructor(e){this.je=e}Ae(e){this.je.xe(e)}Ie(e){this.je.$e(e)}pe(e){this.je.Le(e)}ge(){this.je.Ke()}}class af{constructor(){this.je=new AC,this.ze=new MC(this.je),this.We=new xC(this.je)}seed(e){this.je.seed(e)}He(e){return 0===e?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}class Td{constructor(e,t,r,o){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=o}Je(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Td(this.indexId,this.documentKey,this.arrayValue,r)}}function qc(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=NC(n.arrayValue,e.arrayValue),0!==t?t:(t=NC(n.directionalValue,e.directionalValue),0!==t?t:Qe.comparator(n.documentKey,e.documentKey)))}function NC(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class cA{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ye=e.orderBy,this.Xe=[];for(const t of e.filters){const r=t;r.isInequality()?this.Ze=r:this.Xe.push(r)}}tn(e){dt(e.collectionGroup===this.collectionId);const t=Py(e);if(void 0!==t&&!this.en(t))return!1;const r=cd(e);let o=new Set,u=0,l=0;for(;u<r.length&&this.en(r[u]);++u)o=o.add(r[u].fieldPath.canonicalString());if(u===r.length)return!0;if(void 0!==this.Ze){if(!o.has(this.Ze.field.canonicalString())){const m=r[u];if(!this.nn(this.Ze,m)||!this.sn(this.Ye[l++],m))return!1}++u}for(;u<r.length;++u)if(l>=this.Ye.length||!this.sn(this.Ye[l++],r[u]))return!1;return!0}en(e){for(const t of this.Xe)if(this.nn(t,e))return!0;return!1}nn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function _w(n){var e,t;if(dt(n instanceof Xt||n instanceof En),n instanceof Xt){if(n instanceof q0){const o=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(u=>Xt.create(n.field,"==",u)))||[];return En.create(o,"or")}return n}const r=n.filters.map(o=>_w(o));return En.create(r,n.op)}function Sx(n){if(0===n.getFilters().length)return[];const e=OC(_w(n));return dt(RC(e)),hv(e)||ww(e)?[e]:e.getFilters()}function hv(n){return n instanceof Xt}function ww(n){return n instanceof En&&Zh(n)}function RC(n){return hv(n)||ww(n)||function(e){if(e instanceof En&&qy(e)){for(const t of e.getFilters())if(!hv(t)&&!ww(t))return!1;return!0}return!1}(n)}function OC(n){if(dt(n instanceof Xt||n instanceof En),n instanceof Xt)return n;if(1===n.filters.length)return OC(n.filters[0]);const e=n.filters.map(r=>OC(r));let t=En.create(e,n.op);return t=fv(t),RC(t)?t:(dt(t instanceof En),dt(pd(t)),dt(t.filters.length>1),t.filters.reduce((r,o)=>Ew(r,o)))}function Ew(n,e){let t;return dt(n instanceof Xt||n instanceof En),dt(e instanceof Xt||e instanceof En),t=n instanceof Xt?e instanceof Xt?En.create([n,e],"and"):PC(n,e):e instanceof Xt?PC(e,n):function(r,o){if(dt(r.filters.length>0&&o.filters.length>0),pd(r)&&pd(o))return H0(r,o.getFilters());const u=qy(r)?r:o,l=qy(r)?o:r,m=u.filters.map(E=>Ew(E,l));return En.create(m,"or")}(n,e),fv(t)}function PC(n,e){if(pd(e))return H0(e,n.getFilters());{const t=e.filters.map(r=>Ew(n,r));return En.create(t,"or")}}function fv(n){if(dt(n instanceof Xt||n instanceof En),n instanceof Xt)return n;const e=n.getFilters();if(1===e.length)return fv(e[0]);if(VD(n))return n;const t=e.map(o=>fv(o)),r=[];return t.forEach(o=>{o instanceof Xt?r.push(o):o instanceof En&&(o.op===n.op?r.push(...o.filters):r.push(o))}),1===r.length?r[0]:En.create(r,n.op)}class lA{constructor(){this.rn=new Iw}addToCollectionParentIndex(e,t){return this.rn.add(t),se.resolve()}getCollectionParents(e,t){return se.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return se.resolve()}deleteFieldIndex(e,t){return se.resolve()}getDocumentsMatchingTarget(e,t){return se.resolve(null)}getIndexType(e,t){return se.resolve(0)}getFieldIndexes(e,t){return se.resolve([])}getNextCollectionGroupToUpdate(e){return se.resolve(null)}getMinOffset(e,t){return se.resolve(Vi.min())}getMinOffsetFromCollectionGroup(e,t){return se.resolve(Vi.min())}updateCollectionGroup(e,t,r){return se.resolve()}updateIndexEntries(e,t){return se.resolve()}}class Iw{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new un(Zt.comparator),u=!o.has(r);return this.index[t]=o.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new un(Zt.comparator)).toArray()}}const pv=new Uint8Array(0);class dA{constructor(e,t){this.user=e,this.databaseId=t,this.on=new Iw,this.un=new Ra(r=>Hc(r),(r,o)=>yg(r,o)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.on.has(t)){const r=t.lastSegment(),o=t.popLast();e.addOnCommittedListener(()=>{this.on.add(t)});const u={collectionId:r,parent:di(o)};return kC(e).put(u)}return se.resolve()}getCollectionParents(e,t){const r=[],o=IDBKeyRange.bound([t,""],[pD(t),""],!1,!0);return kC(e).j(o).next(u=>{for(const l of u){if(l.collectionId!==t)break;r.push(Aa(l.parent))}return r})}addFieldIndex(e,t){const r=gv(e),o={indexId:(l=t).indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(m=>[m.fieldPath.canonicalString(),m.kind])};var l;delete o.indexId;const u=r.add(o);if(t.indexState){const l=Ng(e);return u.next(m=>{l.put(uA(m,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return u.next()}deleteFieldIndex(e,t){const r=gv(e),o=Ng(e),u=xg(e);return r.delete(t.indexId).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=xg(e);let o=!0;const u=new Map;return se.forEach(this.cn(t),l=>this.an(e,l).next(m=>{o&&(o=!!m),u.set(l,m)})).next(()=>{if(o){let l=Bt();const m=[];return se.forEach(u,(E,b)=>{var M;Fe("IndexedDbIndexManager",`Using index ${M=E,`id=${M.indexId}|cg=${M.collectionGroup}|f=${M.fields.map(Dt=>`${Dt.fieldPath}:${Dt.kind}`).join(",")}`} to execute ${Hc(t)}`);const R=function(Dt,Ot){const Ht=Py(Ot);if(void 0===Ht)return null;for(const on of Qy(Dt,Ht.fieldPath))switch(on.op){case"array-contains-any":return on.value.arrayValue.values||[];case"array-contains":return[on.value]}return null}(b,E),H=function(Dt,Ot){const Ht=new Map;for(const on of cd(Ot))for(const ys of Qy(Dt,on.fieldPath))switch(ys.op){case"==":case"in":Ht.set(on.fieldPath.canonicalString(),ys.value);break;case"not-in":case"!=":return Ht.set(on.fieldPath.canonicalString(),ys.value),Array.from(Ht.values())}return null}(b,E),te=function(Dt,Ot){const Ht=[];let on=!0;for(const ys of cd(Ot)){const um=0===ys.kind?GD(Dt,ys.fieldPath,Dt.startAt):zD(Dt,ys.fieldPath,Dt.startAt);Ht.push(um.value),on&&(on=um.inclusive)}return new $c(Ht,on)}(b,E),be=function(Dt,Ot){const Ht=[];let on=!0;for(const ys of cd(Ot)){const um=0===ys.kind?zD(Dt,ys.fieldPath,Dt.endAt):GD(Dt,ys.fieldPath,Dt.endAt);Ht.push(um.value),on&&(on=um.inclusive)}return new $c(Ht,on)}(b,E),Ue=this.hn(E,b,te),He=this.hn(E,b,be),pt=this.ln(E,b,H),St=this.fn(E.indexId,R,Ue,te.inclusive,He,be.inclusive,pt);return se.forEach(St,Dt=>r.H(Dt,t.limit).next(Ot=>{Ot.forEach(Ht=>{const on=Qe.fromSegments(Ht.documentKey);l.has(on)||(l=l.add(on),m.push(on))})}))}).next(()=>m)}return se.resolve(null)})}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:Sx(En.create(e.filters,"and")).map(r=>Ky(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}fn(e,t,r,o,u,l,m){const E=(null!=t?t.length:1)*Math.max(r.length,u.length),b=E/(null!=t?t.length:1),M=[];for(let R=0;R<E;++R){const H=t?this.dn(t[R/b]):pv,te=this.wn(e,H,r[R%b],o),be=this._n(e,H,u[R%b],l),Ue=m.map(He=>this.wn(e,H,He,!0));M.push(...this.createRange(te,be,Ue))}return M}wn(e,t,r,o){const u=new Td(e,Qe.empty(),t,r);return o?u:u.Je()}_n(e,t,r,o){const u=new Td(e,Qe.empty(),t,r);return o?u.Je():u}an(e,t){const r=new cA(t),o=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,o).next(u=>{let l=null;for(const m of u)r.tn(m)&&(!l||m.fields.length>l.fields.length)&&(l=m);return l})}getIndexType(e,t){let r=2;const o=this.cn(t);return se.forEach(o,u=>this.an(e,u).next(l=>{l?0!==r&&l.fields.length<function(m){let E=new un(zn.comparator),b=!1;for(const M of m.filters)for(const R of M.getFlattenedFilters())R.field.isKeyField()||("array-contains"===R.op||"array-contains-any"===R.op?b=!0:E=E.add(R.field));for(const M of m.orderBy)M.field.isKeyField()||(E=E.add(M.field));return E.size+(b?1:0)}(u)&&(r=1):r=0})).next(()=>null!==t.limit&&o.length>1&&2===r?1:r)}mn(e,t){const r=new af;for(const o of cd(e)){const u=t.data.field(o.fieldPath);if(null==u)return null;const l=r.He(o.kind);bd.Ve._e(u,l)}return r.Qe()}dn(e){const t=new af;return bd.Ve._e(e,t.He(0)),t.Qe()}gn(e,t){const r=new af;return bd.Ve._e(fd(this.databaseId,t),r.He(function(o){const u=cd(o);return 0===u.length?0:u[u.length-1].kind}(e))),r.Qe()}ln(e,t,r){if(null===r)return[];let o=[];o.push(new af);let u=0;for(const l of cd(e)){const m=r[u++];for(const E of o)if(this.yn(t,l.fieldPath)&&Hy(m))o=this.pn(o,l,m);else{const b=E.He(l.kind);bd.Ve._e(m,b)}}return this.In(o)}hn(e,t,r){return this.ln(e,t,r.position)}In(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Qe();return t}pn(e,t,r){const o=[...e],u=[];for(const l of r.arrayValue.values||[])for(const m of o){const E=new af;E.seed(m.Qe()),bd.Ve._e(l,E.He(t.kind)),u.push(E)}return u}yn(e,t){return!!e.filters.find(r=>r instanceof Xt&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=gv(e),o=Ng(e);return(t?r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.j()).next(u=>{const l=[];return se.forEach(u,m=>o.get([m.indexId,this.uid]).next(E=>{l.push(function(b,M){const R=M?new ag(M.sequenceNumber,new Vi(Cd(M.readTime),new Qe(Aa(M.documentKey)),M.largestBatchId)):ag.empty(),H=b.fields.map(([te,be])=>new ky(zn.fromServerFormat(te),be));return new Lc(b.indexId,b.collectionGroup,H,R)}(m,E))})).next(()=>l)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,o)=>{const u=r.indexState.sequenceNumber-o.indexState.sequenceNumber;return 0!==u?u:Lt(r.collectionGroup,o.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const o=gv(e),u=Ng(e);return this.Tn(e).next(l=>o.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(m=>se.forEach(m,E=>u.put(uA(E.indexId,this.user,l,r)))))}updateIndexEntries(e,t){const r=new Map;return se.forEach(t,(o,u)=>{const l=r.get(o.collectionGroup);return(l?se.resolve(l):this.getFieldIndexes(e,o.collectionGroup)).next(m=>(r.set(o.collectionGroup,m),se.forEach(m,E=>this.En(e,o,E).next(b=>{const M=this.An(u,E);return b.isEqual(M)?se.resolve():this.vn(e,u,E,b,M)}))))})}Rn(e,t,r,o){return xg(e).put({indexId:o.indexId,uid:this.uid,arrayValue:o.arrayValue,directionalValue:o.directionalValue,orderedDocumentKey:this.gn(r,t.key),documentKey:t.key.path.toArray()})}Pn(e,t,r,o){return xg(e).delete([o.indexId,this.uid,o.arrayValue,o.directionalValue,this.gn(r,t.key),t.key.path.toArray()])}En(e,t,r){const o=xg(e);let u=new un(qc);return o.X({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.gn(r,t)])},(l,m)=>{u=u.add(new Td(r.indexId,t,m.arrayValue,m.directionalValue))}).next(()=>u)}An(e,t){let r=new un(qc);const o=this.mn(t,e);if(null==o)return r;const u=Py(t);if(null!=u){const l=e.data.field(u.fieldPath);if(Hy(l))for(const m of l.arrayValue.values||[])r=r.add(new Td(t.indexId,e.key,this.dn(m),o))}else r=r.add(new Td(t.indexId,e.key,pv,o));return r}vn(e,t,r,o,u){Fe("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const l=[];return function(m,E,b,M,R){const H=m.getIterator(),te=E.getIterator();let be=zh(H),Ue=zh(te);for(;be||Ue;){let He=!1,pt=!1;if(be&&Ue){const St=b(be,Ue);St<0?pt=!0:St>0&&(He=!0)}else null!=be?pt=!0:He=!0;He?(M(Ue),Ue=zh(te)):pt?(R(be),be=zh(H)):(be=zh(H),Ue=zh(te))}}(o,u,qc,m=>{l.push(this.Rn(e,t,r,m))},m=>{l.push(this.Pn(e,t,r,m))}),se.waitFor(l)}Tn(e){let t=1;return Ng(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,o,u)=>{u.done(),t=o.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((l,m)=>qc(l,m)).filter((l,m,E)=>!m||0!==qc(l,E[m-1]));const o=[];o.push(e);for(const l of r){const m=qc(l,e),E=qc(l,t);if(0===m)o[0]=e.Je();else if(m>0&&E<0)o.push(l),o.push(l.Je());else if(E>0)break}o.push(t);const u=[];for(let l=0;l<o.length;l+=2){if(this.bn(o[l],o[l+1]))return[];u.push(IDBKeyRange.bound([o[l].indexId,this.uid,o[l].arrayValue,o[l].directionalValue,pv,[]],[o[l+1].indexId,this.uid,o[l+1].arrayValue,o[l+1].directionalValue,pv,[]]))}return u}bn(e,t){return qc(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(FC)}getMinOffset(e,t){return se.mapArray(this.cn(t),r=>this.an(e,r).next(o=>o||it())).next(FC)}}function kC(n){return Yr(n,"collectionParents")}function xg(n){return Yr(n,"indexEntries")}function gv(n){return Yr(n,"indexConfiguration")}function Ng(n){return Yr(n,"indexState")}function FC(n){dt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const o=n[r].indexState.offset;$h(o,e)<0&&(e=o),t<o.largestBatchId&&(t=o.largestBatchId)}return new Vi(e.readTime,e.documentKey,t)}const uf={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class bi{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new bi(e,bi.DEFAULT_COLLECTION_PERCENTILE,bi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Dw(n,e,t){const r=n.store("mutations"),o=n.store("documentMutations"),u=[],l=IDBKeyRange.only(t.batchId);let m=0;const E=r.X({range:l},(M,R,H)=>(m++,H.delete()));u.push(E.next(()=>{dt(1===m)}));const b=[];for(const M of t.mutations){const R=Ly(e,M.key.path,t.batchId);u.push(o.delete(R)),b.push(M.key)}return se.waitFor(u).next(()=>b)}function Rg(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw it();e=n.noDocument}return JSON.stringify(e).length}bi.DEFAULT_COLLECTION_PERCENTILE=10,bi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,bi.DEFAULT=new bi(41943040,bi.DEFAULT_COLLECTION_PERCENTILE,bi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),bi.DISABLED=new bi(-1,0,0);class Og{constructor(e,t,r,o){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=o,this.Vn={}}static de(e,t,r,o){dt(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new Og(u,t,r,o)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Vu(e).X({index:"userMutationsIndex",range:r},(o,u,l)=>{t=!1,l.done()}).next(()=>t)}addMutationBatch(e,t,r,o){const u=cf(e),l=Vu(e);return l.add({}).next(m=>{dt("number"==typeof m);const E=new iw(m,t,r,o),b=function(H,te,be){const Ue=be.baseMutations.map(pt=>Sg(H.fe,pt)),He=be.mutations.map(pt=>Sg(H.fe,pt));return{userId:te,batchId:be.batchId,localWriteTimeMs:be.localWriteTime.toMillis(),baseMutations:Ue,mutations:He}}(this.serializer,this.userId,E),M=[];let R=new un((H,te)=>Lt(H.canonicalString(),te.canonicalString()));for(const H of o){const te=Ly(this.userId,H.key.path,m);R=R.add(H.key.path.popLast()),M.push(l.put(b)),M.push(u.put(te,DD))}return R.forEach(H=>{M.push(this.indexManager.addToCollectionParentIndex(e,H))}),e.addOnCommittedListener(()=>{this.Vn[m]=E.keys()}),se.waitFor(M).next(()=>E)})}lookupMutationBatch(e,t){return Vu(e).get(t).next(r=>r?(dt(r.userId===this.userId),Fu(this.serializer,r)):null)}Sn(e,t){return this.Vn[t]?se.resolve(this.Vn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const o=r.keys();return this.Vn[t]=o,o}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return Vu(e).X({index:"userMutationsIndex",range:o},(l,m,E)=>{m.userId===this.userId&&(dt(m.batchId>=r),u=Fu(this.serializer,m)),E.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Vu(e).X({index:"userMutationsIndex",range:t,reverse:!0},(o,u,l)=>{r=u.batchId,l.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Vu(e).j("userMutationsIndex",t).next(r=>r.map(o=>Fu(this.serializer,o)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Gh(this.userId,t.path),o=IDBKeyRange.lowerBound(r),u=[];return cf(e).X({range:o},(l,m,E)=>{const[b,M,R]=l,H=Aa(M);if(b===this.userId&&t.path.isEqual(H))return Vu(e).get(R).next(te=>{if(!te)throw it();dt(te.userId===this.userId),u.push(Fu(this.serializer,te))});E.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new un(Lt);const o=[];return t.forEach(u=>{const l=Gh(this.userId,u.path),m=IDBKeyRange.lowerBound(l),E=cf(e).X({range:m},(b,M,R)=>{const[H,te,be]=b,Ue=Aa(te);H===this.userId&&u.path.isEqual(Ue)?r=r.add(be):R.done()});o.push(E)}),se.waitFor(o).next(()=>this.Dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1,u=Gh(this.userId,r),l=IDBKeyRange.lowerBound(u);let m=new un(Lt);return cf(e).X({range:l},(E,b,M)=>{const[R,H,te]=E,be=Aa(H);R===this.userId&&r.isPrefixOf(be)?be.length===o&&(m=m.add(te)):M.done()}).next(()=>this.Dn(e,m))}Dn(e,t){const r=[],o=[];return t.forEach(u=>{o.push(Vu(e).get(u).next(l=>{if(null===l)throw it();dt(l.userId===this.userId),r.push(Fu(this.serializer,l))}))}),se.waitFor(o).next(()=>r)}removeMutationBatch(e,t){return Dw(e.ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Cn(t.batchId)}),se.forEach(r,o=>this.referenceDelegate.markPotentiallyOrphaned(e,o))))}Cn(e){delete this.Vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return se.resolve();const r=IDBKeyRange.lowerBound([this.userId]),o=[];return cf(e).X({range:r},(u,l,m)=>{if(u[0]===this.userId){const E=Aa(u[1]);o.push(E)}else m.done()}).next(()=>{dt(0===o.length)})})}containsKey(e,t){return Cw(e,this.userId,t)}xn(e){return hA(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Cw(n,e,t){const r=Gh(e,t.path),o=r[1],u=IDBKeyRange.lowerBound(r);let l=!1;return cf(n).X({range:u,Y:!0},(m,E,b)=>{const[M,R,H]=m;M===e&&R===o&&(l=!0),b.done()}).next(()=>l)}function Vu(n){return Yr(n,"mutations")}function cf(n){return Yr(n,"documentMutations")}function hA(n){return Yr(n,"mutationQueues")}class lf{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new lf(0)}static Mn(){return new lf(-1)}}class LC{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.$n(e).next(t=>{const r=new lf(t.highestTargetId);return t.highestTargetId=r.next(),this.On(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.$n(e).next(t=>vt.fromTimestamp(new tr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.$n(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.$n(e).next(o=>(o.highestListenSequenceNumber=t,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),t>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=t),this.On(e,o)))}addTargetData(e,t){return this.Fn(e,t).next(()=>this.$n(e).next(r=>(r.targetCount+=1,this.Bn(t,r),this.On(e,r))))}updateTargetData(e,t){return this.Fn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>df(e).delete(t.targetId)).next(()=>this.$n(e)).next(r=>(dt(r.targetCount>0),r.targetCount-=1,this.On(e,r)))}removeTargets(e,t,r){let o=0;const u=[];return df(e).X((l,m)=>{const E=Ag(m);E.sequenceNumber<=t&&null===r.get(E.targetId)&&(o++,u.push(this.removeTargetData(e,E)))}).next(()=>se.waitFor(u)).next(()=>o)}forEachTarget(e,t){return df(e).X((r,o)=>{const u=Ag(o);t(u)})}$n(e){return VC(e).get("targetGlobalKey").next(t=>(dt(null!==t),t))}On(e,t){return VC(e).put("targetGlobalKey",t)}Fn(e,t){return df(e).put(yw(this.serializer,t))}Bn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.$n(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Hc(t),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return df(e).X({range:o,index:"queryTargetsIndex"},(l,m,E)=>{const b=Ag(m);yg(t,b.target)&&(u=b,E.done())}).next(()=>u)}addMatchingKeys(e,t,r){const o=[],u=Wc(e);return t.forEach(l=>{const m=di(l.path);o.push(u.put({targetId:r,path:m})),o.push(this.referenceDelegate.addReference(e,r,l))}),se.waitFor(o)}removeMatchingKeys(e,t,r){const o=Wc(e);return se.forEach(t,u=>{const l=di(u.path);return se.waitFor([o.delete([r,l]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=Wc(e),o=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(o)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),o=Wc(e);let u=Bt();return o.X({range:r,Y:!0},(l,m,E)=>{const b=Aa(l[1]),M=new Qe(b);u=u.add(M)}).next(()=>u)}containsKey(e,t){const r=di(t.path),o=IDBKeyRange.bound([r],[pD(r)],!1,!0);let u=0;return Wc(e).X({index:"documentTargetsIndex",Y:!0,range:o},([l,m],E,b)=>{0!==l&&(u++,b.done())}).next(()=>u>0)}le(e,t){return df(e).get(t).next(r=>r?Ag(r):null)}}function df(n){return Yr(n,"targets")}function VC(n){return Yr(n,"targetGlobal")}function Wc(n){return Yr(n,"targetDocuments")}function UC([n,e],[t,r]){const o=Lt(n,t);return 0===o?Lt(e,r):o}class Pg{constructor(e){this.Ln=e,this.buffer=new un(UC),this.qn=0}Un(){return++this.qn}Kn(e){const t=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();UC(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class BC{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}Qn(e){var t=this;Fe("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,we.Z)(function*(){t.Gn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Su(r)?Fe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Vc(r)}yield t.Qn(3e5)}))}}class bw{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.zn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return se.resolve(Ji.ct);const r=new Pg(t);return this.jn.forEachTarget(e,o=>r.Kn(o.sequenceNumber)).next(()=>this.jn.Wn(e,o=>r.Kn(o))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Fe("LruGarbageCollector","Garbage collection skipped; disabled"),se.resolve(uf)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Fe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),uf):this.Hn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Hn(e,t){let r,o,u,l,m,E,b;const M=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(R=>(R>this.params.maximumSequenceNumbersToCollect?(Fe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${R}`),o=this.params.maximumSequenceNumbersToCollect):o=R,l=Date.now(),this.nthSequenceNumber(e,o))).next(R=>(r=R,m=Date.now(),this.removeTargets(e,r,t))).next(R=>(u=R,E=Date.now(),this.removeOrphanedDocuments(e,r))).next(R=>(b=Date.now(),kc()<=Ac.in.DEBUG&&Fe("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${l-M}ms\n\tDetermined least recently used ${o} in `+(m-l)+`ms\n\tRemoved ${u} targets in `+(E-m)+`ms\n\tRemoved ${R} documents in `+(b-E)+`ms\nTotal Duration: ${b-M}ms`),se.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:R})))}}class Ax{constructor(e,t){this.db=e,this.garbageCollector=function jC(n,e){return new bw(n,e)}(this,t)}zn(e){const t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(o=>r+o))}Jn(e){let t=0;return this.Wn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Wn(e,t){return this.Yn(e,(r,o)=>t(o))}addReference(e,t,r){return mv(e,r)}removeReference(e,t,r){return mv(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return mv(e,t)}Xn(e,t){return function(r,o){let u=!1;return hA(r).Z(l=>Cw(r,l,o).next(m=>(m&&(u=!0),se.resolve(!m)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let u=0;return this.Yn(e,(l,m)=>{if(m<=t){const E=this.Xn(e,l).next(b=>{if(!b)return u++,r.getEntry(e,l).next(()=>(r.removeEntry(l,vt.min()),Wc(e).delete([0,di(l.path)])))});o.push(E)}}).next(()=>se.waitFor(o)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return mv(e,t)}Yn(e,t){const r=Wc(e);let o,u=Ji.ct;return r.X({index:"documentTargetsIndex"},([l,m],{path:E,sequenceNumber:b})=>{0===l?(u!==Ji.ct&&t(new Qe(Aa(o)),u),u=b,o=E):u=Ji.ct}).next(()=>{u!==Ji.ct&&t(new Qe(Aa(o)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function mv(n,e){return Wc(n).put((r=n.currentSequenceNumber,{targetId:0,path:di(e.path),sequenceNumber:r}));var r}class fA{constructor(){this.changes=new Ra(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,qn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?se.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class kg{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return La(e).put(r)}removeEntry(e,t,r){return La(e).delete(function(o,u){const l=o.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],rf(u),l[l.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Zn(e,r)))}getEntry(e,t){let r=qn.newInvalidDocument(t);return La(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(hf(t))},(o,u)=>{r=this.ts(t,u)}).next(()=>r)}es(e,t){let r={size:0,document:qn.newInvalidDocument(t)};return La(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(hf(t))},(o,u)=>{r={document:this.ts(t,u),size:Rg(u)}}).next(()=>r)}getEntries(e,t){let r=es();return this.ns(e,t,(o,u)=>{const l=this.ts(o,u);r=r.insert(o,l)}).next(()=>r)}ss(e,t){let r=es(),o=new Rn(Qe.comparator);return this.ns(e,t,(u,l)=>{const m=this.ts(u,l);r=r.insert(u,m),o=o.insert(u,Rg(l))}).next(()=>({documents:r,rs:o}))}ns(e,t,r){if(t.isEmpty())return se.resolve();let o=new un(Tw);t.forEach(E=>o=o.add(E));const u=IDBKeyRange.bound(hf(o.first()),hf(o.last())),l=o.getIterator();let m=l.getNext();return La(e).X({index:"documentKeyIndex",range:u},(E,b,M)=>{const R=Qe.fromSegments([...b.prefixPath,b.collectionGroup,b.documentId]);for(;m&&Tw(m,R)<0;)r(m,null),m=l.getNext();m&&m.isEqual(R)&&(r(m,b),m=l.hasNext()?l.getNext():null),m?M.G(hf(m)):M.done()}).next(()=>{for(;m;)r(m,null),m=l.hasNext()?l.getNext():null})}getDocumentsMatchingQuery(e,t,r,o){const u=t.path,l=[u.popLast().toArray(),u.lastSegment(),rf(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],m=[u.popLast().toArray(),u.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return La(e).j(IDBKeyRange.bound(l,m,!0)).next(E=>{let b=es();for(const M of E){const R=this.ts(Qe.fromSegments(M.prefixPath.concat(M.collectionGroup,M.documentId)),M);R.isFoundDocument()&&(Yh(t,R)||o.has(R.key))&&(b=b.insert(R.key,R))}return b})}getAllFromCollectionGroup(e,t,r,o){let u=es();const l=GC(t,r),m=GC(t,Vi.max());return La(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,m,!0)},(E,b,M)=>{const R=this.ts(Qe.fromSegments(b.prefixPath.concat(b.collectionGroup,b.documentId)),b);u=u.insert(R.key,R),u.size===o&&M.done()}).next(()=>u)}newChangeBuffer(e){return new pA(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return HC(e).get("remoteDocumentGlobalKey").next(t=>(dt(!!t),t))}Zn(e,t){return HC(e).put("remoteDocumentGlobalKey",t)}ts(e,t){if(t){const r=function gw(n,e){let t;if(e.document)t=av(n.fe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Qe.fromSegments(e.noDocument.path),o=Cd(e.noDocument.readTime);t=qn.newNoDocument(r,o),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return it();{const r=Qe.fromSegments(e.unknownDocument.path),o=Cd(e.unknownDocument.version);t=qn.newUnknownDocument(r,o)}}return e.readTime&&t.setReadTime(function(r){const o=new tr(r[0],r[1]);return vt.fromTimestamp(o)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(vt.min()))return r}return qn.newInvalidDocument(e)}}function $C(n){return new kg(n)}class pA extends fA{constructor(e,t){super(),this.os=e,this.trackRemovals=t,this.us=new Ra(r=>r.toString(),(r,o)=>r.isEqual(o))}applyChanges(e){const t=[];let r=0,o=new un((u,l)=>Lt(u.canonicalString(),l.canonicalString()));return this.changes.forEach((u,l)=>{const m=this.us.get(u);if(t.push(this.os.removeEntry(e,u,m.readTime)),l.isValidDocument()){const E=mw(this.os.serializer,l);o=o.add(u.path.popLast());const b=Rg(E);r+=b-m.size,t.push(this.os.addEntry(e,u,E))}else if(r-=m.size,this.trackRemovals){const E=mw(this.os.serializer,l.convertToNoDocument(vt.min()));t.push(this.os.addEntry(e,u,E))}}),o.forEach(u=>{t.push(this.os.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.os.updateMetadata(e,r)),se.waitFor(t)}getFromCache(e,t){return this.os.es(e,t).next(r=>(this.us.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.os.ss(e,t).next(({documents:r,rs:o})=>(o.forEach((u,l)=>{this.us.set(u,{size:l,readTime:r.get(u).readTime})}),r))}}function HC(n){return Yr(n,"remoteDocumentGlobal")}function La(n){return Yr(n,"remoteDocumentsV14")}function hf(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function GC(n,e){const t=e.documentKey.path.toArray();return[n,rf(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Tw(n,e){const t=n.path.toArray(),r=e.path.toArray();let o=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(o=Lt(t[u],r[u]),o)return o;return o=Lt(t.length,r.length),o||(o=Lt(t[t.length-2],r[r.length-2]),o||Lt(t[t.length-1],r[r.length-1]))}class yv{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class zC{constructor(e,t,r,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(o=>(r=o,this.remoteDocumentCache.getEntry(e,t))).next(o=>(null!==r&&Ig(r.mutation,o,Ui.empty(),tr.now()),o))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Bt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Bt()){const o=Bi();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,r).next(u=>{let l=Qh();return u.forEach((m,E)=>{l=l.insert(m,E.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const r=Bi();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Bt()))}populateOverlays(e,t,r){const o=[];return r.forEach(u=>{t.has(u)||o.push(u)}),this.documentOverlayCache.getOverlays(e,o).next(u=>{u.forEach((l,m)=>{t.set(l,m)})})}computeViews(e,t,r,o){let u=es();const l=_g(),m=_g();return t.forEach((E,b)=>{const M=r.get(b.key);o.has(b.key)&&(void 0===M||M.mutation instanceof Pa)?u=u.insert(b.key,b):void 0!==M?(l.set(b.key,M.mutation.getFieldMask()),Ig(M.mutation,b,M.mutation.getFieldMask(),tr.now())):l.set(b.key,Ui.empty())}),this.recalculateAndSaveOverlays(e,u).next(E=>(E.forEach((b,M)=>l.set(b,M)),t.forEach((b,M)=>{var R;return m.set(b,new yv(M,null!==(R=l.get(b))&&void 0!==R?R:null))}),m))}recalculateAndSaveOverlays(e,t){const r=_g();let o=new Rn((l,m)=>l-m),u=Bt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const m of l)m.keys().forEach(E=>{const b=t.get(E);if(null===b)return;let M=r.get(E)||Ui.empty();M=m.applyToLocalView(b,M),r.set(E,M);const R=(o.get(m.batchId)||Bt()).add(E);o=o.insert(m.batchId,R)})}).next(()=>{const l=[],m=o.getReverseIterator();for(;m.hasNext();){const E=m.getNext(),b=E.key,M=E.value,R=QD();M.forEach(H=>{if(!u.has(H)){const te=tC(t.get(H),r.get(H));null!==te&&R.set(H,te),u=u.add(H)}}),l.push(this.documentOverlayCache.saveOverlays(e,b,R))}return se.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return Qe.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):Z0(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var o}getNextDocuments(e,t,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,o).next(u=>{const l=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,o-u.size):se.resolve(Bi());let m=-1,E=u;return l.next(b=>se.forEach(b,(M,R)=>(m<R.largestBatchId&&(m=R.largestBatchId),u.get(M)?se.resolve():this.remoteDocumentCache.getEntry(e,M).next(H=>{E=E.insert(M,H)}))).next(()=>this.populateOverlays(e,b,u)).next(()=>this.computeViews(e,E,b,Bt())).next(M=>({batchId:m,changes:X0(M)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Qe(t)).next(r=>{let o=Qh();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const o=t.collectionGroup;let u=Qh();return this.indexManager.getCollectionParents(e,o).next(l=>se.forEach(l,m=>{const E=(b=t,M=m.child(o),new Ou(M,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt));var b,M;return this.getDocumentsMatchingCollectionQuery(e,E,r).next(b=>{b.forEach((M,R)=>{u=u.insert(M,R)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,r){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(u=>(o=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o))).next(u=>{o.forEach((m,E)=>{const b=E.getKey();null===u.get(b)&&(u=u.insert(b,qn.newInvalidDocument(b)))});let l=Qh();return u.forEach((m,E)=>{const b=o.get(m);void 0!==b&&Ig(b.mutation,E,Ui.empty(),tr.now()),Yh(t,E)&&(l=l.insert(m,E))}),l})}}class gA{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return se.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var r;return this.cs.set(t.id,{id:(r=t).id,version:r.version,createTime:Sr(r.createTime)}),se.resolve()}getNamedQuery(e,t){return se.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,{name:(r=t).name,query:Lu(r.bundledQuery),readTime:Sr(r.readTime)}),se.resolve();var r}}class qC{constructor(){this.overlays=new Rn(Qe.comparator),this.ls=new Map}getOverlay(e,t){return se.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Bi();return se.forEach(t,o=>this.getOverlay(e,o).next(u=>{null!==u&&r.set(o,u)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((o,u)=>{this.we(e,t,u)}),se.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.ls.get(r);return void 0!==o&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.ls.delete(r)),se.resolve()}getOverlaysForCollection(e,t,r){const o=Bi(),u=t.length+1,l=new Qe(t.child("")),m=this.overlays.getIteratorFrom(l);for(;m.hasNext();){const E=m.getNext().value,b=E.getKey();if(!t.isPrefixOf(b.path))break;b.path.length===u&&E.largestBatchId>r&&o.set(E.getKey(),E)}return se.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let u=new Rn((b,M)=>b-M);const l=this.overlays.getIterator();for(;l.hasNext();){const b=l.getNext().value;if(b.getKey().getCollectionGroup()===t&&b.largestBatchId>r){let M=u.get(b.largestBatchId);null===M&&(M=Bi(),u=u.insert(b.largestBatchId,M)),M.set(b.getKey(),b)}}const m=Bi(),E=u.getIterator();for(;E.hasNext()&&(E.getNext().value.forEach((b,M)=>m.set(b,M)),!(m.size()>=o)););return se.resolve(m)}we(e,t,r){const o=this.overlays.get(r.key);if(null!==o){const l=this.ls.get(o.largestBatchId).delete(r.key);this.ls.set(o.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new ow(t,r));let u=this.ls.get(t);void 0===u&&(u=Bt(),this.ls.set(t,u)),this.ls.set(t,u.add(r.key))}}class Sw{constructor(){this.fs=new un(fi.ds),this.ws=new un(fi._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const r=new fi(e,t);this.fs=this.fs.add(r),this.ws=this.ws.add(r)}gs(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.ys(new fi(e,t))}ps(e,t){e.forEach(r=>this.removeReference(r,t))}Is(e){const t=new Qe(new Zt([])),r=new fi(t,e),o=new fi(t,e+1),u=[];return this.ws.forEachInRange([r,o],l=>{this.ys(l),u.push(l.key)}),u}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new Qe(new Zt([])),r=new fi(t,e),o=new fi(t,e+1);let u=Bt();return this.ws.forEachInRange([r,o],l=>{u=u.add(l.key)}),u}containsKey(e){const t=new fi(e,0),r=this.fs.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class fi{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return Qe.comparator(e.key,t.key)||Lt(e.As,t.As)}static _s(e,t){return Lt(e.As,t.As)||Qe.comparator(e.key,t.key)}}class WC{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new un(fi.ds)}checkEmpty(e){return se.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,o){const u=this.vs;this.vs++;const l=new iw(u,t,r,o);this.mutationQueue.push(l);for(const m of o)this.Rs=this.Rs.add(new fi(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return se.resolve(l)}lookupMutationBatch(e,t){return se.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const o=this.bs(t+1),u=o<0?0:o;return se.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return se.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return se.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new fi(t,0),o=new fi(t,Number.POSITIVE_INFINITY),u=[];return this.Rs.forEachInRange([r,o],l=>{const m=this.Ps(l.As);u.push(m)}),se.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new un(Lt);return t.forEach(o=>{const u=new fi(o,0),l=new fi(o,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([u,l],m=>{r=r.add(m.As)})}),se.resolve(this.Vs(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let u=r;Qe.isDocumentKey(u)||(u=u.child(""));const l=new fi(new Qe(u),0);let m=new un(Lt);return this.Rs.forEachWhile(E=>{const b=E.key.path;return!!r.isPrefixOf(b)&&(b.length===o&&(m=m.add(E.As)),!0)},l),se.resolve(this.Vs(m))}Vs(e){const t=[];return e.forEach(r=>{const o=this.Ps(r);null!==o&&t.push(o)}),t}removeMutationBatch(e,t){dt(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let r=this.Rs;return se.forEach(t.mutations,o=>{const u=new fi(o.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Rs=r})}Cn(e){}containsKey(e,t){const r=new fi(t,0),o=this.Rs.firstAfterOrEqual(r);return se.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return se.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class vv{constructor(e){this.Ds=e,this.docs=new Rn(Qe.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),u=o?o.size:0,l=this.Ds(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return se.resolve(r?r.document.mutableCopy():qn.newInvalidDocument(t))}getEntries(e,t){let r=es();return t.forEach(o=>{const u=this.docs.get(o);r=r.insert(o,u?u.document.mutableCopy():qn.newInvalidDocument(o))}),se.resolve(r)}getDocumentsMatchingQuery(e,t,r,o){let u=es();const l=t.path,m=new Qe(l.child("")),E=this.docs.getIteratorFrom(m);for(;E.hasNext();){const{key:b,value:{document:M}}=E.getNext();if(!l.isPrefixOf(b.path))break;b.path.length>l.length+1||$h(Fy(M),r)<=0||(o.has(M.key)||Yh(t,M))&&(u=u.insert(M.key,M.mutableCopy()))}return se.resolve(u)}getAllFromCollectionGroup(e,t,r,o){it()}Cs(e,t){return se.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new mA(this)}getSize(e){return se.resolve(this.size)}}class mA extends fA{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?t.push(this.os.addEntry(e,o)):this.os.removeEntry(r)}),se.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class yA{constructor(e){this.persistence=e,this.xs=new Ra(t=>Hc(t),yg),this.lastRemoteSnapshotVersion=vt.min(),this.highestTargetId=0,this.Ns=0,this.ks=new Sw,this.targetCount=0,this.Ms=lf.kn()}forEachTarget(e,t){return this.xs.forEach((r,o)=>t(o)),se.resolve()}getLastRemoteSnapshotVersion(e){return se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return se.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),se.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Ns&&(this.Ns=t),se.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new lf(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,se.resolve()}updateTargetData(e,t){return this.Fn(t),se.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,se.resolve()}removeTargets(e,t,r){let o=0;const u=[];return this.xs.forEach((l,m)=>{m.sequenceNumber<=t&&null===r.get(m.targetId)&&(this.xs.delete(l),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)}),se.waitFor(u).next(()=>o)}getTargetCount(e){return se.resolve(this.targetCount)}getTargetData(e,t){const r=this.xs.get(t)||null;return se.resolve(r)}addMatchingKeys(e,t,r){return this.ks.gs(t,r),se.resolve()}removeMatchingKeys(e,t,r){this.ks.ps(t,r);const o=this.persistence.referenceDelegate,u=[];return o&&t.forEach(l=>{u.push(o.markPotentiallyOrphaned(e,l))}),se.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),se.resolve()}getMatchingKeysForTargetId(e,t){const r=this.ks.Es(t);return se.resolve(r)}containsKey(e,t){return se.resolve(this.ks.containsKey(t))}}class _v{constructor(e,t){this.$s={},this.overlays={},this.Os=new Ji(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new yA(this),this.indexManager=new lA,this.remoteDocumentCache=new vv(r=>this.referenceDelegate.Ls(r)),this.serializer=new uv(t),this.qs=new gA(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new qC,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.$s[e.toKey()];return r||(r=new WC(t,this.referenceDelegate),this.$s[e.toKey()]=r),r}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,r){Fe("MemoryPersistence","Starting transaction:",e);const o=new ZC(this.Os.next());return this.referenceDelegate.Us(),r(o).next(u=>this.referenceDelegate.Ks(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}Gs(e,t){return se.or(Object.values(this.$s).map(r=>()=>r.containsKey(e,t)))}}class ZC extends mD{constructor(e){super(),this.currentSequenceNumber=e}}class ff{constructor(e){this.persistence=e,this.Qs=new Sw,this.js=null}static zs(e){return new ff(e)}get Ws(){if(this.js)return this.js;throw it()}addReference(e,t,r){return this.Qs.addReference(r,t),this.Ws.delete(r.toString()),se.resolve()}removeReference(e,t,r){return this.Qs.removeReference(r,t),this.Ws.add(r.toString()),se.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),se.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(o=>this.Ws.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(u=>this.Ws.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return se.forEach(this.Ws,r=>{const o=Qe.fromPath(r);return this.Hs(e,o).next(u=>{u||t.removeEntry(o,vt.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(r=>{r?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return se.or([()=>se.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class vA{constructor(e){this.serializer=e}O(e,t,r,o){const u=new cg("createOrUpgrade",t);var m;r<1&&o>=1&&(e.createObjectStore("owner"),(m=e).createObjectStore("mutationQueues",{keyPath:"userId"}),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ID,{unique:!0}),m.createObjectStore("documentMutations"),Aw(e),function(m){m.createObjectStore("remoteDocuments")}(e));let l=se.resolve();return r<3&&o>=3&&(0!==r&&(function(m){m.deleteObjectStore("targetDocuments"),m.deleteObjectStore("targets"),m.deleteObjectStore("targetGlobal")}(e),Aw(e)),l=l.next(()=>function(m){const E=m.store("targetGlobal"),b={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:vt.min().toTimestamp(),targetCount:0};return E.put("targetGlobalKey",b)}(u))),r<4&&o>=4&&(0!==r&&(l=l.next(()=>function(m,E){return E.store("mutations").j().next(b=>{m.deleteObjectStore("mutations"),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ID,{unique:!0});const M=E.store("mutations"),R=b.map(H=>M.put(H));return se.waitFor(R)})}(e,u))),l=l.next(()=>{!function(m){m.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&o>=5&&(l=l.next(()=>this.Ys(u))),r<6&&o>=6&&(l=l.next(()=>(function(m){m.createObjectStore("remoteDocumentGlobal")}(e),this.Xs(u)))),r<7&&o>=7&&(l=l.next(()=>this.Zs(u))),r<8&&o>=8&&(l=l.next(()=>this.ti(e,u))),r<9&&o>=9&&(l=l.next(()=>{!function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&o>=10&&(l=l.next(()=>this.ei(u))),r<11&&o>=11&&(l=l.next(()=>{(function(m){m.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(m){m.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&o>=12&&(l=l.next(()=>{!function(m){const E=m.createObjectStore("documentOverlays",{keyPath:xD});E.createIndex("collectionPathOverlayIndex",ND,{unique:!1}),E.createIndex("collectionGroupOverlayIndex",$S,{unique:!1})}(e)})),r<13&&o>=13&&(l=l.next(()=>function(m){const E=m.createObjectStore("remoteDocumentsV14",{keyPath:CD});E.createIndex("documentKeyIndex",US),E.createIndex("collectionGroupIndex",BS)}(e)).next(()=>this.ni(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&o>=14&&(l=l.next(()=>this.si(e,u))),r<15&&o>=15&&(l=l.next(()=>function(m){m.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),m.createObjectStore("indexState",{keyPath:SD}).createIndex("sequenceNumberIndex",jS,{unique:!1}),m.createObjectStore("indexEntries",{keyPath:AD}).createIndex("documentKeyIndex",MD,{unique:!1})}(e))),l}Xs(e){let t=0;return e.store("remoteDocuments").X((r,o)=>{t+=Rg(o)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Ys(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.j().next(o=>se.forEach(o,u=>{const l=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.j("userMutationsIndex",l).next(m=>se.forEach(m,E=>{dt(E.userId===u.userId);const b=Fu(this.serializer,E);return Dw(e,u.userId,b).next(()=>{})}))}))}Zs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(o=>{const u=[];return r.X((l,m)=>{const E=new Zt(l),b=[0,di(E)];u.push(t.get(b).next(M=>M?se.resolve():t.put({targetId:0,path:di(E),sequenceNumber:o.highestListenSequenceNumber})))}).next(()=>se.waitFor(u))})}ti(e,t){e.createObjectStore("collectionParents",{keyPath:R0});const r=t.store("collectionParents"),o=new Iw,u=l=>{if(o.add(l)){const m=l.lastSegment(),E=l.popLast();return r.put({collectionId:m,parent:di(E)})}};return t.store("remoteDocuments").X({Y:!0},(l,m)=>{const E=new Zt(l);return u(E.popLast())}).next(()=>t.store("documentMutations").X({Y:!0},([l,m,E],b)=>{const M=Aa(m);return u(M.popLast())}))}ei(e){const t=e.store("targets");return t.X((r,o)=>{const u=Ag(o),l=yw(this.serializer,u);return t.put(l)})}ni(e,t){const r=t.store("remoteDocuments"),o=[];return r.X((u,l)=>{const m=t.store("remoteDocumentsV14"),E=(b=l,b.document?new Qe(Zt.fromString(b.document.name).popFirst(5)):b.noDocument?Qe.fromSegments(b.noDocument.path):b.unknownDocument?Qe.fromSegments(b.unknownDocument.path):it()).path.toArray();var b;const M={prefixPath:E.slice(0,E.length-2),collectionGroup:E[E.length-2],documentId:E[E.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};o.push(m.put(M))}).next(()=>se.waitFor(o))}si(e,t){const r=t.store("mutations"),o=$C(this.serializer),u=new _v(ff.zs,this.serializer.fe);return r.j().next(l=>{const m=new Map;return l.forEach(E=>{var b;let M=null!==(b=m.get(E.userId))&&void 0!==b?b:Bt();Fu(this.serializer,E).keys().forEach(R=>M=M.add(R)),m.set(E.userId,M)}),se.forEach(m,(E,b)=>{const M=new wn(b),R=Mg.de(this.serializer,M),H=u.getIndexManager(M),te=Og.de(M,this.serializer,H,u.referenceDelegate);return new zC(o,te,R,H).recalculateAndSaveOverlaysForDocumentKeys(new Uy(t,Ji.ct),E).next()})})}}function Aw(n){n.createObjectStore("targetDocuments",{keyPath:N0}).createIndex("documentTargetsIndex",TD,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",bD,{unique:!0}),n.createObjectStore("targetGlobal")}const wv="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Mw{constructor(e,t,r,o,u,l,m,E,b,M,R=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ii=u,this.window=l,this.document=m,this.ri=b,this.oi=M,this.ui=R,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=H=>Promise.resolve(),!Mw.D())throw new Re(ce.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Ax(this,o),this.di=t+"main",this.serializer=new uv(E),this.wi=new Wo(this.di,this.ui,new vA(this.serializer)),this.Bs=new LC(this.referenceDelegate,this.serializer),this.remoteDocumentCache=$C(this.serializer),this.qs=new vw,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===M&&Bn("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Re(ce.FAILED_PRECONDITION,wv);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Bs.getHighestSequenceNumber(e))}).then(e=>{this.Os=new Ji(e,this.ri)}).then(()=>{this.Fs=!0}).catch(e=>(this.wi&&this.wi.close(),Promise.reject(e)))}Ii(e){var t=this;return this.fi=function(){var r=(0,we.Z)(function*(o){if(t.started)return e(o)});return function(o){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.wi.B(function(){var t=(0,we.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget((0,we.Z)(function*(){t.started&&(yield t.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>pf(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ti(e).next(t=>{t||(this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Ei(e)).next(t=>this.isPrimary&&!t?this.Ai(e).next(()=>!1):!!t&&this.vi(e).next(()=>!0))).catch(e=>{if(Su(e))return Fe("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Fe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ii.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Ti(e){return Lg(e).get("owner").next(t=>se.resolve(this.Ri(t)))}Pi(e){return pf(e).delete(this.clientId)}bi(){var e=this;return(0,we.Z)(function*(){if(e.isPrimary&&!e.Vi(e.li,18e5)){e.li=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const o=Yr(r,"clientMetadata");return o.j().next(u=>{const l=e.Si(u,18e5),m=u.filter(E=>-1===l.indexOf(E));return se.forEach(m,E=>o.delete(E.clientId)).next(()=>m)})}).catch(()=>[]);if(e._i)for(const r of t)e._i.removeItem(e.Di(r.clientId))}})()}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.bi()).then(()=>this.pi()))}Ri(e){return!!e&&e.ownerId===this.clientId}Ei(e){return this.oi?se.resolve(!0):Lg(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)){if(this.Ri(t)&&this.networkEnabled)return!0;if(!this.Ri(t)){if(!t.allowTabSynchronization)throw new Re(ce.FAILED_PRECONDITION,wv);return!1}}return!(!this.networkEnabled||!this.inForeground)||pf(e).j().next(r=>void 0===this.Si(r,5e3).find(o=>!(this.clientId===o.clientId||!(!this.networkEnabled&&o.networkEnabled||!this.inForeground&&o.inForeground&&this.networkEnabled===o.networkEnabled))))}).next(t=>(this.isPrimary!==t&&Fe("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,we.Z)(function*(){e.Fs=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Ni(),e.ki(),yield e.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new Uy(t,Ji.ct);return e.Ai(r).next(()=>e.Pi(r))}),e.wi.close(),e.Mi()})()}Si(e,t){return e.filter(r=>this.Vi(r.updateTimeMs,t)&&!this.Ci(r.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",e=>pf(e).j().next(t=>this.Si(t,18e5).map(r=>r.clientId)))}get started(){return this.Fs}getMutationQueue(e,t){return Og.de(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new dA(e,this.serializer.fe.databaseId)}getDocumentOverlayCache(e){return Mg.de(this.serializer,e)}getBundleCache(){return this.qs}runTransaction(e,t,r){Fe("IndexedDbPersistence","Starting transaction:",e);const o="readonly"===t?"readonly":"readwrite",u=15===(l=this.ui)?OD:14===l?Vy:13===l?O0:12===l?HS:11===l?RD:void it();var l;let m;return this.wi.runTransaction(e,o,u,E=>(m=new Uy(E,this.Os?this.Os.next():Ji.ct),"readwrite-primary"===t?this.Ti(m).next(b=>!!b||this.Ei(m)).next(b=>{if(!b)throw Bn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)),new Re(ce.FAILED_PRECONDITION,LS);return r(m)}).next(b=>this.vi(m).next(()=>b)):this.Oi(m).next(()=>r(m)))).then(E=>(m.raiseOnCommittedEvent(),E))}Oi(e){return Lg(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)&&!this.Ri(t)&&!(this.oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Re(ce.FAILED_PRECONDITION,wv)})}vi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Lg(e).put("owner",t)}static D(){return Wo.D()}Ai(e){const t=Lg(e);return t.get("owner").next(r=>this.Ri(r)?(Fe("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):se.resolve())}Vi(e,t){const r=Date.now();return!(e<r-t||e>r&&(Bn(`Detected an update time that is in the future: ${e} > ${r}`),1))}gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=()=>{this.ii.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;(0,an.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(e){var t;try{const r=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Di(e)));return Fe("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Bn("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){Bn("Failed to set zombie client id.",e)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch{}}Di(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Lg(n){return Yr(n,"owner")}function pf(n){return Yr(n,"clientMetadata")}function Vg(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class Ev{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.Fi=r,this.Bi=o}static Li(e,t){let r=Bt(),o=Bt();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new Ev(e,t.fromCache,r,o)}}class Iv{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,r,o){return this.Ki(e,t).next(u=>u||this.Gi(e,t,o,r)).next(u=>u||this.Qi(e,t))}Ki(e,t){if(WD(t))return se.resolve(null);let r=Xi(t);return this.indexManager.getIndexType(e,r).next(o=>0===o?null:(null!==t.limit&&1===o&&(t=Xy(t,null,"F"),r=Xi(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(u=>{const l=Bt(...u);return this.Ui.getDocuments(e,l).next(m=>this.indexManager.getMinOffset(e,r).next(E=>{const b=this.ji(t,m);return this.zi(t,b,l,E.readTime)?this.Ki(e,Xy(t,null,"F")):this.Wi(e,b,t,E)}))})))}Gi(e,t,r,o){return WD(t)||o.isEqual(vt.min())?this.Qi(e,t):this.Ui.getDocuments(e,r).next(u=>{const l=this.ji(t,u);return this.zi(t,l,r,o)?this.Qi(e,t):(kc()<=Ac.in.DEBUG&&Fe("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),ev(t)),this.Wi(e,l,t,gD(o,-1)))})}ji(e,t){let r=new un(Q0(e));return t.forEach((o,u)=>{Yh(e,u)&&(r=r.add(u))}),r}zi(e,t,r,o){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Qi(e,t){return kc()<=Ac.in.DEBUG&&Fe("QueryEngine","Using full collection scan to execute query:",ev(t)),this.Ui.getDocumentsMatchingQuery(e,t,Vi.min())}Wi(e,t,r,o){return this.Ui.getDocumentsMatchingQuery(e,r,o).next(u=>(t.forEach(l=>{u=u.insert(l.key,l)}),u))}}class xw{constructor(e,t,r,o){this.persistence=e,this.Hi=t,this.serializer=o,this.Ji=new Rn(Lt),this.Yi=new Ra(u=>Hc(u),yg),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(r)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new zC(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}function KC(n,e,t,r){return new xw(n,e,t,r)}function YC(n,e){return Nw.apply(this,arguments)}function Nw(){return Nw=(0,we.Z)(function*(n,e){const t=Xe(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let o;return t.mutationQueue.getAllMutationBatches(r).next(u=>(o=u,t.tr(e),t.mutationQueue.getAllMutationBatches(r))).next(u=>{const l=[],m=[];let E=Bt();for(const b of o){l.push(b.batchId);for(const M of b.mutations)E=E.add(M.key)}for(const b of u){m.push(b.batchId);for(const M of b.mutations)E=E.add(M.key)}return t.localDocuments.getDocuments(r,E).next(b=>({er:b,removedBatchIds:l,addedBatchIds:m}))})})}),Nw.apply(this,arguments)}function Rw(n){const e=Xe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Bs.getLastRemoteSnapshotVersion(t))}function Pw(n,e,t){let r=Bt(),o=Bt();return t.forEach(u=>r=r.add(u)),e.getEntries(n,r).next(u=>{let l=es();return t.forEach((m,E)=>{const b=u.get(m);E.isFoundDocument()!==b.isFoundDocument()&&(o=o.add(m)),E.isNoDocument()&&E.version.isEqual(vt.min())?(e.removeEntry(m,E.readTime),l=l.insert(m,E)):!b.isValidDocument()||E.version.compareTo(b.version)>0||0===E.version.compareTo(b.version)&&b.hasPendingWrites?(e.addEntry(E),l=l.insert(m,E)):Fe("LocalStore","Ignoring outdated watch update for ",m,". Current version:",b.version," Watch version:",E.version)}),{nr:l,sr:o}})}function wA(n,e){const t=Xe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Sd(n,e){const t=Xe(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return t.Bs.getTargetData(r,e).next(u=>u?(o=u,se.resolve(o)):t.Bs.allocateTargetId(r).next(l=>(o=new ku(e,l,"TargetPurposeListen",r.currentSequenceNumber),t.Bs.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=t.Ji.get(r.targetId);return(null===o||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ji=t.Ji.insert(r.targetId,r),t.Yi.set(e,r.targetId)),r})}function Ad(n,e,t){return kw.apply(this,arguments)}function kw(){return kw=(0,we.Z)(function*(n,e,t){const r=Xe(n),o=r.Ji.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,l=>r.persistence.referenceDelegate.removeTarget(l,o)))}catch(l){if(!Su(l))throw l;Fe("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.Ji=r.Ji.remove(e),r.Yi.delete(o.target)}),kw.apply(this,arguments)}function Ug(n,e,t){const r=Xe(n);let o=vt.min(),u=Bt();return r.persistence.runTransaction("Execute query","readonly",l=>function(m,E,b){const M=Xe(m),R=M.Yi.get(b);return void 0!==R?se.resolve(M.Ji.get(R)):M.Bs.getTargetData(E,b)}(r,l,Xi(e)).next(m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(l,m.targetId).next(E=>{u=E})}).next(()=>r.Hi.getDocumentsMatchingQuery(l,e,t?o:vt.min(),t?u:Bt())).next(m=>(Lw(r,Y0(e),m),{documents:m,ir:u})))}function Fw(n,e){const t=Xe(n),r=Xe(t.Bs),o=t.Ji.get(e);return o?Promise.resolve(o.target):t.persistence.runTransaction("Get target data","readonly",u=>r.le(u,e).next(l=>l?l.target:null))}function QC(n,e){const t=Xe(n),r=t.Xi.get(e)||vt.min();return t.persistence.runTransaction("Get new document changes","readonly",o=>t.Zi.getAllFromCollectionGroup(o,e,gD(r,-1),Number.MAX_SAFE_INTEGER)).then(o=>(Lw(t,e,o),o))}function Lw(n,e,t){let r=n.Xi.get(e)||vt.min();t.forEach((o,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.Xi.set(e,r)}function Ti(){return Ti=(0,we.Z)(function*(n,e,t,r){const o=Xe(n);let u=Bt(),l=es();for(const b of t){const M=e.rr(b.metadata.name);b.document&&(u=u.add(M));const R=e.ur(b);R.setReadTime(e.cr(b.metadata.readTime)),l=l.insert(M,R)}const m=o.Zi.newChangeBuffer({trackRemovals:!0}),E=yield Sd(o,(b=r,Xi(Kh(Zt.fromString(`__bundle__/docs/${b}`)))));var b;return o.persistence.runTransaction("Apply bundle documents","readwrite",b=>Pw(b,m,l).next(M=>(m.apply(b),M)).next(M=>o.Bs.removeMatchingKeysForTargetId(b,E.targetId).next(()=>o.Bs.addMatchingKeys(b,u,E.targetId)).next(()=>o.localDocuments.getLocalViewOfDocuments(b,M.nr,M.sr)).next(()=>M.nr)))}),Ti.apply(this,arguments)}function gf(n,e){return Vw.apply(this,arguments)}function Vw(){return Vw=(0,we.Z)(function*(n,e,t=Bt()){const r=yield Sd(n,Xi(Lu(e.bundledQuery))),o=Xe(n);return o.persistence.runTransaction("Save named query","readwrite",u=>{const l=Sr(e.readTime);if(r.snapshotVersion.compareTo(l)>=0)return o.qs.saveNamedQuery(u,e);const m=r.withResumeToken(Qr.EMPTY_BYTE_STRING,l);return o.Ji=o.Ji.insert(m.targetId,m),o.Bs.updateTargetData(u,m).next(()=>o.Bs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>o.Bs.addMatchingKeys(u,t,r.targetId)).next(()=>o.qs.saveNamedQuery(u,e))})}),Vw.apply(this,arguments)}function XC(n,e){return`firestore_clients_${n}_${e}`}function EA(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function eb(n,e){return`firestore_targets_${n}_${e}`}class Bg{constructor(e,t,r,o){this.user=e,this.batchId=t,this.state=r,this.error=o}static ar(e,t,r){const o=JSON.parse(r);let u,l="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return l&&o.error&&(l="string"==typeof o.error.message&&"string"==typeof o.error.code,l&&(u=new Re(o.error.code,o.error.message))),l?new Bg(e,t,o.state,u):(Bn("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Md{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static ar(e,t){const r=JSON.parse(t);let o,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(o=new Re(r.error.code,r.error.message))),u?new Md(e,r.state,o):(Bn("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Uw{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static ar(e,t){const r=JSON.parse(t);let o="object"==typeof r&&r.activeTargetIds instanceof Array,u=tv();for(let l=0;o&&l<r.activeTargetIds.length;++l)o=dg(r.activeTargetIds[l]),u=u.add(r.activeTargetIds[l]);return o?new Uw(e,u):(Bn("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class tb{constructor(e,t){this.clientId=e,this.onlineState=t}static ar(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new tb(t.clientId,t.onlineState):(Bn("SharedClientState",`Failed to parse online state: ${e}`),null)}}class nb{constructor(){this.activeTargetIds=tv()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class xd{constructor(e,t,r,o,u){this.window=e,this.ii=t,this.persistenceKey=r,this.wr=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new Rn(Lt),this.started=!1,this.yr=[];const l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.pr=XC(this.persistenceKey,this.wr),this.Ir=`firestore_sequence_number_${this.persistenceKey}`,this.gr=this.gr.insert(this.wr,new nb),this.Tr=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.Er=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this.Ar=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.vr=`firestore_online_state_${this.persistenceKey}`,this.Rr=function(m){return`firestore_bundle_loaded_v2_${m}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,we.Z)(function*(){const t=yield e.syncEngine.$i();for(const o of t){if(o===e.wr)continue;const u=e.getItem(XC(e.persistenceKey,o));if(u){const l=Uw.ar(o,u);l&&(e.gr=e.gr.insert(l.clientId,l))}}e.Pr();const r=e.storage.getItem(e.vr);if(r){const o=e.br(r);o&&e.Vr(o)}for(const o of e.yr)e.mr(o);e.yr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ir,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Sr(this.gr)}isActiveQueryTarget(e){let t=!1;return this.gr.forEach((r,o)=>{o.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Dr(e,"pending")}updateMutationState(e,t,r){this.Dr(e,t,r),this.Cr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(eb(this.persistenceKey,e));if(r){const o=Md.ar(e,r);o&&(t=o.state)}}return this.Nr.lr(e),this.Pr(),t}removeLocalQueryTarget(e){this.Nr.dr(e),this.Pr()}isLocalQueryTarget(e){return this.Nr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(eb(this.persistenceKey,e))}updateQueryState(e,t,r){this.kr(e,t,r)}handleUserChange(e,t,r){t.forEach(o=>{this.Cr(o)}),this.currentUser=e,r.forEach(o=>{this.addPendingMutation(o)})}setOnlineState(e){this.Mr(e)}notifyBundleLoaded(e){this.$r(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Fe("SharedClientState","READ",e,t),t}setItem(e,t){Fe("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Fe("SharedClientState","REMOVE",e),this.storage.removeItem(e)}mr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Fe("SharedClientState","EVENT",r.key,r.newValue),r.key===this.pr)return void Bn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable((0,we.Z)(function*(){if(t.started){if(null!==r.key)if(t.Tr.test(r.key)){if(null==r.newValue){const o=t.Or(r.key);return t.Fr(o,null)}{const o=t.Br(r.key,r.newValue);if(o)return t.Fr(o.clientId,o)}}else if(t.Er.test(r.key)){if(null!==r.newValue){const o=t.Lr(r.key,r.newValue);if(o)return t.qr(o)}}else if(t.Ar.test(r.key)){if(null!==r.newValue){const o=t.Ur(r.key,r.newValue);if(o)return t.Kr(o)}}else if(r.key===t.vr){if(null!==r.newValue){const o=t.br(r.newValue);if(o)return t.Vr(o)}}else if(r.key===t.Ir){const o=function(u){let l=Ji.ct;if(null!=u)try{const m=JSON.parse(u);dt("number"==typeof m),l=m}catch(m){Bn("SharedClientState","Failed to read sequence number from WebStorage",m)}return l}(r.newValue);o!==Ji.ct&&t.sequenceNumberHandler(o)}else if(r.key===t.Rr){const o=t.Gr(r.newValue);yield Promise.all(o.map(u=>t.syncEngine.Qr(u)))}}else t.yr.push(r)}))}}get Nr(){return this.gr.get(this.wr)}Pr(){this.setItem(this.pr,this.Nr.hr())}Dr(e,t,r){const o=new Bg(this.currentUser,e,t,r),u=EA(this.persistenceKey,this.currentUser,e);this.setItem(u,o.hr())}Cr(e){const t=EA(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Mr(e){this.storage.setItem(this.vr,JSON.stringify({clientId:this.wr,onlineState:e}))}kr(e,t,r){const o=eb(this.persistenceKey,e),u=new Md(e,t,r);this.setItem(o,u.hr())}$r(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}Or(e){const t=this.Tr.exec(e);return t?t[1]:null}Br(e,t){const r=this.Or(e);return Uw.ar(r,t)}Lr(e,t){const r=this.Er.exec(e),o=Number(r[1]);return Bg.ar(new wn(void 0!==r[2]?r[2]:null),o,t)}Ur(e,t){const r=this.Ar.exec(e),o=Number(r[1]);return Md.ar(o,t)}br(e){return tb.ar(e)}Gr(e){return JSON.parse(e)}qr(e){var t=this;return(0,we.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.jr(e.batchId,e.state,e.error);Fe("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Kr(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}Fr(e,t){const r=t?this.gr.insert(e,t):this.gr.remove(e),o=this.Sr(this.gr),u=this.Sr(r),l=[],m=[];return u.forEach(E=>{o.has(E)||l.push(E)}),o.forEach(E=>{u.has(E)||m.push(E)}),this.syncEngine.Wr(l,m).then(()=>{this.gr=r})}Vr(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Sr(e){let t=tv();return e.forEach((r,o)=>{t=t.unionWith(o.activeTargetIds)}),t}}class rb{constructor(){this.Hr=new nb,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,r){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new nb,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Bw{Yr(e){}shutdown(){}}class ib{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){Fe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){Fe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let jg=null;function jw(){return null===jg?jg=268435456+Math.round(2147483648*Math.random()):jg++,"0x"+jg.toString(16)}const IA={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class DA{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const pi="WebChannelConnection";class sb extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.mo=(e.ssl?"https":"http")+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,r,o,u){const l=jw(),m=this.To(e,t);Fe("RestConnection",`Sending RPC '${e}' ${l}:`,m,r);const E={};return this.Eo(E,o,u),this.Ao(e,m,E,r).then(b=>(Fe("RestConnection",`Received RPC '${e}' ${l}: `,b),b),b=>{throw Ci("RestConnection",`RPC '${e}' ${l} failed with error: `,b,"url: ",m,"request:",r),b})}vo(e,t,r,o,u,l){return this.Io(e,t,r,o,u)}Eo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Pc,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,u)=>e[u]=o),r&&r.headers.forEach((o,u)=>e[u]=o)}To(e,t){return`${this.mo}/v1/${t}:${IA[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,r,o){const u=jw();return new Promise((l,m)=>{const E=new rg;E.setWithCredentials(!0),E.listenOnce(MS.COMPLETE,()=>{try{switch(E.getLastErrorCode()){case Bh.NO_ERROR:const M=E.getResponseJson();Fe(pi,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(M)),l(M);break;case Bh.TIMEOUT:Fe(pi,`RPC '${e}' ${u} timed out`),m(new Re(ce.DEADLINE_EXCEEDED,"Request time out"));break;case Bh.HTTP_ERROR:const R=E.getStatus();if(Fe(pi,`RPC '${e}' ${u} failed with status:`,R,"response text:",E.getResponseText()),R>0){let H=E.getResponseJson();Array.isArray(H)&&(H=H[0]);const te=H?.error;if(te&&te.status&&te.message){const be=function(Ue){const He=Ue.toLowerCase().replace(/_/g,"-");return Object.values(ce).indexOf(He)>=0?He:ce.UNKNOWN}(te.status);m(new Re(be,te.message))}else m(new Re(ce.UNKNOWN,"Server responded with status "+E.getStatus()))}else m(new Re(ce.UNAVAILABLE,"Connection failed."));break;default:it()}}finally{Fe(pi,`RPC '${e}' ${u} completed.`)}});const b=JSON.stringify(o);Fe(pi,`RPC '${e}' ${u} sending request:`,o),E.send(t,"POST",b,r,15)})}Ro(e,t,r){const o=jw(),u=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=cD(),m=Ex(),E={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},b=this.longPollingOptions.timeoutSeconds;void 0!==b&&(E.longPollingTimeout=Math.round(1e3*b)),this.useFetchStreams&&(E.xmlHttpFactory=new NS({})),this.Eo(E.initMessageHeaders,t,r),E.encodeInitMessageHeaders=!0;const M=u.join("");Fe(pi,`Creating RPC '${e}' stream ${o}: ${M}`,E);const R=l.createWebChannel(M,E);let H=!1,te=!1;const be=new DA({ro:He=>{te?Fe(pi,`Not sending because RPC '${e}' stream ${o} is closed:`,He):(H||(Fe(pi,`Opening RPC '${e}' stream ${o} transport.`),R.open(),H=!0),Fe(pi,`RPC '${e}' stream ${o} sending:`,He),R.send(He))},oo:()=>R.close()}),Ue=(He,pt,St)=>{He.listen(pt,Dt=>{try{St(Dt)}catch(Ot){setTimeout(()=>{throw Ot},0)}})};return Ue(R,xs.EventType.OPEN,()=>{te||Fe(pi,`RPC '${e}' stream ${o} transport opened.`)}),Ue(R,xs.EventType.CLOSE,()=>{te||(te=!0,Fe(pi,`RPC '${e}' stream ${o} transport closed`),be.wo())}),Ue(R,xs.EventType.ERROR,He=>{te||(te=!0,Ci(pi,`RPC '${e}' stream ${o} transport errored:`,He),be.wo(new Re(ce.UNAVAILABLE,"The operation could not be completed")))}),Ue(R,xs.EventType.MESSAGE,He=>{var pt;if(!te){const St=He.data[0];dt(!!St);const Ot=St.error||(null===(pt=St[0])||void 0===pt?void 0:pt.error);if(Ot){Fe(pi,`RPC '${e}' stream ${o} received error:`,Ot);const Ht=Ot.status;let on=function(um){const aO=Tr[um];if(void 0!==aO)return oC(aO)}(Ht),ys=Ot.message;void 0===on&&(on=ce.INTERNAL,ys="Unknown error status: "+Ht+" with message "+Ot.message),te=!0,be.wo(new Re(on,ys)),R.close()}else Fe(pi,`RPC '${e}' stream ${o} received:`,St),be._o(St)}}),Ue(m,xS.STAT_EVENT,He=>{He.stat===Oy.PROXY?Fe(pi,`RPC '${e}' stream ${o} detected buffering proxy`):He.stat===Oy.NOPROXY&&Fe(pi,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{be.fo()},0),be}}function ob(){return typeof window<"u"?window:null}function Nd(){return typeof document<"u"?document:null}function Rd(n){return new bg(n,!0)}class ab{constructor(e,t,r=1e3,o=1.5,u=6e4){this.ii=e,this.timerId=t,this.Po=r,this.bo=o,this.Vo=u,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),o=Math.max(0,t-r);o>0&&Fe("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.So} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,o,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class $w{constructor(e,t,r,o,u,l,m,E){this.ii=e,this.$o=r,this.Oo=o,this.connection=u,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=m,this.listener=E,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new ab(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var e=this;return(0,we.Z)(function*(){e.Uo()&&(yield e.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}zo(){var e=this;return(0,we.Z)(function*(){if(e.Ko())return e.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(e,t){var r=this;return(0,we.Z)(function*(){r.Ho(),r.Jo(),r.qo.cancel(),r.Fo++,4!==e?r.qo.reset():t&&t.code===ce.RESOURCE_EXHAUSTED?(Bn(t.toString()),Bn("Using maximum backoff delay to prevent overloading the backend."),r.qo.xo()):t&&t.code===ce.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Yo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.ao(t)})()}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.Fo===t&&this.Zo(r,o)},r=>{e(()=>{const o=new Re(ce.UNKNOWN,"Fetching auth token failed: "+r.message);return this.tu(o)})})}Zo(e,t){const r=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{r(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(o=>{r(()=>this.tu(o))}),this.stream.onMessage(o=>{r(()=>this.onMessage(o))})}Go(){var e=this;this.state=5,this.qo.No((0,we.Z)(function*(){e.state=0,e.start()}))}tu(e){return Fe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():(Fe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class CA extends $w{constructor(e,t,r,o,u,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,l),this.serializer=u}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function yC(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(E=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===E?1:"REMOVE"===E?2:"CURRENT"===E?3:"RESET"===E?4:it(),o=e.targetChange.targetIds||[],u=function(E,b){return E.useProto3Json?(dt(void 0===b||"string"==typeof b),Qr.fromBase64String(b||"")):(dt(void 0===b||b instanceof Uint8Array),Qr.fromUint8Array(b||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,m=l&&function(E){const b=void 0===E.code?ce.UNKNOWN:oC(E.code);return new Re(b,E.message||"")}(l);t=new uC(r,o,u,m||null)}else if("documentChange"in e){const r=e.documentChange,o=Fa(n,r.document.name),u=Sr(r.document.updateTime),l=r.document.createTime?Sr(r.document.createTime):vt.min(),m=new hi({mapValue:{fields:r.document.fields}}),E=qn.newFoundDocument(o,u,l,m);t=new Gc(r.targetIds||[],r.removedTargetIds||[],E.key,E)}else if("documentDelete"in e){const r=e.documentDelete,o=Fa(n,r.document),u=r.readTime?Sr(r.readTime):vt.min(),l=qn.newNoDocument(o,u);t=new Gc([],r.removedTargetIds||[],l.key,l)}else if("documentRemove"in e){const r=e.documentRemove,o=Fa(n,r.document);t=new Gc([],r.removedTargetIds||[],o,null)}else{if(!("filter"in e))return it();{const r=e.filter,{count:o=0,unchangedNames:u}=r,l=new sC(o,u);t=new aC(r.targetId,l)}}var E;return t}(this.serializer,e),r=function(o){if(!("targetChange"in o))return vt.min();const u=o.targetChange;return u.targetIds&&u.targetIds.length?vt.min():u.readTime?Sr(u.readTime):vt.min()}(e);return this.listener.nu(t,r)}su(e){const t={};t.database=Tg(this.serializer),t.addTarget=function(o,u){let l;const m=u.target;if(l=Yy(m)?{documents:vC(o,m)}:{query:pw(o,m)},l.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){l.resumeToken=hC(o,u.resumeToken);const E=dw(o,u.expectedCount);null!==E&&(l.expectedCount=E)}else if(u.snapshotVersion.compareTo(vt.min())>0){l.readTime=wd(o,u.snapshotVersion.toTimestamp());const E=dw(o,u.expectedCount);null!==E&&(l.expectedCount=E)}return l}(this.serializer,e);const r=function sA(n,e){const t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return it()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Wo(t)}iu(e){const t={};t.database=Tg(this.serializer),t.removeTarget=e,this.Wo(t)}}class ub extends $w{constructor(e,t,r,o,u,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,l),this.serializer=u,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(dt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function iA(n,e){return n&&n.length>0?(dt(void 0!==e),n.map(t=>function(r,o){let u=Sr(r.updateTime?r.updateTime:o);return u.isEqual(vt.min())&&(u=Sr(o)),new eC(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Sr(e.commitTime);return this.listener.cu(r,t)}return dt(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=Tg(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Sg(this.serializer,r))};this.Wo(t)}}class mf extends class{}{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=o,this.lu=!1}fu(){if(this.lu)throw new Re(ce.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.connection.Io(e,t,r,o,u)).catch(o=>{throw"FirebaseError"===o.name?(o.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Re(ce.UNKNOWN,o.toString())})}vo(e,t,r,o){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,l])=>this.connection.vo(e,t,r,u,l,o)).catch(u=>{throw"FirebaseError"===u.name?(u.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Re(ce.UNKNOWN,u.toString())})}terminate(){this.lu=!0}}class Hw{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(Bn(t),this.mu=!1):Fe("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class Mx{constructor(e,t,r,o,u){var l=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=u,this.Pu.Yr(m=>{r.enqueueAndForget((0,we.Z)(function*(){var E;Zc(l)&&(Fe("RemoteStore","Restarting streams for network reachability change."),yield(E=(0,we.Z)(function*(b){const M=Xe(b);M.vu.add(4),yield yf(M),M.bu.set("Unknown"),M.vu.delete(4),yield $g(M)}),function(b){return E.apply(this,arguments)})(l))}))}),this.bu=new Hw(r,o)}}function $g(n){return cb.apply(this,arguments)}function cb(){return cb=(0,we.Z)(function*(n){if(Zc(n))for(const e of n.Ru)yield e(!0)}),cb.apply(this,arguments)}function yf(n){return Gw.apply(this,arguments)}function Gw(){return Gw=(0,we.Z)(function*(n){for(const e of n.Ru)yield e(!1)}),Gw.apply(this,arguments)}function Cv(n,e){const t=Xe(n);t.Au.has(e.targetId)||(t.Au.set(e.targetId,e),Sv(t)?Tv(t):_f(t).Ko()&&bv(t,e))}function vf(n,e){const t=Xe(n),r=_f(t);t.Au.delete(e),r.Ko()&&lb(t,e),0===t.Au.size&&(r.Ko()?r.jo():Zc(t)&&t.bu.set("Unknown"))}function bv(n,e){if(n.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(vt.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}_f(n).su(e)}function lb(n,e){n.Vu.qt(e),_f(n).iu(e)}function Tv(n){n.Vu=new XS({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),le:e=>n.Au.get(e)||null,ue:()=>n.datastore.serializer.databaseId}),_f(n).start(),n.bu.gu()}function Sv(n){return Zc(n)&&!_f(n).Uo()&&n.Au.size>0}function Zc(n){return 0===Xe(n).vu.size}function db(n){n.Vu=void 0}function hb(n){return zw.apply(this,arguments)}function zw(){return zw=(0,we.Z)(function*(n){n.Au.forEach((e,t)=>{bv(n,e)})}),zw.apply(this,arguments)}function fb(n,e){return Av.apply(this,arguments)}function Av(){return Av=(0,we.Z)(function*(n,e){db(n),Sv(n)?(n.bu.Iu(e),Tv(n)):n.bu.set("Unknown")}),Av.apply(this,arguments)}function pb(n,e,t){return Mv.apply(this,arguments)}function Mv(){return Mv=(0,we.Z)(function*(n,e,t){if(n.bu.set("Online"),e instanceof uC&&2===e.state&&e.cause)try{yield(r=(0,we.Z)(function*(o,u){const l=u.cause;for(const m of u.targetIds)o.Au.has(m)&&(yield o.remoteSyncer.rejectListen(m,l),o.Au.delete(m),o.Vu.removeTarget(m))}),function(o,u){return r.apply(this,arguments)})(n,e)}catch(r){Fe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield xv(n,r)}else if(e instanceof Gc?n.Vu.Ht(e):e instanceof aC?n.Vu.ne(e):n.Vu.Xt(e),!t.isEqual(vt.min()))try{const r=yield Rw(n.localStore);t.compareTo(r)>=0&&(yield function(o,u){const l=o.Vu.ce(u);return l.targetChanges.forEach((m,E)=>{if(m.resumeToken.approximateByteSize()>0){const b=o.Au.get(E);b&&o.Au.set(E,b.withResumeToken(m.resumeToken,u))}}),l.targetMismatches.forEach((m,E)=>{const b=o.Au.get(m);if(!b)return;o.Au.set(m,b.withResumeToken(Qr.EMPTY_BYTE_STRING,b.snapshotVersion)),lb(o,m);const M=new ku(b.target,m,E,b.sequenceNumber);bv(o,M)}),o.remoteSyncer.applyRemoteEvent(l)}(n,t))}catch(r){Fe("RemoteStore","Failed to raise snapshot:",r),yield xv(n,r)}var r}),Mv.apply(this,arguments)}function xv(n,e,t){return qw.apply(this,arguments)}function qw(){return qw=(0,we.Z)(function*(n,e,t){if(!Su(e))throw e;n.vu.add(1),yield yf(n),n.bu.set("Offline"),t||(t=()=>Rw(n.localStore)),n.asyncQueue.enqueueRetryable((0,we.Z)(function*(){Fe("RemoteStore","Retrying IndexedDB access"),yield t(),n.vu.delete(1),yield $g(n)}))}),qw.apply(this,arguments)}function TA(n,e){return e().catch(t=>xv(n,t,e))}function Od(n){return gb.apply(this,arguments)}function gb(){return gb=(0,we.Z)(function*(n){const e=Xe(n),t=Uu(e);let r=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;xx(e);)try{const o=yield wA(e.localStore,r);if(null===o){0===e.Eu.length&&t.jo();break}r=o.batchId,Nx(e,o)}catch(o){yield xv(e,o)}SA(e)&&AA(e)}),gb.apply(this,arguments)}function xx(n){return Zc(n)&&n.Eu.length<10}function Nx(n,e){n.Eu.push(e);const t=Uu(n);t.Ko()&&t.ou&&t.uu(e.mutations)}function SA(n){return Zc(n)&&!Uu(n).Uo()&&n.Eu.length>0}function AA(n){Uu(n).start()}function Rx(n){return mb.apply(this,arguments)}function mb(){return mb=(0,we.Z)(function*(n){Uu(n).hu()}),mb.apply(this,arguments)}function Ox(n){return yb.apply(this,arguments)}function yb(){return yb=(0,we.Z)(function*(n){const e=Uu(n);for(const t of n.Eu)e.uu(t.mutations)}),yb.apply(this,arguments)}function vb(n,e,t){return Hg.apply(this,arguments)}function Hg(){return Hg=(0,we.Z)(function*(n,e,t){const r=n.Eu.shift(),o=sw.from(r,e,t);yield TA(n,()=>n.remoteSyncer.applySuccessfulWrite(o)),yield Od(n)}),Hg.apply(this,arguments)}function _b(n,e){return Ww.apply(this,arguments)}function Ww(){return Ww=(0,we.Z)(function*(n,e){var t;e&&Uu(n).ou&&(yield(t=(0,we.Z)(function*(r,o){if(aw(u=o.code)&&u!==ce.ABORTED){const l=r.Eu.shift();Uu(r).Qo(),yield TA(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,o)),yield Od(r)}var u}),function(r,o){return t.apply(this,arguments)})(n,e)),SA(n)&&AA(n)}),Ww.apply(this,arguments)}function Gg(n,e){return Zw.apply(this,arguments)}function Zw(){return Zw=(0,we.Z)(function*(n,e){const t=Xe(n);t.asyncQueue.verifyOperationInProgress(),Fe("RemoteStore","RemoteStore received new credentials");const r=Zc(t);t.vu.add(3),yield yf(t),r&&t.bu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.vu.delete(3),yield $g(t)}),Zw.apply(this,arguments)}function wb(n,e){return Eb.apply(this,arguments)}function Eb(){return Eb=(0,we.Z)(function*(n,e){const t=Xe(n);e?(t.vu.delete(2),yield $g(t)):e||(t.vu.add(2),yield yf(t),t.bu.set("Unknown"))}),Eb.apply(this,arguments)}function _f(n){return n.Su||(n.Su=function(e,t,r){const o=Xe(e);return o.fu(),new CA(t,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(n.datastore,n.asyncQueue,{uo:hb.bind(null,n),ao:fb.bind(null,n),nu:pb.bind(null,n)}),n.Ru.push(function(){var e=(0,we.Z)(function*(t){t?(n.Su.Qo(),Sv(n)?Tv(n):n.bu.set("Unknown")):(yield n.Su.stop(),db(n))});return function(t){return e.apply(this,arguments)}}())),n.Su}function Uu(n){return n.Du||(n.Du=function(e,t,r){const o=Xe(e);return o.fu(),new ub(t,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(n.datastore,n.asyncQueue,{uo:Rx.bind(null,n),ao:_b.bind(null,n),au:Ox.bind(null,n),cu:vb.bind(null,n)}),n.Ru.push(function(){var e=(0,we.Z)(function*(t){t?(n.Du.Qo(),yield Od(n)):(yield n.Du.stop(),n.Eu.length>0&&(Fe("RemoteStore",`Stopping write stream with ${n.Eu.length} pending writes`),n.Eu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Du}class Kw{constructor(e,t,r,o,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=u,this.deferred=new Lr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,t,r,o,u){const l=Date.now()+r,m=new Kw(e,t,l,o,u);return m.start(r),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Re(ce.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function wf(n,e){if(Bn("AsyncQueue",`${e}: ${n}`),Su(n))return new Re(ce.UNAVAILABLE,`${e}: ${n}`);throw n}class Ef{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Qe.comparator(t.key,r.key):(t,r)=>Qe.comparator(t.key,r.key),this.keyedMap=Qh(),this.sortedSet=new Rn(this.comparator)}static emptySet(e){return new Ef(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ef)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Ef;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class MA{constructor(){this.Cu=new Rn(Qe.comparator)}track(e){const t=e.doc.key,r=this.Cu.get(t);r?0!==e.type&&3===r.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==r.type?this.Cu=this.Cu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Cu=this.Cu.remove(t):1===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):it():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal((t,r)=>{e.push(r)}),e}}class If{constructor(e,t,r,o,u,l,m,E,b){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=u,this.fromCache=l,this.syncStateChanged=m,this.excludesMetadataChanges=E,this.hasCachedResults=b}static fromInitialDocuments(e,t,r,o,u){const l=[];return t.forEach(m=>{l.push({type:0,doc:m})}),new If(e,t,Ef.emptySet(t),l,r,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&vg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}class zg{constructor(){this.Nu=void 0,this.listeners=[]}}class Nv{constructor(){this.queries=new Ra(e=>ZD(e),vg),this.onlineState="Unknown",this.ku=new Set}}function Yw(n,e){return Qw.apply(this,arguments)}function Qw(){return Qw=(0,we.Z)(function*(n,e){const t=Xe(n),r=e.query;let o=!1,u=t.queries.get(r);if(u||(o=!0,u=new zg),o)try{u.Nu=yield t.onListen(r)}catch(l){const m=wf(l,`Initialization of query '${ev(e.query)}' failed`);return void e.onError(m)}t.queries.set(r,u),u.listeners.push(e),e.Mu(t.onlineState),u.Nu&&e.$u(u.Nu)&&qg(t)}),Qw.apply(this,arguments)}function Jw(n,e){return Xw.apply(this,arguments)}function Xw(){return Xw=(0,we.Z)(function*(n,e){const t=Xe(n),r=e.query;let o=!1;const u=t.queries.get(r);if(u){const l=u.listeners.indexOf(e);l>=0&&(u.listeners.splice(l,1),o=0===u.listeners.length)}if(o)return t.queries.delete(r),t.onUnlisten(r)}),Xw.apply(this,arguments)}function xA(n,e){const t=Xe(n);let r=!1;for(const o of e){const l=t.queries.get(o.query);if(l){for(const m of l.listeners)m.$u(o)&&(r=!0);l.Nu=o}}r&&qg(t)}function NA(n,e,t){const r=Xe(n),o=r.queries.get(e);if(o)for(const u of o.listeners)u.onError(t);r.queries.delete(e)}function qg(n){n.ku.forEach(e=>{e.next()})}class eE{constructor(e,t,r){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=r||{}}$u(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)3!==o.type&&r.push(o);e=new If(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){return!e.fromCache||(!this.options.Ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(e){e=If.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class RA{constructor(e,t){this.Gu=e,this.byteLength=t}Qu(){return"metadata"in this.Gu}}class Ib{constructor(e){this.serializer=e}rr(e){return Fa(this.serializer,e)}ur(e){return e.metadata.exists?av(this.serializer,e.document,!1):qn.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}cr(e){return Sr(e)}}class OA{constructor(e,t,r){this.ju=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Db(e)}zu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++t;const r=Zt.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Wu(e){const t=new Map,r=new Ib(this.serializer);for(const o of e)if(o.metadata.queries){const u=r.rr(o.metadata.name);for(const l of o.metadata.queries){const m=(t.get(l)||Bt()).add(u);t.set(l,m)}}return t}complete(){var e=this;return(0,we.Z)(function*(){const t=yield function JC(n,e,t,r){return Ti.apply(this,arguments)}(e.localStore,new Ib(e.serializer),e.documents,e.ju.id),r=e.Wu(e.documents);for(const o of e.queries)yield gf(e.localStore,o,r.get(o.name));return e.progress.taskState="Success",{progress:e.progress,Hu:e.collectionGroups,Ju:t}})()}}function Db(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class Cb{constructor(e){this.key=e}}class bb{constructor(e){this.key=e}}class Tb{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=Bt(),this.mutatedKeys=Bt(),this.tc=Q0(e),this.ec=new Ef(this.tc)}get nc(){return this.Yu}sc(e,t){const r=t?t.ic:new MA,o=t?t.ec:this.ec;let u=t?t.mutatedKeys:this.mutatedKeys,l=o,m=!1;const E="F"===this.query.limitType&&o.size===this.query.limit?o.last():null,b="L"===this.query.limitType&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((M,R)=>{const H=o.get(M),te=Yh(this.query,R)?R:null,be=!!H&&this.mutatedKeys.has(H.key),Ue=!!te&&(te.hasLocalMutations||this.mutatedKeys.has(te.key)&&te.hasCommittedMutations);let He=!1;H&&te?H.data.isEqual(te.data)?be!==Ue&&(r.track({type:3,doc:te}),He=!0):this.rc(H,te)||(r.track({type:2,doc:te}),He=!0,(E&&this.tc(te,E)>0||b&&this.tc(te,b)<0)&&(m=!0)):!H&&te?(r.track({type:0,doc:te}),He=!0):H&&!te&&(r.track({type:1,doc:H}),He=!0,(E||b)&&(m=!0)),He&&(te?(l=l.add(te),u=Ue?u.add(M):u.delete(M)):(l=l.delete(M),u=u.delete(M)))}),null!==this.query.limit)for(;l.size>this.query.limit;){const M="F"===this.query.limitType?l.last():l.first();l=l.delete(M.key),u=u.delete(M.key),r.track({type:1,doc:M})}return{ec:l,ic:r,zi:m,mutatedKeys:u}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const o=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const u=e.ic.xu();u.sort((b,M)=>function(R,H){const te=be=>{switch(be){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return it()}};return te(R)-te(H)}(b.type,M.type)||this.tc(b.doc,M.doc)),this.oc(r);const l=t?this.uc():[],m=0===this.Zu.size&&this.current?1:0,E=m!==this.Xu;return this.Xu=m,0!==u.length||E?{snapshot:new If(this.query,e.ec,o,u,e.mutatedKeys,0===m,E,!1,!!r&&r.resumeToken.approximateByteSize()>0),cc:l}:{cc:l}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new MA,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(t=>this.Yu=this.Yu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Yu=this.Yu.delete(t)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=Bt(),this.ec.forEach(r=>{this.ac(r.key)&&(this.Zu=this.Zu.add(r.key))});const t=[];return e.forEach(r=>{this.Zu.has(r)||t.push(new bb(r))}),this.Zu.forEach(r=>{e.has(r)||t.push(new Cb(r))}),t}hc(e){this.Yu=e.ir,this.Zu=Bt();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return If.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class PA{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class Sb{constructor(e){this.key=e,this.fc=!1}}class tE{constructor(e,t,r,o,u,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=l,this.dc={},this.wc=new Ra(m=>ZD(m),vg),this._c=new Map,this.mc=new Set,this.gc=new Rn(Qe.comparator),this.yc=new Map,this.Ic=new Sw,this.Tc={},this.Ec=new Map,this.Ac=lf.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function kA(n,e){return nE.apply(this,arguments)}function nE(){return nE=(0,we.Z)(function*(n,e){const t=Bb(n);let r,o;const u=t.wc.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),o=u.view.lc();else{const l=yield Sd(t.localStore,Xi(e)),m=t.sharedClientState.addLocalQueryTarget(l.targetId);r=l.targetId,o=yield Rv(t,e,r,"current"===m,l.resumeToken),t.isPrimaryClient&&Cv(t.remoteStore,l)}return o}),nE.apply(this,arguments)}function Rv(n,e,t,r,o){return Ov.apply(this,arguments)}function Ov(){return Ov=(0,we.Z)(function*(n,e,t,r,o){n.Rc=(R,H,te)=>{return(be=(0,we.Z)(function*(Ue,He,pt,St){let Dt=He.view.sc(pt);Dt.zi&&(Dt=yield Ug(Ue.localStore,He.query,!1).then(({documents:on})=>He.view.sc(on,Dt)));const Ot=St&&St.targetChanges.get(He.targetId),Ht=He.view.applyChanges(Dt,Ue.isPrimaryClient,Ot);return Lv(Ue,He.targetId,Ht.cc),Ht.snapshot}),function(Ue,He,pt,St){return be.apply(this,arguments)})(n,R,H,te);var be};const u=yield Ug(n.localStore,e,!0),l=new Tb(e,u.ir),m=l.sc(u.documents),E=nf.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,o),b=l.applyChanges(m,n.isPrimaryClient,E);Lv(n,t,b.cc);const M=new PA(e,t,l);return n.wc.set(e,M),n._c.has(t)?n._c.get(t).push(e):n._c.set(t,[e]),b.snapshot}),Ov.apply(this,arguments)}function Px(n,e){return ji.apply(this,arguments)}function ji(){return ji=(0,we.Z)(function*(n,e){const t=Xe(n),r=t.wc.get(e),o=t._c.get(r.targetId);if(o.length>1)return t._c.set(r.targetId,o.filter(u=>!vg(u,e))),void t.wc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Ad(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),vf(t.remoteStore,r.targetId),Df(t,r.targetId)}).catch(Vc))):(Df(t,r.targetId),yield Ad(t.localStore,r.targetId,!0))}),ji.apply(this,arguments)}function Pv(){return Pv=(0,we.Z)(function*(n,e,t){const r=$v(n);try{const o=yield function(u,l){const m=Xe(u),E=tr.now(),b=l.reduce((H,te)=>H.add(te.key),Bt());let M,R;return m.persistence.runTransaction("Locally write mutations","readwrite",H=>{let te=es(),be=Bt();return m.Zi.getEntries(H,b).next(Ue=>{te=Ue,te.forEach((He,pt)=>{pt.isValidDocument()||(be=be.add(He))})}).next(()=>m.localDocuments.getOverlayedDocuments(H,te)).next(Ue=>{M=Ue;const He=[];for(const pt of l){const St=YS(pt,M.get(pt.key).overlayedDocument);null!=St&&He.push(new Pa(pt.key,St,FD(St.value.mapValue),Wn.exists(!0)))}return m.mutationQueue.addMutationBatch(H,E,He,l)}).next(Ue=>{R=Ue;const He=Ue.applyToLocalDocumentSet(M,be);return m.documentOverlayCache.saveOverlays(H,Ue.batchId,He)})}).then(()=>({batchId:R.batchId,changes:X0(M)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(u,l,m){let E=u.Tc[u.currentUser.toKey()];E||(E=new Rn(Lt)),E=E.insert(l,m),u.Tc[u.currentUser.toKey()]=E}(r,o.batchId,t),yield Bu(r,o.changes),yield Od(r.remoteStore)}catch(o){const u=wf(o,"Failed to persist write");t.reject(u)}}),Pv.apply(this,arguments)}function Mb(n,e){return kv.apply(this,arguments)}function kv(){return kv=(0,we.Z)(function*(n,e){const t=Xe(n);try{const r=yield function Ow(n,e){const t=Xe(n),r=e.snapshotVersion;let o=t.Ji;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const l=t.Zi.newChangeBuffer({trackRemovals:!0});o=t.Ji;const m=[];e.targetChanges.forEach((M,R)=>{const H=o.get(R);if(!H)return;m.push(t.Bs.removeMatchingKeys(u,M.removedDocuments,R).next(()=>t.Bs.addMatchingKeys(u,M.addedDocuments,R)));let te=H.withSequenceNumber(u.currentSequenceNumber);var be,Ue,He;null!==e.targetMismatches.get(R)?te=te.withResumeToken(Qr.EMPTY_BYTE_STRING,vt.min()).withLastLimboFreeSnapshotVersion(vt.min()):M.resumeToken.approximateByteSize()>0&&(te=te.withResumeToken(M.resumeToken,r)),o=o.insert(R,te),Ue=te,He=M,(0===(be=H).resumeToken.approximateByteSize()||Ue.snapshotVersion.toMicroseconds()-be.snapshotVersion.toMicroseconds()>=3e8||He.addedDocuments.size+He.modifiedDocuments.size+He.removedDocuments.size>0)&&m.push(t.Bs.updateTargetData(u,te))});let E=es(),b=Bt();if(e.documentUpdates.forEach(M=>{e.resolvedLimboDocuments.has(M)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(u,M))}),m.push(Pw(u,l,e.documentUpdates).next(M=>{E=M.nr,b=M.sr})),!r.isEqual(vt.min())){const M=t.Bs.getLastRemoteSnapshotVersion(u).next(R=>t.Bs.setTargetsMetadata(u,u.currentSequenceNumber,r));m.push(M)}return se.waitFor(m).next(()=>l.apply(u)).next(()=>t.localDocuments.getLocalViewOfDocuments(u,E,b)).next(()=>E)}).then(u=>(t.Ji=o,u))}(t.localStore,e);e.targetChanges.forEach((o,u)=>{const l=t.yc.get(u);l&&(dt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?l.fc=!0:o.modifiedDocuments.size>0?dt(l.fc):o.removedDocuments.size>0&&(dt(l.fc),l.fc=!1))}),yield Bu(t,r,e)}catch(r){yield Vc(r)}}),kv.apply(this,arguments)}function xb(n,e,t){const r=Xe(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const o=[];r.wc.forEach((u,l)=>{const m=l.view.Mu(e);m.snapshot&&o.push(m.snapshot)}),function(u,l){const m=Xe(u);m.onlineState=l;let E=!1;m.queries.forEach((b,M)=>{for(const R of M.listeners)R.Mu(l)&&(E=!0)}),E&&qg(m)}(r.eventManager,e),o.length&&r.dc.nu(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function rE(n,e,t){return Va.apply(this,arguments)}function Va(){return Va=(0,we.Z)(function*(n,e,t){const r=Xe(n);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.yc.get(e),u=o&&o.key;if(u){let l=new Rn(Qe.comparator);l=l.insert(u,qn.newNoDocument(u,vt.min()));const m=Bt().add(u),E=new Cg(vt.min(),new Map,new Rn(Lt),l,m);yield Mb(r,E),r.gc=r.gc.remove(u),r.yc.delete(e),Vv(r)}else yield Ad(r.localStore,e,!1).then(()=>Df(r,e,t)).catch(Vc)}),Va.apply(this,arguments)}function Nb(n,e){return Wg.apply(this,arguments)}function Wg(){return Wg=(0,we.Z)(function*(n,e){const t=Xe(n),r=e.batch.batchId;try{const o=yield function _A(n,e){const t=Xe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),u=t.Zi.newChangeBuffer({trackRemovals:!0});return function(l,m,E,b){const M=E.batch,R=M.keys();let H=se.resolve();return R.forEach(te=>{H=H.next(()=>b.getEntry(m,te)).next(be=>{const Ue=E.docVersions.get(te);dt(null!==Ue),be.version.compareTo(Ue)<0&&(M.applyToRemoteDocument(be,E),be.isValidDocument()&&(be.setReadTime(E.commitVersion),b.addEntry(be)))})}),H.next(()=>l.mutationQueue.removeMutationBatch(m,M))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let m=Bt();for(let E=0;E<l.mutationResults.length;++E)l.mutationResults[E].transformResults.length>0&&(m=m.add(l.batch.mutations[E].key));return m}(e))).next(()=>t.localDocuments.getDocuments(r,o))})}(t.localStore,e);aE(t,r,null),oE(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Bu(t,o)}catch(o){yield Vc(o)}}),Wg.apply(this,arguments)}function iE(n,e,t){return sE.apply(this,arguments)}function sE(){return sE=(0,we.Z)(function*(n,e,t){const r=Xe(n);try{const o=yield function(u,l){const m=Xe(u);return m.persistence.runTransaction("Reject batch","readwrite-primary",E=>{let b;return m.mutationQueue.lookupMutationBatch(E,l).next(M=>(dt(null!==M),b=M.keys(),m.mutationQueue.removeMutationBatch(E,M))).next(()=>m.mutationQueue.performConsistencyCheck(E)).next(()=>m.documentOverlayCache.removeOverlaysForBatchId(E,b,l)).next(()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(E,b)).next(()=>m.localDocuments.getDocuments(E,b))})}(r.localStore,e);aE(r,e,t),oE(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Bu(r,o)}catch(o){yield Vc(o)}}),sE.apply(this,arguments)}function Fv(){return Fv=(0,we.Z)(function*(n,e){const t=Xe(n);Zc(t.remoteStore)||Fe("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const l=Xe(u);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",m=>l.mutationQueue.getHighestUnacknowledgedBatchId(m))}(t.localStore);if(-1===r)return void e.resolve();const o=t.Ec.get(r)||[];o.push(e),t.Ec.set(r,o)}catch(r){const o=wf(r,"Initialization of waitForPendingWrites() operation failed");e.reject(o)}}),Fv.apply(this,arguments)}function oE(n,e){(n.Ec.get(e)||[]).forEach(t=>{t.resolve()}),n.Ec.delete(e)}function aE(n,e,t){const r=Xe(n);let o=r.Tc[r.currentUser.toKey()];if(o){const u=o.get(e);u&&(t?u.reject(t):u.resolve(),o=o.remove(e)),r.Tc[r.currentUser.toKey()]=o}}function Df(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n._c.get(e))n.wc.delete(r),t&&n.dc.Pc(r,t);n._c.delete(e),n.isPrimaryClient&&n.Ic.Is(e).forEach(r=>{n.Ic.containsKey(r)||Rb(n,r)})}function Rb(n,e){n.mc.delete(e.path.canonicalString());const t=n.gc.get(e);null!==t&&(vf(n.remoteStore,t),n.gc=n.gc.remove(e),n.yc.delete(t),Vv(n))}function Lv(n,e,t){for(const r of t)r instanceof Cb?(n.Ic.addReference(r.key,e),Fx(n,r)):r instanceof bb?(Fe("SyncEngine","Document no longer in limbo: "+r.key),n.Ic.removeReference(r.key,e),n.Ic.containsKey(r.key)||Rb(n,r.key)):it()}function Fx(n,e){const t=e.key,r=t.path.canonicalString();n.gc.get(t)||n.mc.has(r)||(Fe("SyncEngine","New document in limbo: "+t),n.mc.add(r),Vv(n))}function Vv(n){for(;n.mc.size>0&&n.gc.size<n.maxConcurrentLimboResolutions;){const e=n.mc.values().next().value;n.mc.delete(e);const t=new Qe(Zt.fromString(e)),r=n.Ac.next();n.yc.set(r,new Sb(t)),n.gc=n.gc.insert(t,r),Cv(n.remoteStore,new ku(Xi(Kh(t.path)),r,"TargetPurposeLimboResolution",Ji.ct))}}function Bu(n,e,t){return Uv.apply(this,arguments)}function Uv(){return Uv=(0,we.Z)(function*(n,e,t){const r=Xe(n),o=[],u=[],l=[];var m;r.wc.isEmpty()||(r.wc.forEach((m,E)=>{l.push(r.Rc(E,e,t).then(b=>{if((b||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(E.targetId,b?.fromCache?"not-current":"current"),b){o.push(b);const M=Ev.Li(E.targetId,b);u.push(M)}}))}),yield Promise.all(l),r.dc.nu(o),yield(m=(0,we.Z)(function*(E,b){const M=Xe(E);try{yield M.persistence.runTransaction("notifyLocalViewChanges","readwrite",R=>se.forEach(b,H=>se.forEach(H.Fi,te=>M.persistence.referenceDelegate.addReference(R,H.targetId,te)).next(()=>se.forEach(H.Bi,te=>M.persistence.referenceDelegate.removeReference(R,H.targetId,te)))))}catch(R){if(!Su(R))throw R;Fe("LocalStore","Failed to update sequence numbers: "+R)}for(const R of b){const H=R.targetId;if(!R.fromCache){const te=M.Ji.get(H),Ue=te.withLastLimboFreeSnapshotVersion(te.snapshotVersion);M.Ji=M.Ji.insert(H,Ue)}}}),function(E,b){return m.apply(this,arguments)})(r.localStore,u))}),Uv.apply(this,arguments)}function Lx(n,e){return Zg.apply(this,arguments)}function Zg(){return Zg=(0,we.Z)(function*(n,e){const t=Xe(n);if(!t.currentUser.isEqual(e)){Fe("SyncEngine","User change. New user:",e.toKey());const r=yield YC(t.localStore,e);t.currentUser=e,(o=t).Ec.forEach(l=>{l.forEach(m=>{m.reject(new Re(ce.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.Ec.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Bu(t,r.er)}var o}),Zg.apply(this,arguments)}function Ob(n,e){const t=Xe(n),r=t.yc.get(e);if(r&&r.fc)return Bt().add(r.key);{let o=Bt();const u=t._c.get(e);if(!u)return o;for(const l of u){const m=t.wc.get(l);o=o.unionWith(m.view.nc)}return o}}function Pb(n,e){return uE.apply(this,arguments)}function uE(){return uE=(0,we.Z)(function*(n,e){const t=Xe(n),r=yield Ug(t.localStore,e.query,!0),o=e.view.hc(r);return t.isPrimaryClient&&Lv(t,e.targetId,o.cc),o}),uE.apply(this,arguments)}function kb(n,e){return Bv.apply(this,arguments)}function Bv(){return Bv=(0,we.Z)(function*(n,e){const t=Xe(n);return QC(t.localStore,e).then(r=>Bu(t,r))}),Bv.apply(this,arguments)}function Cf(n,e,t,r){return bf.apply(this,arguments)}function bf(){return bf=(0,we.Z)(function*(n,e,t,r){const o=Xe(n),u=yield function(l,m){const E=Xe(l),b=Xe(E.mutationQueue);return E.persistence.runTransaction("Lookup mutation documents","readonly",M=>b.Sn(M,m).next(R=>R?E.localDocuments.getDocuments(M,R):se.resolve(null)))}(o.localStore,e);var m;null!==u?("pending"===t?yield Od(o.remoteStore):"acknowledged"===t||"rejected"===t?(aE(o,e,r||null),oE(o,e),m=e,Xe(Xe(o.localStore).mutationQueue).Cn(m)):it(),yield Bu(o,u)):Fe("SyncEngine","Cannot apply mutation batch with id: "+e)}),bf.apply(this,arguments)}function jv(){return jv=(0,we.Z)(function*(n,e){const t=Xe(n);if(Bb(t),$v(t),!0===e&&!0!==t.vc){const r=t.sharedClientState.getAllActiveQueryTargets(),o=yield Lb(t,r.toArray());t.vc=!0,yield wb(t.remoteStore,!0);for(const u of o)Cv(t.remoteStore,u)}else if(!1===e&&!1!==t.vc){const r=[];let o=Promise.resolve();t._c.forEach((u,l)=>{t.sharedClientState.isLocalQueryTarget(l)?r.push(l):o=o.then(()=>(Df(t,l),Ad(t.localStore,l,!0))),vf(t.remoteStore,l)}),yield o,yield Lb(t,r),function(u){const l=Xe(u);l.yc.forEach((m,E)=>{vf(l.remoteStore,E)}),l.Ic.Ts(),l.yc=new Map,l.gc=new Rn(Qe.comparator)}(t),t.vc=!1,yield wb(t.remoteStore,!1)}}),jv.apply(this,arguments)}function Lb(n,e,t){return cE.apply(this,arguments)}function cE(){return cE=(0,we.Z)(function*(n,e,t){const r=Xe(n),o=[],u=[];for(const l of e){let m;const E=r._c.get(l);if(E&&0!==E.length){m=yield Sd(r.localStore,Xi(E[0]));for(const b of E){const M=r.wc.get(b),R=yield Pb(r,M);R.snapshot&&u.push(R.snapshot)}}else{const b=yield Fw(r.localStore,l);m=yield Sd(r.localStore,b),yield Rv(r,FA(b),l,!1,m.resumeToken)}o.push(m)}return r.dc.nu(u),o}),cE.apply(this,arguments)}function FA(n){return qD(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function Vb(n){const e=Xe(n);return Xe(Xe(e.localStore).persistence).$i()}function LA(n,e,t,r){return lE.apply(this,arguments)}function lE(){return lE=(0,we.Z)(function*(n,e,t,r){const o=Xe(n);if(o.vc)return void Fe("SyncEngine","Ignoring unexpected query state notification.");const u=o._c.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const l=yield QC(o.localStore,Y0(u[0])),m=Cg.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Qr.EMPTY_BYTE_STRING);yield Bu(o,l,m);break}case"rejected":yield Ad(o.localStore,e,!0),Df(o,e,r);break;default:it()}}),lE.apply(this,arguments)}function Vx(n,e,t){return Ub.apply(this,arguments)}function Ub(){return Ub=(0,we.Z)(function*(n,e,t){const r=Bb(n);if(r.vc){for(const o of e){if(r._c.has(o)){Fe("SyncEngine","Adding an already active target "+o);continue}const u=yield Fw(r.localStore,o),l=yield Sd(r.localStore,u);yield Rv(r,FA(u),l.targetId,!1,l.resumeToken),Cv(r.remoteStore,l)}for(const o of t)r._c.has(o)&&(yield Ad(r.localStore,o,!1).then(()=>{vf(r.remoteStore,o),Df(r,o)}).catch(Vc))}}),Ub.apply(this,arguments)}function Bb(n){const e=Xe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Mb.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Ob.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=rE.bind(null,e),e.dc.nu=xA.bind(null,e.eventManager),e.dc.Pc=NA.bind(null,e.eventManager),e}function $v(n){const e=Xe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Nb.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=iE.bind(null,e),e}class Kg{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,we.Z)(function*(){t.serializer=Rd(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return KC(this.persistence,new Iv,e.initialUser,this.serializer)}createPersistence(e){return new _v(ff.zs,this.serializer)}createSharedClientState(e){return new rb}terminate(){var e=this;return(0,we.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class jb extends Kg{constructor(e,t,r){super(),this.Vc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,we.Z)(function*(){yield t().call(r,e),yield r.Vc.initialize(r,e),yield $v(r.Vc.syncEngine),yield Od(r.Vc.remoteStore),yield r.persistence.Ii(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return KC(this.persistence,new Iv,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new BC(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const r=new x0(t,this.persistence);return new _D(e.asyncQueue,r)}createPersistence(e){const t=Vg(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?bi.withCacheSize(this.cacheSizeBytes):bi.DEFAULT;return new Mw(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,ob(),Nd(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new rb}}class BA extends jb{constructor(e,t){super(e,t,!1),this.Vc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,we.Z)(function*(){yield t().call(r,e);const o=r.Vc.syncEngine;r.sharedClientState instanceof xd&&(r.sharedClientState.syncEngine={jr:Cf.bind(null,o),zr:LA.bind(null,o),Wr:Vx.bind(null,o),$i:Vb.bind(null,o),Qr:kb.bind(null,o)},yield r.sharedClientState.start()),yield r.persistence.Ii(function(){var u=(0,we.Z)(function*(l){yield function Fb(n,e){return jv.apply(this,arguments)}(r.Vc.syncEngine,l),r.gcScheduler&&(l&&!r.gcScheduler.started?r.gcScheduler.start():l||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(l&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():l||r.indexBackfillerScheduler.stop())});return function(l){return u.apply(this,arguments)}}())})()}createSharedClientState(e){const t=ob();if(!xd.D(t))throw new Re(ce.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=Vg(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new xd(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class Yg{initialize(e,t){var r=this;return(0,we.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=o=>xb(r.syncEngine,o,1),r.remoteStore.remoteSyncer.handleCredentialChange=Lx.bind(null,r.syncEngine),yield wb(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Nv}createDatastore(e){const t=Rd(e.databaseInfo.databaseId),r=new sb(e.databaseInfo);return new mf(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,o=e.asyncQueue,u=m=>xb(this.syncEngine,m,0),l=ib.D()?new ib:new Bw,new Mx(t,r,o,u,l);var t,r,o,u,l}createSyncEngine(e,t){return function(r,o,u,l,m,E,b){const M=new tE(r,o,u,l,m,E);return b&&(M.vc=!0),M}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,we.Z)(function*(t){const r=Xe(t);Fe("RemoteStore","RemoteStore shutting down."),r.vu.add(5),yield yf(r),r.Pu.shutdown(),r.bu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function jA(n,e=10240){let t=0;return{read:()=>(0,we.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,we.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class dE{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):Bn("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class $A{constructor(e,t){this.Cc=e,this.serializer=t,this.metadata=new Lr,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then(r=>{r&&r.Qu()?this.metadata.resolve(r.Gu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.Gu)}`))},r=>this.metadata.reject(r))}close(){return this.Cc.cancel()}getMetadata(){var e=this;return(0,we.Z)(function*(){return e.metadata.promise})()}bc(){var e=this;return(0,we.Z)(function*(){return yield e.getMetadata(),e.Nc()})()}Nc(){var e=this;return(0,we.Z)(function*(){const t=yield e.kc();if(null===t)return null;const r=e.xc.decode(t),o=Number(r);isNaN(o)&&e.Mc(`length string (${r}) is not valid number`);const u=yield e.$c(o);return new RA(JSON.parse(u),t.length+o)})()}Oc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}kc(){var e=this;return(0,we.Z)(function*(){for(;e.Oc()<0&&!(yield e.Fc()););if(0===e.buffer.length)return null;const t=e.Oc();t<0&&e.Mc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}$c(e){var t=this;return(0,we.Z)(function*(){for(;t.buffer.length<e;)(yield t.Fc())&&t.Mc("Reached the end of bundle when more is expected.");const r=t.xc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Mc(e){throw this.Cc.cancel(),new Error(`Invalid bundle format: ${e}`)}Fc(){var e=this;return(0,we.Z)(function*(){const t=yield e.Cc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class Hv{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,we.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Re(ce.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(o=(0,we.Z)(function*(u,l){const m=Xe(u),E=Tg(m.serializer)+"/documents",b={documents:l.map(te=>Ed(m.serializer,te))},M=yield m.vo("BatchGetDocuments",E,b,l.length),R=new Map;M.forEach(te=>{const be=function rA(n,e){return"found"in e?function(t,r){dt(!!r.found);const o=Fa(t,r.found.name),u=Sr(r.found.updateTime),l=r.found.createTime?Sr(r.found.createTime):vt.min(),m=new hi({mapValue:{fields:r.found.fields}});return qn.newFoundDocument(o,u,l,m)}(n,e):"missing"in e?function(t,r){dt(!!r.missing),dt(!!r.readTime);const o=Fa(t,r.missing),u=Sr(r.readTime);return qn.newNoDocument(o,u)}(n,e):it()}(m.serializer,te);R.set(be.key.toString(),be)});const H=[];return l.forEach(te=>{const be=R.get(te.toString());dt(!!be),H.push(be)}),H}),function(u,l){return o.apply(this,arguments)})(t.datastore,e);var o;return r.forEach(o=>t.recordVersion(o)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new ka(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,we.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,o)=>{const u=Qe.fromPath(o);e.mutations.push(new _d(u,e.precondition(u)))}),yield(r=(0,we.Z)(function*(o,u){const l=Xe(o),m=Tg(l.serializer)+"/documents",E={writes:u.map(b=>Sg(l.serializer,b))};yield l.Io("Commit",m,E)}),function(o,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw it();t=vt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Re(ce.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(vt.min())?Wn.exists(!1):Wn.updateTime(t):Wn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(vt.min()))throw new Re(ce.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Wn.updateTime(t)}return Wn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class HA{constructor(e,t,r,o,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=o,this.deferred=u,this.Bc=r.maxAttempts,this.qo=new ab(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){var e=this;this.qo.No((0,we.Z)(function*(){const t=new Hv(e.datastore),r=e.qc(t);r&&r.then(o=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(o)}).catch(u=>{e.Uc(u)}))}).catch(o=>{e.Uc(o)})}))}qc(e){try{const t=this.updateFunction(e);return!lg(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Uc(e){this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Lc(),Promise.resolve()))):this.deferred.reject(e)}Kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!aw(t)}return!1}}class GA{constructor(e,t,r,o){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=wn.UNAUTHENTICATED,this.clientId=kS.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var l=(0,we.Z)(function*(m){Fe("FirestoreClient","Received user=",m.uid),yield u.authCredentialListener(m),u.user=m});return function(m){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(r,l=>(Fe("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}getConfiguration(){var e=this;return(0,we.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Re(ce.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Lr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,we.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const o=wf(r,"Failed to shutdown persistence");t.reject(o)}})),t.promise}}function Qg(n,e){return ju.apply(this,arguments)}function ju(){return ju=(0,we.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Fe("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var o=(0,we.Z)(function*(u){r.isEqual(u)||(yield YC(e.localStore,u),r=u)});return function(u){return o.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),ju.apply(this,arguments)}function Gv(n,e){return Jg.apply(this,arguments)}function Jg(){return Jg=(0,we.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield hE(n);Fe("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(o=>Gg(e.remoteStore,o)),n.setAppCheckTokenChangeListener((o,u)=>Gg(e.remoteStore,u)),n._onlineComponents=e}),Jg.apply(this,arguments)}function zv(n){return"FirebaseError"===n.name?n.code===ce.FAILED_PRECONDITION||n.code===ce.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function hE(n){return Xg.apply(this,arguments)}function Xg(){return Xg=(0,we.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Fe("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Qg(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!zv(t))throw t;Ci("Error using user provided cache. Falling back to memory cache: "+t),yield Qg(n,new Kg)}}else Fe("FirestoreClient","Using default OfflineComponentProvider"),yield Qg(n,new Kg);return n._offlineComponents}),Xg.apply(this,arguments)}function Tf(n){return Sf.apply(this,arguments)}function Sf(){return Sf=(0,we.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Fe("FirestoreClient","Using user provided OnlineComponentProvider"),yield Gv(n,n._uninitializedComponentsProvider._online)):(Fe("FirestoreClient","Using default OnlineComponentProvider"),yield Gv(n,new Yg))),n._onlineComponents}),Sf.apply(this,arguments)}function zA(n){return hE(n).then(e=>e.persistence)}function fE(n){return hE(n).then(e=>e.localStore)}function qA(n){return Tf(n).then(e=>e.remoteStore)}function qv(n){return Tf(n).then(e=>e.syncEngine)}function Af(n){return pE.apply(this,arguments)}function pE(){return pE=(0,we.Z)(function*(n){const e=yield Tf(n),t=e.eventManager;return t.onListen=kA.bind(null,e.syncEngine),t.onUnlisten=Px.bind(null,e.syncEngine),t}),pE.apply(this,arguments)}function gE(n,e,t={}){const r=new Lr;return n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return function(o,u,l,m,E){const b=new dE({next:R=>{u.enqueueAndForget(()=>Jw(o,M));const H=R.docs.has(l);!H&&R.fromCache?E.reject(new Re(ce.UNAVAILABLE,"Failed to get document because the client is offline.")):H&&R.fromCache&&m&&"server"===m.source?E.reject(new Re(ce.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):E.resolve(R)},error:R=>E.reject(R)}),M=new eE(Kh(l.path),b,{includeMetadataChanges:!0,Ku:!0});return Yw(o,M)}(yield Af(n),n.asyncQueue,e,t,r)})),r.promise}function zb(n,e,t={}){const r=new Lr;return n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return function(o,u,l,m,E){const b=new dE({next:R=>{u.enqueueAndForget(()=>Jw(o,M)),R.fromCache&&"server"===m.source?E.reject(new Re(ce.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):E.resolve(R)},error:R=>E.reject(R)}),M=new eE(l,b,{includeMetadataChanges:!0,Ku:!0});return Yw(o,M)}(yield Af(n),n.asyncQueue,e,t,r)})),r.promise}function Wv(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const Zb=new Map;function yE(n,e,t){if(!t)throw new Re(ce.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function KA(n,e,t,r){if(!0===e&&!0===r)throw new Re(ce.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function YA(n){if(!Qe.isDocumentKey(n))throw new Re(ce.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Kb(n){if(Qe.isDocumentKey(n))throw new Re(ce.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Zv(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":it()}function en(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Re(ce.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Zv(n);throw new Re(ce.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Yb(n,e){if(e<=0)throw new Re(ce.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class vE{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new Re(ce.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Re(ce.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}KA("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=Wv(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(o){if(void 0!==o.timeoutSeconds){if(isNaN(o.timeoutSeconds))throw new Re(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new Re(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new Re(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Mf{constructor(e,t,r,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new vE({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Re(ce.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Re(ce.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new vE(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new dD;switch(t.type){case"firstParty":return new RS(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Re(ce.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Zb.get(e);t&&(Fe("ComponentProvider","Removing Datastore"),Zb.delete(e),t.terminate())}(this),Promise.resolve()}}class jn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new $u(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new jn(this.firestore,e,this._key)}}class gi{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new gi(this.firestore,e,this._query)}}class $u extends gi{constructor(e,t,r){super(e,t,Kh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new jn(this.firestore,null,new Qe(e))}withConverter(e){return new $u(this.firestore,e,this._path)}}function Jb(n,e,...t){if(n=(0,an.m9)(n),yE("collection","path",e),n instanceof Mf){const r=Zt.fromString(e,...t);return Kb(r),new $u(n,null,r)}{if(!(n instanceof jn||n instanceof $u))throw new Re(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Zt.fromString(e,...t));return Kb(r),new $u(n.firestore,null,r)}}function em(n,e,...t){if(n=(0,an.m9)(n),1===arguments.length&&(e=kS.A()),yE("doc","path",e),n instanceof Mf){const r=Zt.fromString(e,...t);return YA(r),new jn(n,null,new Qe(r))}{if(!(n instanceof jn||n instanceof $u))throw new Re(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Zt.fromString(e,...t));return YA(r),new jn(n.firestore,n instanceof $u?n.converter:null,new Qe(r))}}function wE(n,e){return n=(0,an.m9)(n),e=(0,an.m9)(e),(n instanceof jn||n instanceof $u)&&(e instanceof jn||e instanceof $u)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function EE(n,e){return n=(0,an.m9)(n),e=(0,an.m9)(e),n instanceof gi&&e instanceof gi&&n.firestore===e.firestore&&vg(n._query,e._query)&&n.converter===e.converter}class Kv{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new ab(this,"async_queue_retry"),this.Xc=()=>{const t=Nd();t&&Fe("AsyncQueue","Visibility state changed to "+t.visibilityState),this.qo.Mo()};const e=Nd();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=Nd();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const t=new Lr;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}ea(){var e=this;return(0,we.Z)(function*(){if(0!==e.Qc.length){try{yield e.Qc[0](),e.Qc.shift(),e.qo.reset()}catch(t){if(!Su(t))throw t;Fe("AsyncQueue","Operation failed with retryable error: "+t)}e.Qc.length>0&&e.qo.No(()=>e.ea())}})()}ta(e){const t=this.Gc.then(()=>(this.Hc=!0,e().catch(r=>{throw this.Wc=r,this.Hc=!1,Bn("INTERNAL UNHANDLED ERROR: ",function(u){let l=u.message||"";return u.stack&&(l=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),l}(r)),r}).then(r=>(this.Hc=!1,r))));return this.Gc=t,t}enqueueAfterDelay(e,t,r){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const o=Kw.createAndSchedule(this,e,t,r,u=>this.na(u));return this.zc.push(o),o}Zc(){this.Wc&&it()}verifyOperationInProgress(){}sa(){var e=this;return(0,we.Z)(function*(){let t;do{t=e.Gc,yield t}while(t!==e.Gc)})()}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function IE(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const o of["next","error","complete"])if(o in r&&"function"==typeof r[o])return!0;return!1}(n)}class QA{constructor(){this._progressObserver={},this._taskCompletionResolver=new Lr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class $n extends Mf{constructor(e,t,r,o){super(e,t,r,o),this.type="firestore",this._queue=new Kv,this._persistenceKey=o?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||eT(this),this._firestoreClient.terminate()}}function Br(n){return n._firestoreClient||eT(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function eT(n){var e,t,r;const o=n._freezeSettings(),u=(m=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new Jr(n._databaseId,m,n._persistenceKey,(b=o).host,b.ssl,b.experimentalForceLongPolling,b.experimentalAutoDetectLongPolling,Wv(b.experimentalLongPollingOptions),b.useFetchStreams));var m,b;n._firestoreClient=new GA(n._authCredentials,n._appCheckCredentials,n._queue,u),null!==(t=o.cache)&&void 0!==t&&t._offlineComponentProvider&&null!==(r=o.cache)&&void 0!==r&&r._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:o.cache.kind,_offline:o.cache._offlineComponentProvider,_online:o.cache._onlineComponentProvider})}function tT(n,e,t){const r=new Lr;return n.asyncQueue.enqueue((0,we.Z)(function*(){try{yield Qg(n,t),yield Gv(n,e),r.resolve()}catch(o){const u=o;if(!zv(u))throw u;Ci("Error enabling indexeddb cache. Falling back to memory cache: "+u),r.reject(u)}})).then(()=>r.promise)}function eM(n){if(n._initialized||n._terminated)throw new Re(ce.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Hu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Hu(Qr.fromBase64String(e))}catch(t){throw new Re(ce.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Hu(Qr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Kc{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Re(ce.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new zn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class xf{constructor(e){this._methodName=e}}class i{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Re(ce.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Re(ce.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Lt(this._lat,e._lat)||Lt(this._long,e._long)}}const s=/^__.*__$/;class a{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Pa(e,this.data,this.fieldMask,t,this.fieldTransforms):new Pu(e,this.data,t,this.fieldTransforms)}}class c{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Pa(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function d(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw it()}}class f{constructor(e,t,r,o,u,l){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=o,void 0===u&&this.ua(),this.fieldTransforms=u||[],this.fieldMask=l||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new f(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.aa({path:r,la:!1});return o.fa(e),o}da(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.aa({path:r,la:!1});return o.ua(),o}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return Nf(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(d(this.ca)&&s.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class y{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Rd(e)}ya(e,t,r,o=!1){return new f({ca:e,methodName:t,ga:r,path:zn.emptyPath(),la:!1,ma:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function w(n){const e=n._freezeSettings(),t=Rd(n._databaseId);return new y(n._databaseId,!!e.ignoreUndefinedProperties,t)}function D(n,e,t,r,o,u={}){const l=n.ya(u.merge||u.mergeFields?2:0,e,t,o);hn("Data must be an object, but it was:",l,r);const m=Rt(r,l);let E,b;if(u.merge)E=new Ui(l.fieldMask),b=l.fieldTransforms;else if(u.mergeFields){const M=[];for(const R of u.mergeFields){const H=mi(e,R,t);if(!l.contains(H))throw new Re(ce.INVALID_ARGUMENT,`Field '${H}' is specified in your field mask but missing from your input data.`);nT(M,H)||M.push(H)}E=new Ui(M),b=l.fieldTransforms.filter(R=>E.covers(R.field))}else E=null,b=l.fieldTransforms;return new a(new hi(m),E,b)}class T extends xf{_toFieldTransform(e){if(2!==e.ca)throw e._a(1===e.ca?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof T}}function x(n,e,t){return new f({ca:3,ga:e.settings.ga,methodName:n._methodName,la:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class F extends xf{_toFieldTransform(e){return new ef(e.path,new Xh)}isEqual(e){return e instanceof F}}class z extends xf{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=x(this,e,!0),r=this.pa.map(u=>xe(u,t)),o=new Oa(r);return new ef(e.path,o)}isEqual(e){return this===e}}class J extends xf{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=x(this,e,!0),r=this.pa.map(u=>xe(u,t)),o=new Ur(r);return new ef(e.path,o)}isEqual(e){return this===e}}class _e extends xf{constructor(e,t){super(e),this.Ia=t}_toFieldTransform(e){const t=new vd(e.serializer,md(e.serializer,this.Ia));return new ef(e.path,t)}isEqual(e){return this===e}}function Le(n,e,t,r){const o=n.ya(1,e,t);hn("Data must be an object, but it was:",o,r);const u=[],l=hi.empty();Au(r,(E,b)=>{const M=zu(e,E,t);b=(0,an.m9)(b);const R=o.da(M);if(b instanceof T)u.push(M);else{const H=xe(b,R);null!=H&&(u.push(M),l.set(M,H))}});const m=new Ui(u);return new c(l,m,o.fieldTransforms)}function Je(n,e,t,r,o,u){const l=n.ya(1,e,t),m=[mi(e,r,t)],E=[o];if(u.length%2!=0)throw new Re(ce.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let H=0;H<u.length;H+=2)m.push(mi(e,u[H])),E.push(u[H+1]);const b=[],M=hi.empty();for(let H=m.length-1;H>=0;--H)if(!nT(b,m[H])){const te=m[H];let be=E[H];be=(0,an.m9)(be);const Ue=l.da(te);if(be instanceof T)b.push(te);else{const He=xe(be,Ue);null!=He&&(b.push(te),M.set(te,He))}}const R=new Ui(b);return new c(M,R,l.fieldTransforms)}function mt(n,e,t,r=!1){return xe(t,n.ya(r?4:3,e))}function xe(n,e){if($t(n=(0,an.m9)(n)))return hn("Unsupported field value:",e,n),Rt(n,e);if(n instanceof xf)return function(t,r){if(!d(r.ca))throw r._a(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r._a(`${t._methodName}() is not currently supported inside arrays`);const o=t._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.la&&4!==e.ca)throw e._a("Nested arrays are not supported");return function(t,r){const o=[];let u=0;for(const l of t){let m=xe(l,r.wa(u));null==m&&(m={nullValue:"NULL_VALUE"}),o.push(m),u++}return{arrayValue:{values:o}}}(n,e)}return function(t,r){if(null===(t=(0,an.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return md(r.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const o=tr.fromDate(t);return{timestampValue:wd(r.serializer,o)}}if(t instanceof tr){const o=new tr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:wd(r.serializer,o)}}if(t instanceof i)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Hu)return{bytesValue:hC(r.serializer,t._byteString)};if(t instanceof jn){const o=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(o))throw r._a(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:sv(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r._a(`Unsupported field value: ${Zv(t)}`)}(n,e)}function Rt(n,e){const t={};return k0(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Au(n,(r,o)=>{const u=xe(o,e.ha(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function $t(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof tr||n instanceof i||n instanceof Hu||n instanceof jn||n instanceof xf)}function hn(n,e,t){if(!$t(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=Zv(t);throw e._a("an object"===r?n+" a custom object":n+" "+r)}var r}function mi(n,e,t){if((e=(0,an.m9)(e))instanceof Kc)return e._internalPath;if("string"==typeof e)return zu(n,e);throw Nf("Field path arguments must be of type string or ",n,!1,void 0,t)}const Gu=new RegExp("[~\\*/\\[\\]]");function zu(n,e,t){if(e.search(Gu)>=0)throw Nf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Kc(...e.split("."))._internalPath}catch{throw Nf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Nf(n,e,t,r,o){const u=r&&!r.isEmpty(),l=void 0!==o;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let E="";return(u||l)&&(E+=" (found",u&&(E+=` in field ${r}`),l&&(E+=` in document ${o}`),E+=")"),new Re(ce.INVALID_ARGUMENT,m+n+E)}function nT(n,e){return n.some(t=>t.isEqual(e))}class tm{constructor(e,t,r,o,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new jn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new hO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(rT("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class hO extends tm{data(){return super.data()}}function rT(n,e){return"string"==typeof e?zu(n,e):e instanceof Kc?e._internalPath:e._delegate._internalPath}function Kx(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Re(ce.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class tM{}class DE extends tM{}function Rf(n,e,...t){let r=[];e instanceof tM&&r.push(e),r=r.concat(t),function(o){const u=o.filter(m=>m instanceof Qv).length,l=o.filter(m=>m instanceof CE).length;if(u>1||u>0&&l>0)throw new Re(ce.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const o of r)n=o._apply(n);return n}class CE extends DE{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new CE(e,t,r)}_apply(e){const t=this._parse(e);return Xx(e._query,t),new gi(e.firestore,e.converter,K0(e._query,t))}_parse(e){const t=w(e.firestore);return function(o,u,l,m,E,b,M){let R;if(E.isKeyField()){if("array-contains"===b||"array-contains-any"===b)throw new Re(ce.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if("in"===b||"not-in"===b){Jx(M,b);const H=[];for(const te of M)H.push(Qx(m,o,te));R={arrayValue:{values:H}}}else R=Qx(m,o,M)}else"in"!==b&&"not-in"!==b&&"array-contains-any"!==b||Jx(M,b),R=mt(l,"where",M,"in"===b||"not-in"===b);return Xt.create(E,b,R)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class Qv extends tM{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Qv(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:En.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,o){let u=r;const l=o.getFlattenedFilters();for(const m of l)Xx(u,m),u=K0(u,m)}(e._query,t),new gi(e.firestore,e.converter,K0(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class nM extends DE{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new nM(e,t)}_apply(e){const t=function(r,o,u){if(null!==r.startAt)throw new Re(ce.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Re(ce.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new Na(o,u);return function(m,E){if(null===W0(m)){const b=Jy(m);null!==b&&eN(0,b,E.field)}}(r,l),l}(e._query,this._field,this._direction);return new gi(e.firestore,e.converter,function(r,o){const u=r.explicitOrderBy.concat([o]);return new Ou(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class iT extends DE{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new iT(e,t,r)}_apply(e){return new gi(e.firestore,e.converter,Xy(e._query,this._limit,this._limitType))}}class sT extends DE{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new sT(e,t,r)}_apply(e){const t=Yx(e,this.type,this._docOrFields,this._inclusive);return new gi(e.firestore,e.converter,(o=t,new Ou((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)));var r,o}}class oT extends DE{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new oT(e,t,r)}_apply(e){const t=Yx(e,this.type,this._docOrFields,this._inclusive);return new gi(e.firestore,e.converter,(o=t,new Ou((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,o)));var r,o}}function Yx(n,e,t,r){if(t[0]=(0,an.m9)(t[0]),t[0]instanceof tm)return function(o,u,l,m,E){if(!m)throw new Re(ce.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const b=[];for(const M of gd(o))if(M.field.isKeyField())b.push(fd(u,m.key));else{const R=m.data.field(M.field);if(By(R))throw new Re(ce.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+M.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===R){const H=M.field.canonicalString();throw new Re(ce.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${H}' (used as the orderBy) does not exist.`)}b.push(R)}return new $c(b,E)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const o=w(n.firestore);return function(u,l,m,E,b,M){const R=u.explicitOrderBy;if(b.length>R.length)throw new Re(ce.INVALID_ARGUMENT,`Too many arguments provided to ${E}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const H=[];for(let te=0;te<b.length;te++){const be=b[te];if(R[te].field.isKeyField()){if("string"!=typeof be)throw new Re(ce.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${E}(), but got a ${typeof be}`);if(!Z0(u)&&-1!==be.indexOf("/"))throw new Re(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${E}() must be a plain document ID, but '${be}' contains a slash.`);const Ue=u.path.child(Zt.fromString(be));if(!Qe.isDocumentKey(Ue))throw new Re(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${E}() must result in a valid document path, but '${Ue}' is not because it contains an odd number of segments.`);const He=new Qe(Ue);H.push(fd(l,He))}else{const Ue=mt(m,E,be);H.push(Ue)}}return new $c(H,M)}(n._query,n.firestore._databaseId,o,e,t,r)}}function Qx(n,e,t){if("string"==typeof(t=(0,an.m9)(t))){if(""===t)throw new Re(ce.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Z0(e)&&-1!==t.indexOf("/"))throw new Re(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Zt.fromString(t));if(!Qe.isDocumentKey(r))throw new Re(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return fd(n,new Qe(r))}if(t instanceof jn)return fd(n,t._key);throw new Re(ce.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Zv(t)}.`)}function Jx(n,e){if(!Array.isArray(n)||0===n.length)throw new Re(ce.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Xx(n,e){if(e.isInequality()){const r=Jy(n),o=e.field;if(null!==r&&!r.isEqual(o))throw new Re(ce.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${o.toString()}'`);const u=W0(n);null!==u&&eN(0,o,u)}const t=function(r,o){for(const u of r)for(const l of u.getFlattenedFilters())if(o.indexOf(l.op)>=0)return l.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new Re(ce.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function eN(n,e,t){if(!t.isEqual(e))throw new Re(ce.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class rM{convertValue(e,t="none"){switch(Nu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return br(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Mu(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw it()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Au(e,(o,u)=>{r[o]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new i(br(e.latitude),br(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=fg(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(pg(e));default:return null}}convertTimestamp(e){const t=dd(e);return new tr(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Zt.fromString(e);dt(CC(r));const o=new xu(r.get(1),r.get(3)),u=new Qe(r.popFirst(5));return o.isEqual(t)||Bn(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function aT(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class EO extends rM{constructor(e){super(),this.firestore=e}convertBytes(e){return new Hu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new jn(this.firestore,null,t)}}class nm{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Pd extends tm{constructor(e,t,r,o,u,l){super(e,t,r,o,l),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new bE(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(rT("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class bE extends Pd{data(e={}){return super.data(e)}}class Of{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new nm(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new bE(this._firestore,this._userDataWriter,r.key,r,new nm(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Re(ce.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(l=>({type:"added",doc:new bE(r._firestore,r._userDataWriter,l.doc.key,l.doc,new nm(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>o||3!==l.type).map(l=>{const m=new bE(r._firestore,r._userDataWriter,l.doc.key,l.doc,new nm(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let E=-1,b=-1;return 0!==l.type&&(E=u.indexOf(l.doc.key),u=u.delete(l.doc.key)),1!==l.type&&(u=u.add(l.doc),b=u.indexOf(l.doc.key)),{type:DO(l.type),doc:m,oldIndex:E,newIndex:b}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function DO(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return it()}}function nN(n,e){return n instanceof Pd&&e instanceof Pd?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Of&&e instanceof Of&&n._firestore===e._firestore&&EE(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class Pf extends rM{constructor(e){super(),this.firestore=e}convertBytes(e){return new Hu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new jn(this.firestore,null,t)}}function rN(n,e,t){n=en(n,jn);const r=en(n.firestore,$n),o=aT(n.converter,e,t);return Jv(r,[D(w(r),"setDoc",n._key,o,null!==n.converter,t).toMutation(n._key,Wn.none())])}function iN(n,e,t,...r){n=en(n,jn);const o=en(n.firestore,$n),u=w(o);let l;return l="string"==typeof(e=(0,an.m9)(e))||e instanceof Kc?Je(u,"updateDoc",n._key,e,t,r):Le(u,"updateDoc",n._key,e),Jv(o,[l.toMutation(n._key,Wn.exists(!0))])}function sN(n,...e){var t,r,o;n=(0,an.m9)(n);let u={includeMetadataChanges:!1},l=0;"object"!=typeof e[l]||IE(e[l])||(u=e[l],l++);const m={includeMetadataChanges:u.includeMetadataChanges};if(IE(e[l])){const R=e[l];e[l]=null===(t=R.next)||void 0===t?void 0:t.bind(R),e[l+1]=null===(r=R.error)||void 0===r?void 0:r.bind(R),e[l+2]=null===(o=R.complete)||void 0===o?void 0:o.bind(R)}let E,b,M;if(n instanceof jn)b=en(n.firestore,$n),M=Kh(n._key.path),E={next:R=>{e[l]&&e[l](iM(b,n,R))},error:e[l+1],complete:e[l+2]};else{const R=en(n,gi);b=en(R.firestore,$n),M=R._query;const H=new Pf(b);E={next:te=>{e[l]&&e[l](new Of(b,H,R,te))},error:e[l+1],complete:e[l+2]},Kx(n._query)}return function(R,H,te,be){const Ue=new dE(be),He=new eE(H,Ue,te);return R.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return Yw(yield Af(R),He)})),()=>{Ue.Dc(),R.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return Jw(yield Af(R),He)}))}}(Br(b),M,m,E)}function Jv(n,e){return function(t,r){const o=new Lr;return t.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return function Ab(n,e,t){return Pv.apply(this,arguments)}(yield qv(t),r,o)})),o.promise}(Br(n),e)}function iM(n,e,t){const r=t.docs.get(e._key),o=new Pf(n);return new Pd(n,o,e._key,r,new nm(t.hasPendingWrites,t.fromCache),e.converter)}const jO={maxAttempts:5};class oN{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=w(e)}set(e,t,r){this._verifyNotCommitted();const o=kf(e,this._firestore),u=aT(o.converter,t,r),l=D(this._dataReader,"WriteBatch.set",o._key,u,null!==o.converter,r);return this._mutations.push(l.toMutation(o._key,Wn.none())),this}update(e,t,r,...o){this._verifyNotCommitted();const u=kf(e,this._firestore);let l;return l="string"==typeof(t=(0,an.m9)(t))||t instanceof Kc?Je(this._dataReader,"WriteBatch.update",u._key,t,r,o):Le(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(l.toMutation(u._key,Wn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=kf(e,this._firestore);return this._mutations=this._mutations.concat(new ka(t._key,Wn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Re(ce.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function kf(n,e){if((n=(0,an.m9)(n)).firestore!==e)throw new Re(ce.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class $O extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=w(e)}get(e){const t=kf(e,this._firestore),r=new EO(this._firestore);return this._transaction.lookup([t._key]).then(o=>{if(!o||1!==o.length)return it();const u=o[0];if(u.isFoundDocument())return new tm(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new tm(this._firestore,r,t._key,null,t.converter);throw it()})}set(e,t,r){const o=kf(e,this._firestore),u=aT(o.converter,t,r),l=D(this._dataReader,"Transaction.set",o._key,u,null!==o.converter,r);return this._transaction.set(o._key,l),this}update(e,t,r,...o){const u=kf(e,this._firestore);let l;return l="string"==typeof(t=(0,an.m9)(t))||t instanceof Kc?Je(this._dataReader,"Transaction.update",u._key,t,r,o):Le(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,l),this}delete(e){const t=kf(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=kf(e,this._firestore),r=new Pf(this._firestore);return super.get(e).then(o=>new Pd(this._firestore,r,t._key,o._document,new nm(!1,!1),t.converter))}}function sM(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Re("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function uN(){if(typeof Uint8Array>"u")throw new Re("unimplemented","Uint8Arrays are not available in this environment.")}function cN(){if(!function F0(){return typeof atob<"u"}())throw new Re("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Pc=Du.SDK_VERSION,(0,Du._registerComponent)(new ny.wA("firestore",(t,{instanceIdentifier:r,options:o})=>{const u=t.getProvider("app").getImmediate(),l=new $n(new fD(t.getProvider("auth-internal")),new Ix(t.getProvider("app-check-internal")),function(m,E){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new Re(ce.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new xu(m.options.projectId,E)}(u,r),u);return o=Object.assign({useFetchStreams:e},o),l._setSettings(o),l},"PUBLIC").setMultipleInstances(!0)),(0,Du.registerVersion)(ig,"3.13.0",n),(0,Du.registerVersion)(ig,"3.13.0","esm2017")}();class TE{constructor(e){this._delegate=e}static fromBase64String(e){return cN(),new TE(Hu.fromBase64String(e))}static fromUint8Array(e){return uN(),new TE(Hu.fromUint8Array(e))}toBase64(){return cN(),this._delegate.toBase64()}toUint8Array(){return uN(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function oM(n){return function QO(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class JO{enableIndexedDbPersistence(e,t){return function jx(n,e){eM(n=en(n,$n));const t=Br(n);if(t._uninitializedComponentsProvider)throw new Re(ce.FAILED_PRECONDITION,"SDK cache is already specified.");Ci("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=n._freezeSettings(),o=new Yg;return tT(t,o,new jb(o,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function $x(n){eM(n=en(n,$n));const e=Br(n);if(e._uninitializedComponentsProvider)throw new Re(ce.FAILED_PRECONDITION,"SDK cache is already specified.");Ci("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),r=new Yg;return tT(e,r,new BA(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function JA(n){if(n._initialized&&!n._terminated)throw new Re(ce.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Lr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,we.Z)(function*(){try{yield(t=(0,we.Z)(function*(r){if(!Wo.D())return Promise.resolve();const o=r+"main";yield Wo.delete(o)}),function(r){return t.apply(this,arguments)})(Vg(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class lN{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof xu||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Ci("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function Qb(n,e,t,r={}){var o;const u=(n=en(n,Mf))._getSettings(),l=`${e}:${t}`;if("firestore.googleapis.com"!==u.host&&u.host!==l&&Ci("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},u),{host:l,ssl:!1})),r.mockUserToken){let m,E;if("string"==typeof r.mockUserToken)m=r.mockUserToken,E=wn.MOCK_USER;else{m=(0,an.Sg)(r.mockUserToken,null===(o=n._app)||void 0===o?void 0:o.options.projectId);const b=r.mockUserToken.sub||r.mockUserToken.user_id;if(!b)throw new Re(ce.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new wn(b)}n._authCredentials=new hD(new T0(m,E))}}(this._delegate,e,t,r)}enableNetwork(){return function Gx(n){return function WA(n){return n.asyncQueue.enqueue((0,we.Z)(function*(){const e=yield zA(n),t=yield qA(n);return e.setNetworkEnabled(!0),function(r){const o=Xe(r);return o.vu.delete(0),$g(o)}(t)}))}(Br(n=en(n,$n)))}(this._delegate)}disableNetwork(){return function zx(n){return function Hb(n){return n.asyncQueue.enqueue((0,we.Z)(function*(){const e=yield zA(n),t=yield qA(n);return e.setNetworkEnabled(!1),(r=(0,we.Z)(function*(o){const u=Xe(o);u.vu.add(0),yield yf(u),u.bu.set("Offline")}),function(o){return r.apply(this,arguments)})(t);var r}))}(Br(n=en(n,$n)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,KA("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function Hx(n){return function(e){const t=new Lr;return e.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return function kx(n,e){return Fv.apply(this,arguments)}(yield qv(e),t)})),t.promise}(Br(n=en(n,$n)))}(this._delegate)}onSnapshotsInSync(e){return function RO(n,e){return function qb(n,e){const t=new dE(e);return n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return r=yield Af(n),o=t,Xe(r).ku.add(o),void o.next();var r,o})),()=>{t.Dc(),n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return r=yield Af(n),o=t,void Xe(r).ku.delete(o);var r,o}))}}(Br(n=en(n,$n)),IE(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Re("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Xv(this,Jb(this._delegate,e))}catch(t){throw Os(t,"collection()","Firestore.collection()")}}doc(e){try{return new Ua(this,em(this._delegate,e))}catch(t){throw Os(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ps(this,function _E(n,e){if(n=en(n,Mf),yE("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Re(ce.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new gi(n,null,(t=e,new Ou(Zt.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Os(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function HO(n,e,t){n=en(n,$n);const r=Object.assign(Object.assign({},jO),t);return function(o){if(o.maxAttempts<1)throw new Re(ce.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,u,l){const m=new Lr;return o.asyncQueue.enqueueAndForget((0,we.Z)(function*(){const E=yield function $b(n){return Tf(n).then(e=>e.datastore)}(o);new HA(o.asyncQueue,E,l,u,m).run()})),m.promise}(Br(n),o=>e(new $O(n,o)),r)}(this._delegate,t=>e(new dN(this,t)))}batch(){return Br(this._delegate),new hN(new oN(this._delegate,e=>Jv(this._delegate,e)))}loadBundle(e){return function qx(n,e){const t=Br(n=en(n,$n)),r=new QA;return function mE(n,e,t,r){const o=function(u,l){let m;return m="string"==typeof u?QS().encode(u):u,E=function(E,b){if(E instanceof Uint8Array)return jA(E,b);if(E instanceof ArrayBuffer)return jA(new Uint8Array(E),b);if(E instanceof ReadableStream)return E.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(m),new $A(E,l);var E}(t,Rd(e));n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){!function VA(n,e,t){const r=Xe(n);var o;(o=(0,we.Z)(function*(u,l,m){try{const E=yield l.getMetadata();if(yield function(H,te){const be=Xe(H),Ue=Sr(te.createTime);return be.persistence.runTransaction("hasNewerBundle","readonly",He=>be.qs.getBundleMetadata(He,te.id)).then(He=>!!He&&He.createTime.compareTo(Ue)>=0)}(u.localStore,E))return yield l.close(),m._completeWith({taskState:"Success",documentsLoaded:(H=E).totalDocuments,bytesLoaded:H.totalBytes,totalDocuments:H.totalDocuments,totalBytes:H.totalBytes}),Promise.resolve(new Set);m._updateProgress(Db(E));const b=new OA(E,u.localStore,l.serializer);let M=yield l.bc();for(;M;){const H=yield b.zu(M);H&&m._updateProgress(H),M=yield l.bc()}const R=yield b.complete();return yield Bu(u,R.Ju,void 0),yield function(H,te){const be=Xe(H);return be.persistence.runTransaction("Save bundle","readwrite",Ue=>be.qs.saveBundleMetadata(Ue,te))}(u.localStore,E),m._completeWith(R.progress),Promise.resolve(R.Hu)}catch(E){return Ci("SyncEngine",`Loading bundle failed with ${E}`),m._failWith(E),Promise.resolve(new Set)}var H}),function(u,l,m){return o.apply(this,arguments)})(r,e,t).then(o=>{r.sharedClientState.notifyBundleLoaded(o)})}(yield qv(n),o,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function XA(n,e){return function Ux(n,e){return n.asyncQueue.enqueue((0,we.Z)(function*(){return function(t,r){const o=Xe(t);return o.persistence.runTransaction("Get named query","readonly",u=>o.qs.getNamedQuery(u,r))}(yield fE(n),e)}))}(Br(n=en(n,$n)),e).then(t=>t?new gi(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Ps(this,t):null)}}class uT extends rM{constructor(e){super(),this.firestore=e}convertBytes(e){return new TE(new Hu(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Ua.forKey(t,this.firestore,null)}}class dN{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new uT(e)}get(e){const t=im(e);return this._delegate.get(t).then(r=>new SE(this._firestore,new Pd(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const o=im(e);return r?(sM("Transaction.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=im(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=im(e);return this._delegate.delete(t),this}}class hN{constructor(e){this._delegate=e}set(e,t,r){const o=im(e);return r?(sM("WriteBatch.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=im(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=im(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class rm{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new bE(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new AE(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=rm.INSTANCES;let o=r.get(e);o||(o=new WeakMap,r.set(e,o));let u=o.get(t);return u||(u=new rm(e,new uT(e),t),o.set(t,u)),u}}rm.INSTANCES=new WeakMap;class Ua{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new uT(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Re("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Ua(t,new jn(t._delegate,r,new Qe(e)))}static forKey(e,t,r){return new Ua(t,new jn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Xv(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Xv(this.firestore,Jb(this._delegate,e))}catch(t){throw Os(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,an.m9)(e))instanceof jn&&wE(this._delegate,e)}set(e,t){t=sM("DocumentReference.set",t);try{return t?rN(this._delegate,e,t):rN(this._delegate,e)}catch(r){throw Os(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?iN(this._delegate,e):iN(this._delegate,e,t,...r)}catch(o){throw Os(o,"updateDoc()","DocumentReference.update()")}}delete(){return function xO(n){return Jv(en(n.firestore,$n),[new ka(n._key,Wn.none())])}(this._delegate)}onSnapshot(...e){const t=fN(e),r=pN(e,o=>new SE(this.firestore,new Pd(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)));return sN(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function bO(n){n=en(n,jn);const e=en(n.firestore,$n),t=Br(e),r=new Pf(e);return function Gb(n,e){const t=new Lr;return n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return(r=(0,we.Z)(function*(o,u,l){try{const m=yield function(E,b){const M=Xe(E);return M.persistence.runTransaction("read document","readonly",R=>M.localDocuments.getDocument(R,b))}(o,u);m.isFoundDocument()?l.resolve(m):m.isNoDocument()?l.resolve(null):l.reject(new Re(ce.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(m){const E=wf(m,`Failed to get document '${u} from cache`);l.reject(E)}}),function(o,u,l){return r.apply(this,arguments)})(yield fE(n),e,t);var r})),t.promise}(t,n._key).then(o=>new Pd(e,r,n._key,o,new nm(null!==o&&o.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function TO(n){n=en(n,jn);const e=en(n.firestore,$n);return gE(Br(e),n._key,{source:"server"}).then(t=>iM(e,n,t))}(this._delegate):function CO(n){n=en(n,jn);const e=en(n.firestore,$n);return gE(Br(e),n._key).then(t=>iM(e,n,t))}(this._delegate),t.then(r=>new SE(this.firestore,new Pd(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Ua(this.firestore,this._delegate.withConverter(e?rm.getInstance(this.firestore,e):null))}}function Os(n,e,t){return n.message=n.message.replace(e,t),n}function fN(n){for(const e of n)if("object"==typeof e&&!oM(e))return e;return{}}function pN(n,e){var t,r;let o;return o=oM(n[0])?n[0]:oM(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{o.next&&o.next(e(u))},error:null===(t=o.error)||void 0===t?void 0:t.bind(o),complete:null===(r=o.complete)||void 0===r?void 0:r.bind(o)}}class SE{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Ua(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return nN(this._delegate,e._delegate)}}class AE extends SE{data(e){const t=this._delegate.data(e);return function lD(n,e){n||it()}(void 0!==t),t}}class Ps{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new uT(e)}where(e,t,r){try{return new Ps(this.firestore,Rf(this._delegate,function fO(n,e,t){const r=e,o=rT("where",n);return CE._create(o,r,t)}(e,t,r)))}catch(o){throw Os(o,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Ps(this.firestore,Rf(this._delegate,function pO(n,e="asc"){const t=e,r=rT("orderBy",n);return nM._create(r,t)}(e,t)))}catch(r){throw Os(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Ps(this.firestore,Rf(this._delegate,function gO(n){return Yb("limit",n),iT._create("limit",n,"F")}(e)))}catch(t){throw Os(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Ps(this.firestore,Rf(this._delegate,function mO(n){return Yb("limitToLast",n),iT._create("limitToLast",n,"L")}(e)))}catch(t){throw Os(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Ps(this.firestore,Rf(this._delegate,function yO(...n){return sT._create("startAt",n,!0)}(...e)))}catch(t){throw Os(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Ps(this.firestore,Rf(this._delegate,function vO(...n){return sT._create("startAfter",n,!1)}(...e)))}catch(t){throw Os(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Ps(this.firestore,Rf(this._delegate,function _O(...n){return oT._create("endBefore",n,!1)}(...e)))}catch(t){throw Os(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Ps(this.firestore,Rf(this._delegate,function wO(...n){return oT._create("endAt",n,!0)}(...e)))}catch(t){throw Os(t,"endAt()","Query.endAt()")}}isEqual(e){return EE(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function AO(n){n=en(n,gi);const e=en(n.firestore,$n),t=Br(e),r=new Pf(e);return function ZA(n,e){const t=new Lr;return n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return(r=(0,we.Z)(function*(o,u,l){try{const m=yield Ug(o,u,!0),E=new Tb(u,m.ir),b=E.sc(m.documents),M=E.applyChanges(b,!1);l.resolve(M.snapshot)}catch(m){const E=wf(m,`Failed to execute query '${u} against cache`);l.reject(E)}}),function(o,u,l){return r.apply(this,arguments)})(yield fE(n),e,t);var r})),t.promise}(t,n._query).then(o=>new Of(e,r,n,o))}(this._delegate):"server"===e?.source?function MO(n){n=en(n,gi);const e=en(n.firestore,$n),t=Br(e),r=new Pf(e);return zb(t,n._query,{source:"server"}).then(o=>new Of(e,r,n,o))}(this._delegate):function SO(n){n=en(n,gi);const e=en(n.firestore,$n),t=Br(e),r=new Pf(e);return Kx(n._query),zb(t,n._query).then(o=>new Of(e,r,n,o))}(this._delegate),t.then(r=>new aM(this.firestore,new Of(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=fN(e),r=pN(e,o=>new aM(this.firestore,new Of(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)));return sN(this._delegate,t,r)}withConverter(e){return new Ps(this.firestore,this._delegate.withConverter(e?rm.getInstance(this.firestore,e):null))}}class eP{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new AE(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class aM{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Ps(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new AE(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new eP(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new AE(this._firestore,r))})}isEqual(e){return nN(this._delegate,e._delegate)}}class Xv extends Ps{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Ua(this.firestore,e):null}doc(e){try{return new Ua(this.firestore,void 0===e?em(this._delegate):em(this._delegate,e))}catch(t){throw Os(t,"doc()","CollectionReference.doc()")}}add(e){return function NO(n,e){const t=en(n.firestore,$n),r=em(n),o=aT(n.converter,e);return Jv(t,[D(w(n.firestore),"addDoc",r._key,o,null!==n.converter,{}).toMutation(r._key,Wn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Ua(this.firestore,t))}isEqual(e){return wE(this._delegate,e._delegate)}withConverter(e){return new Xv(this.firestore,this._delegate.withConverter(e?rm.getInstance(this.firestore,e):null))}}function im(n){return en(n,jn)}class uM{constructor(...e){this._delegate=new Kc(...e)}static documentId(){return new uM(zn.keyField().canonicalString())}isEqual(e){return(e=(0,an.m9)(e))instanceof Kc&&this._delegate._internalPath.isEqual(e._internalPath)}}class sm{constructor(e){this._delegate=e}static serverTimestamp(){const e=function zO(){return new F("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new sm(e)}static delete(){const e=function GO(){return new T("deleteField")}();return e._methodName="FieldValue.delete",new sm(e)}static arrayUnion(...e){const t=function qO(...n){return new z("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new sm(t)}static arrayRemove(...e){const t=function WO(...n){return new J("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new sm(t)}static increment(e){const t=function ZO(n){return new _e("increment",n)}(e);return t._methodName="FieldValue.increment",new sm(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const tP={Firestore:lN,GeoPoint:i,Timestamp:tr,Blob:TE,Transaction:dN,WriteBatch:hN,DocumentReference:Ua,DocumentSnapshot:SE,Query:Ps,QueryDocumentSnapshot:AE,QuerySnapshot:aM,CollectionReference:Xv,FieldPath:uM,FieldValue:sm,setLogLevel:function XO(n){!function jh(n){Ns.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function rP(n){(function nP(n,e){n.INTERNAL.registerComponent(new ny.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),o=t.getProvider("firestore").getImmediate();return e(r,o)},"PUBLIC").setServiceProps(Object.assign({},tP)))})(n,(e,t)=>new lN(e,t,new JO)),n.registerVersion("@firebase/firestore-compat","0.3.12")}(iS.Z);var iP=O(3019),cT=O(3093),sP=O(4552);class oP extends Ss.x{constructor(e=1/0,t=1/0,r=sP.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:o,_timestampProvider:u,_windowTime:l}=this;t||(r.push(e),!o&&r.push(u.now()+l)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:o}=this,u=o.slice();for(let l=0;l<u.length&&!e.closed;l+=r?1:2)e.next(u[l]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:o}=this,u=(o?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!o){const l=t.now();let m=0;for(let E=1;E<r.length&&r[E]<=l;E+=2)m=E;m&&r.splice(0,m+1)}}}var aP=O(3020);function gN(n,e,t){let r,o=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:o=!1,scheduler:t}=n):r=n??1/0,(0,aP.B)({connector:()=>new oP(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:o})}function mN(n,e){return(0,cs.m)(e)?(0,xn.w)(()=>n,e):(0,xn.w)(()=>n)}var cM=O(5137);O(4097);var dM=O(4303);const hM=new Map,vN={activated:!1,tokenObservers:[]},hP={initialized:!1,enabled:!1};function jr(n){return hM.get(n)||Object.assign({},vN)}function dT(){return hP}const fM="https://content-firebaseappcheck.googleapis.com/v1",mP="exchangeDebugToken",_N={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class vP{constructor(e,t,r,o,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=o,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=o,o>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,we.Z)(function*(){t.stop();try{t.pending=new an.BH,yield function _P(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new an.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const ts=new an.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function pM(n){if(!jr(n).activated)throw ts.create("use-before-activation",{appName:n.name})}function pT(n,e){return mM.apply(this,arguments)}function mM(){return mM=(0,we.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},o=t.getImmediate({optional:!0});if(o){const R=yield o.getHeartbeatsHeader();R&&(r["X-Firebase-Client"]=R)}const u={method:"POST",body:JSON.stringify(e),headers:r};let l,m;try{l=yield fetch(n,u)}catch(R){throw ts.create("fetch-network-error",{originalErrorMessage:R?.message})}if(200!==l.status)throw ts.create("fetch-status-error",{httpStatus:l.status});try{m=yield l.json()}catch(R){throw ts.create("fetch-parse-error",{originalErrorMessage:R?.message})}const E=m.ttl.match(/^([\d.]+)(s)$/);if(!E||!E[2]||isNaN(Number(E[1])))throw ts.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${m.ttl}`});const b=1e3*Number(E[1]),M=Date.now();return{token:m.token,expireTimeMillis:M+b,issuedAtTimeMillis:M}}),mM.apply(this,arguments)}function wN(n,e){const{projectId:t,appId:r,apiKey:o}=n.options;return{url:`${fM}/projects/${t}/apps/${r}:${mP}?key=${o}`,body:{debug_token:e}}}const DP="firebase-app-check-database",CP=1,ME="firebase-app-check-store";let gT=null;function yM(){return yM=(0,we.Z)(function*(n,e){const r=(yield function IN(){return gT||(gT=new Promise((n,e)=>{try{const t=indexedDB.open(DP,CP);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var o;e(ts.create("storage-open",{originalErrorMessage:null===(o=r.target.error)||void 0===o?void 0:o.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(ME,{keyPath:"compositeKey"})}}catch(t){e(ts.create("storage-open",{originalErrorMessage:t?.message}))}}),gT)}()).transaction(ME,"readwrite"),u=r.objectStore(ME).put({compositeKey:n,value:e});return new Promise((l,m)=>{u.onsuccess=E=>{l()},r.onerror=E=>{var b;m(ts.create("storage-set",{originalErrorMessage:null===(b=E.target.error)||void 0===b?void 0:b.message}))}})}),yM.apply(this,arguments)}const xE=new Ac.Yd("@firebase/app-check");function wM(n,e){return(0,an.hl)()?function TP(n,e){return function DN(n,e){return yM.apply(this,arguments)}(function bN(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{xE.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function IM(){return dT().enabled}function DM(){return CM.apply(this,arguments)}function CM(){return CM=(0,we.Z)(function*(){const n=dT();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),CM.apply(this,arguments)}const RP={error:"UNKNOWN_ERROR"};function OP(n){return an.US.encodeString(JSON.stringify(n),!1)}function mT(n){return bM.apply(this,arguments)}function bM(){return bM=(0,we.Z)(function*(n,e=!1){const t=n.app;pM(t);const r=jr(t);let u,o=r.token;if(o&&!e_(o)&&(r.token=void 0,o=void 0),!o){const E=yield r.cachedTokenPromise;E&&(e_(E)?o=E:yield wM(t,void 0))}if(!e&&o&&e_(o))return{token:o.token};let m,l=!1;if(IM()){r.exchangeTokenPromise||(r.exchangeTokenPromise=pT(wN(t,yield DM()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),l=!0);const E=yield r.exchangeTokenPromise;return yield wM(t,E),r.token=E,{token:E.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),l=!0),o=yield jr(t).exchangeTokenPromise}catch(E){"appCheck/throttled"===E.code?xE.warn(E.message):xE.error(E),u=E}return o?u?m=e_(o)?{token:o.token,internalError:u}:MN(u):(m={token:o.token},r.token=o,yield wM(t,o)):m=MN(u),l&&function AN(n,e){const t=jr(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}(t,m),m}),bM.apply(this,arguments)}function TM(){return TM=(0,we.Z)(function*(n){const e=n.app;pM(e);const{provider:t}=jr(e);if(IM()){const r=yield DM(),{token:o}=yield pT(wN(e,r),n.heartbeatServiceProvider);return{token:o}}{const{token:r}=yield t.getToken();return{token:r}}}),TM.apply(this,arguments)}function AM(n,e){const t=jr(n),r=t.tokenObservers.filter(o=>o.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function SN(n){const{app:e}=n,t=jr(e);let r=t.tokenRefresher;r||(r=function PP(n){const{app:e}=n;return new vP((0,we.Z)(function*(){let r;if(r=jr(e).token?yield mT(n,!0):yield mT(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=jr(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},_N.RETRIAL_MIN_WAIT,_N.RETRIAL_MAX_WAIT)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function e_(n){return n.expireTimeMillis-Date.now()>0}function MN(n){return{token:OP(RP),error:n}}class kP{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=jr(this.app);for(const t of e)AM(this.app,t.next);return Promise.resolve()}}const LN="app-check-internal";!function KP(){(0,dM.Xd)(new ny.wA("app-check",n=>function FP(n,e){return new kP(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(LN).initialize()})),(0,dM.Xd)(new ny.wA(LN,n=>function LP(n){return{getToken:e=>mT(n,e),getLimitedUseToken:()=>function TN(n){return TM.apply(this,arguments)}(n),addTokenListener:e=>function SM(n,e,t,r){const{app:o}=n,u=jr(o);if(u.tokenObservers=[...u.tokenObservers,{next:t,error:r,type:e}],u.token&&e_(u.token)){const m=u.token;Promise.resolve().then(()=>{t({token:m.token}),SN(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>SN(n))}(n,"INTERNAL",e),removeTokenListener:e=>AM(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,dM.KN)("@firebase/app-check","0.8.0")}();class RM{constructor(){return(0,Vn.vb)("app-check")}}typeof window<"u"&&window;var e1=O(120);const UN=new g.OlP("angularfire2.auth.use-emulator"),BN=new g.OlP("angularfire2.auth.settings"),jN=new g.OlP("angularfire2.auth.tenant-id"),$N=new g.OlP("angularfire2.auth.langugage-code"),HN=new g.OlP("angularfire2.auth.use-device-language"),GN=new g.OlP("angularfire.auth.persistence"),zN=(n,e,t,r,o,u,l,m)=>(0,wr.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const E=e.runOutsideAngular(()=>n.auth());if(t&&E.useEmulator(...t),r&&(E.tenantId=r),E.languageCode=o,u&&E.useDeviceLanguage(),l)for(const[b,M]of Object.entries(l))E.settings[b]=M;return m&&E.setPersistence(m),E},[t,r,o,u,l,m]);let qN=(()=>{class n{constructor(t,r,o,u,l,m,E,b,M,R,H,te){const be=new Ss.x,Ue=(0,yt.of)(void 0).pipe((0,cT.Q)(l.outsideAngular),(0,xn.w)(()=>u.runOutsideAngular(()=>Promise.resolve().then(O.bind(O,8977)))),(0,Vt.U)(()=>(0,wr.on)(t,u,r)),(0,Vt.U)(He=>zN(He,u,m,b,M,R,E,H)),gN({bufferSize:1,refCount:!1}));if(Is(o))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,yt.of)(null);else{Ue.pipe(ds()).subscribe();const pt=Ue.pipe((0,xn.w)(Ot=>Ot.getRedirectResult().then(Ht=>Ht,()=>null)),Vn.iC,gN({bufferSize:1,refCount:!1})),St=Ue.pipe((0,xn.w)(Ot=>new us.y(Ht=>({unsubscribe:u.runOutsideAngular(()=>Ot.onAuthStateChanged(on=>Ht.next(on),on=>Ht.error(on),()=>Ht.complete()))})))),Dt=Ue.pipe((0,xn.w)(Ot=>new us.y(Ht=>({unsubscribe:u.runOutsideAngular(()=>Ot.onIdTokenChanged(on=>Ht.next(on),on=>Ht.error(on),()=>Ht.complete()))}))));this.authState=pt.pipe(mN(St),(0,cM.R)(l.outsideAngular),(0,cT.Q)(l.insideAngular)),this.user=pt.pipe(mN(Dt),(0,cM.R)(l.outsideAngular),(0,cT.Q)(l.insideAngular)),this.idToken=this.user.pipe((0,xn.w)(Ot=>Ot?(0,ln.D)(Ot.getIdToken()):(0,yt.of)(null))),this.idTokenResult=this.user.pipe((0,xn.w)(Ot=>Ot?(0,ln.D)(Ot.getIdTokenResult()):(0,yt.of)(null))),this.credential=(0,iP.T)(pt,be,this.authState.pipe(Pi(Ot=>!Ot))).pipe((0,Vt.U)(Ot=>Ot?.user?Ot:null),(0,cM.R)(l.outsideAngular),(0,cT.Q)(l.insideAngular))}return(0,wr.pX)(this,Ue,u,{spy:{apply:(He,pt,St)=>{(He.startsWith("signIn")||He.startsWith("createUser"))&&St.then(Dt=>be.next(Dt))}}})}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(wr.Dh),g.LFG(wr.xv,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(Vn.HU),g.LFG(UN,8),g.LFG(BN,8),g.LFG(jN,8),g.LFG($N,8),g.LFG(HN,8),g.LFG(GN,8),g.LFG(RM,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function WN(n,e){return function n1(n,e=ty.z){return new us.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function PM(n,e){return WN(n,e).pipe((0,Vt.U)(t=>({payload:t,type:"query"})))}function vT(n,e){return PM(n,e).pipe(Po(void 0),bh(),(0,Vt.U)(([t,r])=>{const o=r.payload.docChanges(),u=o.map(l=>({type:l.type,payload:l}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((l,m)=>{const E=o.find(M=>M.doc.ref.isEqual(l.ref)),b=t?.payload.docs.find(M=>M.ref.isEqual(l.ref));E&&JSON.stringify(E.doc.metadata)===JSON.stringify(l.metadata)||!E&&b&&JSON.stringify(b.metadata)===JSON.stringify(l.metadata)||u.push({type:"modified",payload:{oldIndex:m,newIndex:m,type:"modified",doc:l}})}),u}))}function ZN(n,e,t){return vT(n,t).pipe(Js((r,o)=>function i1(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function s1(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return kM(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return kM(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return kM(n,e.oldIndex,1)}return n}(n,r))}),n}(r,o.map(u=>u.payload),e),[]),(0,R_.x)(),(0,Vt.U)(r=>r.map(o=>({type:o.type,payload:o}))))}function kM(n,e,t,...r){const o=n.slice();return o.splice(e,t,...r),o}function KN(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class YN{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=vT(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Vt.U)(r=>r.filter(o=>e.indexOf(o.type)>-1)))),t.pipe(Po(void 0),bh(),Pi(([r,o])=>o.length>0||!r),(0,Vt.U)(([r,o])=>o),Vn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Js((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=KN(e);return ZN(this.query,t,this.afs.schedulers.outsideAngular).pipe(Vn.iC)}valueChanges(e={}){return PM(this.query,this.afs.schedulers.outsideAngular).pipe((0,Vt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Vn.iC)}get(e){return(0,ln.D)(this.query.get(e)).pipe(Vn.iC)}add(e){return this.ref.add(e)}doc(e){return new QN(this.ref.doc(e),this.afs)}}class QN{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:o,query:u}=eR(r,t);return new YN(o,u,this.afs)}snapshotChanges(){return function r1(n,e){return WN(n,e).pipe(Po(void 0),bh(),(0,Vt.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Vn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Vt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,ln.D)(this.ref.get(e)).pipe(Vn.iC)}}class o1{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?vT(this.query,this.afs.schedulers.outsideAngular).pipe((0,Vt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Pi(t=>t.length>0),Vn.iC):vT(this.query,this.afs.schedulers.outsideAngular).pipe(Vn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Js((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=KN(e);return ZN(this.query,t,this.afs.schedulers.outsideAngular).pipe(Vn.iC)}valueChanges(e={}){return PM(this.query,this.afs.schedulers.outsideAngular).pipe((0,Vt.U)(r=>r.payload.docs.map(o=>e.idField?Object.assign({[e.idField]:o.id},o.data()):o.data())),Vn.iC)}get(e){return(0,ln.D)(this.query.get(e)).pipe(Vn.iC)}}const JN=new g.OlP("angularfire2.enableFirestorePersistence"),XN=new g.OlP("angularfire2.firestore.persistenceSettings"),a1=new g.OlP("angularfire2.firestore.settings"),u1=new g.OlP("angularfire2.firestore.use-emulator");function eR(n,e=(t=>t)){return{query:e(n),ref:n}}let tR=(()=>{class n{constructor(t,r,o,u,l,m,E,b,M,R,H,te,be,Ue,He,pt,St){this.schedulers=E;const Dt=(0,wr.on)(t,m,r),Ot=M;R&&zN(Dt,m,H,be,Ue,He,te,pt),[this.firestore,this.persistenceEnabled$]=(0,wr.cc)(`${Dt.name}.firestore`,"AngularFirestore",Dt.name,()=>{const Ht=m.runOutsideAngular(()=>Dt.firestore());if(u&&Ht.settings(u),Ot&&Ht.useEmulator(...Ot),o&&!Is(l)){const on=()=>{try{return(0,ln.D)(Ht.enablePersistence(b||void 0).then(()=>!0,()=>!1))}catch(ys){return typeof console<"u"&&console.warn(ys),(0,yt.of)(!1)}};return[Ht,m.runOutsideAngular(on)]}return[Ht,(0,yt.of)(!1)]},[u,Ot,o])}collection(t,r){let o;o="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:l}=eR(o,r),m=this.schedulers.ngZone.run(()=>u);return new YN(m,l,this)}collectionGroup(t,r){const o=r||(l=>l),u=this.firestore.collectionGroup(t);return new o1(o(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const o=this.schedulers.ngZone.run(()=>r);return new QN(o,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(wr.Dh),g.LFG(wr.xv,8),g.LFG(JN,8),g.LFG(a1,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(Vn.HU),g.LFG(XN,8),g.LFG(u1,8),g.LFG(qN,8),g.LFG(UN,8),g.LFG(BN,8),g.LFG(jN,8),g.LFG($N,8),g.LFG(HN,8),g.LFG(GN,8),g.LFG(RM,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),c1=(()=>{class n{constructor(){e1.Z.registerVersion("angularfire",Vn.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:JN,useValue:!0},{provide:XN,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:[tR]}),n})(),FM=(()=>{class n{constructor(t){this.afs=t,this.contactsCollection=this.afs.collection("contacts"),this.contacts=this.contactsCollection.snapshotChanges().pipe((0,Vt.U)(r=>r.map(o=>{const u=o.payload.doc.data();return{id:o.payload.doc.id,...u}})))}getContacts(){return this.contacts}createContact(t){this.contactsCollection.add(t)}updateContact(t){this.contactDoc=this.contactsCollection.doc(t.id),this.contactDoc.update(t)}destroyContact(t){this.contactDoc=this.contactsCollection.doc(t.id),this.contactDoc.delete()}static#e=this.\u0275fac=function(r){return new(r||n)(g.LFG(tR))};static#t=this.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac})}return n})(),nR=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static#e=this.\u0275fac=function(r){return new(r||n)(g.Y36(g.Qsj),g.Y36(g.SBq))};static#t=this.\u0275dir=g.lG2({type:n})}return n})(),om=(()=>{class n extends nR{static#e=this.\u0275fac=function(){let t;return function(o){return(t||(t=g.n5z(n)))(o||n)}}();static#t=this.\u0275dir=g.lG2({type:n,features:[g.qOj]})}return n})();const Yc=new g.OlP("NgValueAccessor"),h1={provide:Yc,useExisting:(0,g.Gpc)(()=>NE),multi:!0},p1=new g.OlP("CompositionEventMode");let NE=(()=>{class n extends nR{constructor(t,r,o){super(t,r),this._compositionMode=o,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function f1(){const n=P()?P().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static#e=this.\u0275fac=function(r){return new(r||n)(g.Y36(g.Qsj),g.Y36(g.SBq),g.Y36(p1,8))};static#t=this.\u0275dir=g.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,o){1&r&&g.NdJ("input",function(l){return o._handleInput(l.target.value)})("blur",function(){return o.onTouched()})("compositionstart",function(){return o._compositionStart()})("compositionend",function(l){return o._compositionEnd(l.target.value)})},features:[g._Bn([h1]),g.qOj]})}return n})();const ms=new g.OlP("NgValidators"),Lf=new g.OlP("NgAsyncValidators");function fR(n){return null!=n}function pR(n){return(0,g.QGY)(n)?(0,ln.D)(n):n}function gR(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function mR(n,e){return e.map(t=>t(n))}function yR(n){return n.map(e=>function m1(n){return!n.validate}(e)?e:t=>e.validate(t))}function LM(n){return null!=n?function vR(n){if(!n)return null;const e=n.filter(fR);return 0==e.length?null:function(t){return gR(mR(t,e))}}(yR(n)):null}function VM(n){return null!=n?function _R(n){if(!n)return null;const e=n.filter(fR);return 0==e.length?null:function(t){return function l1(...n){const e=(0,ai.jO)(n),{args:t,keys:r}=Ws(n),o=new us.y(u=>{const{length:l}=t;if(!l)return void u.complete();const m=new Array(l);let E=l,b=l;for(let M=0;M<l;M++){let R=!1;(0,au.Xf)(t[M]).subscribe((0,dr.x)(u,H=>{R||(R=!0,b--),m[M]=H},()=>E--,void 0,()=>{(!E||!R)&&(b||u.next(r?qi(r,m):m),u.complete())}))}});return e?o.pipe(Zs(e)):o}(mR(t,e).map(pR)).pipe((0,Vt.U)(gR))}}(yR(n)):null}function wR(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function UM(n){return n?Array.isArray(n)?n:[n]:[]}function wT(n,e){return Array.isArray(n)?n.includes(e):n===e}function DR(n,e){const t=UM(e);return UM(n).forEach(o=>{wT(t,o)||t.push(o)}),t}function CR(n,e){return UM(e).filter(t=>!wT(n,t))}class bR{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=LM(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=VM(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class ks extends bR{get formDirective(){return null}get path(){return null}}class Vf extends bR{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class TR{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let BM=(()=>{class n extends TR{constructor(t){super(t)}static#e=this.\u0275fac=function(r){return new(r||n)(g.Y36(Vf,2))};static#t=this.\u0275dir=g.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,o){2&r&&g.ekj("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)},features:[g.qOj]})}return n})(),SR=(()=>{class n extends TR{constructor(t){super(t)}static#e=this.\u0275fac=function(r){return new(r||n)(g.Y36(ks,10))};static#t=this.\u0275dir=g.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,o){2&r&&g.ekj("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)("ng-submitted",o.isSubmitted)},features:[g.qOj]})}return n})();const RE="VALID",IT="INVALID",t_="PENDING",OE="DISABLED";function HM(n){return(DT(n)?n.validators:n)||null}function GM(n,e){return(DT(e)?e.asyncValidators:n)||null}function DT(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class NR{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===RE}get invalid(){return this.status===IT}get pending(){return this.status==t_}get disabled(){return this.status===OE}get enabled(){return this.status!==OE}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(DR(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(DR(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(CR(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(CR(e,this._rawAsyncValidators))}hasValidator(e){return wT(this._rawValidators,e)}hasAsyncValidator(e){return wT(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=t_,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=OE,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=RE,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===RE||this.status===t_)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?OE:RE}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=t_,this._hasOwnPendingAsyncValidator=!0;const t=pR(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,o)=>r&&r._find(o),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new g.vpe,this.statusChanges=new g.vpe}_calculateStatus(){return this._allControlsDisabled()?OE:this.errors?IT:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(t_)?t_:this._anyControlsHaveStatus(IT)?IT:RE}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){DT(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function w1(n){return Array.isArray(n)?LM(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function E1(n){return Array.isArray(n)?VM(n):n||null}(this._rawAsyncValidators)}}class zM extends NR{constructor(e,t,r){super(HM(t),GM(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function xR(n,e,t){n._forEachChild((r,o)=>{if(void 0===t[o])throw new g.vHH(1002,"")})})(this,0,e),Object.keys(e).forEach(r=>{(function MR(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new g.vHH(1e3,"");if(!r[t])throw new g.vHH(1001,"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const o=this.controls[r];o&&o.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,o)=>((r.enabled||this.disabled)&&(t[o]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((o,u)=>{r=t(r,o,u)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}const n_=new g.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>CT}),CT="always";function PE(n,e,t=CT){qM(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function C1(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&RR(n,e)})}(n,e),function T1(n,e){const t=(r,o)=>{e.valueAccessor.writeValue(r),o&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function b1(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&RR(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function D1(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function ST(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function qM(n,e){const t=function ER(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(wR(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function IR(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(wR(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const o=()=>n.updateValueAndValidity();ST(e._rawValidators,o),ST(e._rawAsyncValidators,o)}function RR(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}const N1={provide:ks,useExisting:(0,g.Gpc)(()=>MT)},kE=(()=>Promise.resolve())();let MT=(()=>{class n extends ks{constructor(t,r,o){super(),this.callSetDisabledState=o,this.submitted=!1,this._directives=new Set,this.ngSubmit=new g.vpe,this.form=new zM({},LM(t),VM(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){kE.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),PE(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){kE.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){kE.then(()=>{const r=this._findContainer(t.path),o=new zM({});(function OR(n,e){qM(n,e)})(o,t),r.registerControl(t.name,o),o.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){kE.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){kE.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,function PR(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static#e=this.\u0275fac=function(r){return new(r||n)(g.Y36(ms,10),g.Y36(Lf,10),g.Y36(n_,8))};static#t=this.\u0275dir=g.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,o){1&r&&g.NdJ("submit",function(l){return o.onSubmit(l)})("reset",function(){return o.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[g._Bn([N1]),g.qOj]})}return n})();function kR(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function FR(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const LR=class extends NR{constructor(e=null,t,r){super(HM(t),GM(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),DT(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=FR(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){kR(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){kR(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){FR(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},P1={provide:Vf,useExisting:(0,g.Gpc)(()=>xT)},BR=(()=>Promise.resolve())();let xT=(()=>{class n extends Vf{constructor(t,r,o,u,l,m){super(),this._changeDetectorRef=l,this.callSetDisabledState=m,this.control=new LR,this._registered=!1,this.name="",this.update=new g.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=function KM(n,e){if(!e)return null;let t,r,o;return Array.isArray(e),e.forEach(u=>{u.constructor===NE?t=u:function M1(n){return Object.getPrototypeOf(n.constructor)===om}(u)?r=u:o=u}),o||r||t||null}(0,u)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function ZM(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){PE(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){BR.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,o=0!==r&&(0,g.VuI)(r);BR.then(()=>{o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function bT(n,e){return[...e.path,n]}(t,this._parent):[t]}static#e=this.\u0275fac=function(r){return new(r||n)(g.Y36(ks,9),g.Y36(ms,10),g.Y36(Lf,10),g.Y36(Yc,10),g.Y36(g.sBO,8),g.Y36(n_,8))};static#t=this.\u0275dir=g.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[g._Bn([P1]),g.qOj,g.TTD]})}return n})(),jR=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=g.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}return n})(),HR=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=g.oAB({type:n});static#n=this.\u0275inj=g.cJS({})}return n})(),ik=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=g.oAB({type:n});static#n=this.\u0275inj=g.cJS({imports:[HR]})}return n})(),ok=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:n_,useValue:t.callSetDisabledState??CT}]}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=g.oAB({type:n});static#n=this.\u0275inj=g.cJS({imports:[ik]})}return n})();function ak(n,e){if(1&n){const t=g.EpF();g.TgZ(0,"div",4)(1,"div",5)(2,"form",6),g.NdJ("ngSubmit",function(){g.CHM(t);const o=g.oxw();return g.KtG(o.newContact())}),g.TgZ(3,"div",4)(4,"div",7),g._UZ(5,"i",8),g.TgZ(6,"input",9),g.NdJ("ngModelChange",function(o){g.CHM(t);const u=g.oxw();return g.KtG(u.contact.name=o)}),g.qZA(),g.TgZ(7,"label",10),g._uU(8,"Name"),g.qZA()(),g.TgZ(9,"div",7),g._UZ(10,"i",11),g.TgZ(11,"input",12),g.NdJ("ngModelChange",function(o){g.CHM(t);const u=g.oxw();return g.KtG(u.contact.telephone=o)}),g.qZA(),g.TgZ(12,"label",10),g._uU(13,"Telephone"),g.qZA()()(),g.TgZ(14,"button",13),g._uU(15,"SUBMIT"),g.qZA()(),g.TgZ(16,"p"),g._uU(17),g.ALo(18,"json"),g.qZA()()()}if(2&n){const t=g.oxw();g.xp6(6),g.Q6J("ngModel",t.contact.name),g.xp6(5),g.Q6J("ngModel",t.contact.telephone),g.xp6(6),g.Oqu(g.lcZ(18,3,t.contact))}}let uk=(()=>{class n{constructor(t){this.contactService=t,this.statutsContact=!1,this.contact={name:"",telephone:0}}ngOnInit(){}newContact(){this.contactService.createContact(this.contact),this.contact.name="",this.contact.telephone=null,this.statutsContact=!1}static#e=this.\u0275fac=function(r){return new(r||n)(g.Y36(FM))};static#t=this.\u0275cmp=g.Xpm({type:n,selectors:[["app-add-contact"]],decls:5,vars:1,consts:[["class","row",4,"ngIf"],[1,"fixed-action-btn"],[1,"btn-floating","btn-large","red","waves-effect","waves-light",3,"click"],[1,"large","fa","fa-plus"],[1,"row"],[1,"col","s12"],[3,"ngSubmit"],[1,"input-field","col","s6"],[1,"fa","fa-user","prefix"],["type","text","placeholder","Full name","name","name",3,"ngModel","ngModelChange"],["for",""],[1,"fa","fa-phone","prefix"],["type","text","placeholder","Phone number","name","telephone",3,"ngModel","ngModelChange"],["type","submit",1,"btn-large","red"]],template:function(r,o){1&r&&(g._UZ(0,"br"),g.YNc(1,ak,19,5,"div",0),g.TgZ(2,"div",1)(3,"a",2),g.NdJ("click",function(){return o.statutsContact=!o.statutsContact}),g._UZ(4,"i",3),g.qZA()()),2&r&&(g.xp6(1),g.Q6J("ngIf",o.statutsContact))},dependencies:[fo,jR,NE,BM,SR,xT,MT,ta]})}return n})();function ck(n,e){if(1&n){const t=g.EpF();g.TgZ(0,"div",7)(1,"div",6)(2,"div",11),g._UZ(3,"i",12),g.TgZ(4,"input",13),g.NdJ("ngModelChange",function(o){g.CHM(t);const u=g.oxw().$implicit;return g.KtG(u.name=o)}),g.qZA()(),g.TgZ(5,"div",11),g._UZ(6,"i",14),g.TgZ(7,"input",15),g.NdJ("ngModelChange",function(o){g.CHM(t);const u=g.oxw().$implicit;return g.KtG(u.telephone=o)}),g.qZA()(),g.TgZ(8,"button",16),g.NdJ("click",function(){g.CHM(t);const o=g.oxw().$implicit,u=g.oxw(2);return g.KtG(u.updateContact(o))}),g._uU(9," Update "),g.qZA(),g.TgZ(10,"button",17),g.NdJ("click",function(){g.CHM(t);const o=g.oxw().$implicit,u=g.oxw(2);return g.KtG(u.deleteContact(o))}),g._uU(11," Delete "),g.qZA()()()}if(2&n){const t=g.oxw().$implicit;g.xp6(4),g.Q6J("ngModel",t.name),g.xp6(3),g.Q6J("ngModel",t.telephone)}}function lk(n,e){if(1&n){const t=g.EpF();g.TgZ(0,"li",5)(1,"div",6)(2,"div",7)(3,"Strong"),g._uU(4),g.qZA(),g._uU(5),g.TgZ(6,"button",8),g.NdJ("click",function(){const u=g.CHM(t).$implicit,l=g.oxw(2);return g.KtG(l.editContact(u))}),g._UZ(7,"i",9),g.qZA()(),g.YNc(8,ck,12,2,"div",10),g.qZA()()}if(2&n){const t=e.$implicit,r=g.oxw(2);g.xp6(4),g.hij("",t.name," "),g.xp6(1),g.hij(" ",t.telephone," "),g.xp6(3),g.Q6J("ngIf",r.statusContact&&t.id==r.myContact.id)}}function dk(n,e){if(1&n&&(g.TgZ(0,"ul",2)(1,"li",3)(2,"h5"),g._uU(3,"La liste des contacts"),g.qZA()(),g.YNc(4,lk,9,3,"li",4),g.qZA()),2&n){const t=g.oxw();g.xp6(4),g.Q6J("ngForOf",t.contacts)}}function hk(n,e){1&n&&(g.TgZ(0,"h5"),g._uU(1,"La liste des contacts est vide !!"),g.qZA())}let fk=(()=>{class n{constructor(t){this.contactService=t,this.statusContact=!1}ngOnInit(){this.contactService.getContacts()?.subscribe(t=>{this.contacts=t,console.log(this.contacts)})}updateContact(t){this.contactService.updateContact(t),this.statusContact=!1}editContact(t){this.statusContact=!0,this.myContact=t}deleteContact(t){confirm("are sure to delete this contact !!")?this.contactService.destroyContact(t):this.statusContact=!1}static#e=this.\u0275fac=function(r){return new(r||n)(g.Y36(FM))};static#t=this.\u0275cmp=g.Xpm({type:n,selectors:[["app-list-contact"]],decls:4,vars:2,consts:[["class","collection with-header",4,"ngIf","ngIfElse"],["noContacts",""],[1,"collection","with-header"],[1,"collection-item","collection-header"],["class","collection-item",4,"ngFor","ngForOf"],[1,"collection-item"],[1,"row"],[1,"s12","col"],[1,"btn","secondary-content","waves-effect",3,"click"],[1,"fa","fa-pencil"],["class","s12 col",4,"ngIf"],[1,"col","s12","m6","input-field"],[1,"fa","fa-user","prefix"],["type","text","name","name",3,"ngModel","ngModelChange"],[1,"fa","fa-phone","prefix"],["type","text","name","telephone",3,"ngModel","ngModelChange"],[1,"btn","orange",3,"click"],[1,"btn","black",3,"click"]],template:function(r,o){if(1&r&&(g._UZ(0,"app-add-contact"),g.YNc(1,dk,5,1,"ul",0),g.YNc(2,hk,2,0,"ng-template",null,1,g.W1O)),2&r){const u=g.MAs(3);g.xp6(1),g.Q6J("ngIf",(null==o.contacts?null:o.contacts.length)>0)("ngIfElse",u)}},dependencies:[$a,fo,NE,BM,xT,uk]})}return n})(),pk=(()=>{class n{constructor(){this.title="angularContact"}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=g.Xpm({type:n,selectors:[["app-root"]],decls:4,vars:0,consts:[[1,"container"]],template:function(r,o){1&r&&(g._UZ(0,"app-navbar"),g.TgZ(1,"div",0),g._UZ(2,"app-list-contact")(3,"div"),g.qZA())},dependencies:[N_,fk]})}return n})();const gk_firebase={apiKey:"AIzaSyDtbMYu0j5sVSvrzAoxG9ie2SIIciI1MU4",authDomain:"angularcontact-7d263.firebaseapp.com",projectId:"angularcontact-7d263",storageBucket:"angularcontact-7d263.appspot.com",messagingSenderId:"575852974724",appId:"1:575852974724:web:39308a9ef56390f27a68d1",measurementId:"G-CR4WV8P9LC"};let mk=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=g.oAB({type:n,bootstrap:[pk]});static#n=this.\u0275inj=g.cJS({providers:[FM],imports:[Il,rS,wr.hO.initializeApp(gk_firebase),c1,ok]})}return n})();cr().bootstrapModule(mk).catch(n=>console.error(n))},5619:(at,Ce,O)=>{O.d(Ce,{X:()=>K});var g=O(8645);class K extends g.x{constructor(Y){super(),this._value=Y}get value(){return this.getValue()}_subscribe(Y){const ne=super._subscribe(Y);return!ne.closed&&Y.next(this._value),ne}getValue(){const{hasError:Y,thrownError:ne,_value:he}=this;if(Y)throw ne;return this._throwIfClosed(),he}next(Y){super.next(this._value=Y)}}},5592:(at,Ce,O)=>{O.d(Ce,{y:()=>Ne});var g=O(305),K=O(7394),P=O(4850),Y=O(8407),ne=O(2653),he=O(4674),pe=O(1441);let Ne=(()=>{class Q{constructor(Se){Se&&(this._subscribe=Se)}lift(Se){const qe=new Q;return qe.source=this,qe.operator=Se,qe}subscribe(Se,qe,Oe){const We=function j(Q){return Q&&Q instanceof g.Lv||function L(Q){return Q&&(0,he.m)(Q.next)&&(0,he.m)(Q.error)&&(0,he.m)(Q.complete)}(Q)&&(0,K.Nn)(Q)}(Se)?Se:new g.Hp(Se,qe,Oe);return(0,pe.x)(()=>{const{operator:Pe,source:ct}=this;We.add(Pe?Pe.call(We,ct):ct?this._subscribe(We):this._trySubscribe(We))}),We}_trySubscribe(Se){try{return this._subscribe(Se)}catch(qe){Se.error(qe)}}forEach(Se,qe){return new(qe=ue(qe))((Oe,We)=>{const Pe=new g.Hp({next:ct=>{try{Se(ct)}catch(lt){We(lt),Pe.unsubscribe()}},error:We,complete:Oe});this.subscribe(Pe)})}_subscribe(Se){var qe;return null===(qe=this.source)||void 0===qe?void 0:qe.subscribe(Se)}[P.L](){return this}pipe(...Se){return(0,Y.U)(Se)(this)}toPromise(Se){return new(Se=ue(Se))((qe,Oe)=>{let We;this.subscribe(Pe=>We=Pe,Pe=>Oe(Pe),()=>qe(We))})}}return Q.create=Ve=>new Q(Ve),Q})();function ue(Q){var Ve;return null!==(Ve=Q??ne.config.Promise)&&void 0!==Ve?Ve:Promise}},8645:(at,Ce,O)=>{O.d(Ce,{x:()=>pe});var g=O(5592),K=O(7394);const Y=(0,O(2306).d)(ue=>function(){ue(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ne=O(9039),he=O(1441);let pe=(()=>{class ue extends g.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(j){const Q=new Ne(this,this);return Q.operator=j,Q}_throwIfClosed(){if(this.closed)throw new Y}next(j){(0,he.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Q of this.currentObservers)Q.next(j)}})}error(j){(0,he.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=j;const{observers:Q}=this;for(;Q.length;)Q.shift().error(j)}})}complete(){(0,he.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:j}=this;for(;j.length;)j.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var j;return(null===(j=this.observers)||void 0===j?void 0:j.length)>0}_trySubscribe(j){return this._throwIfClosed(),super._trySubscribe(j)}_subscribe(j){return this._throwIfClosed(),this._checkFinalizedStatuses(j),this._innerSubscribe(j)}_innerSubscribe(j){const{hasError:Q,isStopped:Ve,observers:Se}=this;return Q||Ve?K.Lc:(this.currentObservers=null,Se.push(j),new K.w0(()=>{this.currentObservers=null,(0,ne.P)(Se,j)}))}_checkFinalizedStatuses(j){const{hasError:Q,thrownError:Ve,isStopped:Se}=this;Q?j.error(Ve):Se&&j.complete()}asObservable(){const j=new g.y;return j.source=this,j}}return ue.create=(L,j)=>new Ne(L,j),ue})();class Ne extends pe{constructor(L,j){super(),this.destination=L,this.source=j}next(L){var j,Q;null===(Q=null===(j=this.destination)||void 0===j?void 0:j.next)||void 0===Q||Q.call(j,L)}error(L){var j,Q;null===(Q=null===(j=this.destination)||void 0===j?void 0:j.error)||void 0===Q||Q.call(j,L)}complete(){var L,j;null===(j=null===(L=this.destination)||void 0===L?void 0:L.complete)||void 0===j||j.call(L)}_subscribe(L){var j,Q;return null!==(Q=null===(j=this.source)||void 0===j?void 0:j.subscribe(L))&&void 0!==Q?Q:K.Lc}}},305:(at,Ce,O)=>{O.d(Ce,{Hp:()=>Oe,Lv:()=>Q});var g=O(4674),K=O(7394),P=O(2653),Y=O(3894),ne=O(2420);const he=ue("C",void 0,void 0);function ue(re,ve,ee){return{kind:re,value:ve,error:ee}}var L=O(7599),j=O(1441);class Q extends K.w0{constructor(ve){super(),this.isStopped=!1,ve?(this.destination=ve,(0,K.Nn)(ve)&&ve.add(this)):this.destination=lt}static create(ve,ee,Ee){return new Oe(ve,ee,Ee)}next(ve){this.isStopped?ct(function Ne(re){return ue("N",re,void 0)}(ve),this):this._next(ve)}error(ve){this.isStopped?ct(function pe(re){return ue("E",void 0,re)}(ve),this):(this.isStopped=!0,this._error(ve))}complete(){this.isStopped?ct(he,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(ve){this.destination.next(ve)}_error(ve){try{this.destination.error(ve)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ve=Function.prototype.bind;function Se(re,ve){return Ve.call(re,ve)}class qe{constructor(ve){this.partialObserver=ve}next(ve){const{partialObserver:ee}=this;if(ee.next)try{ee.next(ve)}catch(Ee){We(Ee)}}error(ve){const{partialObserver:ee}=this;if(ee.error)try{ee.error(ve)}catch(Ee){We(Ee)}else We(ve)}complete(){const{partialObserver:ve}=this;if(ve.complete)try{ve.complete()}catch(ee){We(ee)}}}class Oe extends Q{constructor(ve,ee,Ee){let ke;if(super(),(0,g.m)(ve)||!ve)ke={next:ve??void 0,error:ee??void 0,complete:Ee??void 0};else{let oe;this&&P.config.useDeprecatedNextContext?(oe=Object.create(ve),oe.unsubscribe=()=>this.unsubscribe(),ke={next:ve.next&&Se(ve.next,oe),error:ve.error&&Se(ve.error,oe),complete:ve.complete&&Se(ve.complete,oe)}):ke=ve}this.destination=new qe(ke)}}function We(re){P.config.useDeprecatedSynchronousErrorHandling?(0,j.O)(re):(0,Y.h)(re)}function ct(re,ve){const{onStoppedNotification:ee}=P.config;ee&&L.z.setTimeout(()=>ee(re,ve))}const lt={closed:!0,next:ne.Z,error:function Pe(re){throw re},complete:ne.Z}},7394:(at,Ce,O)=>{O.d(Ce,{Lc:()=>he,w0:()=>ne,Nn:()=>pe});var g=O(4674);const P=(0,O(2306).d)(ue=>function(j){ue(this),this.message=j?`${j.length} errors occurred during unsubscription:\n${j.map((Q,Ve)=>`${Ve+1}) ${Q.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=j});var Y=O(9039);class ne{constructor(L){this.initialTeardown=L,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let L;if(!this.closed){this.closed=!0;const{_parentage:j}=this;if(j)if(this._parentage=null,Array.isArray(j))for(const Se of j)Se.remove(this);else j.remove(this);const{initialTeardown:Q}=this;if((0,g.m)(Q))try{Q()}catch(Se){L=Se instanceof P?Se.errors:[Se]}const{_finalizers:Ve}=this;if(Ve){this._finalizers=null;for(const Se of Ve)try{Ne(Se)}catch(qe){L=L??[],qe instanceof P?L=[...L,...qe.errors]:L.push(qe)}}if(L)throw new P(L)}}add(L){var j;if(L&&L!==this)if(this.closed)Ne(L);else{if(L instanceof ne){if(L.closed||L._hasParent(this))return;L._addParent(this)}(this._finalizers=null!==(j=this._finalizers)&&void 0!==j?j:[]).push(L)}}_hasParent(L){const{_parentage:j}=this;return j===L||Array.isArray(j)&&j.includes(L)}_addParent(L){const{_parentage:j}=this;this._parentage=Array.isArray(j)?(j.push(L),j):j?[j,L]:L}_removeParent(L){const{_parentage:j}=this;j===L?this._parentage=null:Array.isArray(j)&&(0,Y.P)(j,L)}remove(L){const{_finalizers:j}=this;j&&(0,Y.P)(j,L),L instanceof ne&&L._removeParent(this)}}ne.EMPTY=(()=>{const ue=new ne;return ue.closed=!0,ue})();const he=ne.EMPTY;function pe(ue){return ue instanceof ne||ue&&"closed"in ue&&(0,g.m)(ue.remove)&&(0,g.m)(ue.add)&&(0,g.m)(ue.unsubscribe)}function Ne(ue){(0,g.m)(ue)?ue():ue.unsubscribe()}},2653:(at,Ce,O)=>{O.d(Ce,{config:()=>g});const g={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},6232:(at,Ce,O)=>{O.d(Ce,{E:()=>K});const K=new(O(5592).y)(ne=>ne.complete())},2459:(at,Ce,O)=>{O.d(Ce,{D:()=>ve});var g=O(4829),K=O(3093),P=O(5137),he=O(5592),Ne=O(4971),ue=O(4674),L=O(7103);function Q(ee,Ee){if(!ee)throw new Error("Iterable cannot be null");return new he.y(ke=>{(0,L.f)(ke,Ee,()=>{const oe=ee[Symbol.asyncIterator]();(0,L.f)(ke,Ee,()=>{oe.next().then(q=>{q.done?ke.complete():ke.next(q.value)})},0,!0)})})}var Ve=O(8382),Se=O(4026),qe=O(4266),Oe=O(3664),We=O(5726),Pe=O(9853),ct=O(541);function ve(ee,Ee){return Ee?function re(ee,Ee){if(null!=ee){if((0,Ve.c)(ee))return function Y(ee,Ee){return(0,g.Xf)(ee).pipe((0,P.R)(Ee),(0,K.Q)(Ee))}(ee,Ee);if((0,qe.z)(ee))return function pe(ee,Ee){return new he.y(ke=>{let oe=0;return Ee.schedule(function(){oe===ee.length?ke.complete():(ke.next(ee[oe++]),ke.closed||this.schedule())})})}(ee,Ee);if((0,Se.t)(ee))return function ne(ee,Ee){return(0,g.Xf)(ee).pipe((0,P.R)(Ee),(0,K.Q)(Ee))}(ee,Ee);if((0,We.D)(ee))return Q(ee,Ee);if((0,Oe.T)(ee))return function j(ee,Ee){return new he.y(ke=>{let oe;return(0,L.f)(ke,Ee,()=>{oe=ee[Ne.h](),(0,L.f)(ke,Ee,()=>{let q,Be;try{({value:q,done:Be}=oe.next())}catch(ht){return void ke.error(ht)}Be?ke.complete():ke.next(q)},0,!0)}),()=>(0,ue.m)(oe?.return)&&oe.return()})}(ee,Ee);if((0,ct.L)(ee))return function lt(ee,Ee){return Q((0,ct.Q)(ee),Ee)}(ee,Ee)}throw(0,Pe.z)(ee)}(ee,Ee):(0,g.Xf)(ee)}},4829:(at,Ce,O)=>{O.d(Ce,{Xf:()=>Ve});var g=O(7582),K=O(4266),P=O(4026),Y=O(5592),ne=O(8382),he=O(5726),pe=O(9853),Ne=O(3664),ue=O(541),L=O(4674),j=O(3894),Q=O(4850);function Ve(re){if(re instanceof Y.y)return re;if(null!=re){if((0,ne.c)(re))return function Se(re){return new Y.y(ve=>{const ee=re[Q.L]();if((0,L.m)(ee.subscribe))return ee.subscribe(ve);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(re);if((0,K.z)(re))return function qe(re){return new Y.y(ve=>{for(let ee=0;ee<re.length&&!ve.closed;ee++)ve.next(re[ee]);ve.complete()})}(re);if((0,P.t)(re))return function Oe(re){return new Y.y(ve=>{re.then(ee=>{ve.closed||(ve.next(ee),ve.complete())},ee=>ve.error(ee)).then(null,j.h)})}(re);if((0,he.D)(re))return Pe(re);if((0,Ne.T)(re))return function We(re){return new Y.y(ve=>{for(const ee of re)if(ve.next(ee),ve.closed)return;ve.complete()})}(re);if((0,ue.L)(re))return function ct(re){return Pe((0,ue.Q)(re))}(re)}throw(0,pe.z)(re)}function Pe(re){return new Y.y(ve=>{(function lt(re,ve){var ee,Ee,ke,oe;return(0,g.mG)(this,void 0,void 0,function*(){try{for(ee=(0,g.KL)(re);!(Ee=yield ee.next()).done;)if(ve.next(Ee.value),ve.closed)return}catch(q){ke={error:q}}finally{try{Ee&&!Ee.done&&(oe=ee.return)&&(yield oe.call(ee))}finally{if(ke)throw ke.error}}ve.complete()})})(re,ve).catch(ee=>ve.error(ee))})}},3019:(at,Ce,O)=>{O.d(Ce,{T:()=>he});var g=O(7537),K=O(4829),P=O(6232),Y=O(4564),ne=O(2459);function he(...pe){const Ne=(0,Y.yG)(pe),ue=(0,Y._6)(pe,1/0),L=pe;return L.length?1===L.length?(0,K.Xf)(L[0]):(0,g.J)(ue)((0,ne.D)(L,Ne)):P.E}},2096:(at,Ce,O)=>{O.d(Ce,{of:()=>P});var g=O(4564),K=O(2459);function P(...Y){const ne=(0,g.yG)(Y);return(0,K.D)(Y,ne)}},8251:(at,Ce,O)=>{O.d(Ce,{x:()=>K});var g=O(305);function K(Y,ne,he,pe,Ne){return new P(Y,ne,he,pe,Ne)}class P extends g.Lv{constructor(ne,he,pe,Ne,ue,L){super(ne),this.onFinalize=ue,this.shouldUnsubscribe=L,this._next=he?function(j){try{he(j)}catch(Q){ne.error(Q)}}:super._next,this._error=Ne?function(j){try{Ne(j)}catch(Q){ne.error(Q)}finally{this.unsubscribe()}}:super._error,this._complete=pe?function(){try{pe()}catch(j){ne.error(j)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ne;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:he}=this;super.unsubscribe(),!he&&(null===(ne=this.onFinalize)||void 0===ne||ne.call(this))}}}},3997:(at,Ce,O)=>{O.d(Ce,{x:()=>Y});var g=O(2737),K=O(9360),P=O(8251);function Y(he,pe=g.y){return he=he??ne,(0,K.e)((Ne,ue)=>{let L,j=!0;Ne.subscribe((0,P.x)(ue,Q=>{const Ve=pe(Q);(j||!he(L,Ve))&&(j=!1,L=Ve,ue.next(Q))}))})}function ne(he,pe){return he===pe}},7398:(at,Ce,O)=>{O.d(Ce,{U:()=>P});var g=O(9360),K=O(8251);function P(Y,ne){return(0,g.e)((he,pe)=>{let Ne=0;he.subscribe((0,K.x)(pe,ue=>{pe.next(Y.call(ne,ue,Ne++))}))})}},7537:(at,Ce,O)=>{O.d(Ce,{J:()=>P});var g=O(1631),K=O(2737);function P(Y=1/0){return(0,g.z)(K.y,Y)}},1631:(at,Ce,O)=>{O.d(Ce,{z:()=>Ne});var g=O(7398),K=O(4829),P=O(9360),Y=O(7103),ne=O(8251),pe=O(4674);function Ne(ue,L,j=1/0){return(0,pe.m)(L)?Ne((Q,Ve)=>(0,g.U)((Se,qe)=>L(Q,Se,Ve,qe))((0,K.Xf)(ue(Q,Ve))),j):("number"==typeof L&&(j=L),(0,P.e)((Q,Ve)=>function he(ue,L,j,Q,Ve,Se,qe,Oe){const We=[];let Pe=0,ct=0,lt=!1;const re=()=>{lt&&!We.length&&!Pe&&L.complete()},ve=Ee=>Pe<Q?ee(Ee):We.push(Ee),ee=Ee=>{Se&&L.next(Ee),Pe++;let ke=!1;(0,K.Xf)(j(Ee,ct++)).subscribe((0,ne.x)(L,oe=>{Ve?.(oe),Se?ve(oe):L.next(oe)},()=>{ke=!0},void 0,()=>{if(ke)try{for(Pe--;We.length&&Pe<Q;){const oe=We.shift();qe?(0,Y.f)(L,qe,()=>ee(oe)):ee(oe)}re()}catch(oe){L.error(oe)}}))};return ue.subscribe((0,ne.x)(L,ve,()=>{lt=!0,re()})),()=>{Oe?.()}}(Q,Ve,ue,j)))}},3093:(at,Ce,O)=>{O.d(Ce,{Q:()=>Y});var g=O(7103),K=O(9360),P=O(8251);function Y(ne,he=0){return(0,K.e)((pe,Ne)=>{pe.subscribe((0,P.x)(Ne,ue=>(0,g.f)(Ne,ne,()=>Ne.next(ue),he),()=>(0,g.f)(Ne,ne,()=>Ne.complete(),he),ue=>(0,g.f)(Ne,ne,()=>Ne.error(ue),he)))})}},3020:(at,Ce,O)=>{O.d(Ce,{B:()=>ne});var g=O(4829),K=O(8645),P=O(305),Y=O(9360);function ne(pe={}){const{connector:Ne=(()=>new K.x),resetOnError:ue=!0,resetOnComplete:L=!0,resetOnRefCountZero:j=!0}=pe;return Q=>{let Ve,Se,qe,Oe=0,We=!1,Pe=!1;const ct=()=>{Se?.unsubscribe(),Se=void 0},lt=()=>{ct(),Ve=qe=void 0,We=Pe=!1},re=()=>{const ve=Ve;lt(),ve?.unsubscribe()};return(0,Y.e)((ve,ee)=>{Oe++,!Pe&&!We&&ct();const Ee=qe=qe??Ne();ee.add(()=>{Oe--,0===Oe&&!Pe&&!We&&(Se=he(re,j))}),Ee.subscribe(ee),!Ve&&Oe>0&&(Ve=new P.Hp({next:ke=>Ee.next(ke),error:ke=>{Pe=!0,ct(),Se=he(lt,ue,ke),Ee.error(ke)},complete:()=>{We=!0,ct(),Se=he(lt,L),Ee.complete()}}),(0,g.Xf)(ve).subscribe(Ve))})(Q)}}function he(pe,Ne,...ue){if(!0===Ne)return void pe();if(!1===Ne)return;const L=new P.Hp({next:()=>{L.unsubscribe(),pe()}});return(0,g.Xf)(Ne(...ue)).subscribe(L)}},5137:(at,Ce,O)=>{O.d(Ce,{R:()=>K});var g=O(9360);function K(P,Y=0){return(0,g.e)((ne,he)=>{he.add(P.schedule(()=>ne.subscribe(he),Y))})}},4664:(at,Ce,O)=>{O.d(Ce,{w:()=>Y});var g=O(4829),K=O(9360),P=O(8251);function Y(ne,he){return(0,K.e)((pe,Ne)=>{let ue=null,L=0,j=!1;const Q=()=>j&&!ue&&Ne.complete();pe.subscribe((0,P.x)(Ne,Ve=>{ue?.unsubscribe();let Se=0;const qe=L++;(0,g.Xf)(ne(Ve,qe)).subscribe(ue=(0,P.x)(Ne,Oe=>Ne.next(he?he(Ve,Oe,qe,Se++):Oe),()=>{ue=null,Q()}))},()=>{j=!0,Q()}))})}},9397:(at,Ce,O)=>{O.d(Ce,{b:()=>ne});var g=O(4674),K=O(9360),P=O(8251),Y=O(2737);function ne(he,pe,Ne){const ue=(0,g.m)(he)||pe||Ne?{next:he,error:pe,complete:Ne}:he;return ue?(0,K.e)((L,j)=>{var Q;null===(Q=ue.subscribe)||void 0===Q||Q.call(ue);let Ve=!0;L.subscribe((0,P.x)(j,Se=>{var qe;null===(qe=ue.next)||void 0===qe||qe.call(ue,Se),j.next(Se)},()=>{var Se;Ve=!1,null===(Se=ue.complete)||void 0===Se||Se.call(ue),j.complete()},Se=>{var qe;Ve=!1,null===(qe=ue.error)||void 0===qe||qe.call(ue,Se),j.error(Se)},()=>{var Se,qe;Ve&&(null===(Se=ue.unsubscribe)||void 0===Se||Se.call(ue)),null===(qe=ue.finalize)||void 0===qe||qe.call(ue)}))}):Y.y}},1954:(at,Ce,O)=>{O.d(Ce,{o:()=>ne});var g=O(7394);class K extends g.w0{constructor(pe,Ne){super()}schedule(pe,Ne=0){return this}}const P={setInterval(he,pe,...Ne){const{delegate:ue}=P;return ue?.setInterval?ue.setInterval(he,pe,...Ne):setInterval(he,pe,...Ne)},clearInterval(he){const{delegate:pe}=P;return(pe?.clearInterval||clearInterval)(he)},delegate:void 0};var Y=O(9039);class ne extends K{constructor(pe,Ne){super(pe,Ne),this.scheduler=pe,this.work=Ne,this.pending=!1}schedule(pe,Ne=0){var ue;if(this.closed)return this;this.state=pe;const L=this.id,j=this.scheduler;return null!=L&&(this.id=this.recycleAsyncId(j,L,Ne)),this.pending=!0,this.delay=Ne,this.id=null!==(ue=this.id)&&void 0!==ue?ue:this.requestAsyncId(j,this.id,Ne),this}requestAsyncId(pe,Ne,ue=0){return P.setInterval(pe.flush.bind(pe,this),ue)}recycleAsyncId(pe,Ne,ue=0){if(null!=ue&&this.delay===ue&&!1===this.pending)return Ne;null!=Ne&&P.clearInterval(Ne)}execute(pe,Ne){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ue=this._execute(pe,Ne);if(ue)return ue;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(pe,Ne){let L,ue=!1;try{this.work(pe)}catch(j){ue=!0,L=j||new Error("Scheduled action threw falsy error")}if(ue)return this.unsubscribe(),L}unsubscribe(){if(!this.closed){const{id:pe,scheduler:Ne}=this,{actions:ue}=Ne;this.work=this.state=this.scheduler=null,this.pending=!1,(0,Y.P)(ue,this),null!=pe&&(this.id=this.recycleAsyncId(Ne,pe,null)),this.delay=null,super.unsubscribe()}}}},2631:(at,Ce,O)=>{O.d(Ce,{v:()=>P});var g=O(4552);class K{constructor(ne,he=K.now){this.schedulerActionCtor=ne,this.now=he}schedule(ne,he=0,pe){return new this.schedulerActionCtor(this,ne).schedule(pe,he)}}K.now=g.l.now;class P extends K{constructor(ne,he=K.now){super(ne,he),this.actions=[],this._active=!1}flush(ne){const{actions:he}=this;if(this._active)return void he.push(ne);let pe;this._active=!0;do{if(pe=ne.execute(ne.state,ne.delay))break}while(ne=he.shift());if(this._active=!1,pe){for(;ne=he.shift();)ne.unsubscribe();throw pe}}}},6321:(at,Ce,O)=>{O.d(Ce,{z:()=>P});var g=O(1954);const P=new(O(2631).v)(g.o)},4552:(at,Ce,O)=>{O.d(Ce,{l:()=>g});const g={now:()=>(g.delegate||Date).now(),delegate:void 0}},7599:(at,Ce,O)=>{O.d(Ce,{z:()=>g});const g={setTimeout(K,P,...Y){const{delegate:ne}=g;return ne?.setTimeout?ne.setTimeout(K,P,...Y):setTimeout(K,P,...Y)},clearTimeout(K){const{delegate:P}=g;return(P?.clearTimeout||clearTimeout)(K)},delegate:void 0}},4971:(at,Ce,O)=>{O.d(Ce,{h:()=>K});const K=function g(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},4850:(at,Ce,O)=>{O.d(Ce,{L:()=>g});const g="function"==typeof Symbol&&Symbol.observable||"@@observable"},4564:(at,Ce,O)=>{O.d(Ce,{_6:()=>he,jO:()=>Y,yG:()=>ne});var g=O(4674);function P(pe){return pe[pe.length-1]}function Y(pe){return(0,g.m)(P(pe))?pe.pop():void 0}function ne(pe){return function K(pe){return pe&&(0,g.m)(pe.schedule)}(P(pe))?pe.pop():void 0}function he(pe,Ne){return"number"==typeof P(pe)?pe.pop():Ne}},9039:(at,Ce,O)=>{function g(K,P){if(K){const Y=K.indexOf(P);0<=Y&&K.splice(Y,1)}}O.d(Ce,{P:()=>g})},2306:(at,Ce,O)=>{function g(K){const Y=K(ne=>{Error.call(ne),ne.stack=(new Error).stack});return Y.prototype=Object.create(Error.prototype),Y.prototype.constructor=Y,Y}O.d(Ce,{d:()=>g})},1441:(at,Ce,O)=>{O.d(Ce,{O:()=>Y,x:()=>P});var g=O(2653);let K=null;function P(ne){if(g.config.useDeprecatedSynchronousErrorHandling){const he=!K;if(he&&(K={errorThrown:!1,error:null}),ne(),he){const{errorThrown:pe,error:Ne}=K;if(K=null,pe)throw Ne}}else ne()}function Y(ne){g.config.useDeprecatedSynchronousErrorHandling&&K&&(K.errorThrown=!0,K.error=ne)}},7103:(at,Ce,O)=>{function g(K,P,Y,ne=0,he=!1){const pe=P.schedule(function(){Y(),he?K.add(this.schedule(null,ne)):this.unsubscribe()},ne);if(K.add(pe),!he)return pe}O.d(Ce,{f:()=>g})},2737:(at,Ce,O)=>{function g(K){return K}O.d(Ce,{y:()=>g})},4266:(at,Ce,O)=>{O.d(Ce,{z:()=>g});const g=K=>K&&"number"==typeof K.length&&"function"!=typeof K},5726:(at,Ce,O)=>{O.d(Ce,{D:()=>K});var g=O(4674);function K(P){return Symbol.asyncIterator&&(0,g.m)(P?.[Symbol.asyncIterator])}},4674:(at,Ce,O)=>{function g(K){return"function"==typeof K}O.d(Ce,{m:()=>g})},8382:(at,Ce,O)=>{O.d(Ce,{c:()=>P});var g=O(4850),K=O(4674);function P(Y){return(0,K.m)(Y[g.L])}},3664:(at,Ce,O)=>{O.d(Ce,{T:()=>P});var g=O(4971),K=O(4674);function P(Y){return(0,K.m)(Y?.[g.h])}},4026:(at,Ce,O)=>{O.d(Ce,{t:()=>K});var g=O(4674);function K(P){return(0,g.m)(P?.then)}},541:(at,Ce,O)=>{O.d(Ce,{L:()=>Y,Q:()=>P});var g=O(7582),K=O(4674);function P(ne){return(0,g.FC)(this,arguments,function*(){const pe=ne.getReader();try{for(;;){const{value:Ne,done:ue}=yield(0,g.qq)(pe.read());if(ue)return yield(0,g.qq)(void 0);yield yield(0,g.qq)(Ne)}}finally{pe.releaseLock()}})}function Y(ne){return(0,K.m)(ne?.getReader)}},9360:(at,Ce,O)=>{O.d(Ce,{A:()=>K,e:()=>P});var g=O(4674);function K(Y){return(0,g.m)(Y?.lift)}function P(Y){return ne=>{if(K(ne))return ne.lift(function(he){try{return Y(he,this)}catch(pe){this.error(pe)}});throw new TypeError("Unable to lift unknown Observable type")}}},2420:(at,Ce,O)=>{function g(){}O.d(Ce,{Z:()=>g})},8407:(at,Ce,O)=>{O.d(Ce,{U:()=>P,z:()=>K});var g=O(2737);function K(...Y){return P(Y)}function P(Y){return 0===Y.length?g.y:1===Y.length?Y[0]:function(he){return Y.reduce((pe,Ne)=>Ne(pe),he)}}},3894:(at,Ce,O)=>{O.d(Ce,{h:()=>P});var g=O(2653),K=O(7599);function P(Y){K.z.setTimeout(()=>{const{onUnhandledError:ne}=g.config;if(!ne)throw Y;ne(Y)})}},9853:(at,Ce,O)=>{function g(K){return new TypeError(`You provided ${null!==K&&"object"==typeof K?"an invalid object":`'${K}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}O.d(Ce,{z:()=>g})},5879:(at,Ce,O)=>{O.d(Ce,{$8M:()=>Al,$WT:()=>Bs,$Z:()=>$I,AFp:()=>io,ALo:()=>Vu,AaK:()=>Q,CHM:()=>zi,CRH:()=>Ad,EJc:()=>Zw,EpF:()=>bD,F4k:()=>TD,FYo:()=>cy,FiY:()=>xl,GfV:()=>G_,Gpc:()=>qe,HDt:()=>Uu,JOm:()=>Da,KtG:()=>ac,LFG:()=>bt,Lbi:()=>kt,Lck:()=>bC,MAs:()=>_D,MMx:()=>sf,NdJ:()=>R0,Ojb:()=>sS,OlP:()=>dn,Oqu:()=>G0,P3R:()=>lI,PXZ:()=>aE,Q6J:()=>x0,QGY:()=>N0,Qsj:()=>$_,R0b:()=>li,RDi:()=>sx,Rgc:()=>kg,SBq:()=>Mc,Sil:()=>wf,Suo:()=>Sd,TTD:()=>nc,TgZ:()=>Uc,VuI:()=>JA,W1O:()=>JC,X6Q:()=>lE,XFs:()=>_t,Xpm:()=>qu,Xq5:()=>cD,Xts:()=>Qm,Y36:()=>td,YKP:()=>cv,YNc:()=>Hh,Yjl:()=>rl,Yz7:()=>ut,Z0I:()=>rn,ZZ4:()=>mE,_Bn:()=>yw,_UZ:()=>di,_c5:()=>Kb,_uU:()=>$0,aQg:()=>Wv,c2e:()=>_b,cJS:()=>mn,cg1:()=>Bt,dDg:()=>Mb,dqk:()=>tn,eFA:()=>Vv,eJc:()=>Md,ekj:()=>Gy,eoX:()=>kv,f3M:()=>Pt,g9A:()=>ry,h0i:()=>Lu,hGG:()=>Zv,hij:()=>Zy,iGM:()=>Pw,ifc:()=>$i,ip1:()=>vb,jDz:()=>SC,kL8:()=>tv,lG2:()=>ea,lcZ:()=>LC,lqb:()=>Vn,lri:()=>Ab,n5z:()=>qr,oAB:()=>Ga,oxw:()=>ND,q4F:()=>TI,qFp:()=>Zx,qLn:()=>xc,qOj:()=>oo,qZA:()=>dg,rWj:()=>Pv,rg0:()=>yl,sBO:()=>VA,s_b:()=>vv,soG:()=>Gg,tb:()=>iE,tp0:()=>_c,uIk:()=>Pc,vHH:()=>re,vpe:()=>Ms,wAp:()=>md,xp6:()=>jI,z2F:()=>Cf,zSh:()=>gI,zs3:()=>Ho});var g=O(8645),K=O(7394),P=O(5592),Y=O(3019),ne=O(5619),he=O(2096),pe=O(3020),Ne=O(4664),ue=O(3997);function L(i){for(let s in i)if(i[s]===L)return s;throw Error("Could not find renamed property on target object.")}function j(i,s){for(const a in s)s.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=s[a])}function Q(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(Q).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const s=i.toString();if(null==s)return""+s;const a=s.indexOf("\n");return-1===a?s:s.substring(0,a)}function Ve(i,s){return null==i||""===i?null===s?"":s:null==s||""===s?i:i+" "+s}const Se=L({__forward_ref__:L});function qe(i){return i.__forward_ref__=qe,i.toString=function(){return Q(this())},i}function Oe(i){return We(i)?i():i}function We(i){return"function"==typeof i&&i.hasOwnProperty(Se)&&i.__forward_ref__===qe}function Pe(i){return i&&!!i.\u0275providers}const lt="https://g.co/ng/security#xss";class re extends Error{constructor(s,a){super(function ve(i,s){return`NG0${Math.abs(i)}${s?": "+s:""}`}(s,a)),this.code=s}}function ee(i){return"string"==typeof i?i:null==i?"":String(i)}function Be(i,s){throw new re(-201,!1)}function Ke(i,s){null==i&&function Ge(i,s,a,c){throw new Error(`ASSERTION ERROR: ${i}`+(null==c?"":` [Expected=> ${a} ${c} ${s} <=Actual]`))}(s,i,null,"!=")}function ut(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function mn(i){return{providers:i.providers||[],imports:i.imports||[]}}function Zn(i){return Ar(i,Hn)||Ar(i,vs)}function rn(i){return null!==Zn(i)}function Ar(i,s){return i.hasOwnProperty(s)?i[s]:null}function yi(i){return i&&(i.hasOwnProperty(ei)||i.hasOwnProperty(lo))?i[ei]:null}const Hn=L({\u0275prov:L}),ei=L({\u0275inj:L}),vs=L({ngInjectableDef:L}),lo=L({ngInjectorDef:L});var _t=function(i){return i[i.Default=0]="Default",i[i.Host=1]="Host",i[i.Self=2]="Self",i[i.SkipSelf=4]="SkipSelf",i[i.Optional=8]="Optional",i}(_t||{});let Ct;function cn(i){const s=Ct;return Ct=i,s}function In(i,s,a){const c=Zn(i);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:a&_t.Optional?null:void 0!==s?s:void Be(Q(i))}const tn=globalThis,$e={},Ye="__NG_DI_FLAG__",ft="ngTempTokenPath",B=/\n/gm,W="__source";let De;function nt(i){const s=De;return De=i,s}function Mt(i,s=_t.Default){if(void 0===De)throw new re(-203,!1);return null===De?In(i,void 0,s):De.get(i,s&_t.Optional?null:void 0,s)}function bt(i,s=_t.Default){return(function At(){return Ct}()||Mt)(Oe(i),s)}function Pt(i,s=_t.Default){return bt(i,Yn(s))}function Yn(i){return typeof i>"u"||"number"==typeof i?i:0|(i.optional&&8)|(i.host&&1)|(i.self&&2)|(i.skipSelf&&4)}function Yt(i){const s=[];for(let a=0;a<i.length;a++){const c=Oe(i[a]);if(Array.isArray(c)){if(0===c.length)throw new re(900,!1);let d,f=_t.Default;for(let y=0;y<c.length;y++){const w=c[y],D=Ls(w);"number"==typeof D?-1===D?d=w.token:f|=D:d=w}s.push(bt(d,f))}else s.push(bt(c))}return s}function fr(i,s){return i[Ye]=s,i.prototype[Ye]=s,i}function Ls(i){return i[Ye]}function rs(i){return{toString:i}.toString()}var Vs=function(i){return i[i.OnPush=0]="OnPush",i[i.Default=1]="Default",i}(Vs||{}),$i=function(i){return i[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",i}($i||{});const Hi={},Gt=[],Us=L({\u0275cmp:L}),Yo=L({\u0275dir:L}),Ba=L({\u0275pipe:L}),kd=L({\u0275mod:L}),is=L({\u0275fac:L}),Qo=L({__NG_ELEMENT_ID__:L}),Jo=L({__NG_ENV_ID__:L});function Jc(i,s,a){let c=i.length;for(;;){const d=i.indexOf(s,a);if(-1===d)return d;if(0===d||i.charCodeAt(d-1)<=32){const f=s.length;if(d+f===c||i.charCodeAt(d+f)<=32)return d}a=d+1}}function ja(i,s,a){let c=0;for(;c<a.length;){const d=a[c];if("number"==typeof d){if(0!==d)break;c++;const f=a[c++],y=a[c++],w=a[c++];i.setAttribute(s,y,w,f)}else{const f=d,y=a[++c];Si(f)?i.setProperty(s,f,y):i.setAttribute(s,f,y),c++}}return c}function Xc(i){return 3===i||4===i||6===i}function Si(i){return 64===i.charCodeAt(0)}function ho(i,s){if(null!==s&&0!==s.length)if(null===i||0===i.length)i=s.slice();else{let a=-1;for(let c=0;c<s.length;c++){const d=s[c];"number"==typeof d?a=d:0===a||$a(i,a,d,null,-1===a||2===a?s[++c]:null)}}return i}function $a(i,s,a,c,d){let f=0,y=i.length;if(-1===s)y=-1;else for(;f<i.length;){const w=i[f++];if("number"==typeof w){if(w===s){y=-1;break}if(w>s){y=f-1;break}}}for(;f<i.length;){const w=i[f];if("number"==typeof w)break;if(w===a){if(null===c)return void(null!==d&&(i[f+1]=d));if(c===i[f+1])return void(i[f+2]=d)}f++,null!==c&&f++,null!==d&&f++}-1!==y&&(i.splice(y,0,s),f=y+1),i.splice(f++,0,a),null!==c&&i.splice(f++,0,c),null!==d&&i.splice(f++,0,d)}const el="ng-template";function Qn(i,s,a){let c=0,d=!0;for(;c<i.length;){let f=i[c++];if("string"==typeof f&&d){const y=i[c++];if(a&&"class"===f&&-1!==Jc(y.toLowerCase(),s,0))return!0}else{if(1===f){for(;c<i.length&&"string"==typeof(f=i[c++]);)if(f.toLowerCase()===s)return!0;return!1}"number"==typeof f&&(d=!1)}}return!1}function fo(i){return 4===i.type&&i.value!==el}function cm(i,s,a){return s===(4!==i.type||a?i.value:el)}function Uf(i,s,a){let c=4;const d=i.attrs||[],f=function lm(i){for(let s=0;s<i.length;s++)if(Xc(i[s]))return s;return i.length}(d);let y=!1;for(let w=0;w<s.length;w++){const D=s[w];if("number"!=typeof D){if(!y)if(4&c){if(c=2|1&c,""!==D&&!cm(i,D,a)||""===D&&1===s.length){if(ti(c))return!1;y=!0}}else{const T=8&c?D:s[++w];if(8&c&&null!==i.attrs){if(!Qn(i.attrs,T,a)){if(ti(c))return!1;y=!0}continue}const F=Xo(8&c?"class":D,d,fo(i),a);if(-1===F){if(ti(c))return!1;y=!0;continue}if(""!==T){let z;z=F>f?"":d[F+1].toLowerCase();const J=8&c?z:null;if(J&&-1!==Jc(J,T,0)||2&c&&T!==z){if(ti(c))return!1;y=!0}}}}else{if(!y&&!ti(c)&&!ti(D))return!1;if(y&&ti(D))continue;y=!1,c=D|1&c}}return ti(c)||y}function ti(i){return 0==(1&i)}function Xo(i,s,a,c){if(null===s)return-1;let d=0;if(c||!a){let f=!1;for(;d<s.length;){const y=s[d];if(y===i)return d;if(3===y||6===y)f=!0;else{if(1===y||2===y){let w=s[++d];for(;"string"==typeof w;)w=s[++d];continue}if(4===y)break;if(0===y){d+=4;continue}}d+=f?1:2}return-1}return function po(i,s){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const c=i[a];if("number"==typeof c)return-1;if(c===s)return a;a++}return-1}(s,i)}function tl(i,s,a=!1){for(let c=0;c<s.length;c++)if(Uf(i,s[c],a))return!0;return!1}function Ha(i,s){return i?":not("+s.trim()+")":s}function Ld(i){let s=i[0],a=1,c=2,d="",f=!1;for(;a<i.length;){let y=i[a];if("string"==typeof y)if(2&c){const w=i[++a];d+="["+y+(w.length>0?'="'+w+'"':"")+"]"}else 8&c?d+="."+y:4&c&&(d+=" "+y);else""!==d&&!ti(y)&&(s+=Ha(f,d),d=""),c=y,f=f||!ti(c);a++}return""!==d&&(s+=Ha(f,d)),s}function qu(i){return rs(()=>{const s=il(i),a={...s,decls:i.decls,vars:i.vars,template:i.template,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,onPush:i.changeDetection===Vs.OnPush,directiveDefs:null,pipeDefs:null,dependencies:s.standalone&&i.dependencies||null,getStandaloneInjector:null,signals:i.signals??!1,data:i.data||{},encapsulation:i.encapsulation||$i.Emulated,styles:i.styles||Gt,_:null,schemas:i.schemas||null,tView:null,id:""};jf(a);const c=i.dependencies;return a.directiveDefs=ta(c,!1),a.pipeDefs=ta(c,!0),a.id=function Mi(i){let s=0;const a=[i.selectors,i.ngContentSelectors,i.hostVars,i.hostAttrs,i.consts,i.vars,i.decls,i.encapsulation,i.standalone,i.signals,i.exportAs,JSON.stringify(i.inputs),JSON.stringify(i.outputs),Object.getOwnPropertyNames(i.type.prototype),!!i.contentQueries,!!i.viewQuery].join("|");for(const d of a)s=Math.imul(31,s)+d.charCodeAt(0)<<0;return s+=2147483648,"c"+s}(a),a})}function nl(i){return zt(i)||Gn(i)}function Wu(i){return null!==i}function Ga(i){return rs(()=>({type:i.type,bootstrap:i.bootstrap||Gt,declarations:i.declarations||Gt,imports:i.imports||Gt,exports:i.exports||Gt,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null}))}function Zu(i,s){if(null==i)return Hi;const a={};for(const c in i)if(i.hasOwnProperty(c)){let d=i[c],f=d;Array.isArray(d)&&(f=d[1],d=d[0]),a[d]=c,s&&(s[d]=f)}return a}function ea(i){return rs(()=>{const s=il(i);return jf(s),s})}function rl(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,standalone:!0===i.standalone,onDestroy:i.type.prototype.ngOnDestroy||null}}function zt(i){return i[Us]||null}function Gn(i){return i[Yo]||null}function $r(i){return i[Ba]||null}function Bs(i){const s=zt(i)||Gn(i)||$r(i);return null!==s&&s.standalone}function Hr(i,s){const a=i[kd]||null;if(!a&&!0===s)throw new Error(`Type ${Q(i)} does not have '\u0275mod' property.`);return a}function il(i){const s={};return{type:i.type,providersResolver:null,factory:null,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:s,inputTransforms:null,inputConfig:i.inputs||Hi,exportAs:i.exportAs||null,standalone:!0===i.standalone,signals:!0===i.signals,selectors:i.selectors||Gt,viewQuery:i.viewQuery||null,features:i.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Zu(i.inputs,s),outputs:Zu(i.outputs)}}function jf(i){i.features?.forEach(s=>s(i))}function ta(i,s){if(!i)return null;const a=s?$r:nl;return()=>("function"==typeof i?i():i).map(c=>a(c)).filter(Wu)}const Dn=0,et=1,wt=2,Cn=3,Gr=4,go=5,pr=6,za=7,Mn=8,Es=9,na=10,Et=11,gr=12,$f=13,Is=14,bn=15,sl=16,mo=17,ir=18,Ds=19,Cs=20,js=21,xi=22,qa=23,$s=24,Ft=25,ra=1,Yu=2,sr=7,or=9,mr=11;function ar(i){return Array.isArray(i)&&"object"==typeof i[ra]}function Or(i){return Array.isArray(i)&&!0===i[ra]}function Qu(i){return 0!=(4&i.flags)}function vo(i){return i.componentOffset>-1}function _i(i){return 1==(1&i.flags)}function ni(i){return!!i.template}function ia(i){return 0!=(512&i[wt])}function _o(i,s){return i.hasOwnProperty(is)?i[is]:null}let nr=null,wo=!1;function ri(i){const s=nr;return nr=i,s}const Eo={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function Ka(i){if(!Io(i)||i.dirty){if(!i.producerMustRecompute(i)&&!hl(i))return void(i.dirty=!1);i.producerRecomputeValue(i),i.dirty=!1}}function Ya(i){i.dirty=!0,function Gd(i){if(void 0===i.liveConsumerNode)return;const s=wo;wo=!0;try{for(const a of i.liveConsumerNode)a.dirty||Ya(a)}finally{wo=s}}(i),i.consumerMarkedDirty?.(i)}function zd(i){return i&&(i.nextProducerIndex=0),ri(i)}function ur(i,s){if(ri(s),i&&void 0!==i.producerNode&&void 0!==i.producerIndexOfThis&&void 0!==i.producerLastReadVersion){if(Io(i))for(let a=i.nextProducerIndex;a<i.producerNode.length;a++)Qa(i.producerNode[a],i.producerIndexOfThis[a]);for(;i.producerNode.length>i.nextProducerIndex;)i.producerNode.pop(),i.producerLastReadVersion.pop(),i.producerIndexOfThis.pop()}}function hl(i){Gs(i);for(let s=0;s<i.producerNode.length;s++){const a=i.producerNode[s],c=i.producerLastReadVersion[s];if(c!==a.version||(Ka(a),c!==a.version))return!0}return!1}function fl(i){if(Gs(i),Io(i))for(let s=0;s<i.producerNode.length;s++)Qa(i.producerNode[s],i.producerIndexOfThis[s]);i.producerNode.length=i.producerLastReadVersion.length=i.producerIndexOfThis.length=0,i.liveConsumerNode&&(i.liveConsumerNode.length=i.liveConsumerIndexOfThis.length=0)}function Qa(i,s){if(function Ja(i){i.liveConsumerNode??=[],i.liveConsumerIndexOfThis??=[]}(i),Gs(i),1===i.liveConsumerNode.length)for(let c=0;c<i.producerNode.length;c++)Qa(i.producerNode[c],i.producerIndexOfThis[c]);const a=i.liveConsumerNode.length-1;if(i.liveConsumerNode[s]=i.liveConsumerNode[a],i.liveConsumerIndexOfThis[s]=i.liveConsumerIndexOfThis[a],i.liveConsumerNode.length--,i.liveConsumerIndexOfThis.length--,s<i.liveConsumerNode.length){const c=i.liveConsumerIndexOfThis[s],d=i.liveConsumerNode[s];Gs(d),d.producerIndexOfThis[c]=s}}function Io(i){return i.consumerIsAlwaysLive||(i?.liveConsumerNode?.length??0)>0}function Gs(i){i.producerNode??=[],i.producerIndexOfThis??=[],i.producerLastReadVersion??=[]}let Zd=null;function yl(i){const s=ri(null);try{return i()}finally{ri(s)}}const vl=()=>{},Zf=(()=>({...Eo,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:i=>{i.schedule(i.ref)},hasRun:!1,cleanupFn:vl}))();class Kf{constructor(s,a,c){this.previousValue=s,this.currentValue=a,this.firstChange=c}isFirstChange(){return this.firstChange}}function nc(){return tu}function tu(i){return i.type.prototype.ngOnChanges&&(i.setInput=Do),Yf}function Yf(){const i=Co(this),s=i?.current;if(s){const a=i.previous;if(a===Hi)i.previous=s;else for(let c in s)a[c]=s[c];i.current=null,this.ngOnChanges(s)}}function Do(i,s,a,c){const d=this.declaredInputs[a],f=Co(i)||function Yd(i,s){return i[os]=s}(i,{previous:Hi,current:null}),y=f.current||(f.current={}),w=f.previous,D=w[d];y[d]=new Kf(D&&D.currentValue,s,w===Hi),i[c]=s}nc.ngInherit=!0;const os="__ngSimpleChanges__";function Co(i){return i[os]||null}const Gi=function(i,s,a){};function nn(i){for(;Array.isArray(i);)i=i[Dn];return i}function To(i,s){return nn(s[i])}function yr(i,s){return nn(s[i.index])}function wl(i,s){return i.data[s]}function So(i,s){return i[s]}function vr(i,s){const a=s[i];return ar(a)?a:a[Dn]}function ii(i,s){return null==s?null:i[s]}function tp(i){i[mo]=0}function El(i){1024&i[wt]||(i[wt]|=1024,_m(i,1))}function rc(i){1024&i[wt]&&(i[wt]&=-1025,_m(i,-1))}function _m(i,s){let a=i[Cn];if(null===a)return;a[go]+=s;let c=a;for(a=a[Cn];null!==a&&(1===s&&1===c[go]||-1===s&&0===c[go]);)a[go]+=s,c=a,a=a[Cn]}const It={lFrame:cs(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function _r(){return It.bindingsEnabled}function Me(){return It.lFrame.lView}function jt(){return It.lFrame.tView}function zi(i){return It.lFrame.contextLView=i,i[Mn]}function ac(i){return It.lFrame.contextLView=null,i}function lr(){let i=uc();for(;null!==i&&64===i.type;)i=i.parent;return i}function uc(){return It.lFrame.currentTNode}function zs(i,s){const a=It.lFrame;a.currentTNode=i,a.isParent=s}function Ao(){return It.lFrame.isParent}function Mo(){return It.lFrame.bindingIndex++}function cc(i,s){const a=It.lFrame;a.bindingIndex=a.bindingRootIndex=i,lc(s)}function lc(i){It.lFrame.currentDirectiveIndex=i}function dc(){return It.lFrame.currentQueryIndex}function oh(i){It.lFrame.currentQueryIndex=i}function ah(i){const s=i[et];return 2===s.type?s.declTNode:1===s.type?i[pr]:null}function rp(i,s,a){if(a&_t.SkipSelf){let d=s,f=i;for(;!(d=d.parent,null!==d||a&_t.Host||(d=ah(f),null===d||(f=f[Is],10&d.type))););if(null===d)return!1;s=d,i=f}const c=It.lFrame=us();return c.currentTNode=s,c.lView=i,!0}function wr(i){const s=us(),a=i[et];It.lFrame=s,s.currentTNode=a.firstChild,s.lView=i,s.tView=a,s.contextLView=i,s.bindingIndex=a.bindingStartIndex,s.inI18n=!1}function us(){const i=It.lFrame,s=null===i?null:i.child;return null===s?cs(i):s}function cs(i){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=s),s}function uh(){const i=It.lFrame;return It.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const ln=uh;function yt(){const i=uh();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function Er(){return It.lFrame.selectedIndex}function Ts(i){It.lFrame.selectedIndex=i}function vn(){const i=It.lFrame;return wl(i.tView,i.selectedIndex)}let iu=!0;function Zs(){return iu}function ai(i){iu=i}function dr(i,s){for(let a=s.directiveStart,c=s.directiveEnd;a<c;a++){const f=i.data[a].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:w,ngAfterViewInit:D,ngAfterViewChecked:T,ngOnDestroy:x}=f;y&&(i.contentHooks??=[]).push(-a,y),w&&((i.contentHooks??=[]).push(a,w),(i.contentCheckHooks??=[]).push(a,w)),D&&(i.viewHooks??=[]).push(-a,D),T&&((i.viewHooks??=[]).push(a,T),(i.viewCheckHooks??=[]).push(a,T)),null!=x&&(i.destroyHooks??=[]).push(a,x)}}function su(i,s,a){ch(i,s,3,a)}function ha(i,s,a,c){(3&i[wt])===a&&ch(i,s,a,c)}function ou(i,s){let a=i[wt];(3&a)===s&&(a&=8191,a+=1,i[wt]=a)}function ch(i,s,a,c){const f=c??-1,y=s.length-1;let w=0;for(let D=void 0!==c?65535&i[mo]:0;D<y;D++)if("number"==typeof s[D+1]){if(w=s[D],null!=c&&w>=c)break}else s[D]<0&&(i[mo]+=65536),(w<f||-1==f)&&(fa(i,a,s,D),i[mo]=(4294901760&i[mo])+D+2),D++}function hc(i,s){Gi(4,i,s);const a=ri(null);try{s.call(i)}finally{ri(a),Gi(5,i,s)}}function fa(i,s,a,c){const d=a[c]<0,f=a[c+1],w=i[d?-a[c]:a[c]];d?i[wt]>>13<i[mo]>>16&&(3&i[wt])===s&&(i[wt]+=8192,hc(w,f)):hc(w,f)}const Ri=-1;class Ks{constructor(s,a,c){this.factory=s,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=c}}function Ro(i){return i!==Ri}function Oo(i){return 32767&i}function xn(i,s){let a=function Ss(i){return i>>16}(i),c=s;for(;a>0;)c=c[Is],a--;return c}let Ys=!0;function Po(i){const s=Ys;return Ys=i,s}const Pr=255,pc=5;let gc=0;const ls={};function Wi(i,s){const a=Zi(i,s);if(-1!==a)return a;const c=s[et];c.firstCreatePass&&(i.injectorIndex=s.length,Jn(c.data,i),Jn(s,null),Jn(c.blueprint,null));const d=Qs(i,s),f=i.injectorIndex;if(Ro(d)){const y=Oo(d),w=xn(d,s),D=w[et].data;for(let T=0;T<8;T++)s[f+T]=w[y+T]|D[y+T]}return s[f+8]=d,f}function Jn(i,s){i.push(0,0,0,0,0,0,0,0,s)}function Zi(i,s){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===s[i.injectorIndex+8]?-1:i.injectorIndex}function Qs(i,s){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,c=null,d=s;for(;null!==d;){if(c=mc(d),null===c)return Ri;if(a++,d=d[Is],-1!==c.injectorIndex)return c.injectorIndex|a<<16}return Ri}function Js(i,s,a){!function ds(i,s,a){let c;"string"==typeof a?c=a.charCodeAt(0)||0:a.hasOwnProperty(Qo)&&(c=a[Qo]),null==c&&(c=a[Qo]=gc++);const d=c&Pr;s.data[i+(d>>pc)]|=1<<d}(i,s,a)}function cu(i,s,a){if(a&_t.Optional||void 0!==i)return i;Be()}function lu(i,s,a,c){if(a&_t.Optional&&void 0===c&&(c=null),!(a&(_t.Self|_t.Host))){const d=i[Es],f=cn(void 0);try{return d?d.get(s,c,a&_t.Optional):In(s,c,a&_t.Optional)}finally{cn(f)}}return cu(c,0,a)}function ma(i,s,a,c=_t.Default,d){if(null!==i){if(2048&s[wt]&&!(c&_t.Self)){const y=function op(i,s,a,c,d){let f=i,y=s;for(;null!==f&&null!==y&&2048&y[wt]&&!(512&y[wt]);){const w=dh(f,y,a,c|_t.Self,ls);if(w!==ls)return w;let D=f.parent;if(!D){const T=y[Cs];if(T){const x=T.get(a,ls,c);if(x!==ls)return x}D=mc(y),y=y[Is]}f=D}return d}(i,s,a,c,ls);if(y!==ls)return y}const f=dh(i,s,a,c,ls);if(f!==ls)return f}return lu(s,a,c,d)}function dh(i,s,a,c,d){const f=function sp(i){if("string"==typeof i)return i.charCodeAt(0)||0;const s=i.hasOwnProperty(Qo)?i[Qo]:void 0;return"number"==typeof s?s>=0?s&Pr:hu:s}(a);if("function"==typeof f){if(!rp(s,i,c))return c&_t.Host?cu(d,0,c):lu(s,a,c,d);try{let y;if(y=f(c),null!=y||c&_t.Optional)return y;Be()}finally{ln()}}else if("number"==typeof f){let y=null,w=Zi(i,s),D=Ri,T=c&_t.Host?s[bn][pr]:null;for((-1===w||c&_t.SkipSelf)&&(D=-1===w?Qs(i,s):s[w+8],D!==Ri&&Sl(c,!1)?(y=s[et],w=Oo(D),s=xn(D,s)):w=-1);-1!==w;){const x=s[et];if(ui(f,w,x.data)){const F=hh(w,s,a,y,c,T);if(F!==ls)return F}D=s[w+8],D!==Ri&&Sl(c,s[et].data[w+8]===T)&&ui(f,w,s)?(y=x,w=Oo(D),s=xn(D,s)):w=-1}}return d}function hh(i,s,a,c,d,f){const y=s[et],w=y.data[i+8],x=xt(w,y,a,null==c?vo(w)&&Ys:c!=y&&0!=(3&w.type),d&_t.Host&&f===w);return null!==x?Ki(s,y,x,w):ls}function xt(i,s,a,c,d){const f=i.providerIndexes,y=s.data,w=1048575&f,D=i.directiveStart,x=f>>20,z=d?w+x:i.directiveEnd;for(let J=c?w:w+x;J<z;J++){const _e=y[J];if(J<D&&a===_e||J>=D&&_e.type===a)return J}if(d){const J=y[D];if(J&&ni(J)&&J.type===a)return D}return null}function Ki(i,s,a,c){let d=i[a];const f=s.data;if(function lh(i){return i instanceof Ks}(d)){const y=d;y.resolving&&function ke(i,s){const a=s?`. Dependency path: ${s.join(" > ")} > ${i}`:"";throw new re(-200,`Circular dependency in DI detected for ${i}${a}`)}(function Ee(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():ee(i)}(f[a]));const w=Po(y.canSeeViewProviders);y.resolving=!0;const T=y.injectImpl?cn(y.injectImpl):null;rp(i,c,_t.Default);try{d=i[a]=y.factory(void 0,f,i,c),s.firstCreatePass&&a>=c.directiveStart&&function qi(i,s,a){const{ngOnChanges:c,ngOnInit:d,ngDoCheck:f}=s.type.prototype;if(c){const y=tu(s);(a.preOrderHooks??=[]).push(i,y),(a.preOrderCheckHooks??=[]).push(i,y)}d&&(a.preOrderHooks??=[]).push(0-i,d),f&&((a.preOrderHooks??=[]).push(i,f),(a.preOrderCheckHooks??=[]).push(i,f))}(a,f[a],s)}finally{null!==T&&cn(T),Po(w),y.resolving=!1,ln()}}return d}function ui(i,s,a){return!!(a[s+(i>>pc)]&1<<i)}function Sl(i,s){return!(i&_t.Self||i&_t.Host&&s)}class Fn{constructor(s,a){this._tNode=s,this._lView=a}get(s,a,c){return ma(this._tNode,this._lView,s,Yn(c),a)}}function hu(){return new Fn(lr(),Me())}function qr(i){return rs(()=>{const s=i.prototype.constructor,a=s[is]||fh(s),c=Object.prototype;let d=Object.getPrototypeOf(i.prototype).constructor;for(;d&&d!==c;){const f=d[is]||fh(d);if(f&&f!==a)return f;d=Object.getPrototypeOf(d)}return f=>new f})}function fh(i){return We(i)?()=>{const s=fh(Oe(i));return s&&s()}:_o(i)}function mc(i){const s=i[et],a=s.type;return 2===a?s.declTNode:1===a?i[pr]:null}function Al(i){return function ga(i,s){if("class"===s)return i.classes;if("style"===s)return i.styles;const a=i.attrs;if(a){const c=a.length;let d=0;for(;d<c;){const f=a[d];if(Xc(f))break;if(0===f)d+=2;else if("number"==typeof f)for(d++;d<c&&"string"==typeof a[d];)d++;else{if(f===s)return a[d+1];d+=2}}}return null}(lr(),i)}const fu="__parameters__";function k(i,s,a){return rs(()=>{const c=function A(i){return function(...a){if(i){const c=i(...a);for(const d in c)this[d]=c[d]}}}(s);function d(...f){if(this instanceof d)return c.apply(this,f),this;const y=new d(...f);return w.annotation=y,w;function w(D,T,x){const F=D.hasOwnProperty(fu)?D[fu]:Object.defineProperty(D,fu,{value:[]})[fu];for(;F.length<=x;)F.push(null);return(F[x]=F[x]||[]).push(y),D}}return a&&(d.prototype=Object.create(a.prototype)),d.prototype.ngMetadataName=i,d.annotationCls=d,d})}function Vo(i,s){i.forEach(a=>Array.isArray(a)?Vo(a,s):s(a))}function Dm(i,s,a){s>=i.length?i.push(a):i.splice(s,0,a)}function ap(i,s){return s>=i.length-1?i.pop():i.splice(s,1)[0]}function Qi(i,s,a){let c=yc(i,s);return c>=0?i[1|c]=a:(c=~c,function Cm(i,s,a,c){let d=i.length;if(d==s)i.push(a,c);else if(1===d)i.push(c,i[0]),i[0]=a;else{for(d--,i.push(i[d-1],i[d]);d>s;)i[d]=i[d-2],d--;i[s]=a,i[s+1]=c}}(i,c,s,a)),c}function cp(i,s){const a=yc(i,s);if(a>=0)return i[1|a]}function yc(i,s){return function lp(i,s,a){let c=0,d=i.length>>a;for(;d!==c;){const f=c+(d-c>>1),y=i[f<<a];if(s===y)return f<<a;y>s?d=f:c=f+1}return~(d<<a)}(i,s,1)}const xl=fr(k("Optional"),8),_c=fr(k("SkipSelf"),4);function vu(i){return 128==(128&i.flags)}var Da=function(i){return i[i.Important=1]="Important",i[i.DashCase=2]="DashCase",i}(Da||{});const Fl=new Map;let km=0;const Bl="__ngContext__";function Zr(i,s){ar(s)?(i[Bl]=s[Ds],function Wr(i){Fl.set(i[Ds],i)}(s)):i[Bl]=s}let $;function X(i,s){return $(i,s)}function je(i){const s=i[Cn];return Or(s)?s[Cn]:s}function Ln(i){return Cc(i[gr])}function fs(i){return Cc(i[Gr])}function Cc(i){for(;null!==i&&!Or(i);)i=i[Gr];return i}function to(i,s,a,c,d){if(null!=c){let f,y=!1;Or(c)?f=c:ar(c)&&(y=!0,c=c[Dn]);const w=nn(c);0===i&&null!==a?null==d?jE(s,a,w):ro(s,a,w,d||null,!0):1===i&&null!==a?ro(s,a,w,d||null,!0):2===i?function zm(i,s,a){const c=$m(i,s);c&&function RT(i,s,a,c){i.removeChild(s,a,c)}(i,c,s,a)}(s,w,y):3===i&&s.destroyNode(w),null!=f&&function ZE(i,s,a,c,d){const f=a[sr];f!==nn(a)&&to(s,i,c,f,d);for(let w=mr;w<a.length;w++){const D=a[w];Hl(D[et],D,i,s,c,f)}}(s,i,f,a,d)}}function no(i,s,a){return i.createElement(s,a)}function Um(i,s){const a=i[or],c=a.indexOf(s);rc(s),a.splice(c,1)}function Bm(i,s){if(i.length<=mr)return;const a=mr+s,c=i[a];if(c){const d=c[sl];null!==d&&d!==i&&Um(d,c),s>0&&(i[a-1][Gr]=c[Gr]);const f=ap(i,mr+s);!function Lm(i,s){Hl(i,s,s[Et],2,null,null),s[Dn]=null,s[pr]=null}(c[et],c);const y=f[ir];null!==y&&y.detachView(f[et]),c[Cn]=null,c[Gr]=null,c[wt]&=-129}return c}function m_(i,s){if(!(256&s[wt])){const a=s[Et];s[qa]&&fl(s[qa]),s[$s]&&fl(s[$s]),a.destroyNode&&Hl(i,s,a,3,null,null),function Tc(i){let s=i[gr];if(!s)return y_(i[et],i);for(;s;){let a=null;if(ar(s))a=s[gr];else{const c=s[mr];c&&(a=c)}if(!a){for(;s&&!s[Gr]&&s!==i;)ar(s)&&y_(s[et],s),s=s[Cn];null===s&&(s=i),ar(s)&&y_(s[et],s),a=s&&s[Gr]}s=a}}(s)}}function y_(i,s){if(!(256&s[wt])){s[wt]&=-129,s[wt]|=256,function NT(i,s){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let c=0;c<a.length;c+=2){const d=s[a[c]];if(!(d instanceof Ks)){const f=a[c+1];if(Array.isArray(f))for(let y=0;y<f.length;y+=2){const w=d[f[y]],D=f[y+1];Gi(4,w,D);try{D.call(w)}finally{Gi(5,w,D)}}else{Gi(4,d,f);try{f.call(d)}finally{Gi(5,d,f)}}}}}(i,s),function nx(i,s){const a=i.cleanup,c=s[za];if(null!==a)for(let f=0;f<a.length-1;f+=2)if("string"==typeof a[f]){const y=a[f+3];y>=0?c[y]():c[-y].unsubscribe(),f+=2}else a[f].call(c[a[f+1]]);null!==c&&(s[za]=null);const d=s[js];if(null!==d){s[js]=null;for(let f=0;f<d.length;f++)(0,d[f])()}}(i,s),1===s[et].type&&s[Et].destroy();const a=s[sl];if(null!==a&&Or(s[Cn])){a!==s[Cn]&&Um(a,s);const c=s[ir];null!==c&&c.detachView(i)}!function vp(i){Fl.delete(i[Ds])}(s)}}function jm(i,s,a){return function Dp(i,s,a){let c=s;for(;null!==c&&40&c.type;)c=(s=c).parent;if(null===c)return a[Dn];{const{componentOffset:d}=c;if(d>-1){const{encapsulation:f}=i.data[c.directiveStart+d];if(f===$i.None||f===$i.Emulated)return null}return yr(c,a)}}(i,s.parent,a)}function ro(i,s,a,c,d){i.insertBefore(s,a,c,d)}function jE(i,s,a){i.appendChild(s,a)}function $E(i,s,a,c,d){null!==c?ro(i,s,a,c,d):jE(i,s,a)}function $m(i,s){return i.parentNode(s)}let Hm,Wm,Cp,zE=function GE(i,s,a){return 40&i.type?yr(i,a):null};function jl(i,s,a,c){const d=jm(i,c,s),f=s[Et],w=function HE(i,s,a){return zE(i,s,a)}(c.parent||s[pr],c,s);if(null!=d)if(Array.isArray(a))for(let D=0;D<a.length;D++)$E(f,d,a[D],w,!1);else $E(f,d,a,w,!1);void 0!==Hm&&Hm(f,c,s,a,d)}function Eh(i,s){if(null!==s){const a=s.type;if(3&a)return yr(s,i);if(4&a)return Gm(-1,i[s.index]);if(8&a){const c=s.child;if(null!==c)return Eh(i,c);{const d=i[s.index];return Or(d)?Gm(-1,d):nn(d)}}if(32&a)return X(s,i)()||nn(i[s.index]);{const c=$l(i,s);return null!==c?Array.isArray(c)?c[0]:Eh(je(i[bn]),c):Eh(i,s.next)}}return null}function $l(i,s){return null!==s?i[bn][pr].projection[s.projection]:null}function Gm(i,s){const a=mr+i+1;if(a<s.length){const c=s[a],d=c[et].firstChild;if(null!==d)return Eh(c,d)}return s[sr]}function v_(i,s,a,c,d,f,y){for(;null!=a;){const w=c[a.index],D=a.type;if(y&&0===s&&(w&&Zr(nn(w),c),a.flags|=2),32!=(32&a.flags))if(8&D)v_(i,s,a.child,c,d,f,!1),to(s,i,d,w,f);else if(32&D){const T=X(a,c);let x;for(;x=T();)to(s,i,d,x,f);to(s,i,d,w,f)}else 16&D?qm(i,s,c,a,d,f):to(s,i,d,w,f);a=y?a.projectionNext:a.next}}function Hl(i,s,a,c,d,f){v_(a,c,i.firstChild,s,d,f,!1)}function qm(i,s,a,c,d,f){const y=a[bn],D=y[pr].projection[c.projection];if(Array.isArray(D))for(let T=0;T<D.length;T++)to(s,i,d,D[T],f);else{let T=D;const x=y[Cn];vu(c)&&(T.flags|=128),v_(i,s,T,x,d,f,!0)}}function KE(i,s,a){""===a?i.removeAttribute(s,"class"):i.setAttribute(s,"class",a)}function YE(i,s,a){const{mergedAttrs:c,classes:d,styles:f}=a;null!==c&&ja(i,s,c),null!==d&&KE(i,s,d),null!==f&&function FT(i,s,a){i.setAttribute(s,"style",a)}(i,s,f)}function sx(i){Wm=i}function XE(i){return function w_(){if(void 0===Cp&&(Cp=null,tn.trustedTypes))try{Cp=tn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch{}return Cp}()?.createScriptURL(i)||i}class eI{constructor(s){this.changingThisBreaksApplicationSecurity=s}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${lt})`}}function Sc(i){return i instanceof eI?i.changingThisBreaksApplicationSecurity:i}function bp(i,s){const a=function nI(i){return i instanceof eI&&i.getTypeName()||null}(i);if(null!=a&&a!==s){if("ResourceURL"===a&&"URL"===s)return!0;throw new Error(`Required a safe ${s}, got a ${a} (see ${lt})`)}return a===s}const zT=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var Mp=function(i){return i[i.NONE=0]="NONE",i[i.HTML=1]="HTML",i[i.STYLE=2]="STYLE",i[i.SCRIPT=3]="SCRIPT",i[i.URL=4]="URL",i[i.RESOURCE_URL=5]="RESOURCE_URL",i}(Mp||{});function S_(i){const s=Ym();return s?s.sanitize(Mp.URL,i)||"":bp(i,"URL")?Sc(i):function ql(i){return(i=String(i)).match(zT)?i:"unsafe:"+i}(ee(i))}function Km(i){const s=Ym();if(s)return XE(s.sanitize(Mp.RESOURCE_URL,i)||"");if(bp(i,"ResourceURL"))return XE(Sc(i));throw new re(904,!1)}function lI(i,s,a){return function cI(i,s){return"src"===s&&("embed"===i||"frame"===i||"iframe"===i||"media"===i||"script"===i)||"href"===s&&("base"===i||"link"===i)?Km:S_}(s,a)(i)}function Ym(){const i=Me();return i&&i[na].sanitizer}class dn{constructor(s,a){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=ut({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const Qm=new dn("ENVIRONMENT_INITIALIZER"),A_=new dn("INJECTOR",-1),dI=new dn("INJECTOR_DEF_TYPES");class M_{get(s,a=$e){if(a===$e){const c=new Error(`NullInjectorError: No provider for ${Q(s)}!`);throw c.name="NullInjectorError",c}return a}}function XT(...i){return{\u0275providers:hI(0,i),\u0275fromNgModule:!0}}function hI(i,...s){const a=[],c=new Set;let d;const f=y=>{a.push(y)};return Vo(s,y=>{const w=y;Jm(w,f,[],c)&&(d||=[],d.push(w))}),void 0!==d&&fI(d,f),a}function fI(i,s){for(let a=0;a<i.length;a++){const{ngModule:c,providers:d}=i[a];Xm(d,f=>{s(f,c)})}}function Jm(i,s,a,c){if(!(i=Oe(i)))return!1;let d=null,f=yi(i);const y=!f&&zt(i);if(f||y){if(y&&!y.standalone)return!1;d=i}else{const D=i.ngModule;if(f=yi(D),!f)return!1;d=D}const w=c.has(d);if(y){if(w)return!1;if(c.add(d),y.dependencies){const D="function"==typeof y.dependencies?y.dependencies():y.dependencies;for(const T of D)Jm(T,s,a,c)}}else{if(!f)return!1;{if(null!=f.imports&&!w){let T;c.add(d);try{Vo(f.imports,x=>{Jm(x,s,a,c)&&(T||=[],T.push(x))})}finally{}void 0!==T&&fI(T,s)}if(!w){const T=_o(d)||(()=>new d);s({provide:d,useFactory:T,deps:Gt},d),s({provide:dI,useValue:d,multi:!0},d),s({provide:Qm,useValue:()=>bt(d),multi:!0},d)}const D=f.providers;if(null!=D&&!w){const T=i;Xm(D,x=>{s(x,T)})}}}return d!==i&&void 0!==i.providers}function Xm(i,s){for(let a of i)Pe(a)&&(a=a.\u0275providers),Array.isArray(a)?Xm(a,s):s(a)}const eS=L({provide:String,useValue:L});function pI(i){return null!==i&&"object"==typeof i&&eS in i}function Ch(i){return"function"==typeof i}const gI=new dn("Set Injector scope."),ey={},rS={};let N_;function ty(){return void 0===N_&&(N_=new M_),N_}class Vn{}class bh extends Vn{get destroyed(){return this._destroyed}constructor(s,a,c,d){super(),this.parent=a,this.source=c,this.scopes=d,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,O_(s,y=>this.processProvider(y)),this.records.set(A_,Du(void 0,this)),d.has("environment")&&this.records.set(Vn,Du(void 0,this));const f=this.records.get(gI);null!=f&&"string"==typeof f.value&&this.scopes.add(f.value),this.injectorDefTypes=new Set(this.get(dI.multi,Gt,_t.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const a of this._ngOnDestroyHooks)a.ngOnDestroy();const s=this._onDestroyHooks;this._onDestroyHooks=[];for(const a of s)a()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(s){return this.assertNotDestroyed(),this._onDestroyHooks.push(s),()=>this.removeOnDestroy(s)}runInContext(s){this.assertNotDestroyed();const a=nt(this),c=cn(void 0);try{return s()}finally{nt(a),cn(c)}}get(s,a=$e,c=_t.Default){if(this.assertNotDestroyed(),s.hasOwnProperty(Jo))return s[Jo](this);c=Yn(c);const f=nt(this),y=cn(void 0);try{if(!(c&_t.SkipSelf)){let D=this.records.get(s);if(void 0===D){const T=function an(i){return"function"==typeof i||"object"==typeof i&&i instanceof dn}(s)&&Zn(s);D=T&&this.injectableDefInScope(T)?Du(R_(s),ey):null,this.records.set(s,D)}if(null!=D)return this.hydrate(s,D)}return(c&_t.Self?ty():this.parent).get(s,a=c&_t.Optional&&a===$e?null:a)}catch(w){if("NullInjectorError"===w.name){if((w[ft]=w[ft]||[]).unshift(Q(s)),f)throw w;return function Ko(i,s,a,c){const d=i[ft];throw s[W]&&d.unshift(s[W]),i.message=function Qc(i,s,a,c=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.slice(2):i;let d=Q(s);if(Array.isArray(s))d=s.map(Q).join(" -> ");else if("object"==typeof s){let f=[];for(let y in s)if(s.hasOwnProperty(y)){let w=s[y];f.push(y+":"+("string"==typeof w?JSON.stringify(w):Q(w)))}d=`{${f.join(", ")}}`}return`${a}${c?"("+c+")":""}[${d}]: ${i.replace(B,"\n  ")}`}("\n"+i.message,d,a,c),i.ngTokenPath=d,i[ft]=null,i}(w,s,"R3InjectorError",this.source)}throw w}finally{cn(y),nt(f)}}resolveInjectorInitializers(){const s=nt(this),a=cn(void 0);try{const d=this.get(Qm.multi,Gt,_t.Self);for(const f of d)f()}finally{nt(s),cn(a)}}toString(){const s=[],a=this.records;for(const c of a.keys())s.push(Q(c));return`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new re(205,!1)}processProvider(s){let a=Ch(s=Oe(s))?s:Oe(s&&s.provide);const c=function iS(i){return pI(i)?Du(void 0,i.useValue):Du(we(i),ey)}(s);if(Ch(s)||!0!==s.multi)this.records.get(a);else{let d=this.records.get(a);d||(d=Du(void 0,ey,!0),d.factory=()=>Yt(d.multi),this.records.set(a,d)),a=s,d.multi.push(s)}this.records.set(a,c)}hydrate(s,a){return a.value===ey&&(a.value=rS,a.value=a.factory()),"object"==typeof a.value&&a.value&&function Ac(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this._ngOnDestroyHooks.add(a.value),a.value}injectableDefInScope(s){if(!s.providedIn)return!1;const a=Oe(s.providedIn);return"string"==typeof a?"any"===a||this.scopes.has(a):this.injectorDefTypes.has(a)}removeOnDestroy(s){const a=this._onDestroyHooks.indexOf(s);-1!==a&&this._onDestroyHooks.splice(a,1)}}function R_(i){const s=Zn(i),a=null!==s?s.factory:_o(i);if(null!==a)return a;if(i instanceof dn)throw new re(204,!1);if(i instanceof Function)return function mx(i){const s=i.length;if(s>0)throw function pu(i,s){const a=[];for(let c=0;c<i;c++)a.push(s);return a}(s,"?"),new re(204,!1);const a=function Xr(i){return i&&(i[Hn]||i[vs])||null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new re(204,!1)}function we(i,s,a){let c;if(Ch(i)){const d=Oe(i);return _o(d)||R_(d)}if(pI(i))c=()=>Oe(i.useValue);else if(function nS(i){return!(!i||!i.useFactory)}(i))c=()=>i.useFactory(...Yt(i.deps||[]));else if(function tS(i){return!(!i||!i.useExisting)}(i))c=()=>bt(Oe(i.useExisting));else{const d=Oe(i&&(i.useClass||i.provide));if(!function ny(i){return!!i.deps}(i))return _o(d)||R_(d);c=()=>new d(...Yt(i.deps))}return c}function Du(i,s,a=!1){return{factory:i,value:s,multi:a?[]:void 0}}function O_(i,s){for(const a of i)Array.isArray(a)?O_(a,s):a&&Pe(a)?O_(a.\u0275providers,s):s(a)}const io=new dn("AppId",{providedIn:"root",factory:()=>rt}),rt="ng",ry=new dn("Platform Initializer"),kt=new dn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),sS=new dn("CSP nonce",{providedIn:"root",factory:()=>function zl(){if(void 0!==Wm)return Wm;if(typeof document<"u")return document;throw new re(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let Yl=(i,s,a)=>null;function ay(i,s,a=!1){return Yl(i,s,a)}class Pp{}class II{}class uS{resolveComponentFactory(s){throw function aS(i){const s=Error(`No component factory found for ${Q(i)}.`);return s.ngComponent=i,s}(s)}}let Fp=(()=>{class i{static#e=this.NULL=new uS}return i})();function CI(){return Jl(lr(),Me())}function Jl(i,s){return new Mc(yr(i,s))}let Mc=(()=>{class i{constructor(a){this.nativeElement=a}static#e=this.__NG_ELEMENT_ID__=CI}return i})();function j_(i){return i instanceof Mc?i.nativeElement:i}class cy{}let $_=(()=>{class i{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function H_(){const i=Me(),a=vr(lr().index,i);return(ar(a)?a:i)[Et]}()}return i})(),bI=(()=>{class i{static#e=this.\u0275prov=ut({token:i,providedIn:"root",factory:()=>null})}return i})();class G_{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const TI=new G_("16.2.8"),ly={};function AI(i,s=null,a=null,c){const d=MI(i,s,a,c);return d.resolveInjectorInitializers(),d}function MI(i,s=null,a=null,c,d=new Set){const f=[a||Gt,XT(i)];return c=c||("object"==typeof i?void 0:Q(i)),new bh(f,s||ty(),c||null,d)}let Ho=(()=>{class i{static#e=this.THROW_IF_NOT_FOUND=$e;static#t=this.NULL=new M_;static create(a,c){if(Array.isArray(a))return AI({name:""},c,a,"");{const d=a.name??"";return AI({name:d},a.parent,a.providers,d)}}static#n=this.\u0275prov=ut({token:i,providedIn:"any",factory:()=>bt(A_)});static#r=this.__NG_ELEMENT_ID__=-1}return i})();function K_(i){return i.ngOriginalError}class xc{constructor(){this._console=console}handleError(s){const a=this._findOriginalError(s);this._console.error("ERROR",s),a&&this._console.error("ORIGINAL ERROR",a)}_findOriginalError(s){let a=s&&K_(s);for(;a&&K_(a);)a=K_(a);return a||null}}function Y_(i){return s=>{setTimeout(i,void 0,s)}}const Ms=class NI extends g.x{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,a,c){let d=s,f=a||(()=>null),y=c;if(s&&"object"==typeof s){const D=s;d=D.next?.bind(D),f=D.error?.bind(D),y=D.complete?.bind(D)}this.__isAsync&&(f=Y_(f),d&&(d=Y_(d)),y&&(y=Y_(y)));const w=super.subscribe({next:d,error:f,complete:y});return s instanceof K.w0&&s.add(w),w}};function fy(...i){}class li{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ms(!1),this.onMicrotaskEmpty=new Ms(!1),this.onStable=new Ms(!1),this.onError=new Ms(!1),typeof Zone>"u")throw new re(908,!1);Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!c&&a,d.shouldCoalesceRunChangeDetection=c,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function Q_(){const i="function"==typeof tn.requestAnimationFrame;let s=tn[i?"requestAnimationFrame":"setTimeout"],a=tn[i?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&s&&a){const c=s[Zone.__symbol__("OriginalDelegate")];c&&(s=c);const d=a[Zone.__symbol__("OriginalDelegate")];d&&(a=d)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:a}}().nativeRequestAnimationFrame,function OI(i){const s=()=>{!function RI(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(tn,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,Ah(i),i.isCheckStableRunning=!0,py(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),Ah(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,c,d,f,y,w)=>{if(function ed(i){return!(!Array.isArray(i)||1!==i.length)&&!0===i[0].data?.__ignore_ng_zone__}(w))return a.invokeTask(d,f,y,w);try{return PI(i),a.invokeTask(d,f,y,w)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||i.shouldCoalesceRunChangeDetection)&&s(),kI(i)}},onInvoke:(a,c,d,f,y,w,D)=>{try{return PI(i),a.invoke(d,f,y,w,D)}finally{i.shouldCoalesceRunChangeDetection&&s(),kI(i)}},onHasTask:(a,c,d,f)=>{a.hasTask(d,f),c===d&&("microTask"==f.change?(i._hasPendingMicrotasks=f.microTask,Ah(i),py(i)):"macroTask"==f.change&&(i.hasPendingMacrotasks=f.macroTask))},onHandleError:(a,c,d,f)=>(a.handleError(d,f),i.runOutsideAngular(()=>i.onError.emit(f)),!1)})}(d)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!li.isInAngularZone())throw new re(909,!1)}static assertNotInAngularZone(){if(li.isInAngularZone())throw new re(909,!1)}run(s,a,c){return this._inner.run(s,a,c)}runTask(s,a,c,d){const f=this._inner,y=f.scheduleEventTask("NgZoneEvent: "+d,s,Up,fy,fy);try{return f.runTask(y,a,c)}finally{f.cancelTask(y)}}runGuarded(s,a,c){return this._inner.runGuarded(s,a,c)}runOutsideAngular(s){return this._outer.run(s)}}const Up={};function py(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function Ah(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function PI(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function kI(i){i._nesting--,py(i)}class Mh{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ms,this.onMicrotaskEmpty=new Ms,this.onStable=new Ms,this.onError=new Ms}run(s,a,c){return s.apply(a,c)}runGuarded(s,a,c){return s.apply(a,c)}runOutsideAngular(s){return s()}runTask(s,a,c,d){return s.apply(a,c)}}const FI=new dn("",{providedIn:"root",factory:LI});function LI(){const i=Pt(li);let s=!0;const a=new P.y(d=>{s=i.isStable&&!i.hasPendingMacrotasks&&!i.hasPendingMicrotasks,i.runOutsideAngular(()=>{d.next(s),d.complete()})}),c=new P.y(d=>{let f;i.runOutsideAngular(()=>{f=i.onStable.subscribe(()=>{li.assertNotInAngularZone(),queueMicrotask(()=>{!s&&!i.hasPendingMacrotasks&&!i.hasPendingMicrotasks&&(s=!0,d.next(!0))})})});const y=i.onUnstable.subscribe(()=>{li.assertInAngularZone(),s&&(s=!1,i.runOutsideAngular(()=>{d.next(!1)}))});return()=>{f.unsubscribe(),y.unsubscribe()}});return(0,Y.T)(a,c.pipe((0,pe.B)()))}function Ta(i){return i instanceof Function?i():i}let $p=(()=>{class i{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static#e=this.\u0275prov=ut({token:i,providedIn:"root",factory:()=>new i})}return i})();function xh(i){for(;i;){i[wt]|=64;const s=je(i);if(ia(i)&&!s)return i;i=s}return null}const my=new dn("",{providedIn:"root",factory:()=>!1});let vy=null;function u0(i,s){return i[s]??wy()}function zp(i,s){const a=wy();a.producerNode?.length&&(i[s]=vy,a.lView=i,vy=Nc())}const qp={...Eo,consumerIsAlwaysLive:!0,consumerMarkedDirty:i=>{xh(i.lView)},lView:null};function Nc(){return Object.create(qp)}function wy(){return vy??=Nc(),vy}const Ut={};function jI(i){c0(jt(),Me(),Er()+i,!1)}function c0(i,s,a,c){if(!c)if(3==(3&s[wt])){const f=i.preOrderCheckHooks;null!==f&&su(s,f,a)}else{const f=i.preOrderHooks;null!==f&&ha(s,f,0,a)}Ts(a)}function td(i,s=_t.Default){const a=Me();return null===a?bt(i,s):ma(lr(),a,Oe(i),s)}function $I(){throw new Error("invalid")}function so(i,s,a,c,d,f,y,w,D,T,x){const F=s.blueprint.slice();return F[Dn]=d,F[wt]=140|c,(null!==T||i&&2048&i[wt])&&(F[wt]|=2048),tp(F),F[Cn]=F[Is]=i,F[Mn]=a,F[na]=y||i&&i[na],F[Et]=w||i&&i[Et],F[Es]=D||i&&i[Es]||null,F[pr]=f,F[Ds]=function Fm(){return km++}(),F[xi]=x,F[Cs]=T,F[bn]=2==s.type?i[bn]:F,F}function bu(i,s,a,c,d){let f=i.data[s];if(null===f)f=function Rh(i,s,a,c,d){const f=uc(),y=Ao(),D=i.data[s]=function qI(i,s,a,c,d,f){let y=s?s.injectorIndex:-1,w=0;return function as(){return null!==It.skipHydrationRootTNode}()&&(w|=128),{type:a,index:c,insertBeforeIndex:null,injectorIndex:y,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:w,providerIndexes:0,value:d,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?f:f&&f.parent,a,s,c,d);return null===i.firstChild&&(i.firstChild=D),null!==f&&(y?null==f.child&&null!==D.parent&&(f.child=D):null===f.next&&(f.next=D,D.prev=f)),D}(i,s,a,c,d),function rh(){return It.lFrame.inI18n}()&&(f.flags|=32);else if(64&f.type){f.type=a,f.value=c,f.attrs=d;const y=function da(){const i=It.lFrame,s=i.currentTNode;return i.isParent?s:s.parent}();f.injectorIndex=null===y?-1:y.injectorIndex}return zs(f,!0),f}function Oh(i,s,a,c){if(0===a)return-1;const d=s.length;for(let f=0;f<a;f++)s.push(c),i.blueprint.push(c),i.data.push(null);return d}function Un(i,s,a,c,d){const f=u0(s,qa),y=Er(),w=2&c;try{Ts(-1),w&&s.length>Ft&&c0(i,s,Ft,!1),Gi(w?2:0,d);const T=w?f:null,x=zd(T);try{null!==T&&(T.dirty=!1),a(c,d)}finally{ur(T,x)}}finally{w&&null===s[qa]&&zp(s,qa),Ts(y),Gi(w?3:1,d)}}function Ph(i,s,a){if(Qu(s)){const c=ri(null);try{const f=s.directiveEnd;for(let y=s.directiveStart;y<f;y++){const w=i.data[y];w.contentQueries&&w.contentQueries(1,a[y],y)}}finally{ri(c)}}}function rd(i,s,a){_r()&&(function wS(i,s,a,c){const d=a.directiveStart,f=a.directiveEnd;vo(a)&&function Yp(i,s,a){const c=yr(s,i),d=HI(a);let y=16;a.signals?y=4096:a.onPush&&(y=64);const w=Qp(i,so(i,d,null,y,c,s,null,i[na].rendererFactory.createRenderer(c,a),null,null,null));i[s.index]=w}(s,a,i.data[d+a.componentOffset]),i.firstCreatePass||Wi(a,s),Zr(c,s);const y=a.initialInputs;for(let w=d;w<f;w++){const D=i.data[w],T=Ki(s,i,w,a);Zr(T,s),null!==y&&hr(0,w-d,T,D,0,y),ni(D)&&(vr(a.index,s)[Mn]=Ki(s,i,w,a))}}(i,s,a,yr(a,s)),64==(64&a.flags)&&YI(i,s,a))}function id(i,s,a=yr){const c=s.localNames;if(null!==c){let d=s.index+1;for(let f=0;f<c.length;f+=2){const y=c[f+1],w=-1===y?a(s,i):i[y];i[d++]=w}}}function HI(i){const s=i.tView;return null===s||s.incompleteFirstPass?i.tView=Ey(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts,i.id):s}function Ey(i,s,a,c,d,f,y,w,D,T,x){const F=Ft+c,z=F+d,J=function fS(i,s){const a=[];for(let c=0;c<s;c++)a.push(c<i?null:Ut);return a}(F,z),_e="function"==typeof T?T():T;return J[et]={type:i,blueprint:J,template:a,queries:null,viewQuery:w,declTNode:s,data:J.slice().fill(null,F),bindingStartIndex:F,expandoStartIndex:z,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:D,consts:_e,incompleteFirstPass:!1,ssrId:x}}let GI=i=>null;function l0(i,s,a,c){for(let d in i)if(i.hasOwnProperty(d)){a=null===a?{}:a;const f=i[d];null===c?sd(a,s,d,f):c.hasOwnProperty(d)&&sd(a,s,c[d],f)}return a}function sd(i,s,a,c){i.hasOwnProperty(a)?i[a].push(s,c):i[a]=[s,c]}function Zp(i,s,a,c){if(_r()){const d=null===c?null:{"":-1},f=function IS(i,s){const a=i.directiveRegistry;let c=null,d=null;if(a)for(let f=0;f<a.length;f++){const y=a[f];if(tl(s,y.selectors,!1))if(c||(c=[]),ni(y))if(null!==y.findHostDirectiveDefs){const w=[];d=d||new Map,y.findHostDirectiveDefs(y,w,d),c.unshift(...w,y),kh(i,s,w.length)}else c.unshift(y),kh(i,s,0);else d=d||new Map,y.findHostDirectiveDefs?.(y,c,d),c.push(y)}return null===c?null:[c,d]}(i,a);let y,w;null===f?y=w=null:[y,w]=f,null!==y&&Iy(i,s,a,y,d,w),d&&function Kp(i,s,a){if(s){const c=i.localNames=[];for(let d=0;d<s.length;d+=2){const f=a[s[d+1]];if(null==f)throw new re(-301,!1);c.push(s[d],f)}}}(a,c,d)}a.mergedAttrs=ho(a.mergedAttrs,a.attrs)}function Iy(i,s,a,c,d,f){for(let T=0;T<c.length;T++)Js(Wi(a,s),i,c[T].type);!function d0(i,s,a){i.flags|=1,i.directiveStart=s,i.directiveEnd=s+a,i.providerIndexes=s}(a,i.data.length,c.length);for(let T=0;T<c.length;T++){const x=c[T];x.providersResolver&&x.providersResolver(x)}let y=!1,w=!1,D=Oh(i,s,c.length,null);for(let T=0;T<c.length;T++){const x=c[T];a.mergedAttrs=ho(a.mergedAttrs,x.hostAttrs),QI(i,a,s,D,x),Dy(D,x,d),null!==x.contentQueries&&(a.flags|=4),(null!==x.hostBindings||null!==x.hostAttrs||0!==x.hostVars)&&(a.flags|=64);const F=x.type.prototype;!y&&(F.ngOnChanges||F.ngOnInit||F.ngDoCheck)&&((i.preOrderHooks??=[]).push(a.index),y=!0),!w&&(F.ngOnChanges||F.ngDoCheck)&&((i.preOrderCheckHooks??=[]).push(a.index),w=!0),D++}!function mS(i,s,a){const d=s.directiveEnd,f=i.data,y=s.attrs,w=[];let D=null,T=null;for(let x=s.directiveStart;x<d;x++){const F=f[x],z=a?a.get(F):null,_e=z?z.outputs:null;D=l0(F.inputs,x,D,z?z.inputs:null),T=l0(F.outputs,x,T,_e);const Le=null===D||null===y||fo(s)?null:DS(D,x,y);w.push(Le)}null!==D&&(D.hasOwnProperty("class")&&(s.flags|=8),D.hasOwnProperty("style")&&(s.flags|=16)),s.initialInputs=w,s.inputs=D,s.outputs=T}(i,a,f)}function YI(i,s,a){const c=a.directiveStart,d=a.directiveEnd,f=a.index,y=function Im(){return It.lFrame.currentDirectiveIndex}();try{Ts(f);for(let w=c;w<d;w++){const D=i.data[w],T=s[w];lc(w),(null!==D.hostBindings||0!==D.hostVars||null!==D.hostAttrs)&&ES(D,T)}}finally{Ts(-1),lc(y)}}function ES(i,s){null!==i.hostBindings&&i.hostBindings(1,s)}function kh(i,s,a){s.componentOffset=a,(i.components??=[]).push(s.index)}function Dy(i,s,a){if(a){if(s.exportAs)for(let c=0;c<s.exportAs.length;c++)a[s.exportAs[c]]=i;ni(s)&&(a[""]=i)}}function QI(i,s,a,c,d){i.data[c]=d;const f=d.factory||(d.factory=_o(d.type)),y=new Ks(f,ni(d),td);i.blueprint[c]=y,a[c]=y,function ZI(i,s,a,c,d){const f=d.hostBindings;if(f){let y=i.hostBindingOpCodes;null===y&&(y=i.hostBindingOpCodes=[]);const w=~s.index;(function KI(i){let s=i.length;for(;s>0;){const a=i[--s];if("number"==typeof a&&a<0)return a}return 0})(y)!=w&&y.push(w),y.push(a,c,f)}}(i,s,c,Oh(i,a,d.hostVars,Ut),d)}function gs(i,s,a,c,d,f){const y=yr(i,s);!function h0(i,s,a,c,d,f,y){if(null==f)i.removeAttribute(s,d,a);else{const w=null==y?ee(f):y(f,c||"",d);i.setAttribute(s,d,w,a)}}(s[Et],y,f,i.value,a,c,d)}function hr(i,s,a,c,d,f){const y=f[s];if(null!==y)for(let w=0;w<y.length;)f0(c,a,y[w++],y[w++],y[w++])}function f0(i,s,a,c,d){const f=ri(null);try{const y=i.inputTransforms;null!==y&&y.hasOwnProperty(c)&&(d=y[c].call(s,d)),null!==i.setInput?i.setInput(s,d,a,c):s[c]=d}finally{ri(f)}}function DS(i,s,a){let c=null,d=0;for(;d<a.length;){const f=a[d];if(0!==f)if(5!==f){if("number"==typeof f)break;if(i.hasOwnProperty(f)){null===c&&(c=[]);const y=i[f];for(let w=0;w<y.length;w+=2)if(y[w]===s){c.push(f,y[w+1],a[d+1]);break}}d+=2}else d+=2;else d+=4}return c}function JI(i,s,a,c){return[i,!0,!1,s,null,0,c,a,null,null,null]}function XI(i,s){const a=i.contentQueries;if(null!==a)for(let c=0;c<a.length;c+=2){const f=a[c+1];if(-1!==f){const y=i.data[f];oh(a[c]),y.contentQueries(2,s[f],f)}}}function Qp(i,s){return i[gr]?i[$f][Gr]=s:i[gr]=s,i[$f]=s,s}function Cy(i,s,a){oh(0);const c=ri(null);try{s(i,a)}finally{ri(c)}}function Jp(i){return i[za]||(i[za]=[])}function p0(i){return i.cleanup||(i.cleanup=[])}function g0(i,s){const a=i[Es],c=a?a.get(xc,null):null;c&&c.handleError(s)}function m0(i,s,a,c,d){for(let f=0;f<a.length;){const y=a[f++],w=a[f++];f0(i.data[y],s[y],c,w,d)}}function y0(i,s){const a=vr(s,i),c=a[et];!function Xp(i,s){for(let a=s.length;a<i.blueprint.length;a++)s.push(i.blueprint[a])}(c,a);const d=a[Dn];null!==d&&null===a[xi]&&(a[xi]=ay(d,a[Es])),by(c,a,a[Mn])}function by(i,s,a){wr(s);try{const c=i.viewQuery;null!==c&&Cy(1,c,a);const d=i.template;null!==d&&Un(i,s,d,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&XI(i,s),i.staticViewQueries&&Cy(2,i.viewQuery,a);const f=i.components;null!==f&&function v0(i,s){for(let a=0;a<s.length;a++)y0(i,s[a])}(s,f)}catch(c){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),c}finally{s[wt]&=-5,yt()}}let eg=(()=>{class i{constructor(){this.all=new Set,this.queue=new Map}create(a,c,d){const f=typeof Zone>"u"?null:Zone.current,y=function vm(i,s,a){const c=Object.create(Zf);a&&(c.consumerAllowSignalWrites=!0),c.fn=i,c.schedule=s;const d=y=>{c.cleanupFn=y};return c.ref={notify:()=>Ya(c),run:()=>{if(c.dirty=!1,c.hasRun&&!hl(c))return;c.hasRun=!0;const y=zd(c);try{c.cleanupFn(),c.cleanupFn=vl,c.fn(d)}finally{ur(c,y)}},cleanup:()=>c.cleanupFn()},c.ref}(a,T=>{this.all.has(T)&&this.queue.set(T,f)},d);let w;this.all.add(y),y.notify();const D=()=>{y.cleanup(),w?.(),this.all.delete(y),this.queue.delete(y)};return w=c?.onDestroy(D),{destroy:D}}flush(){if(0!==this.queue.size)for(const[a,c]of this.queue)this.queue.delete(a),c?c.run(()=>a.run()):a.run()}get isQueueEmpty(){return 0===this.queue.size}static#e=this.\u0275prov=ut({token:i,providedIn:"root",factory:()=>new i})}return i})();function od(i,s,a){let c=a?i.styles:null,d=a?i.classes:null,f=0;if(null!==s)for(let y=0;y<s.length;y++){const w=s[y];"number"==typeof w?f=w:1==f?d=Ve(d,w):2==f&&(c=Ve(c,w+": "+s[++y]+";"))}a?i.styles=c:i.stylesWithoutHost=c,a?i.classes=d:i.classesWithoutHost=d}function tg(i,s,a,c,d=!1){for(;null!==a;){const f=s[a.index];null!==f&&c.push(nn(f)),Or(f)&&_0(f,c);const y=a.type;if(8&y)tg(i,s,a.child,c);else if(32&y){const w=X(a,s);let D;for(;D=w();)c.push(D)}else if(16&y){const w=$l(s,a);if(Array.isArray(w))c.push(...w);else{const D=je(s[bn]);tg(D[et],D,w,c,!0)}}a=d?a.projectionNext:a.next}return c}function _0(i,s){for(let a=mr;a<i.length;a++){const c=i[a],d=c[et].firstChild;null!==d&&tg(c[et],c,d,s)}i[sr]!==i[Dn]&&s.push(i[sr])}function Oc(i,s,a,c=!0){const d=s[na],f=d.rendererFactory,y=d.afterRenderEventManager;f.begin?.(),y?.begin();try{Ty(i,s,i.template,a)}catch(D){throw c&&g0(s,D),D}finally{f.end?.(),d.effectManager?.flush(),y?.end()}}function Ty(i,s,a,c){const d=s[wt];if(256!=(256&d)){s[na].effectManager?.flush(),wr(s);try{tp(s),function nh(i){return It.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&Un(i,s,a,2,c);const y=3==(3&d);if(y){const T=i.preOrderCheckHooks;null!==T&&su(s,T,null)}else{const T=i.preOrderHooks;null!==T&&ha(s,T,0,null),ou(s,0)}if(function nD(i){for(let s=Ln(i);null!==s;s=fs(s)){if(!s[Yu])continue;const a=s[or];for(let c=0;c<a.length;c++){El(a[c])}}}(s),Sy(s,2),null!==i.contentQueries&&XI(i,s),y){const T=i.contentCheckHooks;null!==T&&su(s,T)}else{const T=i.contentHooks;null!==T&&ha(s,T,1),ou(s,1)}!function nd(i,s){const a=i.hostBindingOpCodes;if(null===a)return;const c=u0(s,$s);try{for(let d=0;d<a.length;d++){const f=a[d];if(f<0)Ts(~f);else{const y=f,w=a[++d],D=a[++d];cc(w,y),c.dirty=!1;const T=zd(c);try{D(2,s[y])}finally{ur(c,T)}}}}finally{null===s[$s]&&zp(s,$s),Ts(-1)}}(i,s);const w=i.components;null!==w&&E0(s,w,0);const D=i.viewQuery;if(null!==D&&Cy(2,D,c),y){const T=i.viewCheckHooks;null!==T&&su(s,T)}else{const T=i.viewHooks;null!==T&&ha(s,T,2),ou(s,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),s[wt]&=-73,rc(s)}finally{yt()}}}function Sy(i,s){for(let a=Ln(i);null!==a;a=fs(a))for(let c=mr;c<a.length;c++)w0(a[c],s)}function Ay(i,s,a){w0(vr(s,i),a)}function w0(i,s){if(!function la(i){return 128==(128&i[wt])}(i))return;const a=i[et],c=i[wt];if(80&c&&0===s||1024&c||2===s)Ty(a,i,a.template,i[Mn]);else if(i[go]>0){Sy(i,1);const d=a.components;null!==d&&E0(i,d,1)}}function E0(i,s,a){for(let c=0;c<s.length;c++)Ay(i,s[c],a)}class zo{get rootNodes(){const s=this._lView,a=s[et];return tg(a,s,a.firstChild,[])}constructor(s,a){this._lView=s,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Mn]}set context(s){this._lView[Mn]=s}get destroyed(){return 256==(256&this._lView[wt])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[Cn];if(Or(s)){const a=s[8],c=a?a.indexOf(this):-1;c>-1&&(Bm(s,c),ap(a,c))}this._attachedToViewContainer=!1}m_(this._lView[et],this._lView)}onDestroy(s){!function yn(i,s){if(256==(256&i[wt]))throw new re(911,!1);null===i[js]&&(i[js]=[]),i[js].push(s)}(this._lView,s)}markForCheck(){xh(this._cdRefInjectingView||this._lView)}detach(){this._lView[wt]&=-129}reattach(){this._lView[wt]|=128}detectChanges(){Oc(this._lView[et],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new re(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Eu(i,s){Hl(i,s,s[Et],2,null,null)}(this._lView[et],this._lView)}attachToAppRef(s){if(this._attachedToViewContainer)throw new re(902,!1);this._appRef=s}}class rD extends zo{constructor(s){super(s),this._view=s}detectChanges(){const s=this._view;Oc(s[et],s,s[Mn],!1)}checkNoChanges(){}get context(){return null}}class I0 extends Fp{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const a=zt(s);return new Ii(a,this.ngModule)}}function D0(i){const s=[];for(let a in i)i.hasOwnProperty(a)&&s.push({propName:i[a],templateName:a});return s}class My{constructor(s,a){this.injector=s,this.parentInjector=a}get(s,a,c){c=Yn(c);const d=this.injector.get(s,ly,c);return d!==ly||a===ly?d:this.parentInjector.get(s,a,c)}}class Ii extends II{get inputs(){const s=this.componentDef,a=s.inputTransforms,c=D0(s.inputs);if(null!==a)for(const d of c)a.hasOwnProperty(d.propName)&&(d.transform=a[d.propName]);return c}get outputs(){return D0(this.componentDef.outputs)}constructor(s,a){super(),this.componentDef=s,this.ngModule=a,this.componentType=s.type,this.selector=function Vd(i){return i.map(Ld).join(",")}(s.selectors),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!a}create(s,a,c,d){let f=(d=d||this.ngModule)instanceof Vn?d:d?.injector;f&&null!==this.componentDef.getStandaloneInjector&&(f=this.componentDef.getStandaloneInjector(f)||f);const y=f?new My(s,f):s,w=y.get(cy,null);if(null===w)throw new re(407,!1);const F={rendererFactory:w,sanitizer:y.get(bI,null),effectManager:y.get(eg,null),afterRenderEventManager:y.get($p,null)},z=w.createRenderer(null,this.componentDef),J=this.componentDef.selectors[0][0]||"div",_e=c?function pS(i,s,a,c){const f=c.get(my,!1)||a===$i.ShadowDom,y=i.selectRootElement(s,f);return function gS(i){GI(i)}(y),y}(z,c,this.componentDef.encapsulation,y):no(z,J,function iD(i){const s=i.toLowerCase();return"svg"===s?"svg":"math"===s?"math":null}(J)),mt=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let xe=null;null!==_e&&(xe=ay(_e,y,!0));const Rt=Ey(0,null,null,1,0,null,null,null,null,null,null),$t=so(null,Rt,null,mt,null,null,F,z,y,null,xe);let hn,mi;wr($t);try{const Gu=this.componentDef;let zu,Nf=null;Gu.findHostDirectiveDefs?(zu=[],Nf=new Map,Gu.findHostDirectiveDefs(Gu,zu,Nf),zu.push(Gu)):zu=[Gu];const nT=function oD(i,s){const a=i[et],c=Ft;return i[c]=s,bu(a,c,2,"#host",null)}($t,_e),tm=function Fh(i,s,a,c,d,f,y){const w=d[et];!function TS(i,s,a,c){for(const d of i)s.mergedAttrs=ho(s.mergedAttrs,d.hostAttrs);null!==s.mergedAttrs&&(od(s,s.mergedAttrs,!0),null!==a&&YE(c,a,s))}(c,i,s,y);let D=null;null!==s&&(D=ay(s,d[Es]));const T=f.rendererFactory.createRenderer(s,a);let x=16;a.signals?x=4096:a.onPush&&(x=64);const F=so(d,HI(a),null,x,d[i.index],i,f,T,null,null,D);return w.firstCreatePass&&kh(w,i,c.length-1),Qp(d,F),d[i.index]=F}(nT,_e,Gu,zu,$t,F,z);mi=wl(Rt,Ft),_e&&function C0(i,s,a,c){if(c)ja(i,a,["ng-version",TI.full]);else{const{attrs:d,classes:f}=function Ai(i){const s=[],a=[];let c=1,d=2;for(;c<i.length;){let f=i[c];if("string"==typeof f)2===d?""!==f&&s.push(f,i[++c]):8===d&&a.push(f);else{if(!ti(d))break;d=f}c++}return{attrs:s,classes:a}}(s.selectors[0]);d&&ja(i,a,d),f&&f.length>0&&KE(i,a,f.join(" "))}}(z,Gu,_e,c),void 0!==a&&function _n(i,s,a){const c=i.projection=[];for(let d=0;d<s.length;d++){const f=a[d];c.push(null!=f?Array.from(f):null)}}(mi,this.ngContentSelectors,a),hn=function qo(i,s,a,c,d,f){const y=lr(),w=d[et],D=yr(y,d);Iy(w,d,y,a,null,c);for(let x=0;x<a.length;x++)Zr(Ki(d,w,y.directiveStart+x,y),d);YI(w,d,y),D&&Zr(D,d);const T=Ki(d,w,y.directiveStart+y.componentOffset,y);if(i[Mn]=d[Mn]=T,null!==f)for(const x of f)x(T,s);return Ph(w,y,i),T}(tm,Gu,zu,Nf,$t,[SS]),by(Rt,$t,null)}finally{yt()}return new sD(this.componentType,hn,Jl(mi,$t),$t,mi)}}class sD extends Pp{constructor(s,a,c,d,f){super(),this.location=c,this._rootLView=d,this._tNode=f,this.previousInputValues=null,this.instance=a,this.hostView=this.changeDetectorRef=new rD(d),this.componentType=s}setInput(s,a){const c=this._tNode.inputs;let d;if(null!==c&&(d=c[s])){if(this.previousInputValues??=new Map,this.previousInputValues.has(s)&&Object.is(this.previousInputValues.get(s),a))return;const f=this._rootLView;m0(f[et],f,d,s,a),this.previousInputValues.set(s,a),xh(vr(this._tNode.index,f))}}get injector(){return new Fn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}function SS(){const i=lr();dr(Me()[et],i)}function oo(i){let s=function xy(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const c=[i];for(;s;){let d;if(ni(i))d=s.\u0275cmp||s.\u0275dir;else{if(s.\u0275cmp)throw new re(903,!1);d=s.\u0275dir}if(d){if(a){c.push(d);const y=i;y.inputs=Lh(i.inputs),y.inputTransforms=Lh(i.inputTransforms),y.declaredInputs=Lh(i.declaredInputs),y.outputs=Lh(i.outputs);const w=d.hostBindings;w&&uD(i,w);const D=d.viewQuery,T=d.contentQueries;if(D&&Vh(i,D),T&&b0(i,T),j(i.inputs,d.inputs),j(i.declaredInputs,d.declaredInputs),j(i.outputs,d.outputs),null!==d.inputTransforms&&(null===y.inputTransforms&&(y.inputTransforms={}),j(y.inputTransforms,d.inputTransforms)),ni(d)&&d.data.animation){const x=i.data;x.animation=(x.animation||[]).concat(d.data.animation)}}const f=d.features;if(f)for(let y=0;y<f.length;y++){const w=f[y];w&&w.ngInherit&&w(i),w===oo&&(a=!1)}}s=Object.getPrototypeOf(s)}!function aD(i){let s=0,a=null;for(let c=i.length-1;c>=0;c--){const d=i[c];d.hostVars=s+=d.hostVars,d.hostAttrs=ho(d.hostAttrs,a=ho(a,d.hostAttrs))}}(c)}function Lh(i){return i===Hi?{}:i===Gt?[]:i}function Vh(i,s){const a=i.viewQuery;i.viewQuery=a?(c,d)=>{s(c,d),a(c,d)}:s}function b0(i,s){const a=i.contentQueries;i.contentQueries=a?(c,d,f)=>{s(c,d,f),a(c,d,f)}:s}function uD(i,s){const a=i.hostBindings;i.hostBindings=a?(c,d)=>{s(c,d),a(c,d)}:s}function cD(i){const s=i.inputConfig,a={};for(const c in s)if(s.hasOwnProperty(c)){const d=s[c];Array.isArray(d)&&d[2]&&(a[c]=d[2])}i.inputTransforms=a}function Bh(i){return!!Oy(i)&&(Array.isArray(i)||!(i instanceof Map)&&Symbol.iterator in i)}function Oy(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function Li(i,s,a){return!Object.is(i[s],a)&&(i[s]=a,!0)}function Pc(i,s,a,c){const d=Me();return Li(d,Mo(),s)&&(jt(),gs(vn(),d,i,s,a,c)),Pc}function Hh(i,s,a,c,d,f,y,w){const D=Me(),T=jt(),x=i+Ft,F=T.firstCreatePass?function VS(i,s,a,c,d,f,y,w,D){const T=s.consts,x=bu(s,i,4,y||null,ii(T,w));Zp(s,a,x,ii(T,D)),dr(s,x);const F=x.tView=Ey(2,x,c,d,f,s.directiveRegistry,s.pipeRegistry,null,s.schemas,T,null);return null!==s.queries&&(s.queries.template(s,x),F.queries=s.queries.embeddedTView(x)),x}(x,T,D,s,a,c,d,f,y):T.data[x];zs(F,!1);const z=Su(T,D,F,i);Zs()&&jl(T,D,z,F),Zr(z,D),Qp(D,D[x]=JI(z,D,z,F)),_i(F)&&rd(T,D,F),null!=y&&id(D,F,w)}let Su=function yD(i,s,a,c){return ai(!0),s[Et].createComment("")};function _D(i){return So(function np(){return It.lFrame.contextLView}(),Ft+i)}function x0(i,s,a){const c=Me();return Li(c,Mo(),s)&&function ps(i,s,a,c,d,f,y,w){const D=yr(s,a);let x,T=s.inputs;!w&&null!=T&&(x=T[c])?(m0(i,a,x,c,d),vo(s)&&function vS(i,s){const a=vr(s,i);16&a[wt]||(a[wt]|=64)}(a,s.index)):3&s.type&&(c=function yS(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(c),d=null!=y?y(d,s.value||"",c):d,f.setProperty(D,c,d))}(jt(),vn(),c,i,s,c[Et],a,!1),x0}function Ji(i,s,a,c,d){const y=d?"class":"style";m0(i,a,s.inputs[y],y,c)}function Uc(i,s,a,c){const d=Me(),f=jt(),y=Ft+i,w=d[Et],D=f.firstCreatePass?function lg(i,s,a,c,d,f){const y=s.consts,D=bu(s,i,2,c,ii(y,d));return Zp(s,a,D,ii(y,f)),null!==D.attrs&&od(D,D.attrs,!1),null!==D.mergedAttrs&&od(D,D.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,D),D}(y,f,d,s,a,c):f.data[y],T=wD(f,d,D,w,s,i);d[y]=T;const x=_i(D);return zs(D,!0),YE(w,T,D),32!=(32&D.flags)&&Zs()&&jl(f,d,T,D),0===function ic(){return It.lFrame.elementDepthCount}()&&Zr(T,d),function cr(){It.lFrame.elementDepthCount++}(),x&&(rd(f,d,D),Ph(f,D,d)),null!==c&&id(d,D),Uc}function dg(){let i=lr();Ao()?function Cl(){It.lFrame.isParent=!1}():(i=i.parent,zs(i,!1));const s=i;(function Il(i){return It.skipHydrationRootTNode===i})(s)&&function Dl(){It.skipHydrationRootTNode=null}(),function th(){It.lFrame.elementDepthCount--}();const a=jt();return a.firstCreatePass&&(dr(a,i),Qu(i)&&a.queries.elementEnd(i)),null!=s.classesWithoutHost&&function pa(i){return 0!=(8&i.flags)}(s)&&Ji(a,s,Me(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function No(i){return 0!=(16&i.flags)}(s)&&Ji(a,s,Me(),s.stylesWithoutHost,!1),dg}function di(i,s,a,c){return Uc(i,s,a,c),dg(),di}let wD=(i,s,a,c,d,f)=>(ai(!0),no(c,d,function Tl(){return It.lFrame.currentNamespace}()));function bD(){return Me()}function N0(i){return!!i&&"function"==typeof i.then}function TD(i){return!!i&&"function"==typeof i.subscribe}function R0(i,s,a,c){const d=Me(),f=jt(),y=lr();return function AD(i,s,a,c,d,f,y){const w=_i(c),T=i.firstCreatePass&&p0(i),x=s[Mn],F=Jp(s);let z=!0;if(3&c.type||y){const Le=yr(c,s),Je=y?y(Le):Le,mt=F.length,xe=y?$t=>y(nn($t[c.index])):c.index;let Rt=null;if(!y&&w&&(Rt=function jS(i,s,a,c){const d=i.cleanup;if(null!=d)for(let f=0;f<d.length-1;f+=2){const y=d[f];if(y===a&&d[f+1]===c){const w=s[za],D=d[f+2];return w.length>D?w[D]:null}"string"==typeof y&&(f+=2)}return null}(i,s,d,c.index)),null!==Rt)(Rt.__ngLastListenerFn__||Rt).__ngNextListenerFn__=f,Rt.__ngLastListenerFn__=f,z=!1;else{f=xD(c,s,x,f,!1);const $t=a.listen(Je,d,f);F.push(f,$t),T&&T.push(d,xe,mt,mt+1)}}else f=xD(c,s,x,f,!1);const J=c.outputs;let _e;if(z&&null!==J&&(_e=J[d])){const Le=_e.length;if(Le)for(let Je=0;Je<Le;Je+=2){const hn=s[_e[Je]][_e[Je+1]].subscribe(f),mi=F.length;F.push(f,hn),T&&T.push(d,c.index,mi,-(mi+1))}}}(f,d,d[Et],y,i,s,c),R0}function MD(i,s,a,c){try{return Gi(6,s,a),!1!==a(c)}catch(d){return g0(i,d),!1}finally{Gi(7,s,a)}}function xD(i,s,a,c,d){return function f(y){if(y===Function)return c;xh(i.componentOffset>-1?vr(i.index,s):s);let D=MD(s,a,c,y),T=f.__ngNextListenerFn__;for(;T;)D=MD(s,a,T,y)&&D,T=T.__ngNextListenerFn__;return d&&!1===D&&y.preventDefault(),D}}function ND(i=1){return function oi(i){return(It.lFrame.contextLView=function ru(i,s){for(;i>0;)s=s[Is],i--;return s}(i,It.lFrame.contextLView))[Mn]}(i)}function Vr(i,s){return i<<17|s<<2}function un(i){return i>>17&32767}function Ui(i){return 2|i}function Bc(i){return(131068&i)>>2}function F0(i,s){return-131069&i|s<<2}function L0(i){return 1|i}function fg(i,s,a,c,d){const f=i[a+1],y=null===s;let w=c?un(f):Bc(f),D=!1;for(;0!==w&&(!1===D||y);){const x=i[w+1];pg(i[w],s)&&(D=!0,i[w+1]=c?L0(x):Ui(x)),w=c?un(x):Bc(x)}D&&(i[a+1]=c?Ui(f):L0(f))}function pg(i,s){return null===i||null==s||(Array.isArray(i)?i[1]:i)===s||!(!Array.isArray(i)||"string"!=typeof s)&&yc(i,s)>=0}function Gy(i,s){return function Zo(i,s,a,c){const d=Me(),f=jt(),y=function qs(i){const s=It.lFrame,a=s.bindingIndex;return s.bindingIndex=s.bindingIndex+i,a}(2);f.firstUpdatePass&&function hi(i,s,a,c){const d=i.data;if(null===d[a+1]){const f=d[Er()],y=function B0(i,s){return s>=i.expandoStartIndex}(i,a);(function Wy(i,s){return 0!=(i.flags&(s?8:16))})(f,c)&&null===s&&!y&&(s=!1),s=function FD(i,s,a,c){const d=function sh(i){const s=It.lFrame.currentDirectiveIndex;return-1===s?null:i[s]}(i);let f=c?s.residualClasses:s.residualStyles;if(null===d)0===(c?s.classBindings:s.styleBindings)&&(a=Na(a=zy(null,i,s,a,c),s.attrs,c),f=null);else{const y=s.directiveStylingLast;if(-1===y||i[y]!==d)if(a=zy(d,i,s,a,c),null===f){let D=function qn(i,s,a){const c=a?s.classBindings:s.styleBindings;if(0!==Bc(c))return i[un(c)]}(i,s,c);void 0!==D&&Array.isArray(D)&&(D=zy(null,i,s,D[1],c),D=Na(D,s.attrs,c),function $c(i,s,a,c){i[un(a?s.classBindings:s.styleBindings)]=c}(i,s,c,D))}else f=function LD(i,s,a){let c;const d=s.directiveEnd;for(let f=1+s.directiveStylingLast;f<d;f++)c=Na(c,i[f].hostAttrs,a);return Na(c,s.attrs,a)}(i,s,c)}return void 0!==f&&(c?s.residualClasses=f:s.residualStyles=f),a}(d,f,s,c),function Mu(i,s,a,c,d,f){let y=f?s.classBindings:s.styleBindings,w=un(y),D=Bc(y);i[c]=a;let x,T=!1;if(Array.isArray(a)?(x=a[1],(null===x||yc(a,x)>0)&&(T=!0)):x=a,d)if(0!==D){const z=un(i[w+1]);i[c+1]=Vr(z,w),0!==z&&(i[z+1]=F0(i[z+1],c)),i[w+1]=function zh(i,s){return 131071&i|s<<17}(i[w+1],c)}else i[c+1]=Vr(w,0),0!==w&&(i[w+1]=F0(i[w+1],c)),w=c;else i[c+1]=Vr(D,0),0===w?w=c:i[D+1]=F0(i[D+1],c),D=c;T&&(i[c+1]=Ui(i[c+1])),fg(i,x,c,!0),fg(i,x,c,!1),function By(i,s,a,c,d){const f=d?i.residualClasses:i.residualStyles;null!=f&&"string"==typeof s&&yc(f,s)>=0&&(a[c+1]=L0(a[c+1]))}(s,x,i,c,f),y=Vr(w,D),f?s.classBindings=y:s.styleBindings=y}(d,f,s,a,y,c)}}(f,i,y,c),s!==Ut&&Li(d,y,s)&&function pd(i,s,a,c,d,f,y,w){if(!(3&s.type))return;const D=i.data,T=D[w+1],x=function Qr(i){return 1==(1&i)}(T)?qy(D,s,a,d,Bc(T),y):void 0;Zh(x)||(Zh(f)||function PD(i){return 2==(2&i)}(T)&&(f=qy(D,null,a,d,w,y)),function kT(i,s,a,c,d){if(s)d?i.addClass(a,c):i.removeClass(a,c);else{let f=-1===c.indexOf("-")?void 0:Da.DashCase;null==d?i.removeStyle(a,c,f):("string"==typeof d&&d.endsWith("!important")&&(d=d.slice(0,-10),f|=Da.Important),i.setStyle(a,c,d,f))}}(c,y,To(Er(),a),d,f))}(f,f.data[Er()],d,d[Et],i,d[y+1]=function VD(i,s){return null==i||""===i||("string"==typeof s?i+=s:"object"==typeof i&&(i=Q(Sc(i)))),i}(s,a),c,y)}(i,s,null,!0),Gy}function zy(i,s,a,c,d){let f=null;const y=a.directiveEnd;let w=a.directiveStylingLast;for(-1===w?w=a.directiveStart:w++;w<y&&(f=s[w],c=Na(c,f.hostAttrs,d),f!==i);)w++;return null!==i&&(a.directiveStylingLast=w),c}function Na(i,s,a){const c=a?1:2;let d=-1;if(null!==s)for(let f=0;f<s.length;f++){const y=s[f];"number"==typeof y?d=y:d===c&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),Qi(i,y,!!a||s[++f]))}return void 0===i?null:i}function qy(i,s,a,c,d,f){const y=null===s;let w;for(;d>0;){const D=i[d],T=Array.isArray(D),x=T?D[1]:D,F=null===x;let z=a[d+1];z===Ut&&(z=F?Gt:void 0);let J=F?cp(z,c):x===c?z:void 0;if(T&&!Zh(J)&&(J=cp(D,c)),Zh(J)&&(w=J,y))return w;const _e=i[d+1];d=y?un(_e):Bc(_e)}if(null!==s){let D=f?s.residualClasses:s.residualStyles;null!=D&&(w=cp(D,c))}return w}function Zh(i){return void 0!==i}function $0(i,s=""){const a=Me(),c=jt(),d=i+Ft,f=c.firstCreatePass?bu(c,d,1,s,null):c.data[d],y=H0(c,a,f,s,i);a[d]=y,Zs()&&jl(c,a,y,f),zs(f,!1)}let H0=(i,s,a,c,d)=>(ai(!0),function bc(i,s){return i.createText(s)}(s[Et],c));function G0(i){return Zy("",i,""),G0}function Zy(i,s,a){const c=Me(),d=function kc(i,s,a,c){return Li(i,Mo(),a)?s+ee(a)+c:Ut}(c,i,s,a);return d!==Ut&&function Sa(i,s,a){const c=To(s,i);!function Ep(i,s,a){i.setValue(s,a)}(i[Et],c,a)}(c,Er(),d),Zy}const Bi=void 0;var _g=["en",[["a","p"],["AM","PM"],Bi],[["AM","PM"],Bi,Bi],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Bi,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Bi,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Bi,"{1} 'at' {0}",Bi],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function QD(i){const a=Math.floor(Math.abs(i)),c=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===c?1:5}];let Jh={};function Bt(i){const s=function nv(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=ew(s);if(a)return a;const c=s.split("-")[0];if(a=ew(c),a)return a;if("en"===c)return _g;throw new re(701,!1)}function tv(i){return Bt(i)[md.PluralCase]}function ew(i){return i in Jh||(Jh[i]=tn.ng&&tn.ng.common&&tn.ng.common.locales&&tn.ng.common.locales[i]),Jh[i]}var md=function(i){return i[i.LocaleId=0]="LocaleId",i[i.DayPeriodsFormat=1]="DayPeriodsFormat",i[i.DayPeriodsStandalone=2]="DayPeriodsStandalone",i[i.DaysFormat=3]="DaysFormat",i[i.DaysStandalone=4]="DaysStandalone",i[i.MonthsFormat=5]="MonthsFormat",i[i.MonthsStandalone=6]="MonthsStandalone",i[i.Eras=7]="Eras",i[i.FirstDayOfWeek=8]="FirstDayOfWeek",i[i.WeekendRange=9]="WeekendRange",i[i.DateFormat=10]="DateFormat",i[i.TimeFormat=11]="TimeFormat",i[i.DateTimeFormat=12]="DateTimeFormat",i[i.NumberSymbols=13]="NumberSymbols",i[i.NumberFormats=14]="NumberFormats",i[i.CurrencyCode=15]="CurrencyCode",i[i.CurrencySymbol=16]="CurrencySymbol",i[i.CurrencyName=17]="CurrencyName",i[i.Currencies=18]="Currencies",i[i.Directionality=19]="Directionality",i[i.PluralCase=20]="PluralCase",i[i.ExtraData=21]="ExtraData",i}(md||{});const yd="en-US";let vd=yd;function uv(i,s,a,c,d){if(i=Oe(i),Array.isArray(i))for(let f=0;f<i.length;f++)uv(i[f],s,a,c,d);else{const f=jt(),y=Me(),w=lr();let D=Ch(i)?i:Oe(i.provide);const T=we(i),x=1048575&w.providerIndexes,F=w.directiveStart,z=w.providerIndexes>>20;if(Ch(i)||!i.multi){const J=new Ks(T,d,td),_e=rf(D,s,d?x:x+z,F);-1===_e?(Js(Wi(w,y),f,D),gw(f,i,s.length),s.push(D),w.directiveStart++,w.directiveEnd++,d&&(w.providerIndexes+=1048576),a.push(J),y.push(J)):(a[_e]=J,y[_e]=J)}else{const J=rf(D,s,x+z,F),_e=rf(D,s,x,x+z),Je=_e>=0&&a[_e];if(d&&!Je||!d&&!(J>=0&&a[J])){Js(Wi(w,y),f,D);const mt=function Ag(i,s,a,c,d){const f=new Ks(i,a,td);return f.multi=[],f.index=s,f.componentProviders=0,mw(f,d,c&&!a),f}(d?Cd:Dd,a.length,d,c,T);!d&&Je&&(a[_e].providerFactory=mt),gw(f,i,s.length,0),s.push(D),w.directiveStart++,w.directiveEnd++,d&&(w.providerIndexes+=1048576),a.push(mt),y.push(mt)}else gw(f,i,J>-1?J:_e,mw(a[d?_e:J],T,!d&&c));!d&&c&&Je&&a[_e].componentProviders++}}}function gw(i,s,a,c){const d=Ch(s),f=function gx(i){return!!i.useClass}(s);if(d||f){const D=(f?Oe(s.useClass):s).prototype.ngOnDestroy;if(D){const T=i.destroyHooks||(i.destroyHooks=[]);if(!d&&s.multi){const x=T.indexOf(a);-1===x?T.push(a,[c,D]):T[x+1].push(c,D)}else T.push(a,D)}}}function mw(i,s,a){return a&&i.componentProviders++,i.multi.push(s)-1}function rf(i,s,a,c){for(let d=a;d<c;d++)if(s[d]===i)return d;return-1}function Dd(i,s,a,c){return Fu(this.multi,[])}function Cd(i,s,a,c){const d=this.multi;let f;if(this.providerFactory){const y=this.providerFactory.componentProviders,w=Ki(a,a[et],this.providerFactory.index,c);f=w.slice(0,y),Fu(d,f);for(let D=y;D<w.length;D++)f.push(w[D])}else f=[],Fu(d,f);return f}function Fu(i,s){for(let a=0;a<i.length;a++)s.push((0,i[a])());return s}function yw(i,s=[]){return a=>{a.providersResolver=(c,d)=>function ku(i,s,a){const c=jt();if(c.firstCreatePass){const d=ni(i);uv(a,c.data,c.blueprint,d,!0),uv(s,c.data,c.blueprint,d,!1)}}(c,d?d(i):i,s)}}class Lu{}class cv{}function bC(i,s){return new vw(i,s??null,[])}class vw extends Lu{constructor(s,a,c){super(),this._parent=a,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new I0(this);const d=Hr(s);this._bootstrapComponents=Ta(d.bootstrap),this._r3Injector=MI(s,a,[{provide:Lu,useValue:this},{provide:Fp,useValue:this.componentFactoryResolver},...c],Q(s),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(s)}get injector(){return this._r3Injector}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class lv extends cv{constructor(s){super(),this.moduleType=s}create(s){return new vw(this.moduleType,s,[])}}class Mg extends Lu{constructor(s){super(),this.componentFactoryResolver=new I0(this),this.instance=null;const a=new bh([...s.providers,{provide:Lu,useValue:this},{provide:Fp,useValue:this.componentFactoryResolver}],s.parent||ty(),s.debugName,new Set(["environment"]));this.injector=a,s.runEnvironmentInitializers&&a.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(s){this.injector.onDestroy(s)}}function sf(i,s,a=null){return new Mg({providers:i,parent:s,debugName:a,runEnvironmentInitializers:!0}).injector}let bd=(()=>{class i{constructor(a){this._injector=a,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(a){if(!a.standalone)return null;if(!this.cachedInjectors.has(a)){const c=hI(0,a.type),d=c.length>0?sf([c],this._injector,`Standalone[${a.type.name}]`):null;this.cachedInjectors.set(a,d)}return this.cachedInjectors.get(a)}ngOnDestroy(){try{for(const a of this.cachedInjectors.values())null!==a&&a.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=ut({token:i,providedIn:"environment",factory:()=>new i(bt(Vn))})}return i})();function SC(i){i.getStandaloneInjector=s=>s.get(bd).getOrCreateStandaloneInjector(i)}function bi(i,s,a,c,d,f){const y=s+a;return Li(i,y,d)?function xs(i,s,a){return i[s]=a}(i,y+1,f?c.call(f,d):c(d)):function uf(i,s){const a=i[s];return a===Ut?void 0:a}(i,y+1)}function Vu(i,s){const a=jt();let c;const d=i+Ft;a.firstCreatePass?(c=function cf(i,s){if(s)for(let a=s.length-1;a>=0;a--){const c=s[a];if(i===c.name)return c}}(s,a.pipeRegistry),a.data[d]=c,c.onDestroy&&(a.destroyHooks??=[]).push(d,c.onDestroy)):c=a.data[d];const f=c.factory||(c.factory=_o(c.type)),w=cn(td);try{const D=Po(!1),T=f();return Po(D),function M0(i,s,a,c){a>=i.data.length&&(i.data[a]=null,i.blueprint[a]=null),s[a]=c}(a,Me(),d,T),T}finally{cn(w)}}function LC(i,s,a){const c=i+Ft,d=Me(),f=So(d,c);return function Pg(i,s){return i[et].data[s].pure}(d,c)?bi(d,function si(){const i=It.lFrame;let s=i.bindingRootIndex;return-1===s&&(s=i.bindingRootIndex=i.tView.bindingStartIndex),s}(),s,f.transform,a,f):f.transform(a)}function BC(){return this._results[Symbol.iterator]()}class bw{static#e=Symbol.iterator;get changes(){return this._changes||(this._changes=new Ms)}constructor(s=!1){this._emitDistinctChangesOnly=s,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=bw.prototype;a[Symbol.iterator]||(a[Symbol.iterator]=BC)}get(s){return this._results[s]}map(s){return this._results.map(s)}filter(s){return this._results.filter(s)}find(s){return this._results.find(s)}reduce(s,a){return this._results.reduce(s,a)}forEach(s){this._results.forEach(s)}some(s){return this._results.some(s)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(s,a){const c=this;c.dirty=!1;const d=function ci(i){return i.flat(Number.POSITIVE_INFINITY)}(s);(this._changesDetected=!function ki(i,s,a){if(i.length!==s.length)return!1;for(let c=0;c<i.length;c++){let d=i[c],f=s[c];if(a&&(d=a(d),f=a(f)),f!==d)return!1}return!0}(c._results,d,a))&&(c._results=d,c.length=d.length,c.last=d[this.length-1],c.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}function mv(i,s,a,c=!0){const d=s[et];if(function g_(i,s,a,c){const d=mr+c,f=a.length;c>0&&(a[d-1][Gr]=s),c<f-mr?(s[Gr]=a[d],Dm(a,mr+c,s)):(a.push(s),s[Gr]=null),s[Cn]=a;const y=s[sl];null!==y&&a!==y&&function Ip(i,s){const a=i[or];s[bn]!==s[Cn][Cn][bn]&&(i[Yu]=!0),null===a?i[or]=[s]:a.push(s)}(y,s);const w=s[ir];null!==w&&w.insertView(i),s[wt]|=128}(d,s,i,a),c){const f=Gm(a,i),y=s[Et],w=$m(y,i[sr]);null!==w&&function Vm(i,s,a,c,d,f){c[Dn]=d,c[pr]=s,Hl(i,c,a,1,d,f)}(d,i[pr],y,s,w,f)}}let kg=(()=>{class i{static#e=this.__NG_ELEMENT_ID__=HC}return i})();const $C=kg,pA=class extends $C{constructor(s,a,c){super(),this._declarationLView=s,this._declarationTContainer=a,this.elementRef=c}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(s,a){return this.createEmbeddedViewImpl(s,a)}createEmbeddedViewImpl(s,a,c){const d=function jC(i,s,a,c){const d=s.tView,w=so(i,d,a,4096&i[wt]?4096:16,null,s,null,null,null,c?.injector??null,c?.hydrationInfo??null);w[sl]=i[s.index];const T=i[ir];return null!==T&&(w[ir]=T.createEmbeddedView(d)),by(d,w,a),w}(this._declarationLView,this._declarationTContainer,s,{injector:a,hydrationInfo:c});return new zo(d)}};function HC(){return La(lr(),Me())}function La(i,s){return 4&i.type?new pA(s,i,Jl(i,s)):null}let vv=(()=>{class i{static#e=this.__NG_ELEMENT_ID__=mA}return i})();function mA(){return Fg(lr(),Me())}const yA=vv,_v=class extends yA{constructor(s,a,c){super(),this._lContainer=s,this._hostTNode=a,this._hostLView=c}get element(){return Jl(this._hostTNode,this._hostLView)}get injector(){return new Fn(this._hostTNode,this._hostLView)}get parentInjector(){const s=Qs(this._hostTNode,this._hostLView);if(Ro(s)){const a=xn(s,this._hostLView),c=Oo(s);return new Fn(a[et].data[c+8],a)}return new Fn(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const a=ZC(this._lContainer);return null!==a&&a[s]||null}get length(){return this._lContainer.length-mr}createEmbeddedView(s,a,c){let d,f;"number"==typeof c?d=c:null!=c&&(d=c.index,f=c.injector);const w=s.createEmbeddedViewImpl(a||{},f,null);return this.insertImpl(w,d,false),w}createComponent(s,a,c,d,f){const y=s&&!function Ir(i){return"function"==typeof i}(s);let w;if(y)w=a;else{const Le=a||{};w=Le.index,c=Le.injector,d=Le.projectableNodes,f=Le.environmentInjector||Le.ngModuleRef}const D=y?s:new Ii(zt(s)),T=c||this.parentInjector;if(!f&&null==D.ngModule){const Je=(y?T:this.parentInjector).get(Vn,null);Je&&(f=Je)}zt(D.componentType??{});const J=D.create(T,d,null,f);return this.insertImpl(J.hostView,w,false),J}insert(s,a){return this.insertImpl(s,a,!1)}insertImpl(s,a,c){const d=s._lView;if(function ep(i){return Or(i[Cn])}(d)){const D=this.indexOf(s);if(-1!==D)this.detach(D);else{const T=d[Cn],x=new _v(T,T[pr],T[Cn]);x.detach(x.indexOf(s))}}const y=this._adjustIndex(a),w=this._lContainer;return mv(w,d,y,!c),s.attachToViewContainerRef(),Dm(ff(w),y,s),s}move(s,a){return this.insert(s,a)}indexOf(s){const a=ZC(this._lContainer);return null!==a?a.indexOf(s):-1}remove(s){const a=this._adjustIndex(s,-1),c=Bm(this._lContainer,a);c&&(ap(ff(this._lContainer),a),m_(c[et],c))}detach(s){const a=this._adjustIndex(s,-1),c=Bm(this._lContainer,a);return c&&null!=ap(ff(this._lContainer),a)?new zo(c):null}_adjustIndex(s,a=0){return s??this.length+a}};function ZC(i){return i[8]}function ff(i){return i[8]||(i[8]=[])}function Fg(i,s){let a;const c=s[i.index];return Or(c)?a=c:(a=JI(c,s,null,i),s[i.index]=a,Qp(s,a)),Aw(a,s,i,c),new _v(a,i,s)}let Aw=function wv(i,s,a,c){if(i[sr])return;let d;d=8&a.type?nn(c):function vA(i,s){const a=i[Et],c=a.createComment(""),d=yr(s,i);return ro(a,$m(a,d),c,function OT(i,s){return i.nextSibling(s)}(a,d),!1),c}(s,a),i[sr]=d};class pf{constructor(s){this.queryList=s,this.matches=null}clone(){return new pf(this.queryList)}setDirty(){this.queryList.setDirty()}}class Vg{constructor(s=[]){this.queries=s}createEmbeddedView(s){const a=s.queries;if(null!==a){const c=null!==s.contentQueries?s.contentQueries[0]:a.length,d=[];for(let f=0;f<c;f++){const y=a.getByIndex(f);d.push(this.queries[y.indexInDeclarationView].clone())}return new Vg(d)}return null}insertView(s){this.dirtyQueriesWithMatches(s)}detachView(s){this.dirtyQueriesWithMatches(s)}dirtyQueriesWithMatches(s){for(let a=0;a<this.queries.length;a++)null!==Lw(s,a).matches&&this.queries[a].setDirty()}}class Ev{constructor(s,a,c=null){this.predicate=s,this.flags=a,this.read=c}}class Iv{constructor(s=[]){this.queries=s}elementStart(s,a){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(s,a)}elementEnd(s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(s)}embeddedTView(s){let a=null;for(let c=0;c<this.length;c++){const d=null!==a?a.length:0,f=this.getByIndex(c).embeddedTView(s,d);f&&(f.indexInDeclarationView=c,null!==a?a.push(f):a=[f])}return null!==a?new Iv(a):null}template(s,a){for(let c=0;c<this.queries.length;c++)this.queries[c].template(s,a)}getByIndex(s){return this.queries[s]}get length(){return this.queries.length}track(s){this.queries.push(s)}}class xw{constructor(s,a=-1){this.metadata=s,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(s,a){this.isApplyingToNode(a)&&this.matchTNode(s,a)}elementEnd(s){this._declarationNodeIndex===s.index&&(this._appliesToNextNode=!1)}template(s,a){this.elementStart(s,a)}embeddedTView(s,a){return this.isApplyingToNode(s)?(this.crossesNgTemplate=!0,this.addMatch(-s.index,a),new xw(this.metadata)):null}isApplyingToNode(s){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let c=s.parent;for(;null!==c&&8&c.type&&c.index!==a;)c=c.parent;return a===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(s,a){const c=this.metadata.predicate;if(Array.isArray(c))for(let d=0;d<c.length;d++){const f=c[d];this.matchTNodeWithReadOption(s,a,KC(a,f)),this.matchTNodeWithReadOption(s,a,xt(a,s,f,!1,!1))}else c===kg?4&a.type&&this.matchTNodeWithReadOption(s,a,-1):this.matchTNodeWithReadOption(s,a,xt(a,s,c,!1,!1))}matchTNodeWithReadOption(s,a,c){if(null!==c){const d=this.metadata.read;if(null!==d)if(d===Mc||d===vv||d===kg&&4&a.type)this.addMatch(a.index,-2);else{const f=xt(a,s,d,!1,!1);null!==f&&this.addMatch(a.index,f)}else this.addMatch(a.index,c)}}addMatch(s,a){null===this.matches?this.matches=[s,a]:this.matches.push(s,a)}}function KC(i,s){const a=i.localNames;if(null!==a)for(let c=0;c<a.length;c+=2)if(a[c]===s)return a[c+1];return null}function Nw(i,s,a,c){return-1===a?function YC(i,s){return 11&i.type?Jl(i,s):4&i.type?La(i,s):null}(s,i):-2===a?function _A(i,s,a){return a===Mc?Jl(s,i):a===kg?La(s,i):a===vv?Fg(s,i):void 0}(i,s,c):Ki(i,i[et],a,s)}function Rw(i,s,a,c){const d=s[ir].queries[c];if(null===d.matches){const f=i.data,y=a.matches,w=[];for(let D=0;D<y.length;D+=2){const T=y[D];w.push(T<0?null:Nw(s,f[T],y[D+1],a.metadata.read))}d.matches=w}return d.matches}function Ow(i,s,a,c){const d=i.queries.getByIndex(a),f=d.matches;if(null!==f){const y=Rw(i,s,d,a);for(let w=0;w<f.length;w+=2){const D=f[w];if(D>0)c.push(y[w/2]);else{const T=f[w+1],x=s[-D];for(let F=mr;F<x.length;F++){const z=x[F];z[sl]===z[Cn]&&Ow(z[et],z,T,c)}if(null!==x[or]){const F=x[or];for(let z=0;z<F.length;z++){const J=F[z];Ow(J[et],J,T,c)}}}}}return c}function Pw(i){const s=Me(),a=jt(),c=dc();oh(c+1);const d=Lw(a,c);if(i.dirty&&function Xf(i){return 4==(4&i[wt])}(s)===(2==(2&d.metadata.flags))){if(null===d.matches)i.reset([]);else{const f=d.crossesNgTemplate?Ow(a,s,c,[]):Rw(a,s,d,c);i.reset(f,j_),i.notifyOnChanges()}return!0}return!1}function Sd(i,s,a,c){const d=jt();if(d.firstCreatePass){const f=lr();(function Fw(i,s,a){null===i.queries&&(i.queries=new Iv),i.queries.track(new xw(s,a))})(d,new Ev(s,a,c),f.index),function QC(i,s){const a=i.contentQueries||(i.contentQueries=[]);s!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,s)}(d,i),2==(2&a)&&(d.staticContentQueries=!0)}!function Ug(i,s,a){const c=new bw(4==(4&a));(function zI(i,s,a,c){const d=Jp(s);d.push(a),i.firstCreatePass&&p0(i).push(c,d.length-1)})(i,s,c,c.destroy),null===s[ir]&&(s[ir]=new Vg),s[ir].queries.push(new pf(c))}(d,Me(),a)}function Ad(){return function kw(i,s){return i[ir].queries[s].queryList}(Me(),dc())}function Lw(i,s){return i.queries.getByIndex(s)}function JC(i,s){return La(i,s)}function Md(i){return!!Hr(i)}const vb=new dn("Application Initializer");let Hg=(()=>{class i{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((a,c)=>{this.resolve=a,this.reject=c}),this.appInits=Pt(vb,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const a=[];for(const d of this.appInits){const f=d();if(N0(f))a.push(f);else if(TD(f)){const y=new Promise((w,D)=>{f.subscribe({complete:w,error:D})});a.push(y)}}const c=()=>{this.done=!0,this.resolve()};Promise.all(a).then(()=>{c()}).catch(d=>{this.reject(d)}),0===a.length&&c(),this.initialized=!0}static#e=this.\u0275fac=function(c){return new(c||i)};static#t=this.\u0275prov=ut({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),_b=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}static#e=this.\u0275fac=function(c){return new(c||i)};static#t=this.\u0275prov=ut({token:i,factory:i.\u0275fac,providedIn:"platform"})}return i})();const Gg=new dn("LocaleId",{providedIn:"root",factory:()=>Pt(Gg,_t.Optional|_t.SkipSelf)||function Ww(){return typeof $localize<"u"&&$localize.locale||yd}()}),Zw=new dn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});let Uu=(()=>{class i{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new ne.X(!1)}add(){this.hasPendingTasks.next(!0);const a=this.taskId++;return this.pendingTasks.add(a),a}remove(a){this.pendingTasks.delete(a),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(c){return new(c||i)};static#t=this.\u0275prov=ut({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();class Kw{constructor(s,a){this.ngModuleFactory=s,this.componentFactories=a}}let wf=(()=>{class i{compileModuleSync(a){return new lv(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const c=this.compileModuleSync(a),f=Ta(Hr(a).declarations).reduce((y,w)=>{const D=zt(w);return D&&y.push(new Ii(D)),y},[]);return new Kw(c,f)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}static#e=this.\u0275fac=function(c){return new(c||i)};static#t=this.\u0275prov=ut({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const Ab=new dn(""),Pv=new dn("");let rE,Mb=(()=>{class i{constructor(a,c,d){this._ngZone=a,this.registry=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,rE||(function xb(i){rE=i}(d),d.addToWindow(c)),this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{li.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(a)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,c,d){let f=-1;c&&c>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==f),a(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:a,timeoutId:f,updateCb:d})}whenStable(a,c,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,c,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(a){this.registry.registerApplication(a,this)}unregisterApplication(a){this.registry.unregisterApplication(a)}findProviders(a,c,d){return[]}static#e=this.\u0275fac=function(c){return new(c||i)(bt(li),bt(kv),bt(Pv))};static#t=this.\u0275prov=ut({token:i,factory:i.\u0275fac})}return i})(),kv=(()=>{class i{constructor(){this._applications=new Map}registerApplication(a,c){this._applications.set(a,c)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,c=!0){return rE?.findTestabilityInTree(this,a,c)??null}static#e=this.\u0275fac=function(c){return new(c||i)};static#t=this.\u0275prov=ut({token:i,factory:i.\u0275fac,providedIn:"platform"})}return i})(),Va=null;const Nb=new dn("AllowMultipleToken"),Wg=new dn("PlatformDestroyListeners"),iE=new dn("appBootstrapListener");class aE{constructor(s,a){this.name=s,this.token=a}}function Vv(i,s,a=[]){const c=`Platform: ${s}`,d=new dn(c);return(f=[])=>{let y=Zg();if(!y||y.injector.get(Nb,!1)){const w=[...a,...f,{provide:d,useValue:!0}];i?i(w):function Df(i){if(Va&&!Va.get(Nb,!1))throw new re(400,!1);(function Fv(){!function qf(i){Zd=i}(()=>{throw new re(600,!1)})})(),Va=i;const s=i.get(Ob);(function Lv(i){i.get(ry,null)?.forEach(a=>a())})(i)}(function Uv(i=[],s){return Ho.create({name:s,providers:[{provide:gI,useValue:"platform"},{provide:Wg,useValue:new Set([()=>Va=null])},...i]})}(w,c))}return function Bu(i){const s=Zg();if(!s)throw new re(401,!1);return s}()}}function Zg(){return Va?.get(Ob)??null}let Ob=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,c){const d=function uE(i="zone.js",s){return"noop"===i?new Mh:"zone.js"===i?new li(s):i}(c?.ngZone,function Pb(i){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:i?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:i?.runCoalescing??!1}}({eventCoalescing:c?.ngZoneEventCoalescing,runCoalescing:c?.ngZoneRunCoalescing}));return d.run(()=>{const f=function TC(i,s,a){return new vw(i,s,a)}(a.moduleType,this.injector,function Vb(i){return[{provide:li,useFactory:i},{provide:Qm,multi:!0,useFactory:()=>{const s=Pt(cE,{optional:!0});return()=>s.initialize()}},{provide:jv,useFactory:Lb},{provide:FI,useFactory:LI}]}(()=>d)),y=f.injector.get(xc,null);return d.runOutsideAngular(()=>{const w=d.onError.subscribe({next:D=>{y.handleError(D)}});f.onDestroy(()=>{bf(this._modules,f),w.unsubscribe()})}),function kb(i,s,a){try{const c=a();return N0(c)?c.catch(d=>{throw s.runOutsideAngular(()=>i.handleError(d)),d}):c}catch(c){throw s.runOutsideAngular(()=>i.handleError(c)),c}}(y,d,()=>{const w=f.injector.get(Hg);return w.runInitializers(),w.donePromise.then(()=>(function tw(i){Ke(i,"Expected localeId to be defined"),"string"==typeof i&&(vd=i.toLowerCase().replace(/_/g,"-"))}(f.injector.get(Gg,yd)||yd),this._moduleDoBootstrap(f),f))})})}bootstrapModule(a,c=[]){const d=Bv({},c);return function sE(i,s,a){const c=new lv(a);return Promise.resolve(c)}(0,0,a).then(f=>this.bootstrapModuleFactory(f,d))}_moduleDoBootstrap(a){const c=a.injector.get(Cf);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(d=>c.bootstrap(d));else{if(!a.instance.ngDoBootstrap)throw new re(-403,!1);a.instance.ngDoBootstrap(c)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new re(404,!1);this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const a=this._injector.get(Wg,null);a&&(a.forEach(c=>c()),a.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(c){return new(c||i)(bt(Ho))};static#t=this.\u0275prov=ut({token:i,factory:i.\u0275fac,providedIn:"platform"})}return i})();function Bv(i,s){return Array.isArray(s)?s.reduce(Bv,i):{...i,...s}}let Cf=(()=>{class i{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Pt(jv),this.zoneIsStable=Pt(FI),this.componentTypes=[],this.components=[],this.isStable=Pt(Uu).hasPendingTasks.pipe((0,Ne.w)(a=>a?(0,he.of)(!1):this.zoneIsStable),(0,ue.x)(),(0,pe.B)()),this._injector=Pt(Vn)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(a,c){const d=a instanceof II;if(!this._injector.get(Hg).done)throw!d&&Bs(a),new re(405,!1);let y;y=d?a:this._injector.get(Fp).resolveComponentFactory(a),this.componentTypes.push(y.componentType);const w=function oE(i){return i.isBoundToModule}(y)?void 0:this._injector.get(Lu),T=y.create(Ho.NULL,[],c||y.selector,w),x=T.location.nativeElement,F=T.injector.get(Ab,null);return F?.registerApplication(x),T.onDestroy(()=>{this.detachView(T.hostView),bf(this.components,T),F?.unregisterApplication(x)}),this._loadComponent(T),T}tick(){if(this._runningTick)throw new re(101,!1);try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this.internalErrorHandler(a)}finally{this._runningTick=!1}}attachView(a){const c=a;this._views.push(c),c.attachToAppRef(this)}detachView(a){const c=a;bf(this._views,c),c.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a);const c=this._injector.get(iE,[]);c.push(...this._bootstrapListeners),c.forEach(d=>d(a))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(a=>a()),this._views.slice().forEach(a=>a.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(a){return this._destroyListeners.push(a),()=>bf(this._destroyListeners,a)}destroy(){if(this._destroyed)throw new re(406,!1);const a=this._injector;a.destroy&&!a.destroyed&&a.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(c){return new(c||i)};static#t=this.\u0275prov=ut({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function bf(i,s){const a=i.indexOf(s);a>-1&&i.splice(a,1)}const jv=new dn("",{providedIn:"root",factory:()=>Pt(xc).handleError.bind(void 0)});function Lb(){const i=Pt(li),s=Pt(xc);return a=>i.runOutsideAngular(()=>s.handleError(a))}let cE=(()=>{class i{constructor(){this.zone=Pt(li),this.applicationRef=Pt(Cf)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(c){return new(c||i)};static#t=this.\u0275prov=ut({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function lE(){return!1}let VA=(()=>{class i{static#e=this.__NG_ELEMENT_ID__=Kg}return i})();function Kg(i){return function UA(i,s,a){if(vo(i)&&!a){const c=vr(i.index,s);return new zo(c,c)}return 47&i.type?new zo(s[bn],s):null}(lr(),Me(),16==(16&i))}class qv{constructor(){}supports(s){return Bh(s)}create(s){return new Af(s)}}const $b=(i,s)=>s;class Af{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||$b}forEachItem(s){let a;for(a=this._itHead;null!==a;a=a._next)s(a)}forEachOperation(s){let a=this._itHead,c=this._removalsHead,d=0,f=null;for(;a||c;){const y=!c||a&&a.currentIndex<Gb(c,d,f)?a:c,w=Gb(y,d,f),D=y.currentIndex;if(y===c)d--,c=c._nextRemoved;else if(a=a._next,null==y.previousIndex)d++;else{f||(f=[]);const T=w-d,x=D-d;if(T!=x){for(let z=0;z<T;z++){const J=z<f.length?f[z]:f[z]=0,_e=J+z;x<=_e&&_e<T&&(f[z]=J+1)}f[y.previousIndex]=x-T}}w!==D&&s(y,w,D)}}forEachPreviousItem(s){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachMovedItem(s){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}forEachIdentityChange(s){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)s(a)}diff(s){if(null==s&&(s=[]),!Bh(s))throw new re(900,!1);return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let d,f,y,a=this._itHead,c=!1;if(Array.isArray(s)){this.length=s.length;for(let w=0;w<this.length;w++)f=s[w],y=this._trackByFn(w,f),null!==a&&Object.is(a.trackById,y)?(c&&(a=this._verifyReinsertion(a,f,y,w)),Object.is(a.item,f)||this._addIdentityChange(a,f)):(a=this._mismatch(a,f,y,w),c=!0),a=a._next}else d=0,function xS(i,s){if(Array.isArray(i))for(let a=0;a<i.length;a++)s(i[a]);else{const a=i[Symbol.iterator]();let c;for(;!(c=a.next()).done;)s(c.value)}}(s,w=>{y=this._trackByFn(d,w),null!==a&&Object.is(a.trackById,y)?(c&&(a=this._verifyReinsertion(a,w,y,d)),Object.is(a.item,w)||this._addIdentityChange(a,w)):(a=this._mismatch(a,w,y,d),c=!0),a=a._next,d++}),this.length=d;return this._truncate(a),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,a,c,d){let f;return null===s?f=this._itTail:(f=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._reinsertAfter(s,f,d)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(c,d))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._moveAfter(s,f,d)):s=this._addAfter(new pE(a,c),f,d),s}_verifyReinsertion(s,a,c,d){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==f?s=this._reinsertAfter(f,s._prev,d):s.currentIndex!=d&&(s.currentIndex=d,this._addToMoves(s,d)),s}_truncate(s){for(;null!==s;){const a=s._next;this._addToRemovals(this._unlink(s)),s=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,a,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const d=s._prevRemoved,f=s._nextRemoved;return null===d?this._removalsHead=f:d._nextRemoved=f,null===f?this._removalsTail=d:f._prevRemoved=d,this._insertAfter(s,a,c),this._addToMoves(s,c),s}_moveAfter(s,a,c){return this._unlink(s),this._insertAfter(s,a,c),this._addToMoves(s,c),s}_addAfter(s,a,c){return this._insertAfter(s,a,c),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,a,c){const d=null===a?this._itHead:a._next;return s._next=d,s._prev=a,null===d?this._itTail=s:d._prev=s,null===a?this._itHead=s:a._next=s,null===this._linkedRecords&&(this._linkedRecords=new Hb),this._linkedRecords.put(s),s.currentIndex=c,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const a=s._prev,c=s._next;return null===a?this._itHead=c:a._next=c,null===c?this._itTail=a:c._prev=a,s}_addToMoves(s,a){return s.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Hb),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,a){return s.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class pE{constructor(s,a){this.item=s,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class WA{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,a){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===a||a<=c.currentIndex)&&Object.is(c.trackById,s))return c;return null}remove(s){const a=s._prevDup,c=s._nextDup;return null===a?this._head=c:a._nextDup=c,null===c?this._tail=a:c._prevDup=a,null===this._head}}class Hb{constructor(){this.map=new Map}put(s){const a=s.trackById;let c=this.map.get(a);c||(c=new WA,this.map.set(a,c)),c.add(s)}get(s,a){const d=this.map.get(s);return d?d.get(s,a):null}remove(s){const a=s.trackById;return this.map.get(a).remove(s)&&this.map.delete(a),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Gb(i,s,a){const c=i.previousIndex;if(null===c)return c;let d=0;return a&&c<a.length&&(d=a[c]),c+s+d}class gE{constructor(){}supports(s){return s instanceof Map||Oy(s)}create(){return new ZA}}class ZA{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let a;for(a=this._mapHead;null!==a;a=a._next)s(a)}forEachPreviousItem(s){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)s(a)}forEachChangedItem(s){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}diff(s){if(s){if(!(s instanceof Map||Oy(s)))throw new re(900,!1)}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(s,(c,d)=>{if(a&&a.key===d)this._maybeAddToChanges(a,c),this._appendAfter=a,a=a._next;else{const f=this._getOrCreateRecordForKey(d,c);a=this._insertBeforeOrAppend(a,f)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let c=a;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,a){if(s){const c=s._prev;return a._next=s,a._prev=c,s._prev=a,c&&(c._next=a),s===this._mapHead&&(this._mapHead=a),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(s,a){if(this._records.has(s)){const d=this._records.get(s);this._maybeAddToChanges(d,a);const f=d._prev,y=d._next;return f&&(f._next=y),y&&(y._prev=f),d._next=null,d._prev=null,d}const c=new zb(s);return this._records.set(s,c),c.currentValue=a,this._addToAdditions(c),c}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,a){Object.is(a,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=a,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,a){s instanceof Map?s.forEach(a):Object.keys(s).forEach(c=>a(s[c],c))}}class zb{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function qb(){return new mE([new qv])}let mE=(()=>{class i{static#e=this.\u0275prov=ut({token:i,providedIn:"root",factory:qb});constructor(a){this.factories=a}static create(a,c){if(null!=c){const d=c.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:c=>i.create(a,c||qb()),deps:[[i,new _c,new xl]]}}find(a){const c=this.factories.find(d=>d.supports(a));if(null!=c)return c;throw new re(901,!1)}}return i})();function Wb(){return new Wv([new gE])}let Wv=(()=>{class i{static#e=this.\u0275prov=ut({token:i,providedIn:"root",factory:Wb});constructor(a){this.factories=a}static create(a,c){if(c){const d=c.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:c=>i.create(a,c||Wb()),deps:[[i,new _c,new xl]]}}find(a){const c=this.factories.find(d=>d.supports(a));if(c)return c;throw new re(901,!1)}}return i})();const Kb=Vv(null,"core",[]);let Zv=(()=>{class i{constructor(a){}static#e=this.\u0275fac=function(c){return new(c||i)(bt(Cf))};static#t=this.\u0275mod=Ga({type:i});static#n=this.\u0275inj=mn({})}return i})();function JA(i){return"boolean"==typeof i?i:null!=i&&"false"!==i}function Zx(i){const s=zt(i);if(!s)return null;const a=new Ii(s);return{get selector(){return a.selector},get type(){return a.componentType},get inputs(){return a.inputs},get outputs(){return a.outputs},get ngContentSelectors(){return a.ngContentSelectors},get isStandalone(){return s.standalone},get isSignal(){return s.signals}}}},3399:(at,Ce,O)=>{O.d(Ce,{Z:()=>qe});var g=O(9058),K=O(4537),P=O(7592),Y=O(7879);class ne{constructor(We,Pe){this._delegate=We,this.firebase=Pe,(0,P._addComponent)(We,new K.wA("app-compat",()=>this,"PUBLIC")),this.container=We.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(We){this._delegate.automaticDataCollectionEnabled=We}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(We=>{this._delegate.checkDestroyed(),We()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,P.deleteApp)(this._delegate)))}_getService(We,Pe=P._DEFAULT_ENTRY_NAME){var ct;this._delegate.checkDestroyed();const lt=this._delegate.container.getProvider(We);return!lt.isInitialized()&&"EXPLICIT"===(null===(ct=lt.getComponent())||void 0===ct?void 0:ct.instantiationMode)&&lt.initialize(),lt.getImmediate({identifier:Pe})}_removeServiceInstance(We,Pe=P._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(We).clearInstance(Pe)}_addComponent(We){(0,P._addComponent)(this._delegate,We)}_addOrOverwriteComponent(We){(0,P._addOrOverwriteComponent)(this._delegate,We)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const pe=new g.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),L=function ue(){const Oe=function Ne(Oe){const We={},Pe={__esModule:!0,initializeApp:function re(ke,oe={}){const q=P.initializeApp(ke,oe);if((0,g.r3)(We,q.name))return We[q.name];const Be=new Oe(q,Pe);return We[q.name]=Be,Be},app:lt,registerVersion:P.registerVersion,setLogLevel:P.setLogLevel,onLog:P.onLog,apps:null,SDK_VERSION:P.SDK_VERSION,INTERNAL:{registerComponent:function ee(ke){const oe=ke.name,q=oe.replace("-compat","");if(P._registerComponent(ke)&&"PUBLIC"===ke.type){const Be=(ht=lt())=>{if("function"!=typeof ht[q])throw pe.create("invalid-app-argument",{appName:oe});return ht[q]()};void 0!==ke.serviceProps&&(0,g.ZB)(Be,ke.serviceProps),Pe[q]=Be,Oe.prototype[q]=function(...ht){return this._getService.bind(this,oe).apply(this,ke.multipleInstances?ht:[])}}return"PUBLIC"===ke.type?Pe[q]:null},removeApp:function ct(ke){delete We[ke]},useAsService:function Ee(ke,oe){return"serverAuth"===oe?null:oe},modularAPIs:P}};function lt(ke){if(!(0,g.r3)(We,ke=ke||P._DEFAULT_ENTRY_NAME))throw pe.create("no-app",{appName:ke});return We[ke]}return Pe.default=Pe,Object.defineProperty(Pe,"apps",{get:function ve(){return Object.keys(We).map(ke=>We[ke])}}),lt.App=Oe,Pe}(ne);return Oe.INTERNAL=Object.assign(Object.assign({},Oe.INTERNAL),{createFirebaseNamespace:ue,extendNamespace:function We(Pe){(0,g.ZB)(Oe,Pe)},createSubscribe:g.ne,ErrorFactory:g.LL,deepExtend:g.ZB}),Oe}(),j=new Y.Yd("@firebase/app-compat");if((0,g.jU)()&&void 0!==self.firebase){j.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Oe=self.firebase.SDK_VERSION;Oe&&Oe.indexOf("LITE")>=0&&j.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const qe=L;!function Se(Oe){(0,P.registerVersion)("@firebase/app-compat","0.2.13",Oe)}()},7592:(at,Ce,O)=>{O.r(Ce),O.d(Ce,{FirebaseError:()=>Y.ZR,SDK_VERSION:()=>mn,_DEFAULT_ENTRY_NAME:()=>ie,_addComponent:()=>Ie,_addOrOverwriteComponent:()=>Ae,_apps:()=>de,_clearComponents:()=>gt,_components:()=>me,_getProvider:()=>Ge,_registerComponent:()=>Ke,_removeServiceInstance:()=>Pn,deleteApp:()=>Xr,getApp:()=>rn,getApps:()=>Ar,initializeApp:()=>Zn,onLog:()=>ei,registerVersion:()=>Hn,setLogLevel:()=>vs});var g=O(5861),K=O(4537),P=O(7879),Y=O(9058),ne=O(1878);class he{constructor(G){this.container=G}getPlatformInfoString(){return this.container.getProviders().map(ge=>{if(function pe(ye){const G=ye.getComponent();return"VERSION"===G?.type}(ge)){const $e=ge.getImmediate();return`${$e.library}/${$e.version}`}return null}).filter(ge=>ge).join(" ")}}const Ne="@firebase/app",L=new P.Yd("@firebase/app"),ie="[DEFAULT]",le={[Ne]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},de=new Map,me=new Map;function Ie(ye,G){try{ye.container.addComponent(G)}catch(ge){L.debug(`Component ${G.name} failed to register with FirebaseApp ${ye.name}`,ge)}}function Ae(ye,G){ye.container.addOrOverwriteComponent(G)}function Ke(ye){const G=ye.name;if(me.has(G))return L.debug(`There were multiple attempts to register component ${G}.`),!1;me.set(G,ye);for(const ge of de.values())Ie(ge,ye);return!0}function Ge(ye,G){const ge=ye.container.getProvider("heartbeat").getImmediate({optional:!0});return ge&&ge.triggerHeartbeat(),ye.container.getProvider(G)}function Pn(ye,G,ge=ie){Ge(ye,G).clearInstance(ge)}function gt(){me.clear()}const ut=new Y.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class gn{constructor(G,ge,$e){this._isDeleted=!1,this._options=Object.assign({},G),this._config=Object.assign({},ge),this._name=ge.name,this._automaticDataCollectionEnabled=ge.automaticDataCollectionEnabled,this._container=$e,this.container.addComponent(new K.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(G){this.checkDestroyed(),this._automaticDataCollectionEnabled=G}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(G){this._isDeleted=G}checkDestroyed(){if(this.isDeleted)throw ut.create("app-deleted",{appName:this._name})}}const mn="9.23.0";function Zn(ye,G={}){let ge=ye;"object"!=typeof G&&(G={name:G});const $e=Object.assign({name:ie,automaticDataCollectionEnabled:!1},G),Ye=$e.name;if("string"!=typeof Ye||!Ye)throw ut.create("bad-app-name",{appName:String(Ye)});if(ge||(ge=(0,Y.aH)()),!ge)throw ut.create("no-options");const ft=de.get(Ye);if(ft){if((0,Y.vZ)(ge,ft.options)&&(0,Y.vZ)($e,ft.config))return ft;throw ut.create("duplicate-app",{appName:Ye})}const Jt=new K.H0(Ye);for(const V of me.values())Jt.addComponent(V);const B=new gn(ge,$e,Jt);return de.set(Ye,B),B}function rn(ye=ie){const G=de.get(ye);if(!G&&ye===ie&&(0,Y.aH)())return Zn();if(!G)throw ut.create("no-app",{appName:ye});return G}function Ar(){return Array.from(de.values())}function Xr(ye){return yi.apply(this,arguments)}function yi(){return(yi=(0,g.Z)(function*(ye){const G=ye.name;de.has(G)&&(de.delete(G),yield Promise.all(ye.container.getProviders().map(ge=>ge.delete())),ye.isDeleted=!0)})).apply(this,arguments)}function Hn(ye,G,ge){var $e;let Ye=null!==($e=le[ye])&&void 0!==$e?$e:ye;ge&&(Ye+=`-${ge}`);const ft=Ye.match(/\s|\//),Jt=G.match(/\s|\//);if(ft||Jt){const B=[`Unable to register library "${Ye}" with version "${G}":`];return ft&&B.push(`library name "${Ye}" contains illegal characters (whitespace or "/")`),ft&&Jt&&B.push("and"),Jt&&B.push(`version name "${G}" contains illegal characters (whitespace or "/")`),void L.warn(B.join(" "))}Ke(new K.wA(`${Ye}-version`,()=>({library:Ye,version:G}),"VERSION"))}function ei(ye,G){if(null!==ye&&"function"!=typeof ye)throw ut.create("invalid-log-argument");(0,P.Am)(ye,G)}function vs(ye){(0,P.Ub)(ye)}const lo="firebase-heartbeat-database",_t=1,Ct="firebase-heartbeat-store";let At=null;function cn(){return At||(At=(0,ne.X3)(lo,_t,{upgrade:(ye,G)=>{0===G&&ye.createObjectStore(Ct)}}).catch(ye=>{throw ut.create("idb-open",{originalErrorMessage:ye.message})})),At}function Kn(){return(Kn=(0,g.Z)(function*(ye){try{return yield(yield cn()).transaction(Ct).objectStore(Ct).get(_s(ye))}catch(G){if(G instanceof Y.ZR)L.warn(G.message);else{const ge=ut.create("idb-get",{originalErrorMessage:G?.message});L.warn(ge.message)}}})).apply(this,arguments)}function tn(ye,G){return kn.apply(this,arguments)}function kn(){return(kn=(0,g.Z)(function*(ye,G){try{const $e=(yield cn()).transaction(Ct,"readwrite");yield $e.objectStore(Ct).put(G,_s(ye)),yield $e.done}catch(ge){if(ge instanceof Y.ZR)L.warn(ge.message);else{const $e=ut.create("idb-set",{originalErrorMessage:ge?.message});L.warn($e.message)}}})).apply(this,arguments)}function _s(ye){return`${ye.name}!${ye.options.appId}`}class Kt{constructor(G){this.container=G,this._heartbeatsCache=null;const ge=this.container.getProvider("app").getImmediate();this._storage=new Fs(ge),this._heartbeatsCachePromise=this._storage.read().then($e=>(this._heartbeatsCache=$e,$e))}triggerHeartbeat(){var G=this;return(0,g.Z)(function*(){const $e=G.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Ye=vi();if(null===G._heartbeatsCache&&(G._heartbeatsCache=yield G._heartbeatsCachePromise),G._heartbeatsCache.lastSentHeartbeatDate!==Ye&&!G._heartbeatsCache.heartbeats.some(ft=>ft.date===Ye))return G._heartbeatsCache.heartbeats.push({date:Ye,agent:$e}),G._heartbeatsCache.heartbeats=G._heartbeatsCache.heartbeats.filter(ft=>{const Jt=new Date(ft.date).valueOf();return Date.now()-Jt<=2592e6}),G._storage.overwrite(G._heartbeatsCache)})()}getHeartbeatsHeader(){var G=this;return(0,g.Z)(function*(){if(null===G._heartbeatsCache&&(yield G._heartbeatsCachePromise),null===G._heartbeatsCache||0===G._heartbeatsCache.heartbeats.length)return"";const ge=vi(),{heartbeatsToSend:$e,unsentEntries:Ye}=function ws(ye,G=1024){const ge=[];let $e=ye.slice();for(const Ye of ye){const ft=ge.find(Jt=>Jt.agent===Ye.agent);if(ft){if(ft.dates.push(Ye.date),xr(ge)>G){ft.dates.pop();break}}else if(ge.push({agent:Ye.agent,dates:[Ye.date]}),xr(ge)>G){ge.pop();break}$e=$e.slice(1)}return{heartbeatsToSend:ge,unsentEntries:$e}}(G._heartbeatsCache.heartbeats),ft=(0,Y.L)(JSON.stringify({version:2,heartbeats:$e}));return G._heartbeatsCache.lastSentHeartbeatDate=ge,Ye.length>0?(G._heartbeatsCache.heartbeats=Ye,yield G._storage.overwrite(G._heartbeatsCache)):(G._heartbeatsCache.heartbeats=[],G._storage.overwrite(G._heartbeatsCache)),ft})()}}function vi(){return(new Date).toISOString().substring(0,10)}class Fs{constructor(G){this.app=G,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,g.Z)(function*(){return!!(0,Y.hl)()&&(0,Y.eu)().then(()=>!0).catch(()=>!1)})()}read(){var G=this;return(0,g.Z)(function*(){return(yield G._canUseIndexedDBPromise)&&(yield function In(ye){return Kn.apply(this,arguments)}(G.app))||{heartbeats:[]}})()}overwrite(G){var ge=this;return(0,g.Z)(function*(){var $e;if(yield ge._canUseIndexedDBPromise){const ft=yield ge.read();return tn(ge.app,{lastSentHeartbeatDate:null!==($e=G.lastSentHeartbeatDate)&&void 0!==$e?$e:ft.lastSentHeartbeatDate,heartbeats:G.heartbeats})}})()}add(G){var ge=this;return(0,g.Z)(function*(){var $e;if(yield ge._canUseIndexedDBPromise){const ft=yield ge.read();return tn(ge.app,{lastSentHeartbeatDate:null!==($e=G.lastSentHeartbeatDate)&&void 0!==$e?$e:ft.lastSentHeartbeatDate,heartbeats:[...ft.heartbeats,...G.heartbeats]})}})()}}function xr(ye){return(0,Y.L)(JSON.stringify({version:2,heartbeats:ye})).length}!function ns(ye){Ke(new K.wA("platform-logger",G=>new he(G),"PRIVATE")),Ke(new K.wA("heartbeat",G=>new Kt(G),"PRIVATE")),Hn(Ne,"0.9.13",ye),Hn(Ne,"0.9.13","esm2017"),Hn("fire-js","")}("")},4097:(at,Ce,O)=>{O.d(Ce,{C6:()=>g.getApps,Mq:()=>g.getApp});var g=O(7592);(0,g.registerVersion)("firebase","9.23.0","app")},120:(at,Ce,O)=>{O.d(Ce,{Z:()=>g.Z});var g=O(3399);g.Z.registerVersion("firebase","9.23.0","app-compat")},8977:(at,Ce,O)=>{O.r(Ce);var g=O(5861),K=O(3399),P=O(9058),Y=O(7592),ne=O(7582),he=O(7879),pe=O(4537);const ue={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"};const qe=function Ve(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},Oe=function Se(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},We=new P.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),ct=new he.Yd("@firebase/auth");function re(v,...h){ct.logLevel<=he.in.ERROR&&ct.error(`Auth (${Y.SDK_VERSION}): ${v}`,...h)}function ve(v,...h){throw oe(v,...h)}function ee(v,...h){return oe(v,...h)}function Ee(v,h,p){const _=Object.assign(Object.assign({},Oe()),{[h]:p});return new P.LL("auth","Firebase",_).create(h,{appName:v.name})}function ke(v,h,p){if(!(h instanceof p))throw p.name!==h.constructor.name&&ve(v,"argument-error"),Ee(v,"argument-error",`Type of ${h.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function oe(v,...h){if("string"!=typeof v){const p=h[0],_=[...h.slice(1)];return _[0]&&(_[0].appName=v.name),v._errorFactory.create(p,..._)}return We.create(v,...h)}function q(v,h,...p){if(!v)throw oe(h,...p)}function Be(v){const h="INTERNAL ASSERTION FAILED: "+v;throw re(h),new Error(h)}function ht(v,h){v||Be(h)}function Qt(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.href)||""}function fn(){return"http:"===pn()||"https:"===pn()}function pn(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.protocol)||null}class rr{constructor(h,p){this.shortDelay=h,this.longDelay=p,ht(p>h,"Short delay should be less than long delay!"),this.isMobile=(0,P.uI)()||(0,P.b$)()}get(){return function On(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(fn()||(0,P.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function ie(v,h){ht(v.emulator,"Emulator should always be set here");const{url:p}=v.emulator;return h?`${p}${h.startsWith("/")?h.slice(1):h}`:p}class le{static initialize(h,p,_){this.fetchImpl=h,p&&(this.headersImpl=p),_&&(this.responseImpl=_)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void Be("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void Be("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void Be("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const de={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},me=new rr(3e4,6e4);function Ie(v,h){return v.tenantId&&!h.tenantId?Object.assign(Object.assign({},h),{tenantId:v.tenantId}):h}function Ae(v,h,p,_){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,g.Z)(function*(v,h,p,_,S={}){return Ge(v,S,(0,g.Z)(function*(){let N={},$={};_&&("GET"===h?$=_:N={body:JSON.stringify(_)});const X=(0,P.xO)(Object.assign({key:v.config.apiKey},$)).slice(1),Te=yield v._getAdditionalHeaders();return Te["Content-Type"]="application/json",v.languageCode&&(Te["X-Firebase-Locale"]=v.languageCode),le.fetch()(ut(v,v.config.apiHost,p,X),Object.assign({method:h,headers:Te,referrerPolicy:"no-referrer"},N))}))})).apply(this,arguments)}function Ge(v,h,p){return Pn.apply(this,arguments)}function Pn(){return(Pn=(0,g.Z)(function*(v,h,p){v._canInitEmulator=!1;const _=Object.assign(Object.assign({},de),h);try{const S=new gn(v),N=yield Promise.race([p(),S.promise]);S.clearNetworkTimeout();const $=yield N.json();if("needConfirmation"in $)throw mn(v,"account-exists-with-different-credential",$);if(N.ok&&!("errorMessage"in $))return $;{const X=N.ok?$.errorMessage:$.error.message,[Te,je]=X.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Te)throw mn(v,"credential-already-in-use",$);if("EMAIL_EXISTS"===Te)throw mn(v,"email-already-in-use",$);if("USER_DISABLED"===Te)throw mn(v,"user-disabled",$);const tt=_[Te]||Te.toLowerCase().replace(/[_\s]+/g,"-");if(je)throw Ee(v,tt,je);ve(v,tt)}}catch(S){if(S instanceof P.ZR)throw S;ve(v,"network-request-failed",{message:String(S)})}})).apply(this,arguments)}function gt(v,h,p,_){return qt.apply(this,arguments)}function qt(){return(qt=(0,g.Z)(function*(v,h,p,_,S={}){const N=yield Ae(v,h,p,_,S);return"mfaPendingCredential"in N&&ve(v,"multi-factor-auth-required",{_serverResponse:N}),N})).apply(this,arguments)}function ut(v,h,p,_){const S=`${h}${p}?${_}`;return v.config.emulator?ie(v.config,S):`${v.config.apiScheme}://${S}`}class gn{constructor(h){this.auth=h,this.timer=null,this.promise=new Promise((p,_)=>{this.timer=setTimeout(()=>_(ee(this.auth,"network-request-failed")),me.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function mn(v,h,p){const _={appName:v.name};p.email&&(_.email=p.email),p.phoneNumber&&(_.phoneNumber=p.phoneNumber);const S=ee(v,h,_);return S.customData._tokenResponse=p,S}function rn(){return(rn=(0,g.Z)(function*(v,h){return Ae(v,"POST","/v1/accounts:delete",h)})).apply(this,arguments)}function Xr(){return(Xr=(0,g.Z)(function*(v,h){return Ae(v,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Hn(){return(Hn=(0,g.Z)(function*(v,h){return Ae(v,"POST","/v1/accounts:lookup",h)})).apply(this,arguments)}function ei(v){if(v)try{const h=new Date(Number(v));if(!isNaN(h.getTime()))return h.toUTCString()}catch{}}function _t(){return(_t=(0,g.Z)(function*(v,h=!1){const p=(0,P.m9)(v),_=yield p.getIdToken(h),S=At(_);q(S&&S.exp&&S.auth_time&&S.iat,p.auth,"internal-error");const N="object"==typeof S.firebase?S.firebase:void 0,$=N?.sign_in_provider;return{claims:S,token:_,authTime:ei(Ct(S.auth_time)),issuedAtTime:ei(Ct(S.iat)),expirationTime:ei(Ct(S.exp)),signInProvider:$||null,signInSecondFactor:N?.sign_in_second_factor||null}})).apply(this,arguments)}function Ct(v){return 1e3*Number(v)}function At(v){const[h,p,_]=v.split(".");if(void 0===h||void 0===p||void 0===_)return re("JWT malformed, contained fewer than 3 sections"),null;try{const S=(0,P.tV)(p);return S?JSON.parse(S):(re("Failed to decode base64 JWT payload"),null)}catch(S){return re("Caught error parsing JWT payload as JSON",S?.toString()),null}}function In(v,h){return Kn.apply(this,arguments)}function Kn(){return(Kn=(0,g.Z)(function*(v,h,p=!1){if(p)return h;try{return yield h}catch(_){throw _ instanceof P.ZR&&function tn({code:v}){return"auth/user-disabled"===v||"auth/user-token-expired"===v}(_)&&v.auth.currentUser===v&&(yield v.auth.signOut()),_}})).apply(this,arguments)}class kn{constructor(h){this.user=h,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(h){var p;if(h){const _=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),_}{this.errorBackoff=3e4;const S=(null!==(p=this.user.stsTokenManager.expirationTime)&&void 0!==p?p:0)-Date.now()-3e5;return Math.max(0,S)}}schedule(h=!1){var p=this;if(!this.isRunning)return;const _=this.getInterval(h);this.timerId=setTimeout((0,g.Z)(function*(){yield p.iteration()}),_)}iteration(){var h=this;return(0,g.Z)(function*(){try{yield h.user.getIdToken(!0)}catch(p){return void("auth/network-request-failed"===p?.code&&h.schedule(!0))}h.schedule()})()}}class _s{constructor(h,p){this.createdAt=h,this.lastLoginAt=p,this._initializeTime()}_initializeTime(){this.lastSignInTime=ei(this.lastLoginAt),this.creationTime=ei(this.createdAt)}_copy(h){this.createdAt=h.createdAt,this.lastLoginAt=h.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Wt(v){return Mr.apply(this,arguments)}function Mr(){return Mr=(0,g.Z)(function*(v){var h;const p=v.auth,_=yield v.getIdToken(),S=yield In(v,function yi(v,h){return Hn.apply(this,arguments)}(p,{idToken:_}));q(S?.users.length,p,"internal-error");const N=S.users[0];v._notifyReloadListener(N);const $=null!==(h=N.providerUserInfo)&&void 0!==h&&h.length?function Fs(v){return v.map(h=>{var{providerId:p}=h,_=(0,ne._T)(h,["providerId"]);return{providerId:p,uid:_.rawId||"",displayName:_.displayName||null,email:_.email||null,phoneNumber:_.phoneNumber||null,photoURL:_.photoUrl||null}})}(N.providerUserInfo):[],X=function ws(v,h){return[...v.filter(_=>!h.some(S=>S.providerId===_.providerId)),...h]}(v.providerData,$),tt=!!v.isAnonymous&&!(v.email&&N.passwordHash||X?.length),ot={uid:N.localId,displayName:N.displayName||null,photoURL:N.photoUrl||null,email:N.email||null,emailVerified:N.emailVerified||!1,phoneNumber:N.phoneNumber||null,tenantId:N.tenantId||null,providerData:X,metadata:new _s(N.createdAt,N.lastLoginAt),isAnonymous:tt};Object.assign(v,ot)}),Mr.apply(this,arguments)}function vi(){return(vi=(0,g.Z)(function*(v){const h=(0,P.m9)(v);yield Wt(h),yield h.auth._persistUserIfCurrent(h),h.auth._notifyListenersIfCurrent(h)})).apply(this,arguments)}function ns(){return(ns=(0,g.Z)(function*(v,h){const p=yield Ge(v,{},(0,g.Z)(function*(){const _=(0,P.xO)({grant_type:"refresh_token",refresh_token:h}).slice(1),{tokenApiHost:S,apiKey:N}=v.config,$=ut(v,S,"/v1/token",`key=${N}`),X=yield v._getAdditionalHeaders();return X["Content-Type"]="application/x-www-form-urlencoded",le.fetch()($,{method:"POST",headers:X,body:_})}));return{accessToken:p.access_token,expiresIn:p.expires_in,refreshToken:p.refresh_token}})).apply(this,arguments)}class ye{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(h){q(h.idToken,"internal-error"),q(typeof h.idToken<"u","internal-error"),q(typeof h.refreshToken<"u","internal-error");const p="expiresIn"in h&&typeof h.expiresIn<"u"?Number(h.expiresIn):function cn(v){const h=At(v);return q(h,"internal-error"),q(typeof h.exp<"u","internal-error"),q(typeof h.iat<"u","internal-error"),Number(h.exp)-Number(h.iat)}(h.idToken);this.updateTokensAndExpiration(h.idToken,h.refreshToken,p)}getToken(h,p=!1){var _=this;return(0,g.Z)(function*(){return q(!_.accessToken||_.refreshToken,h,"user-token-expired"),p||!_.accessToken||_.isExpired?_.refreshToken?(yield _.refresh(h,_.refreshToken),_.accessToken):null:_.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(h,p){var _=this;return(0,g.Z)(function*(){const{accessToken:S,refreshToken:N,expiresIn:$}=yield function xr(v,h){return ns.apply(this,arguments)}(h,p);_.updateTokensAndExpiration(S,N,Number($))})()}updateTokensAndExpiration(h,p,_){this.refreshToken=p||null,this.accessToken=h||null,this.expirationTime=Date.now()+1e3*_}static fromJSON(h,p){const{refreshToken:_,accessToken:S,expirationTime:N}=p,$=new ye;return _&&(q("string"==typeof _,"internal-error",{appName:h}),$.refreshToken=_),S&&(q("string"==typeof S,"internal-error",{appName:h}),$.accessToken=S),N&&(q("number"==typeof N,"internal-error",{appName:h}),$.expirationTime=N),$}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(h){this.accessToken=h.accessToken,this.refreshToken=h.refreshToken,this.expirationTime=h.expirationTime}_clone(){return Object.assign(new ye,this.toJSON())}_performRefresh(){return Be("not implemented")}}function G(v,h){q("string"==typeof v||typeof v>"u","internal-error",{appName:h})}class ge{constructor(h){var{uid:p,auth:_,stsTokenManager:S}=h,N=(0,ne._T)(h,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new kn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=p,this.auth=_,this.stsTokenManager=S,this.accessToken=S.accessToken,this.displayName=N.displayName||null,this.email=N.email||null,this.emailVerified=N.emailVerified||!1,this.phoneNumber=N.phoneNumber||null,this.photoURL=N.photoURL||null,this.isAnonymous=N.isAnonymous||!1,this.tenantId=N.tenantId||null,this.providerData=N.providerData?[...N.providerData]:[],this.metadata=new _s(N.createdAt||void 0,N.lastLoginAt||void 0)}getIdToken(h){var p=this;return(0,g.Z)(function*(){const _=yield In(p,p.stsTokenManager.getToken(p.auth,h));return q(_,p.auth,"internal-error"),p.accessToken!==_&&(p.accessToken=_,yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)),_})()}getIdTokenResult(h){return function lo(v){return _t.apply(this,arguments)}(this,h)}reload(){return function Kt(v){return vi.apply(this,arguments)}(this)}_assign(h){this!==h&&(q(this.uid===h.uid,this.auth,"internal-error"),this.displayName=h.displayName,this.photoURL=h.photoURL,this.email=h.email,this.emailVerified=h.emailVerified,this.phoneNumber=h.phoneNumber,this.isAnonymous=h.isAnonymous,this.tenantId=h.tenantId,this.providerData=h.providerData.map(p=>Object.assign({},p)),this.metadata._copy(h.metadata),this.stsTokenManager._assign(h.stsTokenManager))}_clone(h){const p=new ge(Object.assign(Object.assign({},this),{auth:h,stsTokenManager:this.stsTokenManager._clone()}));return p.metadata._copy(this.metadata),p}_onReload(h){q(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=h,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(h){this.reloadListener?this.reloadListener(h):this.reloadUserInfo=h}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(h,p=!1){var _=this;return(0,g.Z)(function*(){let S=!1;h.idToken&&h.idToken!==_.stsTokenManager.accessToken&&(_.stsTokenManager.updateFromServerResponse(h),S=!0),p&&(yield Wt(_)),yield _.auth._persistUserIfCurrent(_),S&&_.auth._notifyListenersIfCurrent(_)})()}delete(){var h=this;return(0,g.Z)(function*(){const p=yield h.getIdToken();return yield In(h,function Zn(v,h){return rn.apply(this,arguments)}(h.auth,{idToken:p})),h.stsTokenManager.clearRefreshToken(),h.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(h=>Object.assign({},h)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(h,p){var _,S,N,$,X,Te,je,tt;const ot=null!==(_=p.displayName)&&void 0!==_?_:void 0,Ln=null!==(S=p.email)&&void 0!==S?S:void 0,fs=null!==(N=p.phoneNumber)&&void 0!==N?N:void 0,Cc=null!==($=p.photoURL)&&void 0!==$?$:void 0,to=null!==(X=p.tenantId)&&void 0!==X?X:void 0,bc=null!==(Te=p._redirectEventId)&&void 0!==Te?Te:void 0,Ep=null!==(je=p.createdAt)&&void 0!==je?je:void 0,jo=null!==(tt=p.lastLoginAt)&&void 0!==tt?tt:void 0,{uid:no,emailVerified:Lm,isAnonymous:Vm,providerData:Eu,stsTokenManager:Tc}=p;q(no&&Tc,h,"internal-error");const g_=ye.fromJSON(this.name,Tc);q("string"==typeof no,h,"internal-error"),G(ot,h.name),G(Ln,h.name),q("boolean"==typeof Lm,h,"internal-error"),q("boolean"==typeof Vm,h,"internal-error"),G(fs,h.name),G(Cc,h.name),G(to,h.name),G(bc,h.name),G(Ep,h.name),G(jo,h.name);const Ip=new ge({uid:no,auth:h,email:Ln,emailVerified:Lm,displayName:ot,isAnonymous:Vm,photoURL:Cc,phoneNumber:fs,tenantId:to,stsTokenManager:g_,createdAt:Ep,lastLoginAt:jo});return Eu&&Array.isArray(Eu)&&(Ip.providerData=Eu.map(Um=>Object.assign({},Um))),bc&&(Ip._redirectEventId=bc),Ip}static _fromIdTokenResponse(h,p,_=!1){return(0,g.Z)(function*(){const S=new ye;S.updateFromServerResponse(p);const N=new ge({uid:p.localId,auth:h,stsTokenManager:S,isAnonymous:_});return yield Wt(N),N})()}}const $e=new Map;function Ye(v){ht(v instanceof Function,"Expected a class definition");let h=$e.get(v);return h?(ht(h instanceof v,"Instance stored in cache mismatched with class"),h):(h=new v,$e.set(v,h),h)}const Jt=(()=>{class v{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,g.Z)(function*(){return!0})()}_set(p,_){var S=this;return(0,g.Z)(function*(){S.storage[p]=_})()}_get(p){var _=this;return(0,g.Z)(function*(){const S=_.storage[p];return void 0===S?null:S})()}_remove(p){var _=this;return(0,g.Z)(function*(){delete _.storage[p]})()}_addListener(p,_){}_removeListener(p,_){}}return v.type="NONE",v})();function B(v,h,p){return`firebase:${v}:${h}:${p}`}class V{constructor(h,p,_){this.persistence=h,this.auth=p,this.userKey=_;const{config:S,name:N}=this.auth;this.fullUserKey=B(this.userKey,S.apiKey,N),this.fullPersistenceKey=B("persistence",S.apiKey,N),this.boundEventHandler=p._onStorageEvent.bind(p),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(h){return this.persistence._set(this.fullUserKey,h.toJSON())}getCurrentUser(){var h=this;return(0,g.Z)(function*(){const p=yield h.persistence._get(h.fullUserKey);return p?ge._fromJSON(h.auth,p):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(h){var p=this;return(0,g.Z)(function*(){if(p.persistence===h)return;const _=yield p.getCurrentUser();return yield p.removeCurrentUser(),p.persistence=h,_?p.setCurrentUser(_):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(h,p,_="authUser"){return(0,g.Z)(function*(){if(!p.length)return new V(Ye(Jt),h,_);const S=(yield Promise.all(p.map(function(){var je=(0,g.Z)(function*(tt){if(yield tt._isAvailable())return tt});return function(tt){return je.apply(this,arguments)}}()))).filter(je=>je);let N=S[0]||Ye(Jt);const $=B(_,h.config.apiKey,h.name);let X=null;for(const je of p)try{const tt=yield je._get($);if(tt){const ot=ge._fromJSON(h,tt);je!==N&&(X=ot),N=je;break}}catch{}const Te=S.filter(je=>je._shouldAllowMigration);return N._shouldAllowMigration&&Te.length?(N=Te[0],X&&(yield N._set($,X.toJSON())),yield Promise.all(p.map(function(){var je=(0,g.Z)(function*(tt){if(tt!==N)try{yield tt._remove($)}catch{}});return function(tt){return je.apply(this,arguments)}}())),new V(N,h,_)):new V(N,h,_)})()}}function W(v){const h=v.toLowerCase();if(h.includes("opera/")||h.includes("opr/")||h.includes("opios/"))return"Opera";if(Mt(h))return"IEMobile";if(h.includes("msie")||h.includes("trident/"))return"IE";if(h.includes("edge/"))return"Edge";if(De(h))return"Firefox";if(h.includes("silk/"))return"Silk";if(Nr(h))return"Blackberry";if(Pt(h))return"Webos";if(ae(h))return"Safari";if((h.includes("chrome/")||nt(h))&&!h.includes("edge/"))return"Chrome";if(bt(h))return"Android";{const _=v.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===_?.length)return _[1]}return"Other"}function De(v=(0,P.z$)()){return/firefox\//i.test(v)}function ae(v=(0,P.z$)()){const h=v.toLowerCase();return h.includes("safari/")&&!h.includes("chrome/")&&!h.includes("crios/")&&!h.includes("android")}function nt(v=(0,P.z$)()){return/crios\//i.test(v)}function Mt(v=(0,P.z$)()){return/iemobile/i.test(v)}function bt(v=(0,P.z$)()){return/android/i.test(v)}function Nr(v=(0,P.z$)()){return/blackberry/i.test(v)}function Pt(v=(0,P.z$)()){return/webos/i.test(v)}function Yn(v=(0,P.z$)()){return/iphone|ipad|ipod/i.test(v)||/macintosh/i.test(v)&&/mobile/i.test(v)}function Ko(v=(0,P.z$)()){return Yn(v)||bt(v)||Pt(v)||Nr(v)||/windows phone/i.test(v)||Mt(v)}function rs(v,h=[]){let p;switch(v){case"Browser":p=W((0,P.z$)());break;case"Worker":p=`${W((0,P.z$)())}-${v}`;break;default:p=v}const _=h.length?h.join(","):"FirebaseCore-web";return`${p}/JsCore/${Y.SDK_VERSION}/${_}`}function $i(){return($i=(0,g.Z)(function*(v){return(yield Ae(v,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Hi(v,h){return Gt.apply(this,arguments)}function Gt(){return(Gt=(0,g.Z)(function*(v,h){return Ae(v,"GET","/v2/recaptchaConfig",Ie(v,h))})).apply(this,arguments)}function Us(v){return void 0!==v&&void 0!==v.getResponse}function Yo(v){return void 0!==v&&void 0!==v.enterprise}class Ba{constructor(h){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===h.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=h.recaptchaKey.split("/")[3],this.emailPasswordEnabled=h.recaptchaEnforcementState.some(p=>"EMAIL_PASSWORD_PROVIDER"===p.provider&&"OFF"!==p.enforcementState)}}function is(v){return new Promise((h,p)=>{const _=document.createElement("script");_.setAttribute("src",v),_.onload=h,_.onerror=S=>{const N=ee("internal-error");N.customData=S,p(N)},_.type="text/javascript",_.charset="UTF-8",function kd(){var v,h;return null!==(h=null===(v=document.getElementsByTagName("head"))||void 0===v?void 0:v[0])&&void 0!==h?h:document}().appendChild(_)})}function Qo(v){return`__${v}${Math.floor(1e6*Math.random())}`}class Xc{constructor(h){this.type="recaptcha-enterprise",this.auth=Qn(h)}verify(h="verify",p=!1){var _=this;return(0,g.Z)(function*(){function N(){return N=(0,g.Z)(function*(X){if(!p){if(null==X.tenantId&&null!=X._agentRecaptchaConfig)return X._agentRecaptchaConfig.siteKey;if(null!=X.tenantId&&void 0!==X._tenantRecaptchaConfigs[X.tenantId])return X._tenantRecaptchaConfigs[X.tenantId].siteKey}return new Promise(function(){var Te=(0,g.Z)(function*(je,tt){Hi(X,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(ot=>{if(void 0!==ot.recaptchaKey){const Ln=new Ba(ot);return null==X.tenantId?X._agentRecaptchaConfig=Ln:X._tenantRecaptchaConfigs[X.tenantId]=Ln,je(Ln.siteKey)}tt(new Error("recaptcha Enterprise site key undefined"))}).catch(ot=>{tt(ot)})});return function(je,tt){return Te.apply(this,arguments)}}())}),N.apply(this,arguments)}function $(X,Te,je){const tt=window.grecaptcha;Yo(tt)?tt.enterprise.ready(()=>{tt.enterprise.execute(X,{action:h}).then(ot=>{Te(ot)}).catch(()=>{Te("NO_RECAPTCHA")})}):je(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((X,Te)=>{(function S(X){return N.apply(this,arguments)})(_.auth).then(je=>{if(!p&&Yo(window.grecaptcha))$(je,X,Te);else{if(typeof window>"u")return void Te(new Error("RecaptchaVerifier is only supported in browser"));is("https://www.google.com/recaptcha/enterprise.js?render="+je).then(()=>{$(je,X,Te)}).catch(tt=>{Te(tt)})}}).catch(je=>{Te(je)})})})()}}function Si(v,h,p){return ho.apply(this,arguments)}function ho(){return(ho=(0,g.Z)(function*(v,h,p,_=!1){const S=new Xc(v);let N;try{N=yield S.verify(p)}catch{N=yield S.verify(p,!0)}const $=Object.assign({},h);return Object.assign($,_?{captchaResp:N}:{captchaResponse:N}),Object.assign($,{clientType:"CLIENT_TYPE_WEB"}),Object.assign($,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),$})).apply(this,arguments)}class $a{constructor(h){this.auth=h,this.queue=[]}pushCallback(h,p){const _=N=>new Promise(($,X)=>{try{$(h(N))}catch(Te){X(Te)}});_.onAbort=p,this.queue.push(_);const S=this.queue.length-1;return()=>{this.queue[S]=()=>Promise.resolve()}}runMiddleware(h){var p=this;return(0,g.Z)(function*(){if(p.auth.currentUser===h)return;const _=[];try{for(const S of p.queue)yield S(h),S.onAbort&&_.push(S.onAbort)}catch(S){_.reverse();for(const N of _)try{N()}catch{}throw p.auth._errorFactory.create("login-blocked",{originalMessage:S?.message})}})()}}class el{constructor(h,p,_,S){this.app=h,this.heartbeatServiceProvider=p,this.appCheckServiceProvider=_,this.config=S,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new fo(this),this.idTokenSubscription=new fo(this),this.beforeStateQueue=new $a(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=We,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=h.name,this.clientVersion=S.sdkClientVersion}_initializeWithPersistence(h,p){var _=this;return p&&(this._popupRedirectResolver=Ye(p)),this._initializationPromise=this.queue((0,g.Z)(function*(){var S,N;if(!_._deleted&&(_.persistenceManager=yield V.create(_,h),!_._deleted)){if(null!==(S=_._popupRedirectResolver)&&void 0!==S&&S._shouldInitProactively)try{yield _._popupRedirectResolver._initialize(_)}catch{}yield _.initializeCurrentUser(p),_.lastNotifiedUid=(null===(N=_.currentUser)||void 0===N?void 0:N.uid)||null,!_._deleted&&(_._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var h=this;return(0,g.Z)(function*(){if(h._deleted)return;const p=yield h.assertedPersistence.getCurrentUser();if(h.currentUser||p){if(h.currentUser&&p&&h.currentUser.uid===p.uid)return h._currentUser._assign(p),void(yield h.currentUser.getIdToken());yield h._updateCurrentUser(p,!0)}})()}initializeCurrentUser(h){var p=this;return(0,g.Z)(function*(){var _;const S=yield p.assertedPersistence.getCurrentUser();let N=S,$=!1;if(h&&p.config.authDomain){yield p.getOrInitRedirectPersistenceManager();const X=null===(_=p.redirectUser)||void 0===_?void 0:_._redirectEventId,Te=N?._redirectEventId,je=yield p.tryRedirectSignIn(h);(!X||X===Te)&&je?.user&&(N=je.user,$=!0)}if(!N)return p.directlySetCurrentUser(null);if(!N._redirectEventId){if($)try{yield p.beforeStateQueue.runMiddleware(N)}catch(X){N=S,p._popupRedirectResolver._overrideRedirectResult(p,()=>Promise.reject(X))}return N?p.reloadAndSetCurrentUserOrClear(N):p.directlySetCurrentUser(null)}return q(p._popupRedirectResolver,p,"argument-error"),yield p.getOrInitRedirectPersistenceManager(),p.redirectUser&&p.redirectUser._redirectEventId===N._redirectEventId?p.directlySetCurrentUser(N):p.reloadAndSetCurrentUserOrClear(N)})()}tryRedirectSignIn(h){var p=this;return(0,g.Z)(function*(){let _=null;try{_=yield p._popupRedirectResolver._completeRedirectFn(p,h,!0)}catch{yield p._setRedirectUser(null)}return _})()}reloadAndSetCurrentUserOrClear(h){var p=this;return(0,g.Z)(function*(){try{yield Wt(h)}catch(_){if("auth/network-request-failed"!==_?.code)return p.directlySetCurrentUser(null)}return p.directlySetCurrentUser(h)})()}useDeviceLanguage(){this.languageCode=function An(){if(typeof navigator>"u")return null;const v=navigator;return v.languages&&v.languages[0]||v.language||null}()}_delete(){var h=this;return(0,g.Z)(function*(){h._deleted=!0})()}updateCurrentUser(h){var p=this;return(0,g.Z)(function*(){const _=h?(0,P.m9)(h):null;return _&&q(_.auth.config.apiKey===p.config.apiKey,p,"invalid-user-token"),p._updateCurrentUser(_&&_._clone(p))})()}_updateCurrentUser(h,p=!1){var _=this;return(0,g.Z)(function*(){if(!_._deleted)return h&&q(_.tenantId===h.tenantId,_,"tenant-id-mismatch"),p||(yield _.beforeStateQueue.runMiddleware(h)),_.queue((0,g.Z)(function*(){yield _.directlySetCurrentUser(h),_.notifyAuthListeners()}))})()}signOut(){var h=this;return(0,g.Z)(function*(){return yield h.beforeStateQueue.runMiddleware(null),(h.redirectPersistenceManager||h._popupRedirectResolver)&&(yield h._setRedirectUser(null)),h._updateCurrentUser(null,!0)})()}setPersistence(h){var p=this;return this.queue((0,g.Z)(function*(){yield p.assertedPersistence.setPersistence(Ye(h))}))}initializeRecaptchaConfig(){var h=this;return(0,g.Z)(function*(){const p=yield Hi(h,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),_=new Ba(p);null==h.tenantId?h._agentRecaptchaConfig=_:h._tenantRecaptchaConfigs[h.tenantId]=_,_.emailPasswordEnabled&&new Xc(h).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(h){this._errorFactory=new P.LL("auth","Firebase",h())}onAuthStateChanged(h,p,_){return this.registerStateListener(this.authStateSubscription,h,p,_)}beforeAuthStateChanged(h,p){return this.beforeStateQueue.pushCallback(h,p)}onIdTokenChanged(h,p,_){return this.registerStateListener(this.idTokenSubscription,h,p,_)}toJSON(){var h;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(h=this._currentUser)||void 0===h?void 0:h.toJSON()}}_setRedirectUser(h,p){var _=this;return(0,g.Z)(function*(){const S=yield _.getOrInitRedirectPersistenceManager(p);return null===h?S.removeCurrentUser():S.setCurrentUser(h)})()}getOrInitRedirectPersistenceManager(h){var p=this;return(0,g.Z)(function*(){if(!p.redirectPersistenceManager){const _=h&&Ye(h)||p._popupRedirectResolver;q(_,p,"argument-error"),p.redirectPersistenceManager=yield V.create(p,[Ye(_._redirectPersistence)],"redirectUser"),p.redirectUser=yield p.redirectPersistenceManager.getCurrentUser()}return p.redirectPersistenceManager})()}_redirectUserForId(h){var p=this;return(0,g.Z)(function*(){var _,S;return p._isInitialized&&(yield p.queue((0,g.Z)(function*(){}))),(null===(_=p._currentUser)||void 0===_?void 0:_._redirectEventId)===h?p._currentUser:(null===(S=p.redirectUser)||void 0===S?void 0:S._redirectEventId)===h?p.redirectUser:null})()}_persistUserIfCurrent(h){var p=this;return(0,g.Z)(function*(){if(h===p.currentUser)return p.queue((0,g.Z)(function*(){return p.directlySetCurrentUser(h)}))})()}_notifyListenersIfCurrent(h){h===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var h,p;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const _=null!==(p=null===(h=this.currentUser)||void 0===h?void 0:h.uid)&&void 0!==p?p:null;this.lastNotifiedUid!==_&&(this.lastNotifiedUid=_,this.authStateSubscription.next(this.currentUser))}registerStateListener(h,p,_,S){if(this._deleted)return()=>{};const N="function"==typeof p?p:p.next.bind(p),$=this._isInitialized?Promise.resolve():this._initializationPromise;return q($,this,"internal-error"),$.then(()=>N(this.currentUser)),"function"==typeof p?h.addObserver(p,_,S):h.addObserver(p)}directlySetCurrentUser(h){var p=this;return(0,g.Z)(function*(){p.currentUser&&p.currentUser!==h&&p._currentUser._stopProactiveRefresh(),h&&p.isProactiveRefreshEnabled&&h._startProactiveRefresh(),p.currentUser=h,h?yield p.assertedPersistence.setCurrentUser(h):yield p.assertedPersistence.removeCurrentUser()})()}queue(h){return this.operations=this.operations.then(h,h),this.operations}get assertedPersistence(){return q(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(h){!h||this.frameworks.includes(h)||(this.frameworks.push(h),this.frameworks.sort(),this.clientVersion=rs(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var h=this;return(0,g.Z)(function*(){var p;const _={"X-Client-Version":h.clientVersion};h.app.options.appId&&(_["X-Firebase-gmpid"]=h.app.options.appId);const S=yield null===(p=h.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===p?void 0:p.getHeartbeatsHeader();S&&(_["X-Firebase-Client"]=S);const N=yield h._getAppCheckToken();return N&&(_["X-Firebase-AppCheck"]=N),_})()}_getAppCheckToken(){var h=this;return(0,g.Z)(function*(){var p;const _=yield null===(p=h.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===p?void 0:p.getToken();return _?.error&&function lt(v,...h){ct.logLevel<=he.in.WARN&&ct.warn(`Auth (${Y.SDK_VERSION}): ${v}`,...h)}(`Error while retrieving App Check token: ${_.error}`),_?.token})()}}function Qn(v){return(0,P.m9)(v)}class fo{constructor(h){this.auth=h,this.observer=null,this.addObserver=(0,P.ne)(p=>this.observer=p)}get next(){return q(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Xo(v){const h=v.indexOf(":");return h<0?"":v.substr(0,h+1)}function Fd(v){if(!v)return null;const h=Number(v);return isNaN(h)?null:h}class po{constructor(h,p){this.providerId=h,this.signInMethod=p}toJSON(){return Be("not implemented")}_getIdTokenResponse(h){return Be("not implemented")}_linkToIdToken(h,p){return Be("not implemented")}_getReauthenticationResolver(h){return Be("not implemented")}}function Bf(v,h){return Ha.apply(this,arguments)}function Ha(){return(Ha=(0,g.Z)(function*(v,h){return Ae(v,"POST","/v1/accounts:resetPassword",Ie(v,h))})).apply(this,arguments)}function Ld(v,h){return Vd.apply(this,arguments)}function Vd(){return(Vd=(0,g.Z)(function*(v,h){return Ae(v,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function qu(){return(qu=(0,g.Z)(function*(v,h){return Ae(v,"POST","/v1/accounts:update",Ie(v,h))})).apply(this,arguments)}function Rr(v,h){return nl.apply(this,arguments)}function nl(){return(nl=(0,g.Z)(function*(v,h){return gt(v,"POST","/v1/accounts:signInWithPassword",Ie(v,h))})).apply(this,arguments)}function Wu(v,h){return Ga.apply(this,arguments)}function Ga(){return(Ga=(0,g.Z)(function*(v,h){return Ae(v,"POST","/v1/accounts:sendOobCode",Ie(v,h))})).apply(this,arguments)}function Zu(){return(Zu=(0,g.Z)(function*(v,h){return Wu(v,h)})).apply(this,arguments)}function ea(v,h){return rl.apply(this,arguments)}function rl(){return(rl=(0,g.Z)(function*(v,h){return Wu(v,h)})).apply(this,arguments)}function zt(v,h){return Gn.apply(this,arguments)}function Gn(){return(Gn=(0,g.Z)(function*(v,h){return Wu(v,h)})).apply(this,arguments)}function Bs(){return(Bs=(0,g.Z)(function*(v,h){return Wu(v,h)})).apply(this,arguments)}function il(){return(il=(0,g.Z)(function*(v,h){return gt(v,"POST","/v1/accounts:signInWithEmailLink",Ie(v,h))})).apply(this,arguments)}function ta(){return(ta=(0,g.Z)(function*(v,h){return gt(v,"POST","/v1/accounts:signInWithEmailLink",Ie(v,h))})).apply(this,arguments)}class Ku extends po{constructor(h,p,_,S=null){super("password",_),this._email=h,this._password=p,this._tenantId=S}static _fromEmailAndPassword(h,p){return new Ku(h,p,"password")}static _fromEmailAndCode(h,p,_=null){return new Ku(h,p,"emailLink",_)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h;if(p?.email&&p?.password){if("password"===p.signInMethod)return this._fromEmailAndPassword(p.email,p.password);if("emailLink"===p.signInMethod)return this._fromEmailAndCode(p.email,p.password,p.tenantId)}return null}_getIdTokenResponse(h){var p=this;return(0,g.Z)(function*(){var _;switch(p.signInMethod){case"password":const S={returnSecureToken:!0,email:p._email,password:p._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(_=h._getRecaptchaConfig())&&void 0!==_&&_.emailPasswordEnabled){const N=yield Si(h,S,"signInWithPassword");return Rr(h,N)}return Rr(h,S).catch(function(){var N=(0,g.Z)(function*($){if("auth/missing-recaptcha-token"===$.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const X=yield Si(h,S,"signInWithPassword");return Rr(h,X)}return Promise.reject($)});return function($){return N.apply(this,arguments)}}());case"emailLink":return function Hr(v,h){return il.apply(this,arguments)}(h,{email:p._email,oobCode:p._password});default:ve(h,"internal-error")}})()}_linkToIdToken(h,p){var _=this;return(0,g.Z)(function*(){switch(_.signInMethod){case"password":return Ld(h,{idToken:p,returnSecureToken:!0,email:_._email,password:_._password});case"emailLink":return function jf(v,h){return ta.apply(this,arguments)}(h,{idToken:p,email:_._email,oobCode:_._password});default:ve(h,"internal-error")}})()}_getReauthenticationResolver(h){return this._getIdTokenResponse(h)}}function Mi(v,h){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,g.Z)(function*(v,h){return gt(v,"POST","/v1/accounts:signInWithIdp",Ie(v,h))})).apply(this,arguments)}class wt extends po{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(h){const p=new wt(h.providerId,h.signInMethod);return h.idToken||h.accessToken?(h.idToken&&(p.idToken=h.idToken),h.accessToken&&(p.accessToken=h.accessToken),h.nonce&&!h.pendingToken&&(p.nonce=h.nonce),h.pendingToken&&(p.pendingToken=h.pendingToken)):h.oauthToken&&h.oauthTokenSecret?(p.accessToken=h.oauthToken,p.secret=h.oauthTokenSecret):ve("argument-error"),p}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h,{providerId:_,signInMethod:S}=p,N=(0,ne._T)(p,["providerId","signInMethod"]);if(!_||!S)return null;const $=new wt(_,S);return $.idToken=N.idToken||void 0,$.accessToken=N.accessToken||void 0,$.secret=N.secret,$.nonce=N.nonce,$.pendingToken=N.pendingToken||null,$}_getIdTokenResponse(h){return Mi(h,this.buildRequest())}_linkToIdToken(h,p){const _=this.buildRequest();return _.idToken=p,Mi(h,_)}_getReauthenticationResolver(h){const p=this.buildRequest();return p.autoCreate=!1,Mi(h,p)}buildRequest(){const h={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)h.pendingToken=this.pendingToken;else{const p={};this.idToken&&(p.id_token=this.idToken),this.accessToken&&(p.access_token=this.accessToken),this.secret&&(p.oauth_token_secret=this.secret),p.providerId=this.providerId,this.nonce&&!this.pendingToken&&(p.nonce=this.nonce),h.postBody=(0,P.xO)(p)}return h}}function Gr(){return(Gr=(0,g.Z)(function*(v,h){return Ae(v,"POST","/v1/accounts:sendVerificationCode",Ie(v,h))})).apply(this,arguments)}function pr(){return(pr=(0,g.Z)(function*(v,h){return gt(v,"POST","/v1/accounts:signInWithPhoneNumber",Ie(v,h))})).apply(this,arguments)}function Mn(){return(Mn=(0,g.Z)(function*(v,h){const p=yield gt(v,"POST","/v1/accounts:signInWithPhoneNumber",Ie(v,h));if(p.temporaryProof)throw mn(v,"account-exists-with-different-credential",p);return p})).apply(this,arguments)}const Es={USER_NOT_FOUND:"user-not-found"};function Et(){return(Et=(0,g.Z)(function*(v,h){return gt(v,"POST","/v1/accounts:signInWithPhoneNumber",Ie(v,Object.assign(Object.assign({},h),{operation:"REAUTH"})),Es)})).apply(this,arguments)}class gr extends po{constructor(h){super("phone","phone"),this.params=h}static _fromVerification(h,p){return new gr({verificationId:h,verificationCode:p})}static _fromTokenResponse(h,p){return new gr({phoneNumber:h,temporaryProof:p})}_getIdTokenResponse(h){return function go(v,h){return pr.apply(this,arguments)}(h,this._makeVerificationRequest())}_linkToIdToken(h,p){return function za(v,h){return Mn.apply(this,arguments)}(h,Object.assign({idToken:p},this._makeVerificationRequest()))}_getReauthenticationResolver(h){return function na(v,h){return Et.apply(this,arguments)}(h,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:h,phoneNumber:p,verificationId:_,verificationCode:S}=this.params;return h&&p?{temporaryProof:h,phoneNumber:p}:{sessionInfo:_,code:S}}toJSON(){const h={providerId:this.providerId};return this.params.phoneNumber&&(h.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(h.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(h.verificationCode=this.params.verificationCode),this.params.verificationId&&(h.verificationId=this.params.verificationId),h}static fromJSON(h){"string"==typeof h&&(h=JSON.parse(h));const{verificationId:p,verificationCode:_,phoneNumber:S,temporaryProof:N}=h;return _||p||S||N?new gr({verificationId:p,verificationCode:_,phoneNumber:S,temporaryProof:N}):null}}class bn{constructor(h){var p,_,S,N,$,X;const Te=(0,P.zd)((0,P.pd)(h)),je=null!==(p=Te.apiKey)&&void 0!==p?p:null,tt=null!==(_=Te.oobCode)&&void 0!==_?_:null,ot=function $f(v){switch(v){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(S=Te.mode)&&void 0!==S?S:null);q(je&&tt&&ot,"argument-error"),this.apiKey=je,this.operation=ot,this.code=tt,this.continueUrl=null!==(N=Te.continueUrl)&&void 0!==N?N:null,this.languageCode=null!==($=Te.languageCode)&&void 0!==$?$:null,this.tenantId=null!==(X=Te.tenantId)&&void 0!==X?X:null}static parseLink(h){const p=function Is(v){const h=(0,P.zd)((0,P.pd)(v)).link,p=h?(0,P.zd)((0,P.pd)(h)).deep_link_id:null,_=(0,P.zd)((0,P.pd)(v)).deep_link_id;return(_?(0,P.zd)((0,P.pd)(_)).link:null)||_||p||h||v}(h);try{return new bn(p)}catch{return null}}}let mo=(()=>{class v{constructor(){this.providerId=v.PROVIDER_ID}static credential(p,_){return Ku._fromEmailAndPassword(p,_)}static credentialWithLink(p,_){const S=bn.parseLink(_);return q(S,"argument-error"),Ku._fromEmailAndCode(p,S.code,S.tenantId)}}return v.PROVIDER_ID="password",v.EMAIL_PASSWORD_SIGN_IN_METHOD="password",v.EMAIL_LINK_SIGN_IN_METHOD="emailLink",v})();class ir{constructor(h){this.providerId=h,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(h){this.defaultLanguageCode=h}setCustomParameters(h){return this.customParameters=h,this}getCustomParameters(){return this.customParameters}}class Ds extends ir{constructor(){super(...arguments),this.scopes=[]}addScope(h){return this.scopes.includes(h)||this.scopes.push(h),this}getScopes(){return[...this.scopes]}}class Cs extends Ds{static credentialFromJSON(h){const p="string"==typeof h?JSON.parse(h):h;return q("providerId"in p&&"signInMethod"in p,"argument-error"),wt._fromParams(p)}credential(h){return this._credential(Object.assign(Object.assign({},h),{nonce:h.rawNonce}))}_credential(h){return q(h.idToken||h.accessToken,"argument-error"),wt._fromParams(Object.assign(Object.assign({},h),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(h){return Cs.oauthCredentialFromTaggedObject(h)}static credentialFromError(h){return Cs.oauthCredentialFromTaggedObject(h.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthIdToken:p,oauthAccessToken:_,oauthTokenSecret:S,pendingToken:N,nonce:$,providerId:X}=h;if(!_&&!S&&!p&&!N||!X)return null;try{return new Cs(X)._credential({idToken:p,accessToken:_,nonce:$,pendingToken:N})}catch{return null}}}let js=(()=>{class v extends Ds{constructor(){super("facebook.com")}static credential(p){return wt._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.FACEBOOK_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return v.credentialFromTaggedObject(p)}static credentialFromError(p){return v.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return v.credential(p.oauthAccessToken)}catch{return null}}}return v.FACEBOOK_SIGN_IN_METHOD="facebook.com",v.PROVIDER_ID="facebook.com",v})(),xi=(()=>{class v extends Ds{constructor(){super("google.com"),this.addScope("profile")}static credential(p,_){return wt._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GOOGLE_SIGN_IN_METHOD,idToken:p,accessToken:_})}static credentialFromResult(p){return v.credentialFromTaggedObject(p)}static credentialFromError(p){return v.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:_,oauthAccessToken:S}=p;if(!_&&!S)return null;try{return v.credential(_,S)}catch{return null}}}return v.GOOGLE_SIGN_IN_METHOD="google.com",v.PROVIDER_ID="google.com",v})(),qa=(()=>{class v extends Ds{constructor(){super("github.com")}static credential(p){return wt._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GITHUB_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return v.credentialFromTaggedObject(p)}static credentialFromError(p){return v.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return v.credential(p.oauthAccessToken)}catch{return null}}}return v.GITHUB_SIGN_IN_METHOD="github.com",v.PROVIDER_ID="github.com",v})();class Ft extends po{constructor(h,p){super(h,h),this.pendingToken=p}_getIdTokenResponse(h){return Mi(h,this.buildRequest())}_linkToIdToken(h,p){const _=this.buildRequest();return _.idToken=p,Mi(h,_)}_getReauthenticationResolver(h){const p=this.buildRequest();return p.autoCreate=!1,Mi(h,p)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h,{providerId:_,signInMethod:S,pendingToken:N}=p;return _&&S&&N&&_===S?new Ft(_,N):null}static _create(h,p){return new Ft(h,p)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class ra extends ir{constructor(h){q(h.startsWith("saml."),"argument-error"),super(h)}static credentialFromResult(h){return ra.samlCredentialFromTaggedObject(h)}static credentialFromError(h){return ra.samlCredentialFromTaggedObject(h.customData||{})}static credentialFromJSON(h){const p=Ft.fromJSON(h);return q(p,"argument-error"),p}static samlCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{pendingToken:p,providerId:_}=h;if(!p||!_)return null;try{return Ft._create(_,p)}catch{return null}}}let Yu=(()=>{class v extends Ds{constructor(){super("twitter.com")}static credential(p,_){return wt._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.TWITTER_SIGN_IN_METHOD,oauthToken:p,oauthTokenSecret:_})}static credentialFromResult(p){return v.credentialFromTaggedObject(p)}static credentialFromError(p){return v.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthAccessToken:_,oauthTokenSecret:S}=p;if(!_||!S)return null;try{return v.credential(_,S)}catch{return null}}}return v.TWITTER_SIGN_IN_METHOD="twitter.com",v.PROVIDER_ID="twitter.com",v})();function sr(v,h){return yo.apply(this,arguments)}function yo(){return(yo=(0,g.Z)(function*(v,h){return gt(v,"POST","/v1/accounts:signUp",Ie(v,h))})).apply(this,arguments)}class or{constructor(h){this.user=h.user,this.providerId=h.providerId,this._tokenResponse=h._tokenResponse,this.operationType=h.operationType}static _fromIdTokenResponse(h,p,_,S=!1){return(0,g.Z)(function*(){const N=yield ge._fromIdTokenResponse(h,_,S),$=Hs(_);return new or({user:N,providerId:$,_tokenResponse:_,operationType:p})})()}static _forOperation(h,p,_){return(0,g.Z)(function*(){yield h._updateTokensIfNecessary(_,!0);const S=Hs(_);return new or({user:h,providerId:S,_tokenResponse:_,operationType:p})})()}}function Hs(v){return v.providerId?v.providerId:"phoneNumber"in v?"phone":null}function Hf(){return(Hf=(0,g.Z)(function*(v){var h;const p=Qn(v);if(yield p._initializationPromise,null!==(h=p.currentUser)&&void 0!==h&&h.isAnonymous)return new or({user:p.currentUser,providerId:null,operationType:"signIn"});const _=yield sr(p,{returnSecureToken:!0}),S=yield or._fromIdTokenResponse(p,"signIn",_,!0);return yield p._updateCurrentUser(S.user),S})).apply(this,arguments)}class ar extends P.ZR{constructor(h,p,_,S){var N;super(p.code,p.message),this.operationType=_,this.user=S,Object.setPrototypeOf(this,ar.prototype),this.customData={appName:h.name,tenantId:null!==(N=h.tenantId)&&void 0!==N?N:void 0,_serverResponse:p.customData._serverResponse,operationType:_}}static _fromErrorAndOperation(h,p,_,S){return new ar(h,p,_,S)}}function Or(v,h,p,_){return("reauthenticate"===h?p._getReauthenticationResolver(v):p._getIdTokenResponse(v)).catch(N=>{throw"auth/multi-factor-auth-required"===N.code?ar._fromErrorAndOperation(v,N,h,_):N})}function Qu(v){return new Set(v.map(({providerId:h})=>h).filter(h=>!!h))}function _i(){return _i=(0,g.Z)(function*(v,h){const p=(0,P.m9)(v);yield sa(!0,p,h);const{providerUserInfo:_}=yield function Ar(v,h){return Xr.apply(this,arguments)}(p.auth,{idToken:yield p.getIdToken(),deleteProvider:[h]}),S=Qu(_||[]);return p.providerData=p.providerData.filter(N=>S.has(N.providerId)),S.has("phone")||(p.phoneNumber=null),yield p.auth._persistUserIfCurrent(p),p}),_i.apply(this,arguments)}function ni(v,h){return ia.apply(this,arguments)}function ia(){return(ia=(0,g.Z)(function*(v,h,p=!1){const _=yield In(v,h._linkToIdToken(v.auth,yield v.getIdToken()),p);return or._forOperation(v,"link",_)})).apply(this,arguments)}function sa(v,h,p){return ol.apply(this,arguments)}function ol(){return(ol=(0,g.Z)(function*(v,h,p){yield Wt(h);const S=!1===v?"provider-already-linked":"no-such-provider";q(Qu(h.providerData).has(p)===v,h.auth,S)})).apply(this,arguments)}function hm(v,h){return Ju.apply(this,arguments)}function Ju(){return(Ju=(0,g.Z)(function*(v,h,p=!1){const{auth:_}=v,S="reauthenticate";try{const N=yield In(v,Or(_,S,h,v),p);q(N.idToken,_,"internal-error");const $=At(N.idToken);q($,_,"internal-error");const{sub:X}=$;return q(v.uid===X,_,"user-mismatch"),or._forOperation(v,S,N)}catch(N){throw"auth/user-not-found"===N?.code&&ve(_,"user-mismatch"),N}})).apply(this,arguments)}function al(v,h){return Bd.apply(this,arguments)}function Bd(){return(Bd=(0,g.Z)(function*(v,h,p=!1){const _="signIn",S=yield Or(v,_,h),N=yield or._fromIdTokenResponse(v,_,S);return p||(yield v._updateCurrentUser(N.user)),N})).apply(this,arguments)}function ul(v,h){return jd.apply(this,arguments)}function jd(){return(jd=(0,g.Z)(function*(v,h){return al(Qn(v),h)})).apply(this,arguments)}function fm(v,h){return Tn.apply(this,arguments)}function Tn(){return(Tn=(0,g.Z)(function*(v,h){const p=(0,P.m9)(v);return yield sa(!1,p,h.providerId),ni(p,h)})).apply(this,arguments)}function pm(v,h){return Gf.apply(this,arguments)}function Gf(){return(Gf=(0,g.Z)(function*(v,h){return hm((0,P.m9)(v),h)})).apply(this,arguments)}function zf(){return(zf=(0,g.Z)(function*(v,h){return gt(v,"POST","/v1/accounts:signInWithCustomToken",Ie(v,h))})).apply(this,arguments)}function bs(){return bs=(0,g.Z)(function*(v,h){const p=Qn(v),_=yield function r_(v,h){return zf.apply(this,arguments)}(p,{token:h,returnSecureToken:!0}),S=yield or._fromIdTokenResponse(p,"signIn",_);return yield p._updateCurrentUser(S.user),S}),bs.apply(this,arguments)}class cl{constructor(h,p){this.factorId=h,this.uid=p.mfaEnrollmentId,this.enrollmentTime=new Date(p.enrolledAt).toUTCString(),this.displayName=p.displayName}static _fromServerResponse(h,p){return"phoneInfo"in p?oa._fromServerResponse(h,p):"totpInfo"in p?ll._fromServerResponse(h,p):ve(h,"internal-error")}}class oa extends cl{constructor(h){super("phone",h),this.phoneNumber=h.phoneInfo}static _fromServerResponse(h,p){return new oa(p)}}class ll extends cl{constructor(h){super("totp",h)}static _fromServerResponse(h,p){return new ll(p)}}function Wa(v,h,p){var _;q((null===(_=p.url)||void 0===_?void 0:_.length)>0,v,"invalid-continue-uri"),q(typeof p.dynamicLinkDomain>"u"||p.dynamicLinkDomain.length>0,v,"invalid-dynamic-link-domain"),h.continueUrl=p.url,h.dynamicLinkDomain=p.dynamicLinkDomain,h.canHandleCodeInApp=p.handleCodeInApp,p.iOS&&(q(p.iOS.bundleId.length>0,v,"missing-ios-bundle-id"),h.iOSBundleId=p.iOS.bundleId),p.android&&(q(p.android.packageName.length>0,v,"missing-android-pkg-name"),h.androidInstallApp=p.android.installApp,h.androidMinimumVersionCode=p.android.minimumVersion,h.androidPackageName=p.android.packageName)}function Za(){return Za=(0,g.Z)(function*(v,h,p){var _;const S=Qn(v),N={requestType:"PASSWORD_RESET",email:h,clientType:"CLIENT_TYPE_WEB"};if(null!==(_=S._getRecaptchaConfig())&&void 0!==_&&_.emailPasswordEnabled){const $=yield Si(S,N,"getOobCode",!0);p&&Wa(S,$,p),yield ea(S,$)}else p&&Wa(S,N,p),yield ea(S,N).catch(function(){var $=(0,g.Z)(function*(X){if("auth/missing-recaptcha-token"!==X.code)return Promise.reject(X);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const Te=yield Si(S,N,"getOobCode",!0);p&&Wa(S,Te,p),yield ea(S,Te)}});return function(X){return $.apply(this,arguments)}}())}),Za.apply(this,arguments)}function ss(){return(ss=(0,g.Z)(function*(v,h,p){yield Bf((0,P.m9)(v),{oobCode:h,newPassword:p})})).apply(this,arguments)}function Ni(){return Ni=(0,g.Z)(function*(v,h){yield function Ai(v,h){return qu.apply(this,arguments)}((0,P.m9)(v),{oobCode:h})}),Ni.apply(this,arguments)}function nr(v,h){return wo.apply(this,arguments)}function wo(){return(wo=(0,g.Z)(function*(v,h){const p=(0,P.m9)(v),_=yield Bf(p,{oobCode:h}),S=_.requestType;switch(q(S,p,"internal-error"),S){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":q(_.newEmail,p,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":q(_.mfaInfo,p,"internal-error");default:q(_.email,p,"internal-error")}let N=null;return _.mfaInfo&&(N=cl._fromServerResponse(Qn(p),_.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===_.requestType?_.newEmail:_.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===_.requestType?_.email:_.newEmail)||null,multiFactorInfo:N},operation:S}})).apply(this,arguments)}function Eo(){return(Eo=(0,g.Z)(function*(v,h){const{data:p}=yield nr((0,P.m9)(v),h);return p.email})).apply(this,arguments)}function Ka(){return Ka=(0,g.Z)(function*(v,h,p){var _;const S=Qn(v),N={returnSecureToken:!0,email:h,password:p,clientType:"CLIENT_TYPE_WEB"};let $;if(null!==(_=S._getRecaptchaConfig())&&void 0!==_&&_.emailPasswordEnabled){const je=yield Si(S,N,"signUpPassword");$=sr(S,je)}else $=sr(S,N).catch(function(){var je=(0,g.Z)(function*(tt){if("auth/missing-recaptcha-token"===tt.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const ot=yield Si(S,N,"signUpPassword");return sr(S,ot)}return Promise.reject(tt)});return function(tt){return je.apply(this,arguments)}}());const X=yield $.catch(je=>Promise.reject(je)),Te=yield or._fromIdTokenResponse(S,"signIn",X);return yield S._updateCurrentUser(Te.user),Te}),Ka.apply(this,arguments)}function Ya(){return Ya=(0,g.Z)(function*(v,h,p){var _;const S=Qn(v),N={requestType:"EMAIL_SIGNIN",email:h,clientType:"CLIENT_TYPE_WEB"};function $(X,Te){q(Te.handleCodeInApp,S,"argument-error"),Te&&Wa(S,X,Te)}if(null!==(_=S._getRecaptchaConfig())&&void 0!==_&&_.emailPasswordEnabled){const X=yield Si(S,N,"getOobCode",!0);$(X,p),yield zt(S,X)}else $(N,p),yield zt(S,N).catch(function(){var X=(0,g.Z)(function*(Te){if("auth/missing-recaptcha-token"!==Te.code)return Promise.reject(Te);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const je=yield Si(S,N,"getOobCode",!0);$(je,p),yield zt(S,je)}});return function(Te){return X.apply(this,arguments)}}())}),Ya.apply(this,arguments)}function hl(){return(hl=(0,g.Z)(function*(v,h,p){const _=(0,P.m9)(v),S=mo.credentialWithLink(h,p||Qt());return q(S._tenantId===(_.tenantId||null),_,"tenant-id-mismatch"),ul(_,S)})).apply(this,arguments)}function pl(){return(pl=(0,g.Z)(function*(v,h){return Ae(v,"POST","/v1/accounts:createAuthUri",Ie(v,h))})).apply(this,arguments)}function Io(){return Io=(0,g.Z)(function*(v,h){const _={identifier:h,continueUri:fn()?Qt():"http://localhost"},{signinMethods:S}=yield function fl(v,h){return pl.apply(this,arguments)}((0,P.m9)(v),_);return S||[]}),Io.apply(this,arguments)}function Ja(){return Ja=(0,g.Z)(function*(v,h){const p=(0,P.m9)(v),S={requestType:"VERIFY_EMAIL",idToken:yield v.getIdToken()};h&&Wa(p.auth,S,h);const{email:N}=yield function Ud(v,h){return Zu.apply(this,arguments)}(p.auth,S);N!==v.email&&(yield v.reload())}),Ja.apply(this,arguments)}function Xu(){return Xu=(0,g.Z)(function*(v,h,p){const _=(0,P.m9)(v),N={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield v.getIdToken(),newEmail:h};p&&Wa(_.auth,N,p);const{email:$}=yield function $r(v,h){return Bs.apply(this,arguments)}(_.auth,N);$!==v.email&&(yield v.reload())}),Xu.apply(this,arguments)}function Wd(){return(Wd=(0,g.Z)(function*(v,h){return Ae(v,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function gl(){return gl=(0,g.Z)(function*(v,{displayName:h,photoURL:p}){if(void 0===h&&void 0===p)return;const _=(0,P.m9)(v),N={idToken:yield _.getIdToken(),displayName:h,photoUrl:p,returnSecureToken:!0},$=yield In(_,function gm(v,h){return Wd.apply(this,arguments)}(_.auth,N));_.displayName=$.displayName||null,_.photoURL=$.photoUrl||null;const X=_.providerData.find(({providerId:Te})=>"password"===Te);X&&(X.displayName=_.displayName,X.photoURL=_.photoURL),yield _._updateTokensIfNecessary($)}),gl.apply(this,arguments)}function qf(v,h,p){return ua.apply(this,arguments)}function ua(){return(ua=(0,g.Z)(function*(v,h,p){const{auth:_}=v,N={idToken:yield v.getIdToken(),returnSecureToken:!0};h&&(N.email=h),p&&(N.password=p);const $=yield In(v,Ld(_,N));yield v._updateTokensIfNecessary($,!0)})).apply(this,arguments)}class ca{constructor(h,p,_={}){this.isNewUser=h,this.providerId=p,this.profile=_}}class Xa extends ca{constructor(h,p,_,S){super(h,p,_),this.username=S}}class ml extends ca{constructor(h,p){super(h,"facebook.com",p)}}class Kd extends Xa{constructor(h,p){super(h,"github.com",p,"string"==typeof p?.login?p?.login:null)}}class tc extends ca{constructor(h,p){super(h,"google.com",p)}}class eu extends Xa{constructor(h,p,_){super(h,"twitter.com",p,_)}}function Wf(v){const{user:h,_tokenResponse:p}=v;return h.isAnonymous&&!p?{providerId:null,isNewUser:!1,profile:null}:function ym(v){var h,p;if(!v)return null;const{providerId:_}=v,S=v.rawUserInfo?JSON.parse(v.rawUserInfo):{},N=v.isNewUser||"identitytoolkit#SignupNewUserResponse"===v.kind;if(!_&&v?.idToken){const $=null===(p=null===(h=At(v.idToken))||void 0===h?void 0:h.firebase)||void 0===p?void 0:p.sign_in_provider;if($)return new ca(N,"anonymous"!==$&&"custom"!==$?$:null)}if(!_)return null;switch(_){case"facebook.com":return new ml(N,S);case"github.com":return new Kd(N,S);case"google.com":return new tc(N,S);case"twitter.com":return new eu(N,S,v.screenName||null);case"custom":case"anonymous":return new ca(N,null);default:return new ca(N,_,S)}}(p)}class os{constructor(h,p,_){this.type=h,this.credential=p,this.auth=_}static _fromIdtoken(h,p){return new os("enroll",h,p)}static _fromMfaPendingCredential(h){return new os("signin",h)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(h){var p,_;if(h?.multiFactorSession){if(null!==(p=h.multiFactorSession)&&void 0!==p&&p.pendingCredential)return os._fromMfaPendingCredential(h.multiFactorSession.pendingCredential);if(null!==(_=h.multiFactorSession)&&void 0!==_&&_.idToken)return os._fromIdtoken(h.multiFactorSession.idToken)}return null}}class Co{constructor(h,p,_){this.session=h,this.hints=p,this.signInResolver=_}static _fromError(h,p){const _=Qn(h),S=p.customData._serverResponse,N=(S.mfaInfo||[]).map(X=>cl._fromServerResponse(_,X));q(S.mfaPendingCredential,_,"internal-error");const $=os._fromMfaPendingCredential(S.mfaPendingCredential);return new Co($,N,function(){var X=(0,g.Z)(function*(Te){const je=yield Te._process(_,$);delete S.mfaInfo,delete S.mfaPendingCredential;const tt=Object.assign(Object.assign({},S),{idToken:je.idToken,refreshToken:je.refreshToken});switch(p.operationType){case"signIn":const ot=yield or._fromIdTokenResponse(_,p.operationType,tt);return yield _._updateCurrentUser(ot.user),ot;case"reauthenticate":return q(p.user,_,"internal-error"),or._forOperation(p.user,p.operationType,tt);default:ve(_,"internal-error")}});return function(Te){return X.apply(this,arguments)}}())}resolveSignIn(h){var p=this;return(0,g.Z)(function*(){return p.signInResolver(h)})()}}class nn{constructor(h){this.user=h,this.enrolledFactors=[],h._onReload(p=>{p.mfaInfo&&(this.enrolledFactors=p.mfaInfo.map(_=>cl._fromServerResponse(h.auth,_)))})}static _fromUser(h){return new nn(h)}getSession(){var h=this;return(0,g.Z)(function*(){return os._fromIdtoken(yield h.user.getIdToken(),h.user.auth)})()}enroll(h,p){var _=this;return(0,g.Z)(function*(){const S=h,N=yield _.getSession(),$=yield In(_.user,S._process(_.user.auth,N,p));return yield _.user._updateTokensIfNecessary($),_.user.reload()})()}unenroll(h){var p=this;return(0,g.Z)(function*(){const _="string"==typeof h?h:h.uid,S=yield p.user.getIdToken();try{const N=yield In(p.user,function Jd(v,h){return Ae(v,"POST","/v2/accounts/mfaEnrollment:withdraw",Ie(v,h))}(p.user.auth,{idToken:S,mfaEnrollmentId:_}));p.enrolledFactors=p.enrolledFactors.filter(({uid:$})=>$!==_),yield p.user._updateTokensIfNecessary(N),yield p.user.reload()}catch(N){throw N}})()}}const bo=new WeakMap,yr="__sak";class Jf{constructor(h,p){this.storageRetriever=h,this.type=p}_isAvailable(){try{return this.storage?(this.storage.setItem(yr,"1"),this.storage.removeItem(yr),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(h,p){return this.storage.setItem(h,JSON.stringify(p)),Promise.resolve()}_get(h){const p=this.storage.getItem(h);return Promise.resolve(p?JSON.parse(p):null)}_remove(h){return this.storage.removeItem(h),Promise.resolve()}get storage(){return this.storageRetriever()}}const la=(()=>{class v extends Jf{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(p,_)=>this.onStorageEvent(p,_),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function wl(){const v=(0,P.z$)();return ae(v)||Yn(v)}()&&function Qc(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Ko(),this._shouldAllowMigration=!0}forAllChangedKeys(p){for(const _ of Object.keys(this.listeners)){const S=this.storage.getItem(_),N=this.localCache[_];S!==N&&p(_,N,S)}}onStorageEvent(p,_=!1){if(!p.key)return void this.forAllChangedKeys((X,Te,je)=>{this.notifyListeners(X,je)});const S=p.key;if(_?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const X=this.storage.getItem(S);if(p.newValue!==X)null!==p.newValue?this.storage.setItem(S,p.newValue):this.storage.removeItem(S);else if(this.localCache[S]===p.newValue&&!_)return}const N=()=>{const X=this.storage.getItem(S);!_&&this.localCache[S]===X||this.notifyListeners(S,X)},$=this.storage.getItem(S);!function Ls(){return(0,P.w1)()&&10===document.documentMode}()||$===p.newValue||p.newValue===p.oldValue?N():setTimeout(N,10)}notifyListeners(p,_){this.localCache[p]=_;const S=this.listeners[p];if(S)for(const N of Array.from(S))N(_&&JSON.parse(_))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((p,_,S)=>{this.onStorageEvent(new StorageEvent("storage",{key:p,oldValue:_,newValue:S}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(p,_){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[p]||(this.listeners[p]=new Set,this.localCache[p]=this.storage.getItem(p)),this.listeners[p].add(_)}_removeListener(p,_){this.listeners[p]&&(this.listeners[p].delete(_),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(p,_){var S=()=>super._set,N=this;return(0,g.Z)(function*(){yield S().call(N,p,_),N.localCache[p]=JSON.stringify(_)})()}_get(p){var _=()=>super._get,S=this;return(0,g.Z)(function*(){const N=yield _().call(S,p);return S.localCache[p]=JSON.stringify(N),N})()}_remove(p){var _=()=>super._remove,S=this;return(0,g.Z)(function*(){yield _().call(S,p),delete S.localCache[p]})()}}return v.type="LOCAL",v})(),ii=(()=>{class v extends Jf{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(p,_){}_removeListener(p,_){}}return v.type="SESSION",v})();let El=(()=>{class v{constructor(p){this.eventTarget=p,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(p){const _=this.receivers.find(N=>N.isListeningto(p));if(_)return _;const S=new v(p);return this.receivers.push(S),S}isListeningto(p){return this.eventTarget===p}handleEvent(p){var _=this;return(0,g.Z)(function*(){const S=p,{eventId:N,eventType:$,data:X}=S.data,Te=_.handlersMap[$];if(!Te?.size)return;S.ports[0].postMessage({status:"ack",eventId:N,eventType:$});const je=Array.from(Te).map(function(){var ot=(0,g.Z)(function*(Ln){return Ln(S.origin,X)});return function(Ln){return ot.apply(this,arguments)}}()),tt=yield function tp(v){return Promise.all(v.map(function(){var h=(0,g.Z)(function*(p){try{return{fulfilled:!0,value:yield p}}catch(_){return{fulfilled:!1,reason:_}}});return function(p){return h.apply(this,arguments)}}()))}(je);S.ports[0].postMessage({status:"done",eventId:N,eventType:$,response:tt})})()}_subscribe(p,_){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[p]||(this.handlersMap[p]=new Set),this.handlersMap[p].add(_)}_unsubscribe(p,_){this.handlersMap[p]&&_&&this.handlersMap[p].delete(_),(!_||0===this.handlersMap[p].size)&&delete this.handlersMap[p],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return v.receivers=[],v})();function rc(v="",h=10){let p="";for(let _=0;_<h;_++)p+=Math.floor(10*Math.random());return v+p}class _m{constructor(h){this.target=h,this.handlers=new Set}removeMessageHandler(h){h.messageChannel&&(h.messageChannel.port1.removeEventListener("message",h.onMessage),h.messageChannel.port1.close()),this.handlers.delete(h)}_send(h,p,_=50){var S=this;return(0,g.Z)(function*(){const N=typeof MessageChannel<"u"?new MessageChannel:null;if(!N)throw new Error("connection_unavailable");let $,X;return new Promise((Te,je)=>{const tt=rc("",20);N.port1.start();const ot=setTimeout(()=>{je(new Error("unsupported_event"))},_);X={messageChannel:N,onMessage(Ln){const fs=Ln;if(fs.data.eventId===tt)switch(fs.data.status){case"ack":clearTimeout(ot),$=setTimeout(()=>{je(new Error("timeout"))},3e3);break;case"done":clearTimeout($),Te(fs.data.response);break;default:clearTimeout(ot),clearTimeout($),je(new Error("invalid_response"))}}},S.handlers.add(X),N.port1.addEventListener("message",X.onMessage),S.target.postMessage({eventType:h,eventId:tt,data:p},[N.port2])}).finally(()=>{X&&S.removeMessageHandler(X)})})()}}function yn(){return window}function It(){return typeof yn().WorkerGlobalScope<"u"&&"function"==typeof yn().importScripts}function eh(){return(eh=(0,g.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const th="firebaseLocalStorageDb",as="firebaseLocalStorage",Il="fbase_key";class sc{constructor(h){this.request=h}toPromise(){return new Promise((h,p)=>{this.request.addEventListener("success",()=>{h(this.request.result)}),this.request.addEventListener("error",()=>{p(this.request.error)})})}}function oc(v,h){return v.transaction([as],h?"readwrite":"readonly").objectStore(as)}function Dl(){const v=indexedDB.open(th,1);return new Promise((h,p)=>{v.addEventListener("error",()=>{p(v.error)}),v.addEventListener("upgradeneeded",()=>{const _=v.result;try{_.createObjectStore(as,{keyPath:Il})}catch(S){p(S)}}),v.addEventListener("success",(0,g.Z)(function*(){const _=v.result;_.objectStoreNames.contains(as)?h(_):(_.close(),yield function Em(){const v=indexedDB.deleteDatabase(th);return new sc(v).toPromise()}(),h(yield Dl()))}))})}function Me(v,h,p){return jt.apply(this,arguments)}function jt(){return(jt=(0,g.Z)(function*(v,h,p){const _=oc(v,!0).put({[Il]:h,value:p});return new sc(_).toPromise()})).apply(this,arguments)}function ac(){return(ac=(0,g.Z)(function*(v,h){const p=oc(v,!1).get(h),_=yield new sc(p).toPromise();return void 0===_?null:_.value})).apply(this,arguments)}function lr(v,h){const p=oc(v,!0).delete(h);return new sc(p).toPromise()}const Ao=(()=>{class v{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var p=this;return(0,g.Z)(function*(){return p.db||(p.db=yield Dl()),p.db})()}_withRetries(p){var _=this;return(0,g.Z)(function*(){let S=0;for(;;)try{const N=yield _._openDb();return yield p(N)}catch(N){if(S++>3)throw N;_.db&&(_.db.close(),_.db=void 0)}})()}initializeServiceWorkerMessaging(){var p=this;return(0,g.Z)(function*(){return It()?p.initializeReceiver():p.initializeSender()})()}initializeReceiver(){var p=this;return(0,g.Z)(function*(){p.receiver=El._getInstance(function cr(){return It()?self:null}()),p.receiver._subscribe("keyChanged",function(){var _=(0,g.Z)(function*(S,N){return{keyProcessed:(yield p._poll()).includes(N.key)}});return function(S,N){return _.apply(this,arguments)}}()),p.receiver._subscribe("ping",function(){var _=(0,g.Z)(function*(S,N){return["keyChanged"]});return function(S,N){return _.apply(this,arguments)}}())})()}initializeSender(){var p=this;return(0,g.Z)(function*(){var _,S;if(p.activeServiceWorker=yield function Xd(){return eh.apply(this,arguments)}(),!p.activeServiceWorker)return;p.sender=new _m(p.activeServiceWorker);const N=yield p.sender._send("ping",{},800);N&&null!==(_=N[0])&&void 0!==_&&_.fulfilled&&null!==(S=N[0])&&void 0!==S&&S.value.includes("keyChanged")&&(p.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(p){var _=this;return(0,g.Z)(function*(){if(_.sender&&_.activeServiceWorker&&function ic(){var v;return(null===(v=navigator?.serviceWorker)||void 0===v?void 0:v.controller)||null}()===_.activeServiceWorker)try{yield _.sender._send("keyChanged",{key:p},_.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,g.Z)(function*(){try{if(!indexedDB)return!1;const p=yield Dl();return yield Me(p,yr,"1"),yield lr(p,yr),!0}catch{}return!1})()}_withPendingWrite(p){var _=this;return(0,g.Z)(function*(){_.pendingWrites++;try{yield p()}finally{_.pendingWrites--}})()}_set(p,_){var S=this;return(0,g.Z)(function*(){return S._withPendingWrite((0,g.Z)(function*(){return yield S._withRetries(N=>Me(N,p,_)),S.localCache[p]=_,S.notifyServiceWorker(p)}))})()}_get(p){var _=this;return(0,g.Z)(function*(){const S=yield _._withRetries(N=>function zi(v,h){return ac.apply(this,arguments)}(N,p));return _.localCache[p]=S,S})()}_remove(p){var _=this;return(0,g.Z)(function*(){return _._withPendingWrite((0,g.Z)(function*(){return yield _._withRetries(S=>lr(S,p)),delete _.localCache[p],_.notifyServiceWorker(p)}))})()}_poll(){var p=this;return(0,g.Z)(function*(){const _=yield p._withRetries($=>{const X=oc($,!1).getAll();return new sc(X).toPromise()});if(!_)return[];if(0!==p.pendingWrites)return[];const S=[],N=new Set;for(const{fbase_key:$,value:X}of _)N.add($),JSON.stringify(p.localCache[$])!==JSON.stringify(X)&&(p.notifyListeners($,X),S.push($));for(const $ of Object.keys(p.localCache))p.localCache[$]&&!N.has($)&&(p.notifyListeners($,null),S.push($));return S})()}notifyListeners(p,_){this.localCache[p]=_;const S=this.listeners[p];if(S)for(const N of Array.from(S))N(_)}startPolling(){var p=this;this.stopPolling(),this.pollTimer=setInterval((0,g.Z)(function*(){return p._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(p,_){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[p]||(this.listeners[p]=new Set,this._get(p)),this.listeners[p].add(_)}_removeListener(p,_){this.listeners[p]&&(this.listeners[p].delete(_),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return v.type="LOCAL",v})(),wi=1e12;class nh{constructor(h){this.auth=h,this.counter=wi,this._widgets=new Map}render(h,p){const _=this.counter;return this._widgets.set(_,new Mo(h,this.auth.name,p||{})),this.counter++,_}reset(h){var p;const _=h||wi;null===(p=this._widgets.get(_))||void 0===p||p.delete(),this._widgets.delete(_)}getResponse(h){var p;return(null===(p=this._widgets.get(h||wi))||void 0===p?void 0:p.getResponse())||""}execute(h){var p=this;return(0,g.Z)(function*(){var _;return null===(_=p._widgets.get(h||wi))||void 0===_||_.execute(),""})()}}class Mo{constructor(h,p,_){this.params=_,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const S="string"==typeof h?document.getElementById(h):h;q(S,"argument-error",{appName:p}),this.container=S,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function qs(v){const h=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let _=0;_<v;_++)h.push(p.charAt(Math.floor(62*Math.random())));return h.join("")}(50);const{callback:h,"expired-callback":p}=this.params;if(h)try{h(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,p)try{p()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const rh=Qo("rcb"),ih=new rr(3e4,6e4);class Im{constructor(){var h;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(h=yn().grecaptcha)||void 0===h||!h.render)}load(h,p=""){return q(function lc(v){return v.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(v)}(p),h,"argument-error"),this.shouldResolveImmediately(p)&&Us(yn().grecaptcha)?Promise.resolve(yn().grecaptcha):new Promise((_,S)=>{const N=yn().setTimeout(()=>{S(ee(h,"network-request-failed"))},ih.get());yn()[rh]=()=>{yn().clearTimeout(N),delete yn()[rh];const X=yn().grecaptcha;if(!X||!Us(X))return void S(ee(h,"internal-error"));const Te=X.render;X.render=(je,tt)=>{const ot=Te(je,tt);return this.counter++,ot},this.hostLanguage=p,_(X)},is(`https://www.google.com/recaptcha/api.js??${(0,P.xO)({onload:rh,render:"explicit",hl:p})}`).catch(()=>{clearTimeout(N),S(ee(h,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(h){var p;return!(null===(p=yn().grecaptcha)||void 0===p||!p.render)&&(h===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class sh{load(h){return(0,g.Z)(function*(){return new nh(h)})()}clearedOneInstance(){}}const dc="recaptcha",oh={theme:"light",type:"image"};class ah{constructor(h,p=Object.assign({},oh),_){this.parameters=p,this.type=dc,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Qn(_),this.isInvisible="invisible"===this.parameters.size,q(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const S="string"==typeof h?document.getElementById(h):h;q(S,this.auth,"argument-error"),this.container=S,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new sh:new Im,this.validateStartingState()}verify(){var h=this;return(0,g.Z)(function*(){h.assertNotDestroyed();const p=yield h.render(),_=h.getAssertedRecaptcha();return _.getResponse(p)||new Promise(N=>{const $=X=>{X&&(h.tokenChangeListeners.delete($),N(X))};h.tokenChangeListeners.add($),h.isInvisible&&_.execute(p)})})()}render(){try{this.assertNotDestroyed()}catch(h){return Promise.reject(h)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(h=>{throw this.renderPromise=null,h})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(h=>{this.container.removeChild(h)})}validateStartingState(){q(!this.parameters.sitekey,this.auth,"argument-error"),q(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),q(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(h){return p=>{if(this.tokenChangeListeners.forEach(_=>_(p)),"function"==typeof h)h(p);else if("string"==typeof h){const _=yn()[h];"function"==typeof _&&_(p)}}}assertNotDestroyed(){q(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var h=this;return(0,g.Z)(function*(){if(yield h.init(),!h.widgetId){let p=h.container;if(!h.isInvisible){const _=document.createElement("div");p.appendChild(_),p=_}h.widgetId=h.getAssertedRecaptcha().render(p,h.parameters)}return h.widgetId})()}init(){var h=this;return(0,g.Z)(function*(){q(fn()&&!It(),h.auth,"internal-error"),yield function rp(){let v=null;return new Promise(h=>{"complete"!==document.readyState?(v=()=>h(),window.addEventListener("load",v)):h()}).catch(h=>{throw v&&window.removeEventListener("load",v),h})}(),h.recaptcha=yield h._recaptchaLoader.load(h.auth,h.auth.languageCode||void 0);const p=yield function Vs(v){return $i.apply(this,arguments)}(h.auth);q(p,h.auth,"internal-error"),h.parameters.sitekey=p})()}getAssertedRecaptcha(){return q(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class wr{constructor(h,p){this.verificationId=h,this.onConfirmation=p}confirm(h){const p=gr._fromVerification(this.verificationId,h);return this.onConfirmation(p)}}function cs(){return(cs=(0,g.Z)(function*(v,h,p){const _=Qn(v),S=yield ru(_,h,(0,P.m9)(p));return new wr(S,N=>ul(_,N))})).apply(this,arguments)}function ln(){return(ln=(0,g.Z)(function*(v,h,p){const _=(0,P.m9)(v);yield sa(!1,_,"phone");const S=yield ru(_.auth,h,(0,P.m9)(p));return new wr(S,N=>fm(_,N))})).apply(this,arguments)}function oi(){return(oi=(0,g.Z)(function*(v,h,p){const _=(0,P.m9)(v),S=yield ru(_.auth,h,(0,P.m9)(p));return new wr(S,N=>pm(_,N))})).apply(this,arguments)}function ru(v,h,p){return Er.apply(this,arguments)}function Er(){return Er=(0,g.Z)(function*(v,h,p){var _;const S=yield p.verify();try{let N;if(q("string"==typeof S,v,"argument-error"),q(p.type===dc,v,"argument-error"),N="string"==typeof h?{phoneNumber:h}:h,"session"in N){const $=N.session;if("phoneNumber"in N)return q("enroll"===$.type,v,"internal-error"),(yield function nu(v,h){return Ae(v,"POST","/v2/accounts/mfaEnrollment:start",Ie(v,h))}(v,{idToken:$.credential,phoneEnrollmentInfo:{phoneNumber:N.phoneNumber,recaptchaToken:S}})).phoneSessionInfo.sessionInfo;{q("signin"===$.type,v,"internal-error");const X=(null===(_=N.multiFactorHint)||void 0===_?void 0:_.uid)||N.multiFactorUid;return q(X,v,"missing-multi-factor-info"),(yield function Cl(v,h){return Ae(v,"POST","/v2/accounts/mfaSignIn:start",Ie(v,h))}(v,{mfaPendingCredential:$.credential,mfaEnrollmentId:X,phoneSignInInfo:{recaptchaToken:S}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:$}=yield function Cn(v,h){return Gr.apply(this,arguments)}(v,{phoneNumber:N.phoneNumber,recaptchaToken:S});return $}}finally{p._reset()}}),Er.apply(this,arguments)}function vn(){return(vn=(0,g.Z)(function*(v,h){yield ni((0,P.m9)(v),h)})).apply(this,arguments)}let Ws=(()=>{class v{constructor(p){this.providerId=v.PROVIDER_ID,this.auth=Qn(p)}verifyPhoneNumber(p,_){return ru(this.auth,p,(0,P.m9)(_))}static credential(p,_){return gr._fromVerification(p,_)}static credentialFromResult(p){return v.credentialFromTaggedObject(p)}static credentialFromError(p){return v.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{phoneNumber:_,temporaryProof:S}=p;return _&&S?gr._fromTokenResponse(_,S):null}}return v.PROVIDER_ID="phone",v.PHONE_SIGN_IN_METHOD="phone",v})();function xo(v,h){return h?Ye(h):(q(v._popupRedirectResolver,v,"argument-error"),v._popupRedirectResolver)}class zr extends po{constructor(h){super("custom","custom"),this.params=h}_getIdTokenResponse(h){return Mi(h,this._buildIdpRequest())}_linkToIdToken(h,p){return Mi(h,this._buildIdpRequest(p))}_getReauthenticationResolver(h){return Mi(h,this._buildIdpRequest())}_buildIdpRequest(h){const p={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return h&&(p.idToken=h),p}}function Vt(v){return al(v.auth,new zr(v),v.bypassAuthState)}function Tl(v){const{auth:h,user:p}=v;return q(p,h,"internal-error"),hm(p,new zr(v),v.bypassAuthState)}function iu(v){return Zs.apply(this,arguments)}function Zs(){return(Zs=(0,g.Z)(function*(v){const{auth:h,user:p}=v;return q(p,h,"internal-error"),ni(p,new zr(v),v.bypassAuthState)})).apply(this,arguments)}class ai{constructor(h,p,_,S,N=!1){this.auth=h,this.resolver=_,this.user=S,this.bypassAuthState=N,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(p)?p:[p]}execute(){var h=this;return new Promise(function(){var p=(0,g.Z)(function*(_,S){h.pendingPromise={resolve:_,reject:S};try{h.eventManager=yield h.resolver._initialize(h.auth),yield h.onExecution(),h.eventManager.registerConsumer(h)}catch(N){h.reject(N)}});return function(_,S){return p.apply(this,arguments)}}())}onAuthEvent(h){var p=this;return(0,g.Z)(function*(){const{urlResponse:_,sessionId:S,postBody:N,tenantId:$,error:X,type:Te}=h;if(X)return void p.reject(X);const je={auth:p.auth,requestUri:_,sessionId:S,tenantId:$||void 0,postBody:N||void 0,user:p.user,bypassAuthState:p.bypassAuthState};try{p.resolve(yield p.getIdpTask(Te)(je))}catch(tt){p.reject(tt)}})()}onError(h){this.reject(h)}getIdpTask(h){switch(h){case"signInViaPopup":case"signInViaRedirect":return Vt;case"linkViaPopup":case"linkViaRedirect":return iu;case"reauthViaPopup":case"reauthViaRedirect":return Tl;default:ve(this.auth,"internal-error")}}resolve(h){ht(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(h),this.unregisterAndCleanUp()}reject(h){ht(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(h),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const qi=new rr(2e3,1e4);function su(){return(su=(0,g.Z)(function*(v,h,p){const _=Qn(v);ke(v,h,ir);const S=xo(_,p);return new fa(_,"signInViaPopup",h,S).executeNotNull()})).apply(this,arguments)}function ou(){return(ou=(0,g.Z)(function*(v,h,p){const _=(0,P.m9)(v);ke(_.auth,h,ir);const S=xo(_.auth,p);return new fa(_.auth,"reauthViaPopup",h,S,_).executeNotNull()})).apply(this,arguments)}function hc(){return(hc=(0,g.Z)(function*(v,h,p){const _=(0,P.m9)(v);ke(_.auth,h,ir);const S=xo(_.auth,p);return new fa(_.auth,"linkViaPopup",h,S,_).executeNotNull()})).apply(this,arguments)}let fa=(()=>{class v extends ai{constructor(p,_,S,N,$){super(p,_,N,$),this.provider=S,this.authWindow=null,this.pollId=null,v.currentPopupAction&&v.currentPopupAction.cancel(),v.currentPopupAction=this}executeNotNull(){var p=this;return(0,g.Z)(function*(){const _=yield p.execute();return q(_,p.auth,"internal-error"),_})()}onExecution(){var p=this;return(0,g.Z)(function*(){ht(1===p.filter.length,"Popup operations only handle one event");const _=rc();p.authWindow=yield p.resolver._openPopup(p.auth,p.provider,p.filter[0],_),p.authWindow.associatedEvent=_,p.resolver._originValidation(p.auth).catch(S=>{p.reject(S)}),p.resolver._isIframeWebStorageSupported(p.auth,S=>{S||p.reject(ee(p.auth,"web-storage-unsupported"))}),p.pollUserCancellation()})()}get eventId(){var p;return(null===(p=this.authWindow)||void 0===p?void 0:p.associatedEvent)||null}cancel(){this.reject(ee(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,v.currentPopupAction=null}pollUserCancellation(){const p=()=>{var _,S;this.pollId=null!==(S=null===(_=this.authWindow)||void 0===_?void 0:_.window)&&void 0!==S&&S.closed?window.setTimeout(()=>{this.pollId=null,this.reject(ee(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(p,qi.get())};p()}}return v.currentPopupAction=null,v})();const Ri="pendingRedirect",Ks=new Map;class lh extends ai{constructor(h,p,_=!1){super(h,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],p,void 0,_),this.eventId=null}execute(){var h=()=>super.execute,p=this;return(0,g.Z)(function*(){let _=Ks.get(p.auth._key());if(!_){try{const N=(yield function au(v,h){return uu.apply(this,arguments)}(p.resolver,p.auth))?yield h().call(p):null;_=()=>Promise.resolve(N)}catch(S){_=()=>Promise.reject(S)}Ks.set(p.auth._key(),_)}return p.bypassAuthState||Ks.set(p.auth._key(),()=>Promise.resolve(null)),_()})()}onAuthEvent(h){var p=()=>super.onAuthEvent,_=this;return(0,g.Z)(function*(){if("signInViaRedirect"===h.type)return p().call(_,h);if("unknown"!==h.type){if(h.eventId){const S=yield _.auth._redirectUserForId(h.eventId);if(S)return _.user=S,p().call(_,h);_.resolve(null)}}else _.resolve(null)})()}onExecution(){return(0,g.Z)(function*(){})()}cleanUp(){}}function uu(){return(uu=(0,g.Z)(function*(v,h){const p=Ro(h),_=Oi(v);if(!(yield _._isAvailable()))return!1;const S="true"===(yield _._get(p));return yield _._remove(p),S})).apply(this,arguments)}function ip(v,h){return pa.apply(this,arguments)}function pa(){return(pa=(0,g.Z)(function*(v,h){return Oi(v)._set(Ro(h),"true")})).apply(this,arguments)}function fc(v,h){Ks.set(v._key(),h)}function Oi(v){return Ye(v._redirectPersistence)}function Ro(v){return B(Ri,v.config.apiKey,v.name)}function Oo(v,h,p){return function Ss(v,h,p){return xn.apply(this,arguments)}(v,h,p)}function xn(){return(xn=(0,g.Z)(function*(v,h,p){const _=Qn(v);ke(v,h,ir),yield _._initializationPromise;const S=xo(_,p);return yield ip(S,_),S._openRedirect(_,h,"signInViaRedirect")})).apply(this,arguments)}function Ys(v,h,p){return function Po(v,h,p){return Pi.apply(this,arguments)}(v,h,p)}function Pi(){return(Pi=(0,g.Z)(function*(v,h,p){const _=(0,P.m9)(v);ke(_.auth,h,ir),yield _.auth._initializationPromise;const S=xo(_.auth,p);yield ip(S,_.auth);const N=yield Zi(_);return S._openRedirect(_.auth,h,"reauthViaRedirect",N)})).apply(this,arguments)}function Pr(v,h,p){return function pc(v,h,p){return gc.apply(this,arguments)}(v,h,p)}function gc(){return(gc=(0,g.Z)(function*(v,h,p){const _=(0,P.m9)(v);ke(_.auth,h,ir),yield _.auth._initializationPromise;const S=xo(_.auth,p);yield sa(!1,_,h.providerId),yield ip(S,_.auth);const N=yield Zi(_);return S._openRedirect(_.auth,h,"linkViaRedirect",N)})).apply(this,arguments)}function ds(){return(ds=(0,g.Z)(function*(v,h){return yield Qn(v)._initializationPromise,Wi(v,h,!1)})).apply(this,arguments)}function Wi(v,h){return Jn.apply(this,arguments)}function Jn(){return(Jn=(0,g.Z)(function*(v,h,p=!1){const _=Qn(v),S=xo(_,h),$=yield new lh(_,S,p).execute();return $&&!p&&(delete $.user._redirectEventId,yield _._persistUserIfCurrent($.user),yield _._setRedirectUser(null,h)),$})).apply(this,arguments)}function Zi(v){return Qs.apply(this,arguments)}function Qs(){return(Qs=(0,g.Z)(function*(v){const h=rc(`${v.uid}:::`);return v._redirectEventId=h,yield v.auth._setRedirectUser(v),yield v.auth._persistUserIfCurrent(v),h})).apply(this,arguments)}class ga{constructor(h){this.auth=h,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(h){this.consumers.add(h),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,h)&&(this.sendToConsumer(this.queuedRedirectEvent,h),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(h){this.consumers.delete(h)}onEvent(h){if(this.hasEventBeenHandled(h))return!1;let p=!1;return this.consumers.forEach(_=>{this.isEventForConsumer(h,_)&&(p=!0,this.sendToConsumer(h,_),this.saveEventToCache(h))}),this.hasHandledPotentialRedirect||!function ma(v){switch(v.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return lu(v);default:return!1}}(h)||(this.hasHandledPotentialRedirect=!0,p||(this.queuedRedirectEvent=h,p=!0)),p}sendToConsumer(h,p){var _;if(h.error&&!lu(h)){const S=(null===(_=h.error.code)||void 0===_?void 0:_.split("auth/")[1])||"internal-error";p.onError(ee(this.auth,S))}else p.onAuthEvent(h)}isEventForConsumer(h,p){const _=null===p.eventId||!!h.eventId&&h.eventId===p.eventId;return p.filter.includes(h.type)&&_}hasEventBeenHandled(h){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(cu(h))}saveEventToCache(h){this.cachedEventUids.add(cu(h)),this.lastProcessedEventTime=Date.now()}}function cu(v){return[v.type,v.eventId,v.sessionId,v.tenantId].filter(h=>h).join("-")}function lu({type:v,error:h}){return"unknown"===v&&"auth/no-auth-event"===h?.code}function dh(v){return hh.apply(this,arguments)}function hh(){return(hh=(0,g.Z)(function*(v,h={}){return Ae(v,"GET","/v1/projects",h)})).apply(this,arguments)}const xt=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ki=/^https?/;function ui(){return(ui=(0,g.Z)(function*(v){if(v.config.emulator)return;const{authorizedDomains:h}=yield dh(v);for(const p of h)try{if(Sl(p))return}catch{}ve(v,"unauthorized-domain")})).apply(this,arguments)}function Sl(v){const h=Qt(),{protocol:p,hostname:_}=new URL(h);if(v.startsWith("chrome-extension://")){const $=new URL(v);return""===$.hostname&&""===_?"chrome-extension:"===p&&v.replace("chrome-extension://","")===h.replace("chrome-extension://",""):"chrome-extension:"===p&&$.hostname===_}if(!Ki.test(p))return!1;if(xt.test(v))return _===v;const S=v.replace(/\./g,"\\.");return new RegExp("^(.+\\."+S+"|"+S+")$","i").test(_)}const du=new rr(3e4,6e4);function Yi(){const v=yn().___jsl;if(v?.H)for(const h of Object.keys(v.H))if(v.H[h].r=v.H[h].r||[],v.H[h].L=v.H[h].L||[],v.H[h].r=[...v.H[h].L],v.CP)for(let p=0;p<v.CP.length;p++)v.CP[p]=null}let hu=null;const fh=new rr(5e3,15e3),op="__/auth/iframe",mc="emulator/auth/iframe",Al={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ko=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function fu(v){const h=v.config;q(h.authDomain,v,"auth-domain-config-required");const p=h.emulator?ie(h,mc):`https://${v.config.authDomain}/${op}`,_={apiKey:h.apiKey,appName:v.name,v:Y.SDK_VERSION},S=ko.get(v.config.apiHost);S&&(_.eid=S);const N=v._getFrameworks();return N.length&&(_.fw=N.join(",")),`${p}?${(0,P.xO)(_).slice(1)}`}function C(){return C=(0,g.Z)(function*(v){const h=yield function qr(v){return hu=hu||function Fn(v){return new Promise((h,p)=>{var _,S,N;function $(){Yi(),gapi.load("gapi.iframes",{callback:()=>{h(gapi.iframes.getContext())},ontimeout:()=>{Yi(),p(ee(v,"network-request-failed"))},timeout:du.get()})}if(null!==(S=null===(_=yn().gapi)||void 0===_?void 0:_.iframes)&&void 0!==S&&S.Iframe)h(gapi.iframes.getContext());else{if(null===(N=yn().gapi)||void 0===N||!N.load){const X=Qo("iframefcb");return yn()[X]=()=>{gapi.load?$():p(ee(v,"network-request-failed"))},is(`https://apis.google.com/js/api.js?onload=${X}`).catch(Te=>p(Te))}$()}}).catch(h=>{throw hu=null,h})}(v),hu}(v),p=yn().gapi;return q(p,v,"internal-error"),h.open({where:document.body,url:fu(v),messageHandlersFilter:p.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Al,dontclear:!0},_=>new Promise(function(){var S=(0,g.Z)(function*(N,$){yield _.restyle({setHideOnLeave:!1});const X=ee(v,"network-request-failed"),Te=yn().setTimeout(()=>{$(X)},fh.get());function je(){yn().clearTimeout(Te),N(_)}_.ping(je).then(je,()=>{$(X)})});return function(N,$){return S.apply(this,arguments)}}()))}),C.apply(this,arguments)}const A={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class ze{constructor(h){this.window=h,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const Tt="__/auth/handler",Nt="emulator/auth/handler",Xn=encodeURIComponent("fac");function Nn(v,h,p,_,S,N){return Fo.apply(this,arguments)}function Fo(){return(Fo=(0,g.Z)(function*(v,h,p,_,S,N){q(v.config.authDomain,v,"auth-domain-config-required"),q(v.config.apiKey,v,"invalid-api-key");const $={apiKey:v.config.apiKey,appName:v.name,authType:p,redirectUrl:_,v:Y.SDK_VERSION,eventId:S};if(h instanceof ir){h.setDefaultLanguage(v.languageCode),$.providerId=h.providerId||"",(0,P.xb)(h.getCustomParameters())||($.customParameters=JSON.stringify(h.getCustomParameters()));for(const[tt,ot]of Object.entries(N||{}))$[tt]=ot}if(h instanceof Ds){const tt=h.getScopes().filter(ot=>""!==ot);tt.length>0&&($.scopes=tt.join(","))}v.tenantId&&($.tid=v.tenantId);const X=$;for(const tt of Object.keys(X))void 0===X[tt]&&delete X[tt];const Te=yield v._getAppCheckToken(),je=Te?`#${Xn}=${encodeURIComponent(Te)}`:"";return`${function Sn({config:v}){return v.emulator?ie(v,Nt):`https://${v.authDomain}/${Tt}`}(v)}?${(0,P.xO)(X).slice(1)}${je}`})).apply(this,arguments)}const Lo="webStorageSupport",ki=class Ir{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ii,this._completeRedirectFn=Wi,this._overrideRedirectResult=fc}_openPopup(h,p,_,S){var N=this;return(0,g.Z)(function*(){var $;ht(null===($=N.eventManagers[h._key()])||void 0===$?void 0:$.manager,"_initialize() not called before _openPopup()");const X=yield Nn(h,p,_,Qt(),S);return function Ze(v,h,p,_=500,S=600){const N=Math.max((window.screen.availHeight-S)/2,0).toString(),$=Math.max((window.screen.availWidth-_)/2,0).toString();let X="";const Te=Object.assign(Object.assign({},A),{width:_.toString(),height:S.toString(),top:N,left:$}),je=(0,P.z$)().toLowerCase();p&&(X=nt(je)?"_blank":p),De(je)&&(h=h||"http://localhost",Te.scrollbars="yes");const tt=Object.entries(Te).reduce((Ln,[fs,Cc])=>`${Ln}${fs}=${Cc},`,"");if(function fr(v=(0,P.z$)()){var h;return Yn(v)&&!(null===(h=window.navigator)||void 0===h||!h.standalone)}(je)&&"_self"!==X)return function st(v,h){const p=document.createElement("a");p.href=v,p.target=h;const _=document.createEvent("MouseEvent");_.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),p.dispatchEvent(_)}(h||"",X),new ze(null);const ot=window.open(h||"",X,tt);q(ot,v,"popup-blocked");try{ot.focus()}catch{}return new ze(ot)}(h,X,rc())})()}_openRedirect(h,p,_,S){var N=this;return(0,g.Z)(function*(){return yield N._originValidation(h),function wm(v){yn().location.href=v}(yield Nn(h,p,_,Qt(),S)),new Promise(()=>{})})()}_initialize(h){const p=h._key();if(this.eventManagers[p]){const{manager:S,promise:N}=this.eventManagers[p];return S?Promise.resolve(S):(ht(N,"If manager is not set, promise should be"),N)}const _=this.initAndGetManager(h);return this.eventManagers[p]={promise:_},_.catch(()=>{delete this.eventManagers[p]}),_}initAndGetManager(h){var p=this;return(0,g.Z)(function*(){const _=yield function I(v){return C.apply(this,arguments)}(h),S=new ga(h);return _.register("authEvent",N=>(q(N?.authEvent,h,"invalid-auth-event"),{status:S.onEvent(N.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),p.eventManagers[h._key()]={manager:S},p.iframes[h._key()]=_,S})()}_isIframeWebStorageSupported(h,p){this.iframes[h._key()].send(Lo,{type:Lo},S=>{var N;const $=null===(N=S?.[0])||void 0===N?void 0:N[Lo];void 0!==$&&p(!!$),ve(h,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(h){const p=h._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function sp(v){return ui.apply(this,arguments)}(h)),this.originValidationPromises[p]}get _shouldInitProactively(){return Ko()||ae()||Yn()}};class ci{constructor(h){this.factorId=h}_process(h,p,_){switch(p.type){case"enroll":return this._finalizeEnroll(h,p.credential,_);case"signin":return this._finalizeSignIn(h,p.credential);default:return Be("unexpected MultiFactorSessionType")}}}class Vo extends ci{constructor(h){super("phone"),this.credential=h}static _fromCredential(h){return new Vo(h)}_finalizeEnroll(h,p,_){return function Qf(v,h){return Ae(v,"POST","/v2/accounts/mfaEnrollment:finalize",Ie(v,h))}(h,{idToken:p,displayName:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(h,p){return function np(v,h){return Ae(v,"POST","/v2/accounts/mfaSignIn:finalize",Ie(v,h))}(h,{mfaPendingCredential:p,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Dm=(()=>{class v{constructor(){}static assertion(p){return Vo._fromCredential(p)}}return v.FACTOR_ID="phone",v})();var Cm="@firebase/auth";class Qi{constructor(h){this.auth=h,this.internalListeners=new Map}getUid(){var h;return this.assertAuthConfigured(),(null===(h=this.auth.currentUser)||void 0===h?void 0:h.uid)||null}getToken(h){var p=this;return(0,g.Z)(function*(){return p.assertAuthConfigured(),yield p.auth._initializationPromise,p.auth.currentUser?{accessToken:yield p.auth.currentUser.getIdToken(h)}:null})()}addAuthTokenListener(h){if(this.assertAuthConfigured(),this.internalListeners.has(h))return;const p=this.auth.onIdTokenChanged(_=>{h(_?.stsTokenManager.accessToken||null)});this.internalListeners.set(h,p),this.updateProactiveRefresh()}removeAuthTokenListener(h){this.assertAuthConfigured();const p=this.internalListeners.get(h);p&&(this.internalListeners.delete(h),p(),this.updateProactiveRefresh())}assertAuthConfigured(){q(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function gu(){return window}(0,P.Pz)("authIdTokenMaxAge"),function yc(v){(0,Y._registerComponent)(new pe.wA("auth",(h,{options:p})=>{const _=h.getProvider("app").getImmediate(),S=h.getProvider("heartbeat"),N=h.getProvider("app-check-internal"),{apiKey:$,authDomain:X}=_.options;q($&&!$.includes(":"),"invalid-api-key",{appName:_.name});const Te={apiKey:$,authDomain:X,clientPlatform:v,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:rs(v)},je=new el(_,S,N,Te);return function Uf(v,h){const p=h?.persistence||[],_=(Array.isArray(p)?p:[p]).map(Ye);h?.errorMap&&v._updateErrorMap(h.errorMap),v._initializeWithPersistence(_,h?.popupRedirectResolver)}(je,p),je},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((h,p,_)=>{h.getProvider("auth-internal").initialize()})),(0,Y._registerComponent)(new pe.wA("auth-internal",h=>{const p=Qn(h.getProvider("auth").getImmediate());return new Qi(p)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,Y.registerVersion)(Cm,"0.23.2",function cp(v){switch(v){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(v)),(0,Y.registerVersion)(Cm,"0.23.2","esm2017")}("Browser");function ya(){return ya=(0,g.Z)(function*(v,h,p){var _;const{BuildInfo:S}=gu();ht(h.sessionId,"AuthEvent did not contain a session ID");const N=yield function Am(v){return Nl.apply(this,arguments)}(h.sessionId),$={};return Yn()?$.ibi=S.packageName:bt()?$.apn=S.packageName:ve(v,"operation-not-supported-in-this-environment"),S.displayName&&($.appDisplayName=S.displayName),$.sessionId=N,Nn(v,p,h.type,void 0,null!==(_=h.eventId)&&void 0!==_?_:void 0,$)}),ya.apply(this,arguments)}function Ml(){return(Ml=(0,g.Z)(function*(v){const{BuildInfo:h}=gu(),p={};Yn()?p.iosBundleId=h.packageName:bt()?p.androidPackageName=h.packageName:ve(v,"operation-not-supported-in-this-environment"),yield dh(v,p)})).apply(this,arguments)}function _c(){return(_c=(0,g.Z)(function*(v,h,p){const{cordova:_}=gu();let S=()=>{};try{yield new Promise((N,$)=>{let X=null;function Te(){var ot;N();const Ln=null===(ot=_.plugins.browsertab)||void 0===ot?void 0:ot.close;"function"==typeof Ln&&Ln(),"function"==typeof p?.close&&p.close()}function je(){X||(X=window.setTimeout(()=>{$(ee(v,"redirect-cancelled-by-user"))},2e3))}function tt(){"visible"===document?.visibilityState&&je()}h.addPassiveListener(Te),document.addEventListener("resume",je,!1),bt()&&document.addEventListener("visibilitychange",tt,!1),S=()=>{h.removePassiveListener(Te),document.removeEventListener("resume",je,!1),document.removeEventListener("visibilitychange",tt,!1),X&&window.clearTimeout(X)}})}finally{S()}})).apply(this,arguments)}function Nl(){return(Nl=(0,g.Z)(function*(v){const h=function mh(v){if(ht(/[0-9a-zA-Z]+/.test(v),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(v);const h=new ArrayBuffer(v.length),p=new Uint8Array(h);for(let _=0;_<v.length;_++)p[_]=v.charCodeAt(_);return p}(v),p=yield crypto.subtle.digest("SHA-256",h);return Array.from(new Uint8Array(p)).map(S=>S.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class Rl extends ga{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(h=>{this.resolveInialized=h})}addPassiveListener(h){this.passiveListeners.add(h)}removePassiveListener(h){this.passiveListeners.delete(h)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(h){return this.resolveInialized(),this.passiveListeners.forEach(p=>p(h)),super.onEvent(h)}initialized(){var h=this;return(0,g.Z)(function*(){yield h.initPromise})()}}function wc(v){return yh.apply(this,arguments)}function yh(){return(yh=(0,g.Z)(function*(v){const h=yield hs()._get(Ol(v));return h&&(yield hs()._remove(Ol(v))),h})).apply(this,arguments)}function Ec(){const v=[];for(let p=0;p<20;p++){const _=Math.floor(62*Math.random());v.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(_))}return v.join("")}function hs(){return Ye(la)}function Ol(v){return B("authEvent",v.config.apiKey,v.name)}function Uo(v){if(!v?.includes("?"))return{};const[h,...p]=v.split("?");return(0,P.zd)(p.join("?"))}const l_=class fp{constructor(){this._redirectPersistence=ii,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Wi,this._overrideRedirectResult=fc}_initialize(h){var p=this;return(0,g.Z)(function*(){const _=h._key();let S=p.eventManagers.get(_);return S||(S=new Rl(h),p.eventManagers.set(_,S),p.attachCallbackListeners(h,S)),S})()}_openPopup(h){ve(h,"operation-not-supported-in-this-environment")}_openRedirect(h,p,_,S){var N=this;return(0,g.Z)(function*(){!function gh(v){var h,p,_,S,N,$,X,Te,je,tt;const ot=gu();q("function"==typeof(null===(h=ot?.universalLinks)||void 0===h?void 0:h.subscribe),v,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),q(typeof(null===(p=ot?.BuildInfo)||void 0===p?void 0:p.packageName)<"u",v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),q("function"==typeof(null===(N=null===(S=null===(_=ot?.cordova)||void 0===_?void 0:_.plugins)||void 0===S?void 0:S.browsertab)||void 0===N?void 0:N.openUrl),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),q("function"==typeof(null===(Te=null===(X=null===($=ot?.cordova)||void 0===$?void 0:$.plugins)||void 0===X?void 0:X.browsertab)||void 0===Te?void 0:Te.isAvailable),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),q("function"==typeof(null===(tt=null===(je=ot?.cordova)||void 0===je?void 0:je.InAppBrowser)||void 0===tt?void 0:tt.open),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(h);const $=yield N._initialize(h);yield $.initialized(),$.resetRedirect(),function No(){Ks.clear()}(),yield N._originValidation(h);const X=function u_(v,h,p=null){return{type:h,eventId:p,urlResponse:null,sessionId:Ec(),postBody:null,tenantId:v.tenantId,error:ee(v,"no-auth-event")}}(h,_,S);yield function _a(v,h){return hs()._set(Ol(v),h)}(h,X);const Te=yield function Tm(v,h,p){return ya.apply(this,arguments)}(h,X,p),je=yield function xl(v){const{cordova:h}=gu();return new Promise(p=>{h.plugins.browsertab.isAvailable(_=>{let S=null;_?h.plugins.browsertab.openUrl(v):S=h.InAppBrowser.open(v,function Yt(v=(0,P.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(v)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(v)}()?"_blank":"_system","location=yes"),p(S)})})}(Te);return function Sm(v,h,p){return _c.apply(this,arguments)}(h,$,je)})()}_isIframeWebStorageSupported(h,p){throw new Error("Method not implemented.")}_originValidation(h){const p=h._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function va(v){return Ml.apply(this,arguments)}(h)),this.originValidationPromises[p]}attachCallbackListeners(h,p){const{universalLinks:_,handleOpenURL:S,BuildInfo:N}=gu(),$=setTimeout((0,g.Z)(function*(){yield wc(h),p.onEvent(pp())}),500),X=function(){var tt=(0,g.Z)(function*(ot){clearTimeout($);const Ln=yield wc(h);let fs=null;Ln&&ot?.url&&(fs=function c_(v,h){var p,_;const S=function Pl(v){const h=Uo(v),p=h.link?decodeURIComponent(h.link):void 0,_=Uo(p).link,S=h.deep_link_id?decodeURIComponent(h.deep_link_id):void 0;return Uo(S).link||S||_||p||v}(h);if(S.includes("/__/auth/callback")){const N=Uo(S),$=N.firebaseError?function wa(v){try{return JSON.parse(v)}catch{return null}}(decodeURIComponent(N.firebaseError)):null,X=null===(_=null===(p=$?.code)||void 0===p?void 0:p.split("auth/"))||void 0===_?void 0:_[1],Te=X?ee(X):null;return Te?{type:v.type,eventId:v.eventId,tenantId:v.tenantId,error:Te,urlResponse:null,sessionId:null,postBody:null}:{type:v.type,eventId:v.eventId,tenantId:v.tenantId,sessionId:v.sessionId,urlResponse:S,postBody:null}}return null}(Ln,ot.url)),p.onEvent(fs||pp())});return function(Ln){return tt.apply(this,arguments)}}();typeof _<"u"&&"function"==typeof _.subscribe&&_.subscribe(null,X);const Te=S,je=`${N.packageName.toLowerCase()}://`;gu().handleOpenURL=function(){var tt=(0,g.Z)(function*(ot){if(ot.toLowerCase().startsWith(je)&&X({url:ot}),"function"==typeof Te)try{Te(ot)}catch(Ln){console.error(Ln)}});return function(ot){return tt.apply(this,arguments)}}()}};function pp(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:ee("no-auth-event")}}function kl(){var v;return(null===(v=self?.location)||void 0===v?void 0:v.protocol)||null}function h_(v=(0,P.z$)()){return!("file:"!==kl()&&"ionic:"!==kl()&&"capacitor:"!==kl()||!v.toLowerCase().match(/iphone|ipad|ipod|android/))}function BE(){try{const v=self.localStorage,h=rc();if(v)return v.setItem(h,"1"),v.removeItem(h),!function Nm(v=(0,P.z$)()){return function vh(){return(0,P.w1)()&&11===document?.documentMode}()||function xm(v=(0,P.z$)()){return/Edge\/\d+/.test(v)}(v)}()||(0,P.hl)()}catch{return Rm()&&(0,P.hl)()}return!1}function Rm(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Ic(){return(function gp(){return"http:"===kl()||"https:"===kl()}()||(0,P.ru)()||h_())&&!function UE(){return(0,P.b$)()||(0,P.UG)()}()&&BE()&&!Rm()}function mp(){return h_()&&typeof document<"u"}function Ea(){return(Ea=(0,g.Z)(function*(){return!!mp()&&new Promise(v=>{const h=setTimeout(()=>{v(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(h),v(!0)})})})).apply(this,arguments)}const Dr={LOCAL:"local",NONE:"none",SESSION:"session"},yu=q,Ia="persistence";function Bo(v){return vu.apply(this,arguments)}function vu(){return(vu=(0,g.Z)(function*(v){yield v._initializationPromise;const h=Da(),p=B(Ia,v.config.apiKey,v.name);h&&h.setItem(p,v._getPersistence())})).apply(this,arguments)}function Da(){var v;try{return(null===(v=function Xs(){return typeof window<"u"?window:null}())||void 0===v?void 0:v.sessionStorage)||null}catch{return null}}const Pm=q;class eo{constructor(){this.browserResolver=Ye(ki),this.cordovaResolver=Ye(l_),this.underlyingResolver=null,this._redirectPersistence=ii,this._completeRedirectFn=Wi,this._overrideRedirectResult=fc}_initialize(h){var p=this;return(0,g.Z)(function*(){return yield p.selectUnderlyingResolver(),p.assertedUnderlyingResolver._initialize(h)})()}_openPopup(h,p,_,S){var N=this;return(0,g.Z)(function*(){return yield N.selectUnderlyingResolver(),N.assertedUnderlyingResolver._openPopup(h,p,_,S)})()}_openRedirect(h,p,_,S){var N=this;return(0,g.Z)(function*(){return yield N.selectUnderlyingResolver(),N.assertedUnderlyingResolver._openRedirect(h,p,_,S)})()}_isIframeWebStorageSupported(h,p){this.assertedUnderlyingResolver._isIframeWebStorageSupported(h,p)}_originValidation(h){return this.assertedUnderlyingResolver._originValidation(h)}get _shouldInitProactively(){return mp()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Pm(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var h=this;return(0,g.Z)(function*(){if(h.underlyingResolver)return;const p=yield function Dc(){return Ea.apply(this,arguments)}();h.underlyingResolver=p?h.cordovaResolver:h.browserResolver})()}}function yp(v){return v.unwrap()}function Fl(v){return Fm(v)}function Fm(v){const{_tokenResponse:h}=v instanceof P.ZR?v.customData:v;if(!h)return null;if(!(v instanceof P.ZR)&&"temporaryProof"in h&&"phoneNumber"in h)return Ws.credentialFromResult(v);const p=h.providerId;if(!p||p===ue.PASSWORD)return null;let _;switch(p){case ue.GOOGLE:_=xi;break;case ue.FACEBOOK:_=js;break;case ue.GITHUB:_=qa;break;case ue.TWITTER:_=Yu;break;default:const{oauthIdToken:S,oauthAccessToken:N,oauthTokenSecret:$,pendingToken:X,nonce:Te}=h;return N||$||S||X?X?p.startsWith("saml.")?Ft._create(p,X):wt._fromParams({providerId:p,signInMethod:p,pendingToken:X,idToken:S,accessToken:N}):new Cs(p).credential({idToken:S,accessToken:N,rawNonce:Te}):null}return v instanceof P.ZR?_.credentialFromError(v):_.credentialFromResult(v)}function Wr(v,h){return h.catch(p=>{throw p instanceof P.ZR&&function km(v,h){var p;const _=null===(p=h.customData)||void 0===p?void 0:p._tokenResponse;if("auth/multi-factor-auth-required"===h?.code)h.resolver=new Vl(v,function Yd(v,h){var p;const _=(0,P.m9)(v),S=h;return q(h.customData.operationType,_,"argument-error"),q(null===(p=S.customData._serverResponse)||void 0===p?void 0:p.mfaPendingCredential,_,"argument-error"),Co._fromError(_,S)}(v,h));else if(_){const S=Fm(h),N=h;S&&(N.credential=S,N.tenantId=_.tenantId||void 0,N.email=_.email||void 0,N.phoneNumber=_.phoneNumber||void 0)}}(v,p),p}).then(p=>{const S=p.user;return{operationType:p.operationType,credential:Fl(p),additionalUserInfo:Wf(p),user:er.getOrCreate(S)}})}function Ll(v,h){return vp.apply(this,arguments)}function vp(){return(vp=(0,g.Z)(function*(v,h){const p=yield h;return{verificationId:p.verificationId,confirm:_=>Wr(v,p.confirm(_))}})).apply(this,arguments)}class Vl{constructor(h,p){this.resolver=p,this.auth=function wh(v){return v.wrapped()}(h)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(h){return Wr(yp(this.auth),this.resolver.resolveSignIn(h))}}class er{constructor(h){this._delegate=h,this.multiFactor=function To(v){const h=(0,P.m9)(v);return bo.has(h)||bo.set(h,nn._fromUser(h)),bo.get(h)}(h)}static getOrCreate(h){return er.USER_MAP.has(h)||er.USER_MAP.set(h,new er(h)),er.USER_MAP.get(h)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(h){return this._delegate.getIdTokenResult(h)}getIdToken(h){return this._delegate.getIdToken(h)}linkAndRetrieveDataWithCredential(h){return this.linkWithCredential(h)}linkWithCredential(h){var p=this;return(0,g.Z)(function*(){return Wr(p.auth,fm(p._delegate,h))})()}linkWithPhoneNumber(h,p){var _=this;return(0,g.Z)(function*(){return Ll(_.auth,function uh(v,h,p){return ln.apply(this,arguments)}(_._delegate,h,p))})()}linkWithPopup(h){var p=this;return(0,g.Z)(function*(){return Wr(p.auth,function ch(v,h,p){return hc.apply(this,arguments)}(p._delegate,h,eo))})()}linkWithRedirect(h){var p=this;return(0,g.Z)(function*(){return yield Bo(Qn(p.auth)),Pr(p._delegate,h,eo)})()}reauthenticateAndRetrieveDataWithCredential(h){return this.reauthenticateWithCredential(h)}reauthenticateWithCredential(h){var p=this;return(0,g.Z)(function*(){return Wr(p.auth,pm(p._delegate,h))})()}reauthenticateWithPhoneNumber(h,p){return Ll(this.auth,function yt(v,h,p){return oi.apply(this,arguments)}(this._delegate,h,p))}reauthenticateWithPopup(h){return Wr(this.auth,function ha(v,h,p){return ou.apply(this,arguments)}(this._delegate,h,eo))}reauthenticateWithRedirect(h){var p=this;return(0,g.Z)(function*(){return yield Bo(Qn(p.auth)),Ys(p._delegate,h,eo)})()}sendEmailVerification(h){return function Gs(v,h){return Ja.apply(this,arguments)}(this._delegate,h)}unlink(h){var p=this;return(0,g.Z)(function*(){return yield function vo(v,h){return _i.apply(this,arguments)}(p._delegate,h),p})()}updateEmail(h){return function Zd(v,h){return qf((0,P.m9)(v),h,null)}(this._delegate,h)}updatePassword(h){return function ec(v,h){return qf((0,P.m9)(v),null,h)}(this._delegate,h)}updatePhoneNumber(h){return function Ts(v,h){return vn.apply(this,arguments)}(this._delegate,h)}updateProfile(h){return function mm(v,h){return gl.apply(this,arguments)}(this._delegate,h)}verifyBeforeUpdateEmail(h,p){return function qd(v,h,p){return Xu.apply(this,arguments)}(this._delegate,h,p)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}er.USER_MAP=new WeakMap;const _u=q;let Ul=(()=>{class v{constructor(p,_){if(this.app=p,_.isInitialized())return this._delegate=_.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:S}=p.options;_u(S,"invalid-api-key",{appName:p.name}),_u(S,"invalid-api-key",{appName:p.name});const N=typeof window<"u"?eo:void 0;this._delegate=_.initialize({options:{persistence:Zr(S,p.name),popupRedirectResolver:N}}),this._delegate._updateErrorMap(qe),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?er.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(p){this._delegate.languageCode=p}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(p){this._delegate.tenantId=p}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(p,_){!function ti(v,h,p){const _=Qn(v);q(_._canInitEmulator,_,"emulator-config-failed"),q(/^https?:\/\//.test(h),_,"invalid-emulator-scheme");const S=!!p?.disableWarnings,N=Xo(h),{host:$,port:X}=function tl(v){const h=Xo(v),p=/(\/\/)?([^?#/]+)/.exec(v.substr(h.length));if(!p)return{host:"",port:null};const _=p[2].split("@").pop()||"",S=/^(\[[^\]]+\])(:|$)/.exec(_);if(S){const N=S[1];return{host:N,port:Fd(_.substr(N.length+1))}}{const[N,$]=_.split(":");return{host:N,port:Fd($)}}}(h);_.config.emulator={url:`${N}//${$}${null===X?"":`:${X}`}/`},_.settings.appVerificationDisabledForTesting=!0,_.emulatorConfig=Object.freeze({host:$,port:X,protocol:N.replace(":",""),options:Object.freeze({disableWarnings:S})}),S||function lm(){function v(){const h=document.createElement("p"),p=h.style;h.innerText="Running in emulator mode. Do not use with production credentials.",p.position="fixed",p.width="100%",p.backgroundColor="#ffffff",p.border=".1em solid #000000",p.color="#b50000",p.bottom="0px",p.left="0px",p.margin="0px",p.zIndex="10000",p.textAlign="center",h.classList.add("firebase-emulator-warning"),document.body.appendChild(h)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",v):v())}()}(this._delegate,p,_)}applyActionCode(p){return function Hd(v,h){return Ni.apply(this,arguments)}(this._delegate,p)}checkActionCode(p){return nr(this._delegate,p)}confirmPasswordReset(p,_){return function _o(v,h,p){return ss.apply(this,arguments)}(this._delegate,p,_)}createUserWithEmailAndPassword(p,_){var S=this;return(0,g.Z)(function*(){return Wr(S._delegate,function dl(v,h,p){return Ka.apply(this,arguments)}(S._delegate,p,_))})()}fetchProvidersForEmail(p){return this.fetchSignInMethodsForEmail(p)}fetchSignInMethodsForEmail(p){return function Qa(v,h){return Io.apply(this,arguments)}(this._delegate,p)}isSignInWithEmailLink(p){return function zd(v,h){const p=bn.parseLink(h);return"EMAIL_SIGNIN"===p?.operation}(0,p)}getRedirectResult(){var p=this;return(0,g.Z)(function*(){_u(Ic(),p._delegate,"operation-not-supported-in-this-environment");const _=yield function ls(v,h){return ds.apply(this,arguments)}(p._delegate,eo);return _?Wr(p._delegate,Promise.resolve(_)):{credential:null,user:null}})()}addFrameworkForLogging(p){!function LE(v,h){Qn(v)._logFramework(h)}(this._delegate,p)}onAuthStateChanged(p,_,S){const{next:N,error:$,complete:X}=Bl(p,_,S);return this._delegate.onAuthStateChanged(N,$,X)}onIdTokenChanged(p,_,S){const{next:N,error:$,complete:X}=Bl(p,_,S);return this._delegate.onIdTokenChanged(N,$,X)}sendSignInLinkToEmail(p,_){return function aa(v,h,p){return Ya.apply(this,arguments)}(this._delegate,p,_)}sendPasswordResetEmail(p,_){return function i_(v,h,p){return Za.apply(this,arguments)}(this._delegate,p,_||void 0)}setPersistence(p){var _=this;return(0,g.Z)(function*(){let S;switch(function Om(v,h){yu(Object.values(Dr).includes(h),v,"invalid-persistence-type"),(0,P.b$)()?yu(h!==Dr.SESSION,v,"unsupported-persistence-type"):(0,P.UG)()?yu(h===Dr.NONE,v,"unsupported-persistence-type"):Rm()?yu(h===Dr.NONE||h===Dr.LOCAL&&(0,P.hl)(),v,"unsupported-persistence-type"):yu(h===Dr.NONE||BE(),v,"unsupported-persistence-type")}(_._delegate,p),p){case Dr.SESSION:S=ii;break;case Dr.LOCAL:S=(yield Ye(Ao)._isAvailable())?Ao:la;break;case Dr.NONE:S=Jt;break;default:return ve("argument-error",{appName:_._delegate.name})}return _._delegate.setPersistence(S)})()}signInAndRetrieveDataWithCredential(p){return this.signInWithCredential(p)}signInAnonymously(){return Wr(this._delegate,function mr(v){return Hf.apply(this,arguments)}(this._delegate))}signInWithCredential(p){return Wr(this._delegate,ul(this._delegate,p))}signInWithCustomToken(p){return Wr(this._delegate,function $d(v,h){return bs.apply(this,arguments)}(this._delegate,p))}signInWithEmailAndPassword(p,_){return Wr(this._delegate,function Gd(v,h,p){return ul((0,P.m9)(v),mo.credential(h,p))}(this._delegate,p,_))}signInWithEmailLink(p,_){return Wr(this._delegate,function ur(v,h,p){return hl.apply(this,arguments)}(this._delegate,p,_))}signInWithPhoneNumber(p,_){return Ll(this._delegate,function us(v,h,p){return cs.apply(this,arguments)}(this._delegate,p,_))}signInWithPopup(p){var _=this;return(0,g.Z)(function*(){return _u(Ic(),_._delegate,"operation-not-supported-in-this-environment"),Wr(_._delegate,function dr(v,h,p){return su.apply(this,arguments)}(_._delegate,p,eo))})()}signInWithRedirect(p){var _=this;return(0,g.Z)(function*(){return _u(Ic(),_._delegate,"operation-not-supported-in-this-environment"),yield Bo(_._delegate),Oo(_._delegate,p,eo)})()}updateCurrentUser(p){return this._delegate.updateCurrentUser(p)}verifyPasswordResetCode(p){return function ri(v,h){return Eo.apply(this,arguments)}(this._delegate,p)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return v.Persistence=Dr,v})();function Bl(v,h,p){let _=v;"function"!=typeof v&&({next:_,error:h,complete:p}=v);const S=_;return{next:$=>S($&&er.getOrCreate($)),error:h,complete:p}}function Zr(v,h){const p=function _h(v,h){const p=Da();if(!p)return[];const _=B(Ia,v,h);switch(p.getItem(_)){case Dr.NONE:return[Jt];case Dr.LOCAL:return[Ao,ii];case Dr.SESSION:return[ii];default:return[]}}(v,h);if(typeof self<"u"&&!p.includes(Ao)&&p.push(Ao),typeof window<"u")for(const _ of[la,ii])p.includes(_)||p.push(_);return p.includes(Jt)||p.push(Jt),p}class wu{constructor(){this.providerId="phone",this._delegate=new Ws(yp(K.Z.auth()))}static credential(h,p){return Ws.credential(h,p)}verifyPhoneNumber(h,p){return this._delegate.verifyPhoneNumber(h,p)}unwrap(){return this._delegate}}wu.PHONE_SIGN_IN_METHOD=Ws.PHONE_SIGN_IN_METHOD,wu.PROVIDER_ID=Ws.PROVIDER_ID;const _p=q;class wp{constructor(h,p,_=K.Z.app()){var S;_p(null===(S=_.options)||void 0===S?void 0:S.apiKey,"invalid-api-key",{appName:_.name}),this._delegate=new ah(h,p,_.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function p_(v){v.INTERNAL.registerComponent(new pe.wA("auth-compat",h=>{const p=h.getProvider("app-compat").getImmediate(),_=h.getProvider("auth");return new Ul(p,_)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:mo,FacebookAuthProvider:js,GithubAuthProvider:qa,GoogleAuthProvider:xi,OAuthProvider:Cs,SAMLAuthProvider:ra,PhoneAuthProvider:wu,PhoneMultiFactorGenerator:Dm,RecaptchaVerifier:wp,TwitterAuthProvider:Yu,Auth:Ul,AuthCredential:po,Error:P.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),v.registerVersion("@firebase/auth-compat","0.4.2")}(K.Z)},4303:(at,Ce,O)=>{O.d(Ce,{Jn:()=>mn,KN:()=>Hn,Xd:()=>Ke,qX:()=>Ge});var g=O(5861),K=O(4537),P=O(7879),Y=O(9058),ne=O(1878);class he{constructor(G){this.container=G}getPlatformInfoString(){return this.container.getProviders().map(ge=>{if(function pe(ye){const G=ye.getComponent();return"VERSION"===G?.type}(ge)){const $e=ge.getImmediate();return`${$e.library}/${$e.version}`}return null}).filter(ge=>ge).join(" ")}}const Ne="@firebase/app",L=new P.Yd("@firebase/app"),le={[Ne]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},de=new Map,me=new Map;function Ie(ye,G){try{ye.container.addComponent(G)}catch(ge){L.debug(`Component ${G.name} failed to register with FirebaseApp ${ye.name}`,ge)}}function Ke(ye){const G=ye.name;if(me.has(G))return L.debug(`There were multiple attempts to register component ${G}.`),!1;me.set(G,ye);for(const ge of de.values())Ie(ge,ye);return!0}function Ge(ye,G){const ge=ye.container.getProvider("heartbeat").getImmediate({optional:!0});return ge&&ge.triggerHeartbeat(),ye.container.getProvider(G)}const ut=new Y.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."}),mn="10.4.0";function Hn(ye,G,ge){var $e;let Ye=null!==($e=le[ye])&&void 0!==$e?$e:ye;ge&&(Ye+=`-${ge}`);const ft=Ye.match(/\s|\//),Jt=G.match(/\s|\//);if(ft||Jt){const B=[`Unable to register library "${Ye}" with version "${G}":`];return ft&&B.push(`library name "${Ye}" contains illegal characters (whitespace or "/")`),ft&&Jt&&B.push("and"),Jt&&B.push(`version name "${G}" contains illegal characters (whitespace or "/")`),void L.warn(B.join(" "))}Ke(new K.wA(`${Ye}-version`,()=>({library:Ye,version:G}),"VERSION"))}const lo="firebase-heartbeat-database",_t=1,Ct="firebase-heartbeat-store";let At=null;function cn(){return At||(At=(0,ne.X3)(lo,_t,{upgrade:(ye,G)=>{0===G&&ye.createObjectStore(Ct)}}).catch(ye=>{throw ut.create("idb-open",{originalErrorMessage:ye.message})})),At}function Kn(){return(Kn=(0,g.Z)(function*(ye){try{return yield(yield cn()).transaction(Ct).objectStore(Ct).get(_s(ye))}catch(G){if(G instanceof Y.ZR)L.warn(G.message);else{const ge=ut.create("idb-get",{originalErrorMessage:G?.message});L.warn(ge.message)}}})).apply(this,arguments)}function tn(ye,G){return kn.apply(this,arguments)}function kn(){return(kn=(0,g.Z)(function*(ye,G){try{const $e=(yield cn()).transaction(Ct,"readwrite");yield $e.objectStore(Ct).put(G,_s(ye)),yield $e.done}catch(ge){if(ge instanceof Y.ZR)L.warn(ge.message);else{const $e=ut.create("idb-set",{originalErrorMessage:ge?.message});L.warn($e.message)}}})).apply(this,arguments)}function _s(ye){return`${ye.name}!${ye.options.appId}`}class Kt{constructor(G){this.container=G,this._heartbeatsCache=null;const ge=this.container.getProvider("app").getImmediate();this._storage=new Fs(ge),this._heartbeatsCachePromise=this._storage.read().then($e=>(this._heartbeatsCache=$e,$e))}triggerHeartbeat(){var G=this;return(0,g.Z)(function*(){const $e=G.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Ye=vi();if(null===G._heartbeatsCache&&(G._heartbeatsCache=yield G._heartbeatsCachePromise),G._heartbeatsCache.lastSentHeartbeatDate!==Ye&&!G._heartbeatsCache.heartbeats.some(ft=>ft.date===Ye))return G._heartbeatsCache.heartbeats.push({date:Ye,agent:$e}),G._heartbeatsCache.heartbeats=G._heartbeatsCache.heartbeats.filter(ft=>{const Jt=new Date(ft.date).valueOf();return Date.now()-Jt<=2592e6}),G._storage.overwrite(G._heartbeatsCache)})()}getHeartbeatsHeader(){var G=this;return(0,g.Z)(function*(){if(null===G._heartbeatsCache&&(yield G._heartbeatsCachePromise),null===G._heartbeatsCache||0===G._heartbeatsCache.heartbeats.length)return"";const ge=vi(),{heartbeatsToSend:$e,unsentEntries:Ye}=function ws(ye,G=1024){const ge=[];let $e=ye.slice();for(const Ye of ye){const ft=ge.find(Jt=>Jt.agent===Ye.agent);if(ft){if(ft.dates.push(Ye.date),xr(ge)>G){ft.dates.pop();break}}else if(ge.push({agent:Ye.agent,dates:[Ye.date]}),xr(ge)>G){ge.pop();break}$e=$e.slice(1)}return{heartbeatsToSend:ge,unsentEntries:$e}}(G._heartbeatsCache.heartbeats),ft=(0,Y.L)(JSON.stringify({version:2,heartbeats:$e}));return G._heartbeatsCache.lastSentHeartbeatDate=ge,Ye.length>0?(G._heartbeatsCache.heartbeats=Ye,yield G._storage.overwrite(G._heartbeatsCache)):(G._heartbeatsCache.heartbeats=[],G._storage.overwrite(G._heartbeatsCache)),ft})()}}function vi(){return(new Date).toISOString().substring(0,10)}class Fs{constructor(G){this.app=G,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,g.Z)(function*(){return!!(0,Y.hl)()&&(0,Y.eu)().then(()=>!0).catch(()=>!1)})()}read(){var G=this;return(0,g.Z)(function*(){return(yield G._canUseIndexedDBPromise)&&(yield function In(ye){return Kn.apply(this,arguments)}(G.app))||{heartbeats:[]}})()}overwrite(G){var ge=this;return(0,g.Z)(function*(){var $e;if(yield ge._canUseIndexedDBPromise){const ft=yield ge.read();return tn(ge.app,{lastSentHeartbeatDate:null!==($e=G.lastSentHeartbeatDate)&&void 0!==$e?$e:ft.lastSentHeartbeatDate,heartbeats:G.heartbeats})}})()}add(G){var ge=this;return(0,g.Z)(function*(){var $e;if(yield ge._canUseIndexedDBPromise){const ft=yield ge.read();return tn(ge.app,{lastSentHeartbeatDate:null!==($e=G.lastSentHeartbeatDate)&&void 0!==$e?$e:ft.lastSentHeartbeatDate,heartbeats:[...ft.heartbeats,...G.heartbeats]})}})()}}function xr(ye){return(0,Y.L)(JSON.stringify({version:2,heartbeats:ye})).length}!function ns(ye){Ke(new K.wA("platform-logger",G=>new he(G),"PRIVATE")),Ke(new K.wA("heartbeat",G=>new Kt(G),"PRIVATE")),Hn(Ne,"0.9.19",ye),Hn(Ne,"0.9.19","esm2017"),Hn("fire-js","")}("")},4537:(at,Ce,O)=>{O.d(Ce,{H0:()=>Ne,wA:()=>P});var g=O(5861),K=O(9058);class P{constructor(L,j,Q){this.name=L,this.instanceFactory=j,this.type=Q,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(L){return this.instantiationMode=L,this}setMultipleInstances(L){return this.multipleInstances=L,this}setServiceProps(L){return this.serviceProps=L,this}setInstanceCreatedCallback(L){return this.onInstanceCreated=L,this}}const Y="[DEFAULT]";class ne{constructor(L,j){this.name=L,this.container=j,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(L){const j=this.normalizeInstanceIdentifier(L);if(!this.instancesDeferred.has(j)){const Q=new K.BH;if(this.instancesDeferred.set(j,Q),this.isInitialized(j)||this.shouldAutoInitialize())try{const Ve=this.getOrInitializeService({instanceIdentifier:j});Ve&&Q.resolve(Ve)}catch{}}return this.instancesDeferred.get(j).promise}getImmediate(L){var j;const Q=this.normalizeInstanceIdentifier(L?.identifier),Ve=null!==(j=L?.optional)&&void 0!==j&&j;if(!this.isInitialized(Q)&&!this.shouldAutoInitialize()){if(Ve)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Q})}catch(Se){if(Ve)return null;throw Se}}getComponent(){return this.component}setComponent(L){if(L.name!==this.name)throw Error(`Mismatching Component ${L.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=L,this.shouldAutoInitialize()){if(function pe(ue){return"EAGER"===ue.instantiationMode}(L))try{this.getOrInitializeService({instanceIdentifier:Y})}catch{}for(const[j,Q]of this.instancesDeferred.entries()){const Ve=this.normalizeInstanceIdentifier(j);try{const Se=this.getOrInitializeService({instanceIdentifier:Ve});Q.resolve(Se)}catch{}}}}clearInstance(L=Y){this.instancesDeferred.delete(L),this.instancesOptions.delete(L),this.instances.delete(L)}delete(){var L=this;return(0,g.Z)(function*(){const j=Array.from(L.instances.values());yield Promise.all([...j.filter(Q=>"INTERNAL"in Q).map(Q=>Q.INTERNAL.delete()),...j.filter(Q=>"_delete"in Q).map(Q=>Q._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(L=Y){return this.instances.has(L)}getOptions(L=Y){return this.instancesOptions.get(L)||{}}initialize(L={}){const{options:j={}}=L,Q=this.normalizeInstanceIdentifier(L.instanceIdentifier);if(this.isInitialized(Q))throw Error(`${this.name}(${Q}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ve=this.getOrInitializeService({instanceIdentifier:Q,options:j});for(const[Se,qe]of this.instancesDeferred.entries())Q===this.normalizeInstanceIdentifier(Se)&&qe.resolve(Ve);return Ve}onInit(L,j){var Q;const Ve=this.normalizeInstanceIdentifier(j),Se=null!==(Q=this.onInitCallbacks.get(Ve))&&void 0!==Q?Q:new Set;Se.add(L),this.onInitCallbacks.set(Ve,Se);const qe=this.instances.get(Ve);return qe&&L(qe,Ve),()=>{Se.delete(L)}}invokeOnInitCallbacks(L,j){const Q=this.onInitCallbacks.get(j);if(Q)for(const Ve of Q)try{Ve(L,j)}catch{}}getOrInitializeService({instanceIdentifier:L,options:j={}}){let Q=this.instances.get(L);if(!Q&&this.component&&(Q=this.component.instanceFactory(this.container,{instanceIdentifier:(ue=L,ue===Y?void 0:ue),options:j}),this.instances.set(L,Q),this.instancesOptions.set(L,j),this.invokeOnInitCallbacks(Q,L),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,L,Q)}catch{}var ue;return Q||null}normalizeInstanceIdentifier(L=Y){return this.component?this.component.multipleInstances?L:Y:L}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Ne{constructor(L){this.name=L,this.providers=new Map}addComponent(L){const j=this.getProvider(L.name);if(j.isComponentSet())throw new Error(`Component ${L.name} has already been registered with ${this.name}`);j.setComponent(L)}addOrOverwriteComponent(L){this.getProvider(L.name).isComponentSet()&&this.providers.delete(L.name),this.addComponent(L)}getProvider(L){if(this.providers.has(L))return this.providers.get(L);const j=new ne(L,this);return this.providers.set(L,j),j}getProviders(){return Array.from(this.providers.values())}}},7879:(at,Ce,O)=>{O.d(Ce,{Am:()=>ue,Ub:()=>Ne,Yd:()=>pe,in:()=>K});const g=[];var K=function(L){return L[L.DEBUG=0]="DEBUG",L[L.VERBOSE=1]="VERBOSE",L[L.INFO=2]="INFO",L[L.WARN=3]="WARN",L[L.ERROR=4]="ERROR",L[L.SILENT=5]="SILENT",L}(K||{});const P={debug:K.DEBUG,verbose:K.VERBOSE,info:K.INFO,warn:K.WARN,error:K.ERROR,silent:K.SILENT},Y=K.INFO,ne={[K.DEBUG]:"log",[K.VERBOSE]:"log",[K.INFO]:"info",[K.WARN]:"warn",[K.ERROR]:"error"},he=(L,j,...Q)=>{if(j<L.logLevel)return;const Ve=(new Date).toISOString(),Se=ne[j];if(!Se)throw new Error(`Attempted to log a message with an invalid logType (value: ${j})`);console[Se](`[${Ve}]  ${L.name}:`,...Q)};class pe{constructor(j){this.name=j,this._logLevel=Y,this._logHandler=he,this._userLogHandler=null,g.push(this)}get logLevel(){return this._logLevel}set logLevel(j){if(!(j in K))throw new TypeError(`Invalid value "${j}" assigned to \`logLevel\``);this._logLevel=j}setLogLevel(j){this._logLevel="string"==typeof j?P[j]:j}get logHandler(){return this._logHandler}set logHandler(j){if("function"!=typeof j)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=j}get userLogHandler(){return this._userLogHandler}set userLogHandler(j){this._userLogHandler=j}debug(...j){this._userLogHandler&&this._userLogHandler(this,K.DEBUG,...j),this._logHandler(this,K.DEBUG,...j)}log(...j){this._userLogHandler&&this._userLogHandler(this,K.VERBOSE,...j),this._logHandler(this,K.VERBOSE,...j)}info(...j){this._userLogHandler&&this._userLogHandler(this,K.INFO,...j),this._logHandler(this,K.INFO,...j)}warn(...j){this._userLogHandler&&this._userLogHandler(this,K.WARN,...j),this._logHandler(this,K.WARN,...j)}error(...j){this._userLogHandler&&this._userLogHandler(this,K.ERROR,...j),this._logHandler(this,K.ERROR,...j)}}function Ne(L){g.forEach(j=>{j.setLogLevel(L)})}function ue(L,j){for(const Q of g){let Ve=null;j&&j.level&&(Ve=P[j.level]),Q.userLogHandler=null===L?null:(Se,qe,...Oe)=>{const We=Oe.map(Pe=>{if(null==Pe)return null;if("string"==typeof Pe)return Pe;if("number"==typeof Pe||"boolean"==typeof Pe)return Pe.toString();if(Pe instanceof Error)return Pe.message;try{return JSON.stringify(Pe)}catch{return null}}).filter(Pe=>Pe).join(" ");qe>=(Ve??Se.logLevel)&&L({level:K[qe].toLowerCase(),message:We,args:Oe,type:Se.name})}}}},1878:(at,Ce,O)=>{O.d(Ce,{X3:()=>lt});var g=O(5861);const K=(oe,q)=>q.some(Be=>oe instanceof Be);let P,Y;const pe=new WeakMap,Ne=new WeakMap,ue=new WeakMap,L=new WeakMap,j=new WeakMap;let Se={get(oe,q,Be){if(oe instanceof IDBTransaction){if("done"===q)return Ne.get(oe);if("objectStoreNames"===q)return oe.objectStoreNames||ue.get(oe);if("store"===q)return Be.objectStoreNames[1]?void 0:Be.objectStore(Be.objectStoreNames[0])}return Pe(oe[q])},set:(oe,q,Be)=>(oe[q]=Be,!0),has:(oe,q)=>oe instanceof IDBTransaction&&("done"===q||"store"===q)||q in oe};function We(oe){return"function"==typeof oe?function Oe(oe){return oe!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function he(){return Y||(Y=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(oe)?function(...q){return oe.apply(ct(this),q),Pe(pe.get(this))}:function(...q){return Pe(oe.apply(ct(this),q))}:function(q,...Be){const ht=oe.call(ct(this),q,...Be);return ue.set(ht,q.sort?q.sort():[q]),Pe(ht)}}(oe):(oe instanceof IDBTransaction&&function Ve(oe){if(Ne.has(oe))return;const q=new Promise((Be,ht)=>{const Qt=()=>{oe.removeEventListener("complete",fn),oe.removeEventListener("error",pn),oe.removeEventListener("abort",pn)},fn=()=>{Be(),Qt()},pn=()=>{ht(oe.error||new DOMException("AbortError","AbortError")),Qt()};oe.addEventListener("complete",fn),oe.addEventListener("error",pn),oe.addEventListener("abort",pn)});Ne.set(oe,q)}(oe),K(oe,function ne(){return P||(P=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(oe,Se):oe)}function Pe(oe){if(oe instanceof IDBRequest)return function Q(oe){const q=new Promise((Be,ht)=>{const Qt=()=>{oe.removeEventListener("success",fn),oe.removeEventListener("error",pn)},fn=()=>{Be(Pe(oe.result)),Qt()},pn=()=>{ht(oe.error),Qt()};oe.addEventListener("success",fn),oe.addEventListener("error",pn)});return q.then(Be=>{Be instanceof IDBCursor&&pe.set(Be,oe)}).catch(()=>{}),j.set(q,oe),q}(oe);if(L.has(oe))return L.get(oe);const q=We(oe);return q!==oe&&(L.set(oe,q),j.set(q,oe)),q}const ct=oe=>j.get(oe);function lt(oe,q,{blocked:Be,upgrade:ht,blocking:Qt,terminated:fn}={}){const pn=indexedDB.open(oe,q),On=Pe(pn);return ht&&pn.addEventListener("upgradeneeded",An=>{ht(Pe(pn.result),An.oldVersion,An.newVersion,Pe(pn.transaction),An)}),Be&&pn.addEventListener("blocked",An=>Be(An.oldVersion,An.newVersion,An)),On.then(An=>{fn&&An.addEventListener("close",()=>fn()),Qt&&An.addEventListener("versionchange",rr=>Qt(rr.oldVersion,rr.newVersion,rr))}).catch(()=>{}),On}const ve=["get","getKey","getAll","getAllKeys","count"],ee=["put","add","delete","clear"],Ee=new Map;function ke(oe,q){if(!(oe instanceof IDBDatabase)||q in oe||"string"!=typeof q)return;if(Ee.get(q))return Ee.get(q);const Be=q.replace(/FromIndex$/,""),ht=q!==Be,Qt=ee.includes(Be);if(!(Be in(ht?IDBIndex:IDBObjectStore).prototype)||!Qt&&!ve.includes(Be))return;const fn=function(){var pn=(0,g.Z)(function*(On,...An){const rr=this.transaction(On,Qt?"readwrite":"readonly");let ie=rr.store;return ht&&(ie=ie.index(An.shift())),(yield Promise.all([ie[Be](...An),Qt&&rr.done]))[0]});return function(An){return pn.apply(this,arguments)}}();return Ee.set(q,fn),fn}!function qe(oe){Se=oe(Se)}(oe=>({...oe,get:(q,Be,ht)=>ke(q,Be)||oe.get(q,Be,ht),has:(q,Be)=>!!ke(q,Be)||oe.has(q,Be)}))},5861:(at,Ce,O)=>{function g(P,Y,ne,he,pe,Ne,ue){try{var L=P[Ne](ue),j=L.value}catch(Q){return void ne(Q)}L.done?Y(j):Promise.resolve(j).then(he,pe)}function K(P){return function(){var Y=this,ne=arguments;return new Promise(function(he,pe){var Ne=P.apply(Y,ne);function ue(j){g(Ne,he,pe,ue,L,"next",j)}function L(j){g(Ne,he,pe,ue,L,"throw",j)}ue(void 0)})}}O.d(Ce,{Z:()=>K})},7582:(at,Ce,O)=>{function Y(ie,le){var de={};for(var me in ie)Object.prototype.hasOwnProperty.call(ie,me)&&le.indexOf(me)<0&&(de[me]=ie[me]);if(null!=ie&&"function"==typeof Object.getOwnPropertySymbols){var Ie=0;for(me=Object.getOwnPropertySymbols(ie);Ie<me.length;Ie++)le.indexOf(me[Ie])<0&&Object.prototype.propertyIsEnumerable.call(ie,me[Ie])&&(de[me[Ie]]=ie[me[Ie]])}return de}function Q(ie,le,de,me){return new(de||(de=Promise))(function(Ae,Ke){function Ge(qt){try{gt(me.next(qt))}catch(ut){Ke(ut)}}function Pn(qt){try{gt(me.throw(qt))}catch(ut){Ke(ut)}}function gt(qt){qt.done?Ae(qt.value):function Ie(Ae){return Ae instanceof de?Ae:new de(function(Ke){Ke(Ae)})}(qt.value).then(Ge,Pn)}gt((me=me.apply(ie,le||[])).next())})}function re(ie){return this instanceof re?(this.v=ie,this):new re(ie)}function ve(ie,le,de){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ie,me=de.apply(ie,le||[]),Ae=[];return Ie={},Ke("next"),Ke("throw"),Ke("return"),Ie[Symbol.asyncIterator]=function(){return this},Ie;function Ke(gn){me[gn]&&(Ie[gn]=function(mn){return new Promise(function(Zn,rn){Ae.push([gn,mn,Zn,rn])>1||Ge(gn,mn)})})}function Ge(gn,mn){try{!function Pn(gn){gn.value instanceof re?Promise.resolve(gn.value.v).then(gt,qt):ut(Ae[0][2],gn)}(me[gn](mn))}catch(Zn){ut(Ae[0][3],Zn)}}function gt(gn){Ge("next",gn)}function qt(gn){Ge("throw",gn)}function ut(gn,mn){gn(mn),Ae.shift(),Ae.length&&Ge(Ae[0][0],Ae[0][1])}}function Ee(ie){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var de,le=ie[Symbol.asyncIterator];return le?le.call(ie):(ie=function Oe(ie){var le="function"==typeof Symbol&&Symbol.iterator,de=le&&ie[le],me=0;if(de)return de.call(ie);if(ie&&"number"==typeof ie.length)return{next:function(){return ie&&me>=ie.length&&(ie=void 0),{value:ie&&ie[me++],done:!ie}}};throw new TypeError(le?"Object is not iterable.":"Symbol.iterator is not defined.")}(ie),de={},me("next"),me("throw"),me("return"),de[Symbol.asyncIterator]=function(){return this},de);function me(Ae){de[Ae]=ie[Ae]&&function(Ke){return new Promise(function(Ge,Pn){!function Ie(Ae,Ke,Ge,Pn){Promise.resolve(Pn).then(function(gt){Ae({value:gt,done:Ge})},Ke)}(Ge,Pn,(Ke=ie[Ae](Ke)).done,Ke.value)})}}}O.d(Ce,{FC:()=>ve,KL:()=>Ee,_T:()=>Y,mG:()=>Q,qq:()=>re}),"function"==typeof SuppressedError&&SuppressedError}},at=>{at(at.s=2643)}]);